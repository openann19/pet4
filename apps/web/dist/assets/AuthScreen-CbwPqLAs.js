import{j as e,r as t,ao as s,cE as a,au as r,a6 as i,am as o,aI as l,Y as n,bk as c}from"./react-vendor-atdIga2R.js";import{u as d,M as u,d as m,h,f as g,L as p,I as x,aW as v,E as f,p as w,N as j,O as y,Q as b,U as N,m as S,A as E}from"./feature-admin-g8AIjMAb.js";import{u as I}from"./view-ProfileView.tsx-CUP3xfdt.js";import{p as P}from"./feature-chat-CPR2_-OR.js";import{e as _}from"./feature-adoption-C919WvgL.js";import"./vendor-B2U5onNE.js";import"./utils-vendor-7mYxNw04.js";import"./ui-vendor-CttiZxwU.js";import"./feature-community-DxZ7YsOF.js";import"./view-AdoptionView.tsx-BJlxubb2.js";import"./feature-stories-DX9BRjll.js";const k={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_TIMEOUT:"30000",VITE_API_URL:"http://localhost:3000/api",VITE_APP_VERSION:"1.0.0",VITE_CORS_ORIGIN:"",VITE_CSP_ENABLED:"true",VITE_ENABLE_KYC:"true",VITE_ENABLE_LIVE_STREAMING:"true",VITE_ENABLE_PAYMENTS:"true",VITE_ENVIRONMENT:"development",VITE_JWT_EXPIRY:"7d",VITE_JWT_SECRET:"development-secret-key-at-least-32-characters-long",VITE_MAPBOX_TOKEN:"pk.development-token",VITE_REFRESH_TOKEN_EXPIRY:"30d",VITE_SENTRY_DSN:"",VITE_SENTRY_TRACES_SAMPLE_RATE:"0.1",VITE_STRIPE_PUBLIC_KEY:"pk_test_development",VITE_USE_MOCKS:"false",VITE_WS_URL:"ws://localhost:3000"},T=({size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]});function C({onGoogleSignIn:t,onAppleSignIn:s,disabled:a=!1}){var r;const{t:i}=d();return e.jsxs("div",{className:"space-y-3",children:[e.jsx(u,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs(m,{type:"button",variant:"outline",size:"lg",onClick:async()=>{if(!a){h.trigger("selection"),P.track("oauth_clicked",{provider:"google"});try{const e=await fetch("/api/v1/auth/oauth/google/authorize",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const s=await e.json();s.url?window.location.href=s.url:t&&t()}else t&&t()}catch(e){g("OAuthButtons").error("Google OAuth error",e instanceof Error?e:new Error(String(e))),t&&t()}}},disabled:a,className:"w-full flex items-center justify-center gap-3 h-12 border-2",children:[e.jsx(T,{size:20}),e.jsx("span",{className:"font-semibold",children:"Continue with Google"})]})}),e.jsx(u,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(m,{type:"button",variant:"outline",size:"lg",onClick:async()=>{var e;if(!a){h.trigger("selection"),P.track("oauth_clicked",{provider:"apple"});try{if(null==(e=window.AppleID)?void 0:e.auth){await window.AppleID.auth.init({clientId:k.VITE_APPLE_CLIENT_ID,scope:"name email",redirectURI:window.location.origin+"/api/v1/auth/oauth/apple/callback",usePopup:!0});const e=await window.AppleID.auth.signIn();(null==e?void 0:e.authorization)&&s&&s()}else s&&(window.location.href="/api/v1/auth/oauth/apple/authorize")}catch(t){g("OAuthButtons").error("Apple OAuth error",t instanceof Error?t:new Error(String(t))),s&&s()}}},disabled:a,className:"w-full flex items-center justify-center gap-3 h-12 border-2 bg-black text-white hover:bg-black/90 hover:text-white",children:e.jsx("span",{className:"font-semibold",children:(null==(r=i.auth)?void 0:r.signInWithApple)||"Continue with Apple"})})})]})}const A=g("SignInForm");function V({onSuccess:l,onSwitchToSignUp:n}){var c,u,g,v,f,w,j,y,b,N,S;const{t:E}=d(),{login:_}=I(),[k,T]=t.useState(""),[V,R]=t.useState(""),[z,D]=t.useState(!1),[F,O]=t.useState(!1),[M,U]=t.useState({});return e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:(null==(c=E.auth)?void 0:c.signInTitle)||"Welcome Back"}),e.jsx("p",{className:"text-muted-foreground",children:(null==(u=E.auth)?void 0:u.signInSubtitle)||"Sign in to continue to PawfectMatch"})]}),e.jsxs("form",{onSubmit:async e=>{var t,s;if(e.preventDefault(),(()=>{var e,t,s,a;const r={};return k.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k)||(r.email=(null==(t=E.auth)?void 0:t.emailInvalid)||"Please enter a valid email"):r.email=(null==(e=E.auth)?void 0:e.emailRequired)||"Email is required",V?V.length<6&&(r.password=(null==(a=E.auth)?void 0:a.passwordTooShort)||"Password must be at least 6 characters"):r.password=(null==(s=E.auth)?void 0:s.passwordRequired)||"Password is required",U(r),0===Object.keys(r).length})()){O(!0),h.trigger("light");try{await _(k,V),P.track("user_signed_in",{email:k,method:"email"}),o.success((null==(t=E.auth)?void 0:t.signInSuccess)||"Welcome back!"),h.trigger("success"),l()}catch(a){const e=a;A.error("Sign in error",e instanceof Error?e:new Error(e.message||"Unknown error"));const t="message"in e?e.message:e.message||(null==(s=E.auth)?void 0:s.signInError)||"Failed to sign in. Please try again.";o.error(t),h.trigger("error")}finally{O(!1)}}else h.trigger("error")},className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"email",className:"text-sm font-medium",children:(null==(g=E.auth)?void 0:g.email)||"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(s,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(x,{id:"email",type:"email",placeholder:(null==(v=E.auth)?void 0:v.emailPlaceholder)||"you@example.com",value:k,onChange:e=>{T(e.target.value),U(e=>({...e,email:""}))},className:"pl-10 h-12 "+(M.email?"border-destructive":""),disabled:F,autoComplete:"email"})]}),M.email&&e.jsx("p",{className:"text-sm text-destructive",children:M.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"password",className:"text-sm font-medium",children:(null==(f=E.auth)?void 0:f.password)||"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(x,{id:"password",type:z?"text":"password",placeholder:(null==(w=E.auth)?void 0:w.passwordPlaceholder)||"••••••••",value:V,onChange:e=>{R(e.target.value),U(e=>({...e,password:""}))},className:"pl-10 pr-12 h-12 "+(M.password?"border-destructive":""),disabled:F,autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>{D(!z),h.trigger("selection")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":z?"Hide password":"Show password",children:z?e.jsx(r,{size:20}):e.jsx(i,{size:20})})]}),M.password&&e.jsx("p",{className:"text-sm text-destructive",children:M.password})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>{var e;h.trigger("selection"),P.track("forgot_password_clicked"),o.info((null==(e=E.auth)?void 0:e.forgotPasswordInfo)||"Password reset link would be sent to your email")},className:"text-sm text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded",children:(null==(j=E.auth)?void 0:j.forgotPassword)||"Forgot password?"})}),e.jsx(m,{type:"submit",size:"lg",disabled:F,className:"w-full text-base font-semibold",children:F?E.common.loading||"Loading...":(null==(y=E.auth)?void 0:y.signIn)||"Sign In"}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-background text-muted-foreground",children:(null==(b=E.auth)?void 0:b.or)||"or"})})]}),e.jsx(C,{onGoogleSignIn:()=>{var e;h.trigger("light"),P.track("oauth_clicked",{provider:"google",action:"signin"}),o.info((null==(e=E.auth)?void 0:e.signInWithGoogle)||"Signing in with Google...")},onAppleSignIn:()=>{var e;h.trigger("light"),P.track("oauth_clicked",{provider:"apple",action:"signin"}),o.info((null==(e=E.auth)?void 0:e.signInWithApple)||"Signing in with Apple...")},disabled:F}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(null==(N=E.auth)?void 0:N.noAccount)||"Don't have an account?"," ",e.jsx("button",{type:"button",onClick:n,className:"text-primary font-semibold hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded",children:(null==(S=E.auth)?void 0:S.signUp)||"Sign up"})]})})]})]})}const R=g("KYCService");async function z(e,t,s,a,r,i){try{return await v.recordConsent({userId:e,type:t,version:s,accepted:a,...r?{ipAddress:r}:{},...i?{userAgent:i}:{}})}catch(o){const a=o instanceof Error?o:new Error(String(o));throw R.error("Failed to record consent",a,{userId:e,type:t,version:s}),a}}function D({open:s,onVerified:a,onClose:r}){var i,o,l,n,c,j;const{t:y}=d(),[b,N]=t.useState(""),[S,E]=t.useState(""),[I,P]=t.useState(null),[_,k]=t.useState(!1),[T]=f("user-id","");return s?e.jsx(w,{visible:s,children:e.jsx(u,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-background/95 backdrop-blur-sm",children:e.jsxs(u,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-card border border-border rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:(null==(i=y.auth)?void 0:i.ageVerificationTitle)||"Age Verification"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:(null==(o=y.auth)?void 0:o.ageVerificationDesc)||"You must be at least 18 years old to use PawfectMatch."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"birthDate",children:(null==(l=y.auth)?void 0:l.birthDate)||"Date of Birth"}),e.jsx(x,{id:"birthDate",type:"date",value:b,onChange:e=>{N(e.target.value),P(null)},max:new Date((new Date).setFullYear((new Date).getFullYear()-18)).toISOString().split("T")[0],className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"country",children:(null==(n=y.auth)?void 0:n.country)||"Country (Optional)"}),e.jsx(x,{id:"country",type:"text",placeholder:(null==(c=y.auth)?void 0:c.countryPlaceholder)||"e.g., United States",value:S,onChange:e=>E(e.target.value),className:"w-full"})]}),I&&e.jsx(u,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-destructive text-sm",children:I}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[r&&e.jsx(m,{type:"button",variant:"outline",onClick:r,className:"flex-1",disabled:_,children:y.common.cancel||"Cancel"}),e.jsx(m,{type:"button",onClick:async()=>{var e,t,s;if(!b)return P((null==(e=y.auth)?void 0:e.birthDateRequired)||"Please enter your birth date"),void h.trigger("error");if((e=>{const t=new Date,s=new Date(e);let a=t.getFullYear()-s.getFullYear();const r=t.getMonth()-s.getMonth();return(r<0||0===r&&t.getDate()<s.getDate())&&a--,a})(b)<18)return P((null==(t=y.auth)?void 0:t.ageTooYoung)||"You must be at least 18 years old to use this app"),void h.trigger("error");k(!0),h.trigger("light");try{T&&await async function(e,t,s){try{return await v.recordAgeVerification({userId:e,ageVerified:t,...s?{country:s}:{}})}catch(I){const a=I instanceof Error?I:new Error(String(I));throw R.error("Failed to record age verification",a,{userId:e,ageVerified:t}),a}}(T,!0,S||void 0),h.trigger("success"),a(S||void 0)}catch(r){g("AgeGateModal").error("Age verification error",r instanceof Error?r:new Error(String(r))),P((null==(s=y.auth)?void 0:s.verificationError)||"Verification failed. Please try again."),h.trigger("error")}finally{k(!1)}},disabled:_||!b,className:"flex-1",children:_?y.common.loading||"Loading...":(null==(j=y.auth)?void 0:j.verify)||"Verify"})]})]})]})})}):null}const F=g("SignUpForm");function O({onSuccess:n,onSwitchToSignIn:c}){var g,v,f,w,j,y,b,N,S,E,k,T,A,V,R,O,M,U;const{t:Y}=d(),{register:B}=I(),[L,q]=t.useState(""),[G,H]=t.useState(""),[W,K]=t.useState(""),[J,X]=t.useState(""),[$,Q]=t.useState(!1),[Z,ee]=t.useState(!1),[te,se]=t.useState(!1),[ae,re]=t.useState(!1),[ie,oe]=t.useState({}),[le,ne]=t.useState(!1),[ce,de]=t.useState(!1),ue=()=>{var e,t,s,a,r,i,o,l,n;const c={};return L.trim()?L.trim().length<2&&(c.name=(null==(t=Y.auth)?void 0:t.nameTooShort)||"Name must be at least 2 characters"):c.name=(null==(e=Y.auth)?void 0:e.nameRequired)||"Name is required",G.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(G)||(c.email=(null==(a=Y.auth)?void 0:a.emailInvalid)||"Please enter a valid email"):c.email=(null==(s=Y.auth)?void 0:s.emailRequired)||"Email is required",W?W.length<6&&(c.password=(null==(i=Y.auth)?void 0:i.passwordTooShort)||"Password must be at least 6 characters"):c.password=(null==(r=Y.auth)?void 0:r.passwordRequired)||"Password is required",J?W!==J&&(c.confirmPassword=(null==(l=Y.auth)?void 0:l.passwordMismatch)||"Passwords do not match"):c.confirmPassword=(null==(o=Y.auth)?void 0:o.confirmPasswordRequired)||"Please confirm your password",te||(c.terms=(null==(n=Y.auth)?void 0:n.termsRequired)||"You must agree to the Terms and Privacy Policy"),oe(c),0===Object.keys(c).length},me=async e=>{var t,s;try{if(h.trigger("light"),P.track("oauth_success",{provider:e}),!ce)return void ne(!0);o.success((null==(t=Y.auth)?void 0:t.signUpSuccess)||"Account created successfully!"),h.trigger("success"),n()}catch(a){const t=a instanceof Error?a:new Error(String(a));F.error("OAuth error",t,{provider:e}),o.error((null==(s=Y.auth)?void 0:s.signUpError)||"Failed to sign up. Please try again."),h.trigger("error")}};return e.jsxs(u,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:(null==(g=Y.auth)?void 0:g.signUpTitle)||"Create Account"}),e.jsx("p",{className:"text-muted-foreground",children:(null==(v=Y.auth)?void 0:v.signUpSubtitle)||"Join PawfectMatch to find your pet's perfect companion"})]}),e.jsxs("form",{onSubmit:async e=>{var t,s;if(e.preventDefault(),ue())if(ce){re(!0),h.trigger("light");try{const e=await B(G,W,L);await z(e.id,"terms","1.0",!0),await z(e.id,"privacy","1.0",!0),P.track("user_signed_up",{email:G,method:"email"}),o.success((null==(t=Y.auth)?void 0:t.signUpSuccess)||"Account created successfully!"),h.trigger("success"),n()}catch(a){const e=a;F.error("Sign up error",e instanceof Error?e:new Error(e.message||"Unknown error"));const t="message"in e?e.message:e.message||(null==(s=Y.auth)?void 0:s.signUpError)||"Failed to create account. Please try again.";o.error(t),h.trigger("error")}finally{re(!1)}}else ne(!0);else h.trigger("error")},className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"name",className:"text-sm font-medium",children:(null==(f=Y.auth)?void 0:f.name)||"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(x,{id:"name",type:"text",placeholder:(null==(w=Y.auth)?void 0:w.namePlaceholder)||"John Doe",value:L,onChange:e=>{q(e.target.value),oe(e=>({...e,name:""}))},className:"pl-10 h-12 "+(ie.name?"border-destructive":""),disabled:ae,autoComplete:"name"})]}),ie.name&&e.jsx("p",{className:"text-sm text-destructive",children:ie.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"email",className:"text-sm font-medium",children:(null==(j=Y.auth)?void 0:j.email)||"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(s,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(x,{id:"email",type:"email",placeholder:(null==(y=Y.auth)?void 0:y.emailPlaceholder)||"you@example.com",value:G,onChange:e=>{H(e.target.value),oe(e=>({...e,email:""}))},className:"pl-10 h-12 "+(ie.email?"border-destructive":""),disabled:ae,autoComplete:"email"})]}),ie.email&&e.jsx("p",{className:"text-sm text-destructive",children:ie.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"password",className:"text-sm font-medium",children:(null==(b=Y.auth)?void 0:b.password)||"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(x,{id:"password",type:$?"text":"password",placeholder:(null==(N=Y.auth)?void 0:N.passwordPlaceholder)||"••••••••",value:W,onChange:e=>{K(e.target.value),oe(e=>({...e,password:""}))},className:"pl-10 pr-12 h-12 "+(ie.password?"border-destructive":""),disabled:ae,autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>{Q(!$),h.trigger("selection")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":$?"Hide password":"Show password",children:$?e.jsx(r,{size:20}):e.jsx(i,{size:20})})]}),ie.password&&e.jsx("p",{className:"text-sm text-destructive",children:ie.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"confirmPassword",className:"text-sm font-medium",children:(null==(S=Y.auth)?void 0:S.confirmPassword)||"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),e.jsx(x,{id:"confirmPassword",type:Z?"text":"password",placeholder:(null==(E=Y.auth)?void 0:E.confirmPasswordPlaceholder)||"••••••••",value:J,onChange:e=>{X(e.target.value),oe(e=>({...e,confirmPassword:""}))},className:"pl-10 pr-12 h-12 "+(ie.confirmPassword?"border-destructive":""),disabled:ae,autoComplete:"new-password"}),e.jsx("button",{type:"button",onClick:()=>{ee(!Z),h.trigger("selection")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":Z?"Hide password":"Show password",children:Z?e.jsx(r,{size:20}):e.jsx(i,{size:20})})]}),ie.confirmPassword&&e.jsx("p",{className:"text-sm text-destructive",children:ie.confirmPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_,{id:"terms",checked:te,onCheckedChange:e=>{se(e),oe(e=>({...e,terms:""})),h.trigger("selection")},disabled:ae,className:ie.terms?"border-destructive":""}),e.jsxs("label",{htmlFor:"terms",className:"text-sm text-muted-foreground leading-tight cursor-pointer",children:[(null==(k=Y.auth)?void 0:k.agreeToTerms)||"I agree to the"," ",e.jsx("a",{href:"https://github.com/site/terms",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded",onClick:e=>e.stopPropagation(),children:(null==(T=Y.auth)?void 0:T.terms)||"Terms of Service"})," ",(null==(A=Y.auth)?void 0:A.and)||"and"," ",e.jsx("a",{href:"https://github.com/site/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded",onClick:e=>e.stopPropagation(),children:(null==(V=Y.auth)?void 0:V.privacyPolicy)||"Privacy Policy"})]})]}),ie.terms&&e.jsx("p",{className:"text-sm text-destructive",children:ie.terms})]}),e.jsx(m,{type:"submit",size:"lg",disabled:ae,className:"w-full text-base font-semibold",children:ae?Y.common.loading||"Loading...":(null==(R=Y.auth)?void 0:R.createAccount)||"Create Account"}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-background text-muted-foreground",children:(null==(O=Y.auth)?void 0:O.or)||"or"})})]}),e.jsx(C,{onGoogleSignIn:()=>me("google"),onAppleSignIn:()=>me("apple"),disabled:ae}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(null==(M=Y.auth)?void 0:M.hasAccount)||"Already have an account?"," ",e.jsx("button",{type:"button",onClick:c,className:"text-primary font-semibold hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded",children:(null==(U=Y.auth)?void 0:U.signIn)||"Sign in"})]})})]}),e.jsx(D,{open:le,onVerified:e=>{de(!0),ne(!1),h.trigger("success"),P.track("age_verified",{country:e||"unknown"});const t=document.querySelector("form");if(t){new FormData(t);L&&G&&W&&J&&te&&ue()?t.requestSubmit():F.info("Age verified, waiting for form completion",{email:G})}},onClose:()=>ne(!1)})]})}function M({initialMode:s="signup",onBack:a,onSuccess:r}){const[i,o]=t.useState(s),{t:l,language:u,toggleLanguage:g}=d(),p=j(0),x=j(-20),v=j(0);t.useEffect(()=>{p.value=y(1),x.value=y(0),v.value=b(1)},[p,x,v]);const f=N(()=>({opacity:p.value,transform:[{translateY:x.value}]})),w=N(()=>({opacity:v.value})),I=S({isVisible:"signin"===i}),P=S({isVisible:"signup"===i}),_=e=>{h.trigger("selection"),o(e)};return e.jsx("div",{className:"fixed inset-0 bg-background overflow-auto",children:e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsxs(E,{style:f,className:"p-4 flex items-center justify-between",children:[e.jsx(m,{variant:"outline",size:"icon",onClick:()=>{h.trigger("light"),a()},className:"rounded-full","aria-label":l.common.back||"Back",children:e.jsx(n,{size:24})}),e.jsx(E,{style:w,children:e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>{h.trigger("selection"),g()},className:"rounded-full h-11 px-4 border-[1.5px] font-semibold text-sm","aria-pressed":"bg"===u,"aria-label":"en"===u?"Switch to Bulgarian":"Превключи на English",children:[e.jsx(c,{size:20,weight:"bold","aria-hidden":!0}),e.jsx("span",{children:"en"===u?"БГ":"EN"})]})})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-6 pb-12",children:e.jsxs("div",{className:"w-full max-w-md",children:[I.shouldRender&&"signin"===i&&e.jsx(E,{style:I.animatedStyle,children:e.jsx(V,{onSuccess:r,onSwitchToSignUp:()=>_("signup")},"signin")}),P.shouldRender&&"signup"===i&&e.jsx(E,{style:P.animatedStyle,children:e.jsx(O,{onSuccess:r,onSwitchToSignIn:()=>_("signin")},"signup")})]})})]})})}export{M as default};
