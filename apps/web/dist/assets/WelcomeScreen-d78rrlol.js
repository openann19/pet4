import{r as e,j as a,a3 as r,bk as s,ah as t}from"./react-vendor-atdIga2R.js";import{aH as l,d as n,D as i,g as c,i as o,j as d,k as m,f,u,b0 as x,N as h,Q as p,O as g,V as v,W as j,$ as y,U as b,A as w,h as N}from"./feature-admin-g8AIjMAb.js";import{m as k,s as C,p as _}from"./feature-chat-CPR2_-OR.js";import{a as E}from"./view-ProfileView.tsx-CUP3xfdt.js";import"./vendor-B2U5onNE.js";import"./utils-vendor-7mYxNw04.js";import"./ui-vendor-CttiZxwU.js";import"./feature-adoption-C919WvgL.js";import"./feature-community-DxZ7YsOF.js";import"./view-AdoptionView.tsx-BJlxubb2.js";import"./feature-stories-DX9BRjll.js";const z=f("ConsentBanner"),S="gdpr-consent-banner-dismissed",A="gdpr-consent-banner-version";function M({onConsentChange:r,showOnMount:s=!0}){const[t,f]=e.useState(!1),[u,x]=e.useState(!1),h=E({autoLoad:!0});e.useEffect(()=>{if(!s)return;const e=k(S),a=k(A);e&&a===l||h.isLoaded&&h.preferences.analytics||f(!0)},[s,h.isLoaded,h.preferences]);const p=async(e,a)=>{try{a?await h.acceptConsent(e):await h.rejectConsent(e),null==r||r({[e]:a})}catch(s){const r=s instanceof Error?s:new Error(String(s));z.error("Failed to update preference",r,{category:e,value:a})}};return t?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-background border-t shadow-lg p-4 md:p-6",children:a.jsx("div",{className:"container mx-auto max-w-6xl",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cookie Consent"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:['We use cookies to enhance your experience, analyze site usage, and assist in our marketing efforts. By clicking "Accept All", you consent to our use of cookies.'," ",a.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Learn more"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(n,{variant:"outline",size:"sm",onClick:async()=>{try{await h.rejectConsent("analytics"),await h.rejectConsent("marketing"),await h.rejectConsent("third_party"),C(S,!0),C(A,l),f(!1),null==r||r({analytics:!1,marketing:!1,third_party:!1})}catch(e){const a=e instanceof Error?e:new Error(String(e));z.error("Failed to accept essential only",a)}},"aria-label":"Accept essential cookies only",children:"Essential Only"}),a.jsx(n,{variant:"outline",size:"sm",onClick:()=>{x(!0)},"aria-label":"Manage cookie preferences",children:"Manage"}),a.jsx(n,{variant:"default",size:"sm",onClick:async()=>{try{await h.acceptConsent("analytics"),await h.acceptConsent("marketing"),await h.acceptConsent("third_party"),C(S,!0),C(A,l),f(!1),null==r||r({analytics:!0,marketing:!0,third_party:!0})}catch(e){const a=e instanceof Error?e:new Error(String(e));z.error("Failed to accept all consent",a)}},"aria-label":"Accept all cookies",children:"Accept All"})]})]})})}),a.jsx(i,{open:u,onOpenChange:x,children:a.jsxs(c,{className:"max-w-2xl",children:[a.jsxs(o,{children:[a.jsx(d,{children:"Cookie Preferences"}),a.jsx(m,{children:"Manage your cookie preferences. You can enable or disable different types of cookies below."})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold",children:"Essential Cookies"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"These cookies are necessary for the website to function and cannot be switched off."})]}),a.jsx("div",{className:"ml-4",children:a.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Always Active"})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold",children:"Analytics Cookies"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"These cookies help us understand how visitors interact with our website."})]}),a.jsx("div",{className:"ml-4",children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:h.preferences.analytics,onChange:e=>{p("analytics",e.target.checked)},"aria-label":"Enable analytics cookies"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold",children:"Marketing Cookies"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"These cookies are used to deliver relevant advertisements and track campaign performance."})]}),a.jsx("div",{className:"ml-4",children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:h.preferences.marketing,onChange:e=>{p("marketing",e.target.checked)},"aria-label":"Enable marketing cookies"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold",children:"Third-Party Cookies"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"These cookies are set by third-party services that appear on our pages."})]}),a.jsx("div",{className:"ml-4",children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:h.preferences.thirdParty,onChange:e=>{p("third_party",e.target.checked)},"aria-label":"Enable third-party cookies"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(n,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),a.jsx(n,{onClick:()=>{C(S,!0),C(A,l),f(!1),x(!1)},children:"Save Preferences"})]})]})})]}):null}const T=(e,a)=>{try{_.track(e,a)}catch{}};function Y({onGetStarted:l,onSignIn:i,onExplore:c,isOnline:o=!0,deepLinkMessage:d}){const{t:m,language:f}=u(),[k,C]=e.useState(!0),_=x(),E=e.useRef(null);e.useEffect(()=>{const e=setTimeout(()=>C(!1),300);return()=>clearTimeout(e)},[]),e.useEffect(()=>{T("welcome_viewed")},[]),e.useEffect(()=>{o||T("welcome_offline_state_shown")},[o]),e.useEffect(()=>{var e;k||null==(e=E.current)||e.focus()},[k]);const z=e=>{T(`welcome_${e}_opened`)},S=h(0),A=h(0),Y=h(0),O=h(.9),L=h(20),P=h(0),$=h(0),F=h(20),B=h(0),V=h(20),I=h(0),W=h(20),D=h(0),G=h(20),H=h(0),Q=h(20),R=h(0),U=h(20);e.useEffect(()=>{const e=setTimeout(()=>C(!1),300);return()=>clearTimeout(e)},[]),e.useEffect(()=>{T("welcome_viewed")},[]),e.useEffect(()=>{o||T("welcome_offline_state_shown")},[o]),e.useEffect(()=>{var e;k||null==(e=E.current)||e.focus()},[k]),e.useEffect(()=>{k||(S.value=p(1),A.value=p(1),_?(Y.value=1,O.value=1,L.value=0,$.value=1,F.value=0,B.value=1,V.value=0,d&&(I.value=1,W.value=0),o||(D.value=1,G.value=0),H.value=1,Q.value=0,R.value=1,U.value=0):(Y.value=p(1),O.value=g(1),L.value=g(0),P.value=v(j(p(1),p(0))),$.value=y(200,p(1)),F.value=y(200,g(0)),B.value=y(300,p(1)),V.value=y(300,g(0)),d&&(I.value=y(600,p(1)),W.value=y(600,g(0))),o||(D.value=y(600,p(1)),G.value=y(600,g(0))),H.value=y(700,p(1)),Q.value=y(700,g(0)),R.value=y(900,p(1)),U.value=y(900,g(0))))},[k,_,d,o,S,A,Y,O,L,P,$,F,B,V,I,W,D,G,H,Q,R,U]);const q=b(()=>({opacity:S.value})),J=b(()=>({opacity:A.value})),K=b(()=>({opacity:Y.value,transform:[{scale:O.value},{translateY:L.value}],boxShadow:_?void 0:`0 ${10+10*P.value}px ${40+20*P.value}px rgba(0,0,0,${.15+.15*P.value})`})),X=b(()=>({opacity:$.value,transform:[{translateY:F.value}]})),Z=b(()=>({opacity:B.value,transform:[{translateY:V.value}]})),ee=b(()=>({opacity:I.value,transform:[{translateY:W.value}]})),ae=b(()=>({opacity:D.value,transform:[{translateY:G.value}]})),re=b(()=>({opacity:H.value,transform:[{translateY:Q.value}]})),se=b(()=>({opacity:R.value,transform:[{translateY:U.value}]}));return k?a.jsx("div",{className:"fixed inset-0 bg-background flex items-center justify-center",role:"status","aria-live":"polite",children:a.jsxs(w,{style:q,className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:[a.jsx(r,{size:32,className:"text-white",weight:"fill","aria-hidden":!0}),a.jsx("span",{className:"sr-only",children:m.common.loading})]})}):a.jsxs("main",{className:"fixed inset-0 bg-background overflow-auto",children:[a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(w,{style:J,className:"absolute top-6 right-6 z-10",children:a.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{N.trigger("selection");T("welcome_language_changed",{from:f||"en",to:"en"===f?"bg":"en"})},className:"rounded-full h-11 px-4 border-[1.5px] font-semibold text-sm","aria-pressed":"bg"===f,"aria-label":"en"===f?"Switch to Bulgarian":"Превключи на English",children:[a.jsx(s,{size:20,weight:"bold","aria-hidden":!0}),a.jsx("span",{children:"en"===f?"БГ":"EN"})]})}),a.jsx("div",{className:"flex-1 flex items-center justify-center px-6 py-12",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs(w,{style:X,className:"flex flex-col items-center mb-12",children:[a.jsx(w,{style:K,className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary via-accent to-secondary flex items-center justify-center shadow-2xl mb-6",children:a.jsx(r,{size:40,className:"text-white",weight:"fill","aria-hidden":!0})}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-center text-foreground mb-3",children:m.welcome.title}),a.jsx("p",{className:"text-lg text-muted-foreground text-center",children:m.welcome.subtitle})]}),a.jsx(w,{style:Z,className:"space-y-3 mb-10",children:[m.welcome.proof1,m.welcome.proof2,m.welcome.proof3].map((e,r)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(t,{size:20,weight:"fill",className:"text-primary shrink-0","aria-hidden":!0}),a.jsx("span",{className:"text-foreground/80 text-sm",children:e})]},r))}),d&&a.jsx(w,{style:ee,className:"mb-6 p-3 rounded-lg bg-primary/10 border border-primary/20",role:"note",children:a.jsx("p",{className:"text-sm text-foreground/70 text-center",children:d})}),!o&&a.jsx(w,{style:ae,className:"mb-6 p-3 rounded-lg bg-destructive/10 border border-destructive/20",role:"alert","aria-live":"polite",children:a.jsx("p",{className:"text-sm text-destructive text-center",children:m.welcome.offlineMessage})}),a.jsxs(w,{style:re,className:"space-y-3",children:[a.jsx(n,{ref:E,size:"lg",onClick:()=>{o&&(N.trigger("light"),T("welcome_get_started_clicked"),l())},disabled:!o,className:"w-full text-base font-semibold shadow-lg",style:{transform:_?"none":void 0},onMouseEnter:()=>!_&&N.trigger("selection"),children:m.welcome.getStarted}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx(n,{variant:"outline",size:"lg",onClick:()=>{N.trigger("light"),T("welcome_sign_in_clicked"),i()},className:"flex-1 h-12 text-sm font-medium",children:m.welcome.signIn}),a.jsx(n,{variant:"outline",size:"lg",onClick:()=>{N.trigger("light"),T("welcome_explore_clicked"),c()},className:"flex-1 h-12 text-sm font-medium",children:m.welcome.explore})]})]}),a.jsx(w,{style:se,className:"mt-8 text-center",children:a.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.welcome.legal," ",a.jsx("a",{href:"https://github.com/site/terms",target:"_blank",rel:"noopener noreferrer",onClick:()=>z("terms"),className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded",children:m.welcome.terms})," ",m.welcome.and," ",a.jsx("a",{href:"https://github.com/site/privacy",target:"_blank",rel:"noopener noreferrer",onClick:()=>z("privacy"),className:"text-primary hover:underline focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded",children:m.welcome.privacy}),"."]})})]})})]}),a.jsx(M,{showOnMount:!0})]})}export{Y as default};
