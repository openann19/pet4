const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/button-tokens-theme-system-kL5XbIKr.js","assets/react-vendor-atdIga2R.js","assets/vendor-B2U5onNE.js","assets/utils-vendor-7mYxNw04.js","assets/ui-vendor-CttiZxwU.js","assets/feature-adoption-C919WvgL.js","assets/feature-community-DxZ7YsOF.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{r as s,j as a,S as r,R as i,C as n,a as o,X as l,T as c,D as d,P as u,O as m,b as h,I as p,F as g,c as x,d as f,e as v,f as y,g as j,V as w,h as b,i as N,k as S,l as E,m as k,n as I,o as A,p as C,q as P,s as T,L as F,t as R,u as _,v as M,w as D,x as L,y as O,z as U,A as z,B,E as $,G as V,H as Y,J as K,K as q,M as G,N as W,Q as H,U as Q,W as X,Y as J,Z,_ as ee,$ as te,a0 as se,a1 as ae,a2 as re,a3 as ie,a4 as ne,a5 as oe,a6 as le,a7 as ce,a8 as de,a9 as ue,aa as me,ab as he,ac as pe,ad as ge,ae as xe,af as fe,ag as ve,ah as ye,ai as je,aj as we,ak as be,al as Ne,am as Se,an as Ee,ao as ke,ap as Ie,aq as Ae,ar as Ce,as as Pe,at as Te,au as Fe,av as Re,aw as _e,ax as Me,ay as De,az as Le,aA as Oe,aB as Ue,aC as ze,aD as Be,aE as $e,aF as Ve,aG as Ye,aH as Ke,aI as qe,aJ as Ge,aK as We,aL as He,aM as Qe,aN as Xe,aO as Je,aP as Ze,aQ as et,aR as tt,aS as st,aT as at,aU as rt,aV as it,aW as nt,aX as ot,aY as lt,aZ as ct,a_ as dt,a$ as ut,b0 as mt}from"./react-vendor-atdIga2R.js";import{t as ht,c as pt,a as gt,s as xt,Z as ft,o as vt,b as yt,e as jt,n as wt,d as bt,u as Nt,r as St,f as Et,g as kt}from"./utils-vendor-7mYxNw04.js";import{A as It}from"./feature-adoption-C919WvgL.js";import{P as At}from"./feature-community-DxZ7YsOF.js";const Ct={},Pt=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),r=(null==s?void 0:s.nonce)||(null==s?void 0:s.getAttribute("nonce"));a=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in Ct)return;Ct[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,r&&a.setAttribute("nonce",r),document.head.appendChild(a),t?new Promise((t,s)=>{a.addEventListener("load",t),a.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};var Tt=(e=>(e[e.DEBUG=10]="DEBUG",e[e.INFO=20]="INFO",e[e.WARN=30]="WARN",e[e.ERROR=40]="ERROR",e[e.NONE=100]="NONE",e))(Tt||{});let Ft=null;class Rt{constructor(e,s,a){t(this,"level"),t(this,"handlers",[]),t(this,"context"),t(this,"enableSentry"),this.context=e,this.level=s??20,this.enableSentry=(null==a?void 0:a.enableSentry)??!1,this.addConsoleHandler(),this.enableSentry&&this.addSentryHandler()}setLevel(e){this.level=e}addHandler(e){this.handlers.push(e)}shouldLog(e){return e>=this.level}addConsoleHandler(){this.addHandler(e=>{const t=new Date(e.ts).toISOString(),s=Tt[e.level];e.context&&e.context;e.level>=40||e.level})}addSentryHandler(){(Ft||(Ft=Promise.resolve(null),Ft)).then(e=>{e&&this.addHandler(t=>{if(t.level>=40){const s=t.args[0]instanceof Error?t.args[0]:void 0;e.withScope(a=>{a.setLevel("error"),this.context&&a.setTag("logger",this.context),s?e.captureException(s):e.captureMessage(t.message)})}else t.level>=30&&e.withScope(s=>{s.setLevel("warning"),this.context&&s.setTag("logger",this.context),e.captureMessage(t.message)})})})}emit(e,t,s){if(!this.shouldLog(e))return;const a={level:e,message:t,args:s,ts:Date.now(),...this.context?{context:this.context}:{}};for(const r of this.handlers)try{const e=r(a);e&&"function"==typeof e.then&&e.catch(()=>{})}catch{}}debug(e,...t){this.emit(10,e,t)}info(e,...t){this.emit(20,e,t)}warn(e,...t){this.emit(30,e,t)}error(e,...t){this.emit(40,e,t)}}function _t(e,t,s){return new Rt(e,t,s)}const Mt=new Rt("root",void 0,{enableSentry:!0}),Dt={debug:(e,...t)=>Mt.debug(e,...t),info:(e,...t)=>Mt.info(e,...t),warn:(e,...t)=>Mt.warn(e,...t),error:(e,...t)=>Mt.error(e,...t)},Lt=Object.freeze(Object.defineProperty({__proto__:null,LogLevel:Tt,createLogger:_t,default:Mt,log:Dt,logger:Mt},Symbol.toStringTag,{value:"Module"})),Ot=_t("StorageService"),Ut="petspark-db",zt="kv-store",Bt="petspark:",$t=5242880,Vt="undefined"!=typeof indexedDB,Yt=new Set(["app-language","theme","notification-preferences","last-notification-check","has-seen-welcome-v2","is-authenticated","data-initialized"]);const Kt=new class{constructor(){t(this,"db",null),t(this,"initPromise",null),t(this,"inMemoryCache",new Map),t(this,"cacheTTL",5e3),t(this,"broadcastChannel",null),t(this,"isInitialized",!1),t(this,"indexedDBUnavailableLogged",!1)}async initDB(){return Vt?this.db&&this.isInitialized?void 0:(this.initPromise||(this.initPromise=new Promise((e,t)=>{const s=indexedDB.open(Ut,1);s.onerror=()=>{const e=s.error??new Error("Failed to open IndexedDB"),a=e instanceof Error?e:new Error(String(e));Ot.error("Failed to open IndexedDB",a),t(a)},s.onsuccess=()=>{this.db=s.result,this.db.onclose=()=>{Ot.warn("IndexedDB connection closed unexpectedly",{dbName:Ut,version:1}),this.db=null,this.isInitialized=!1,this.initPromise=null},this.db.onversionchange=()=>{var e,t;Ot.warn("IndexedDB version change detected, closing connection",{dbName:Ut,oldVersion:null==(e=this.db)?void 0:e.version}),null==(t=this.db)||t.close(),this.db=null,this.isInitialized=!1,this.initPromise=null,this.inMemoryCache.clear(),this.broadcastInvalidation()},this.isInitialized=!0,this.setupBroadcastChannel(),e()},s.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(zt)||t.createObjectStore(zt,{keyPath:"key"})}})),this.initPromise):(this.indexedDBUnavailableLogged||(Ot.debug("IndexedDB not available; falling back to localStorage-only mode"),this.indexedDBUnavailableLogged=!0),this.initPromise??(this.initPromise=Promise.resolve()),this.isInitialized=!0,void(this.db=null))}setupBroadcastChannel(){if("undefined"!=typeof BroadcastChannel)try{this.broadcastChannel=new BroadcastChannel("petspark-storage"),this.broadcastChannel.onmessage=e=>{const{type:t,key:s}=e.data;"invalidate"===t?s?(this.inMemoryCache.delete(s),Ot.debug(`Cache invalidated for key: ${s}`)):(this.inMemoryCache.clear(),Ot.debug("Cache invalidated (all keys)")):"update"===t&&(s?(this.inMemoryCache.delete(s),Ot.debug(`Cache invalidated for key: ${s} (external update)`)):(this.inMemoryCache.clear(),Ot.debug("Cache invalidated (all keys, external update)")))}}catch(e){Ot.warn("Failed to setup broadcast channel",{error:e instanceof Error?e.message:String(e)})}else Ot.warn("BroadcastChannel not supported, cache invalidation disabled")}broadcastInvalidation(e){if(this.broadcastChannel)try{this.broadcastChannel.postMessage({type:"invalidate",key:e})}catch(t){Ot.warn("Failed to broadcast cache invalidation",{error:t instanceof Error?t.message:String(t)})}}broadcastUpdate(e){if(this.broadcastChannel)try{this.broadcastChannel.postMessage({type:"update",key:e})}catch(t){Ot.warn("Failed to broadcast update",{error:t instanceof Error?t.message:String(t)})}}shouldUseLocalStorage(e){return Yt.has(e)||e.length<50}estimateSize(e){try{return JSON.stringify(e).length}catch{return 0}}getFromLocalStorage(e){try{const t=localStorage.getItem(`${Bt}${e}`);return t?JSON.parse(t):null}catch(t){return Ot.warn(`Failed to read from localStorage for key ${e}`,{error:t instanceof Error?t.message:String(t)}),null}}setToLocalStorage(e,t){try{localStorage.setItem(`${Bt}${e}`,JSON.stringify(t))}catch(s){Ot.warn(`Failed to write to localStorage for key ${e}`,{error:s instanceof Error?s.message:String(s)})}}deleteFromLocalStorage(e){try{localStorage.removeItem(`${Bt}${e}`)}catch(t){Ot.warn(`Failed to delete from localStorage for key ${e}`,{error:t instanceof Error?t.message:String(t)})}}async getFromIndexedDB(e){return Vt?(this.db&&this.isInitialized||await this.initDB(),new Promise((t,s)=>{if(!this.db)return void s(new Error("Database not initialized"));const a=this.db.transaction([zt],"readonly").objectStore(zt).get(e);a.onerror=()=>{const t=a.error??new Error("Failed to read from IndexedDB"),r=t instanceof Error?t:new Error(String(t));Ot.error(`Failed to read from IndexedDB for key ${e}`,r),this.db&&(this.db.close(),this.db=null,this.isInitialized=!1,this.initPromise=null),s(r)},a.onsuccess=()=>{const e=a.result;t(e?e.value:null)}})):null}async setToIndexedDB(e,t){if(Vt)return this.db&&this.isInitialized||await this.initDB(),new Promise((s,a)=>{if(!this.db)return void a(new Error("Database not initialized"));const r=this.db.transaction([zt],"readwrite").objectStore(zt),i={key:e,value:t,timestamp:Date.now()},n=r.put(i);n.onerror=()=>{const t=n.error??new Error("Failed to write to IndexedDB"),s=t instanceof Error?t:new Error(String(t));Ot.error(`Failed to write to IndexedDB for key ${e}`,s),this.db&&(this.db.close(),this.db=null,this.isInitialized=!1,this.initPromise=null),a(s)},n.onsuccess=()=>{this.broadcastUpdate(e),s()}})}async deleteFromIndexedDB(e){if(Vt)return this.db||await this.initDB(),new Promise((t,s)=>{if(!this.db)return void s(new Error("Database not initialized"));const a=this.db.transaction([zt],"readwrite").objectStore(zt).delete(e);a.onerror=()=>{const e=a.error??new Error("Failed to delete from IndexedDB"),t=e instanceof Error?e:new Error(String(e));s(t)},a.onsuccess=()=>{t()}})}async keys(){const e=[];for(let s=0;s<localStorage.length;s++){const t=localStorage.key(s);(null==t?void 0:t.startsWith(Bt))&&e.push(t.substring(9))}try{if(Vt&&(this.db||await this.initDB(),this.db)){const t=this.db.transaction([zt],"readonly"),s=t.objectStore(zt).openCursor();await new Promise((t,a)=>{s.onerror=()=>{const e=s.error??new Error("Failed to iterate IndexedDB"),t=e instanceof Error?e:new Error(String(e));a(t)},s.onsuccess=s=>{const a=s.target.result;if(a){const t=a.value;e.push(t.key),a.continue()}else t()}})}}catch(t){Ot.warn("Failed to get keys from IndexedDB",{error:t instanceof Error?t.message:String(t)})}return[...new Set(e)]}async get(e){const t=this.inMemoryCache.get(e);if(t&&Date.now()-t.timestamp<this.cacheTTL)return t.value;let s=null;if(this.shouldUseLocalStorage(e))s=this.getFromLocalStorage(e);else try{s=await this.getFromIndexedDB(e)}catch(a){Ot.warn(`Failed to read from IndexedDB for key ${e}, falling back to localStorage`,{error:a instanceof Error?a.message:String(a)}),s=this.getFromLocalStorage(e)}return null!=s&&this.inMemoryCache.set(e,{value:s,timestamp:Date.now()}),s??void 0}async set(e,t){this.inMemoryCache.set(e,{value:t,timestamp:Date.now()});const s=this.estimateSize(t);if(this.shouldUseLocalStorage(e)||s<$t){if(this.setToLocalStorage(e,t),s>=$t)try{await this.setToIndexedDB(e,t)}catch(a){Ot.warn(`Failed to write to IndexedDB for key ${e}`,{error:a instanceof Error?a.message:String(a)})}this.broadcastInvalidation(e)}else try{await this.setToIndexedDB(e,t),this.broadcastInvalidation(e)}catch(a){Ot.warn(`Failed to write to IndexedDB for key ${e}, falling back to localStorage`,{error:a instanceof Error?a.message:String(a)}),this.setToLocalStorage(e,t),this.broadcastInvalidation(e)}}async delete(e){this.inMemoryCache.delete(e),this.deleteFromLocalStorage(e);try{await this.deleteFromIndexedDB(e)}catch(t){Ot.warn(`Failed to delete from IndexedDB for key ${e}`,{error:t instanceof Error?t.message:String(t)})}this.broadcastInvalidation(e)}async clear(){this.inMemoryCache.clear();const e=[];for(let s=0;s<localStorage.length;s++){const t=localStorage.key(s);(null==t?void 0:t.startsWith(Bt))&&e.push(t)}e.forEach(e=>localStorage.removeItem(e));try{if(Vt&&(this.db||await this.initDB(),this.db)){const e=this.db.transaction([zt],"readwrite").objectStore(zt);await new Promise((t,s)=>{const a=e.clear();a.onsuccess=()=>t(),a.onerror=()=>{const e=a.error??new Error("Failed to clear IndexedDB"),t=e instanceof Error?e:new Error(String(e));s(t)}})}}catch(t){Ot.warn("Failed to clear IndexedDB",{error:t instanceof Error?t.message:String(t)})}}};"undefined"!=typeof window&&Kt.initDB().catch(e=>{Ot.warn("Failed to initialize IndexedDB, using localStorage only",{error:e instanceof Error?e.message:String(e)})});const qt=Object.freeze(Object.defineProperty({__proto__:null,storage:Kt},Symbol.toStringTag,{value:"Module"})),Gt=[{id:"default-light",name:"Light",description:"Clean and bright default theme with warm accents",mode:"light",colors:{background:"oklch(0.985 0.006 90)",foreground:"oklch(0.22 0.018 250)",card:"oklch(1 0 0)",cardForeground:"oklch(0.22 0.018 250)",popover:"oklch(1 0 0)",popoverForeground:"oklch(0.22 0.018 250)",primary:"oklch(0.72 0.18 30)",primaryForeground:"oklch(0.99 0.002 90)",secondary:"oklch(0.68 0.14 215)",secondaryForeground:"oklch(0.99 0.002 90)",muted:"oklch(0.95 0.008 90)",mutedForeground:"oklch(0.48 0.015 250)",accent:"oklch(0.70 0.20 50)",accentForeground:"oklch(0.18 0.018 250)",destructive:"oklch(0.58 0.26 28)",destructiveForeground:"oklch(0.99 0.002 90)",border:"oklch(0.90 0.012 90)",input:"oklch(0.90 0.012 90)",ring:"oklch(0.72 0.18 30)",lavender:"oklch(0.72 0.12 295)"},preview:{primary:"#E89D5C",secondary:"#6B9BD6",accent:"#F0B05A"}},{id:"default-dark",name:"Dark",description:"Elegant dark theme with enhanced contrast and vibrant accents",mode:"dark",colors:{background:"oklch(0.12 0.018 270)",foreground:"oklch(0.97 0.006 90)",card:"oklch(0.16 0.022 270)",cardForeground:"oklch(0.97 0.006 90)",popover:"oklch(0.16 0.022 270)",popoverForeground:"oklch(0.97 0.006 90)",primary:"oklch(0.80 0.20 28)",primaryForeground:"oklch(0.10 0.018 270)",secondary:"oklch(0.72 0.16 210)",secondaryForeground:"oklch(0.10 0.018 270)",muted:"oklch(0.22 0.022 270)",mutedForeground:"oklch(0.72 0.015 90)",accent:"oklch(0.78 0.22 52)",accentForeground:"oklch(0.10 0.018 270)",destructive:"oklch(0.68 0.26 28)",destructiveForeground:"oklch(0.97 0.006 90)",border:"oklch(0.30 0.028 270)",input:"oklch(0.30 0.028 270)",ring:"oklch(0.80 0.20 28)",lavender:"oklch(0.78 0.14 295)"},preview:{primary:"#F5A86B",secondary:"#7EA8E0",accent:"#F5C76B"}},{id:"ocean",name:"Ocean",description:"Cool and calming ocean blues with aquatic depth",mode:"light",colors:{background:"oklch(0.975 0.012 225)",foreground:"oklch(0.18 0.035 235)",card:"oklch(0.99 0.008 225)",cardForeground:"oklch(0.18 0.035 235)",popover:"oklch(0.99 0.008 225)",popoverForeground:"oklch(0.18 0.035 235)",primary:"oklch(0.58 0.20 235)",primaryForeground:"oklch(0.99 0.008 225)",secondary:"oklch(0.68 0.16 215)",secondaryForeground:"oklch(0.99 0.008 225)",muted:"oklch(0.94 0.025 225)",mutedForeground:"oklch(0.46 0.06 235)",accent:"oklch(0.72 0.18 195)",accentForeground:"oklch(0.12 0.035 235)",destructive:"oklch(0.62 0.24 28)",destructiveForeground:"oklch(0.99 0.008 225)",border:"oklch(0.89 0.025 225)",input:"oklch(0.89 0.025 225)",ring:"oklch(0.58 0.20 235)",lavender:"oklch(0.70 0.14 285)"},preview:{primary:"#3B82C8",secondary:"#60A5D1",accent:"#5DB5DC"}},{id:"sunset",name:"Sunset",description:"Warm sunset oranges and pinks with golden glow",mode:"light",colors:{background:"oklch(0.985 0.015 50)",foreground:"oklch(0.20 0.045 25)",card:"oklch(0.99 0.008 50)",cardForeground:"oklch(0.20 0.045 25)",popover:"oklch(0.99 0.008 50)",popoverForeground:"oklch(0.20 0.045 25)",primary:"oklch(0.68 0.22 38)",primaryForeground:"oklch(0.99 0.008 50)",secondary:"oklch(0.75 0.20 355)",secondaryForeground:"oklch(0.99 0.008 50)",muted:"oklch(0.95 0.018 50)",mutedForeground:"oklch(0.48 0.07 25)",accent:"oklch(0.72 0.24 30)",accentForeground:"oklch(0.12 0.045 25)",destructive:"oklch(0.62 0.26 18)",destructiveForeground:"oklch(0.99 0.008 50)",border:"oklch(0.90 0.025 50)",input:"oklch(0.90 0.025 50)",ring:"oklch(0.68 0.22 38)",lavender:"oklch(0.72 0.16 340)"},preview:{primary:"#E87344",secondary:"#E86B94",accent:"#F0A04A"}},{id:"forest",name:"Forest",description:"Natural greens and earth tones with organic warmth",mode:"light",colors:{background:"oklch(0.975 0.015 148)",foreground:"oklch(0.20 0.045 155)",card:"oklch(0.99 0.008 148)",cardForeground:"oklch(0.20 0.045 155)",popover:"oklch(0.99 0.008 148)",popoverForeground:"oklch(0.20 0.045 155)",primary:"oklch(0.60 0.18 158)",primaryForeground:"oklch(0.99 0.008 148)",secondary:"oklch(0.68 0.14 138)",secondaryForeground:"oklch(0.99 0.008 148)",muted:"oklch(0.94 0.025 148)",mutedForeground:"oklch(0.46 0.06 155)",accent:"oklch(0.75 0.16 52)",accentForeground:"oklch(0.12 0.045 155)",destructive:"oklch(0.60 0.26 28)",destructiveForeground:"oklch(0.99 0.008 148)",border:"oklch(0.89 0.025 148)",input:"oklch(0.89 0.025 148)",ring:"oklch(0.60 0.18 158)",lavender:"oklch(0.70 0.12 285)"},preview:{primary:"#4A9B5E",secondary:"#6BAF73",accent:"#C8B364"}},{id:"lavender",name:"Lavender Dreams",description:"Soft purples and gentle tones with dreamy elegance",mode:"light",colors:{background:"oklch(0.985 0.015 292)",foreground:"oklch(0.22 0.035 282)",card:"oklch(0.99 0.008 292)",cardForeground:"oklch(0.22 0.035 282)",popover:"oklch(0.99 0.008 292)",popoverForeground:"oklch(0.22 0.035 282)",primary:"oklch(0.68 0.18 288)",primaryForeground:"oklch(0.99 0.008 292)",secondary:"oklch(0.72 0.16 312)",secondaryForeground:"oklch(0.99 0.008 292)",muted:"oklch(0.95 0.025 292)",mutedForeground:"oklch(0.48 0.06 282)",accent:"oklch(0.78 0.20 332)",accentForeground:"oklch(0.12 0.035 282)",destructive:"oklch(0.62 0.24 18)",destructiveForeground:"oklch(0.99 0.008 292)",border:"oklch(0.90 0.025 292)",input:"oklch(0.90 0.025 292)",ring:"oklch(0.68 0.18 288)",lavender:"oklch(0.72 0.16 288)"},preview:{primary:"#9B7AC8",secondary:"#B88ACF",accent:"#D78FCE"}},{id:"midnight",name:"Midnight Blue",description:"Deep blues with rich contrast and oceanic depth",mode:"dark",colors:{background:"oklch(0.13 0.045 252)",foreground:"oklch(0.97 0.012 225)",card:"oklch(0.17 0.055 252)",cardForeground:"oklch(0.97 0.012 225)",popover:"oklch(0.17 0.055 252)",popoverForeground:"oklch(0.97 0.012 225)",primary:"oklch(0.72 0.22 242)",primaryForeground:"oklch(0.10 0.045 252)",secondary:"oklch(0.68 0.20 215)",secondaryForeground:"oklch(0.10 0.045 252)",muted:"oklch(0.23 0.05 252)",mutedForeground:"oklch(0.72 0.035 225)",accent:"oklch(0.78 0.24 193)",accentForeground:"oklch(0.10 0.045 252)",destructive:"oklch(0.65 0.28 28)",destructiveForeground:"oklch(0.97 0.012 225)",border:"oklch(0.30 0.06 252)",input:"oklch(0.30 0.06 252)",ring:"oklch(0.72 0.22 242)",lavender:"oklch(0.75 0.16 295)"},preview:{primary:"#6B9FE8",secondary:"#5D9FD6",accent:"#6BB5E8"}},{id:"rose",name:"Rose Garden",description:"Romantic pinks and warm tones with floral elegance",mode:"light",colors:{background:"oklch(0.985 0.015 356)",foreground:"oklch(0.22 0.035 346)",card:"oklch(0.99 0.008 356)",cardForeground:"oklch(0.22 0.035 346)",popover:"oklch(0.99 0.008 356)",popoverForeground:"oklch(0.22 0.035 346)",primary:"oklch(0.68 0.20 352)",primaryForeground:"oklch(0.99 0.008 356)",secondary:"oklch(0.72 0.18 12)",secondaryForeground:"oklch(0.99 0.008 356)",muted:"oklch(0.95 0.018 356)",mutedForeground:"oklch(0.48 0.06 346)",accent:"oklch(0.75 0.22 342)",accentForeground:"oklch(0.12 0.035 346)",destructive:"oklch(0.60 0.26 22)",destructiveForeground:"oklch(0.99 0.008 356)",border:"oklch(0.90 0.025 356)",input:"oklch(0.90 0.025 356)",ring:"oklch(0.68 0.20 352)",lavender:"oklch(0.72 0.16 345)"},preview:{primary:"#E86B8A",secondary:"#E88073",accent:"#E86BA8"}},{id:"amber-gold",name:"Amber Gold",description:"Warm amber and golden tones with luxurious shine",mode:"light",colors:{background:"oklch(0.985 0.015 68)",foreground:"oklch(0.20 0.045 48)",card:"oklch(0.99 0.008 68)",cardForeground:"oklch(0.20 0.045 48)",popover:"oklch(0.99 0.008 68)",popoverForeground:"oklch(0.20 0.045 48)",primary:"oklch(0.70 0.20 78)",primaryForeground:"oklch(0.99 0.008 68)",secondary:"oklch(0.75 0.18 55)",secondaryForeground:"oklch(0.99 0.008 68)",muted:"oklch(0.95 0.025 68)",mutedForeground:"oklch(0.48 0.07 48)",accent:"oklch(0.78 0.22 85)",accentForeground:"oklch(0.12 0.045 48)",destructive:"oklch(0.60 0.26 28)",destructiveForeground:"oklch(0.99 0.008 68)",border:"oklch(0.90 0.025 68)",input:"oklch(0.90 0.025 68)",ring:"oklch(0.70 0.20 78)",lavender:"oklch(0.72 0.14 290)"},preview:{primary:"#E8AF5C",secondary:"#E89B54",accent:"#F0C05A"}},{id:"emerald",name:"Emerald",description:"Rich emerald greens with depth and natural vibrancy",mode:"dark",colors:{background:"oklch(0.12 0.035 162)",foreground:"oklch(0.97 0.012 152)",card:"oklch(0.16 0.045 162)",cardForeground:"oklch(0.97 0.012 152)",popover:"oklch(0.16 0.045 162)",popoverForeground:"oklch(0.97 0.012 152)",primary:"oklch(0.70 0.22 157)",primaryForeground:"oklch(0.10 0.035 162)",secondary:"oklch(0.65 0.18 172)",secondaryForeground:"oklch(0.10 0.035 162)",muted:"oklch(0.22 0.045 162)",mutedForeground:"oklch(0.70 0.035 152)",accent:"oklch(0.75 0.24 147)",accentForeground:"oklch(0.10 0.035 162)",destructive:"oklch(0.65 0.28 28)",destructiveForeground:"oklch(0.97 0.012 152)",border:"oklch(0.28 0.06 162)",input:"oklch(0.28 0.06 162)",ring:"oklch(0.70 0.22 157)",lavender:"oklch(0.75 0.16 295)"},preview:{primary:"#5DB57E",secondary:"#4FA588",accent:"#6FC978"}},{id:"slate-pro",name:"Slate Professional",description:"Professional slate with subtle accents and refined elegance",mode:"dark",colors:{background:"oklch(0.14 0.012 242)",foreground:"oklch(0.97 0.008 242)",card:"oklch(0.18 0.018 242)",cardForeground:"oklch(0.97 0.008 242)",popover:"oklch(0.18 0.018 242)",popoverForeground:"oklch(0.97 0.008 242)",primary:"oklch(0.72 0.14 247)",primaryForeground:"oklch(0.12 0.012 242)",secondary:"oklch(0.68 0.12 262)",secondaryForeground:"oklch(0.12 0.012 242)",muted:"oklch(0.24 0.022 242)",mutedForeground:"oklch(0.70 0.025 242)",accent:"oklch(0.70 0.16 222)",accentForeground:"oklch(0.12 0.012 242)",destructive:"oklch(0.65 0.26 28)",destructiveForeground:"oklch(0.97 0.008 242)",border:"oklch(0.30 0.025 242)",input:"oklch(0.30 0.025 242)",ring:"oklch(0.72 0.14 247)",lavender:"oklch(0.75 0.14 295)"},preview:{primary:"#7A9CC6",secondary:"#8592D4",accent:"#6AA3D1"}},{id:"cherry-blossom",name:"Cherry Blossom",description:"Delicate cherry blossom pinks with springtime freshness",mode:"light",colors:{background:"oklch(0.985 0.015 342)",foreground:"oklch(0.22 0.035 332)",card:"oklch(0.99 0.008 342)",cardForeground:"oklch(0.22 0.035 332)",popover:"oklch(0.99 0.008 342)",popoverForeground:"oklch(0.22 0.035 332)",primary:"oklch(0.70 0.18 347)",primaryForeground:"oklch(0.99 0.008 342)",secondary:"oklch(0.75 0.16 332)",secondaryForeground:"oklch(0.99 0.008 342)",muted:"oklch(0.95 0.025 342)",mutedForeground:"oklch(0.48 0.06 332)",accent:"oklch(0.78 0.20 357)",accentForeground:"oklch(0.12 0.035 332)",destructive:"oklch(0.60 0.26 22)",destructiveForeground:"oklch(0.99 0.008 342)",border:"oklch(0.90 0.025 342)",input:"oklch(0.90 0.025 342)",ring:"oklch(0.70 0.18 347)",lavender:"oklch(0.72 0.16 345)"},preview:{primary:"#E891AC",secondary:"#E8A1B8",accent:"#E87F9D"}},{id:"neon-cyber",name:"Neon Cyber",description:"Futuristic neon colors with high-tech cyberpunk vibes",mode:"dark",colors:{background:"oklch(0.10 0.04 280)",foreground:"oklch(0.98 0.02 180)",card:"oklch(0.14 0.05 280)",cardForeground:"oklch(0.98 0.02 180)",popover:"oklch(0.14 0.05 280)",popoverForeground:"oklch(0.98 0.02 180)",primary:"oklch(0.75 0.30 320)",primaryForeground:"oklch(0.10 0.04 280)",secondary:"oklch(0.70 0.28 190)",secondaryForeground:"oklch(0.10 0.04 280)",muted:"oklch(0.20 0.06 280)",mutedForeground:"oklch(0.75 0.04 180)",accent:"oklch(0.78 0.32 160)",accentForeground:"oklch(0.10 0.04 280)",destructive:"oklch(0.70 0.32 10)",destructiveForeground:"oklch(0.98 0.02 180)",border:"oklch(0.28 0.08 280)",input:"oklch(0.28 0.08 280)",ring:"oklch(0.75 0.30 320)",lavender:"oklch(0.78 0.18 295)"},preview:{primary:"#E059D8",secondary:"#00E5D5",accent:"#00FFB3"}},{id:"autumn-harvest",name:"Autumn Harvest",description:"Rich autumn colors with harvest warmth and golden tones",mode:"light",colors:{background:"oklch(0.98 0.018 60)",foreground:"oklch(0.20 0.048 35)",card:"oklch(0.99 0.010 60)",cardForeground:"oklch(0.20 0.048 35)",popover:"oklch(0.99 0.010 60)",popoverForeground:"oklch(0.20 0.048 35)",primary:"oklch(0.62 0.24 45)",primaryForeground:"oklch(0.99 0.010 60)",secondary:"oklch(0.68 0.20 28)",secondaryForeground:"oklch(0.99 0.010 60)",muted:"oklch(0.94 0.028 60)",mutedForeground:"oklch(0.46 0.08 35)",accent:"oklch(0.72 0.22 65)",accentForeground:"oklch(0.12 0.048 35)",destructive:"oklch(0.58 0.28 25)",destructiveForeground:"oklch(0.99 0.010 60)",border:"oklch(0.88 0.030 60)",input:"oklch(0.88 0.030 60)",ring:"oklch(0.62 0.24 45)",lavender:"oklch(0.70 0.14 285)"},preview:{primary:"#D87244",secondary:"#C85A30",accent:"#E8A850"}},{id:"arctic-frost",name:"Arctic Frost",description:"Cool icy blues and whites with pristine clarity",mode:"light",colors:{background:"oklch(0.985 0.015 220)",foreground:"oklch(0.18 0.040 230)",card:"oklch(0.995 0.008 220)",cardForeground:"oklch(0.18 0.040 230)",popover:"oklch(0.995 0.008 220)",popoverForeground:"oklch(0.18 0.040 230)",primary:"oklch(0.62 0.22 230)",primaryForeground:"oklch(0.995 0.008 220)",secondary:"oklch(0.70 0.18 215)",secondaryForeground:"oklch(0.995 0.008 220)",muted:"oklch(0.96 0.020 220)",mutedForeground:"oklch(0.48 0.065 230)",accent:"oklch(0.75 0.20 200)",accentForeground:"oklch(0.12 0.040 230)",destructive:"oklch(0.58 0.26 18)",destructiveForeground:"oklch(0.995 0.008 220)",border:"oklch(0.92 0.022 220)",input:"oklch(0.92 0.022 220)",ring:"oklch(0.62 0.22 230)",lavender:"oklch(0.72 0.14 250)"},preview:{primary:"#4888D0",secondary:"#5FA5E0",accent:"#68C0E8"}},{id:"tropical-paradise",name:"Tropical Paradise",description:"Vibrant tropical colors with island energy",mode:"light",colors:{background:"oklch(0.985 0.020 172)",foreground:"oklch(0.18 0.045 168)",card:"oklch(0.99 0.012 172)",cardForeground:"oklch(0.18 0.045 168)",popover:"oklch(0.99 0.012 172)",popoverForeground:"oklch(0.18 0.045 168)",primary:"oklch(0.65 0.24 165)",primaryForeground:"oklch(0.99 0.012 172)",secondary:"oklch(0.72 0.22 50)",secondaryForeground:"oklch(0.99 0.012 172)",muted:"oklch(0.94 0.028 172)",mutedForeground:"oklch(0.46 0.075 168)",accent:"oklch(0.75 0.26 190)",accentForeground:"oklch(0.12 0.045 168)",destructive:"oklch(0.62 0.28 28)",destructiveForeground:"oklch(0.99 0.012 172)",border:"oklch(0.90 0.030 172)",input:"oklch(0.90 0.030 172)",ring:"oklch(0.65 0.24 165)",lavender:"oklch(0.72 0.16 285)"},preview:{primary:"#3FAA82",secondary:"#E8A050",accent:"#50C8E8"}},{id:"volcanic-ember",name:"Volcanic Ember",description:"Intense reds and oranges with molten lava energy",mode:"dark",colors:{background:"oklch(0.12 0.045 28)",foreground:"oklch(0.97 0.015 30)",card:"oklch(0.16 0.055 28)",cardForeground:"oklch(0.97 0.015 30)",popover:"oklch(0.16 0.055 28)",popoverForeground:"oklch(0.97 0.015 30)",primary:"oklch(0.68 0.28 32)",primaryForeground:"oklch(0.10 0.045 28)",secondary:"oklch(0.70 0.26 18)",secondaryForeground:"oklch(0.10 0.045 28)",muted:"oklch(0.22 0.055 28)",mutedForeground:"oklch(0.72 0.040 30)",accent:"oklch(0.75 0.30 42)",accentForeground:"oklch(0.10 0.045 28)",destructive:"oklch(0.65 0.32 15)",destructiveForeground:"oklch(0.97 0.015 30)",border:"oklch(0.28 0.070 28)",input:"oklch(0.28 0.070 28)",ring:"oklch(0.68 0.28 32)",lavender:"oklch(0.75 0.16 310)"},preview:{primary:"#E8623C",secondary:"#D8422C",accent:"#F08850"}},{id:"cosmic-purple",name:"Cosmic Purple",description:"Deep space purples with cosmic mystique",mode:"dark",colors:{background:"oklch(0.11 0.050 295)",foreground:"oklch(0.97 0.015 280)",card:"oklch(0.15 0.060 295)",cardForeground:"oklch(0.97 0.015 280)",popover:"oklch(0.15 0.060 295)",popoverForeground:"oklch(0.97 0.015 280)",primary:"oklch(0.70 0.26 290)",primaryForeground:"oklch(0.10 0.050 295)",secondary:"oklch(0.68 0.24 310)",secondaryForeground:"oklch(0.10 0.050 295)",muted:"oklch(0.21 0.065 295)",mutedForeground:"oklch(0.72 0.040 280)",accent:"oklch(0.75 0.28 275)",accentForeground:"oklch(0.10 0.050 295)",destructive:"oklch(0.65 0.30 20)",destructiveForeground:"oklch(0.97 0.015 280)",border:"oklch(0.27 0.075 295)",input:"oklch(0.27 0.075 295)",ring:"oklch(0.70 0.26 290)",lavender:"oklch(0.75 0.20 290)"},preview:{primary:"#A85BE8",secondary:"#C068E8",accent:"#9850E8"}}];function Wt(e){return Gt.find(t=>t.id===e)}function Ht(e){const t=document.documentElement,s=e.colors;t.style.setProperty("--background",s.background),t.style.setProperty("--foreground",s.foreground),t.style.setProperty("--card",s.card),t.style.setProperty("--card-foreground",s.cardForeground),t.style.setProperty("--popover",s.popover),t.style.setProperty("--popover-foreground",s.popoverForeground),t.style.setProperty("--primary",s.primary),t.style.setProperty("--primary-foreground",s.primaryForeground),t.style.setProperty("--secondary",s.secondary),t.style.setProperty("--secondary-foreground",s.secondaryForeground),t.style.setProperty("--muted",s.muted),t.style.setProperty("--muted-foreground",s.mutedForeground),t.style.setProperty("--accent",s.accent),t.style.setProperty("--accent-foreground",s.accentForeground),t.style.setProperty("--destructive",s.destructive),t.style.setProperty("--destructive-foreground",s.destructiveForeground),t.style.setProperty("--border",s.border),t.style.setProperty("--input",s.input),t.style.setProperty("--ring",s.ring),s.lavender&&t.style.setProperty("--lavender",s.lavender),"dark"===e.mode?t.classList.add("dark"):t.classList.remove("dark"),"undefined"!=typeof window&&Pt(async()=>{const{applyButtonTokensForTheme:e}=await import("./button-tokens-theme-system-kL5XbIKr.js");return{applyButtonTokensForTheme:e}},__vite__mapDeps([0,1,2,3,4,5,6])).then(({applyButtonTokensForTheme:t})=>{t(e.id)}).catch(()=>{})}var Qt=(e=>(e.CLAMP="clamp",e.EXTEND="extend",e.IDENTITY="identity",e))(Qt||{});const Xt={linear:e=>e,ease:e=>e*e*(3-2*e),quad:e=>e*e,cubic:e=>e*e*e,bezier:(e,t,s,a)=>e=>{const s=e*e;return 3*(1-e)*(1-e)*e*t+3*(1-e)*s*a+s*e},inOut:e=>t=>t<.5?e(2*t)/2:1-e(2*(1-t))/2,out:e=>t=>1-e(1-t),in:e=>e,elastic:(e=1)=>t=>{if(0===t||1===t)return t;const s=Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)*e+1;return Math.max(0,Math.min(1,s))}};function Jt(e){return s.useRef({value:e}).current}function Zt(e,t,s){return s&&setTimeout(()=>s(!0),0),e}function es(e,t,s){return s&&setTimeout(()=>s(!0),0),e}function ts(e,t){return t}function ss(...e){return e[e.length-1]??0}function as(e,t,s){return e}function rs(e,t,s,a){const r="string"==typeof a?a:a??"clamp";if(t.length!==s.length)throw new Error("inputRange and outputRange must have the same length");if(0===t.length||0===s.length)return 0;let i=0;for(;i<t.length-1;i++){const s=t[i+1];if(void 0!==s&&e<=s)break}const n=t[i],o=t[i+1],l=s[i],c=s[i+1];if(void 0===n||void 0===l)return 0;if(e<n){if("clamp"===r)return l;if("identity"===r)return e}if(void 0!==o&&e>o){if("clamp"===r&&void 0!==c)return c;if("identity"===r)return e}return l+(e-n)/((o??n)-n)*((c??l)-l)}function is(e,t){return s.useMemo(()=>{const t=e();if(t.transform&&Array.isArray(t.transform)){const e=t.transform.map(e=>{const t=Object.keys(e)[0];if(void 0===t)return"";const s=e[t];return"translateX"===t||"translateY"===t?`${t}(${s}px)`:"scale"===t||"scaleX"===t||"scaleY"===t?`${t}(${s})`:"rotate"===t||"rotateX"===t||"rotateY"===t||"rotateZ"===t?`${t}(${s}deg)`:`${t}(${s})`}).join(" ");return{...t,transform:e,transition:"all 300ms ease-in-out"}}return{...t,transition:"all 300ms ease-in-out"}},[])}const ns={View:"div",Text:"span"},os={visual:{enableBlur:!0,enableGlow:!0,enableShadows:!0,enableShimmer:!0,enable3DTilt:!0,backdropSaturation:1.5,maxElevation:24,borderRadius:"2xl",highContrastText:!0},animation:{enableReanimated:!0,smoothEntry:!0,tapFeedback:"spring",motionBlur:!0,springPhysics:{damping:15,stiffness:250,mass:.9},showParticles:!0,showTrails:!0,motionFPS:60},performance:{runOnUIThread:!0,skipReactRender:!0,useSkiaWhereAvailable:!0,flatListOptimized:!0,layoutAwareAnimations:!0},feedback:{haptics:!0,hapticStrength:"strong",sound:!0,showTooltips:!0},theme:{adaptiveMood:!0,gradientIntensity:1.4,themeVariants:["glass","neon","dark","vibrant"],avatarGlow:!0,dynamicBackground:!0},debug:{logFrameDrops:!1,traceSharedValues:!1}},ls=s.createContext(void 0);function cs({children:e,config:t}){const s=t?ds(os,t):os;return a.jsx(ls.Provider,{value:{config:s},children:e})}function ds(e,t){const s={...e};for(const a in t)if(void 0!==t[a]){const r=t[a],i=e[a];null===r||"object"!=typeof r||Array.isArray(r)||null===i||"object"!=typeof i||Array.isArray(i)?void 0!==r&&(s[a]=r):s[a]=ds(i,r)}return s}function us(){const{config:e}=function(){const e=s.useContext(ls);if(void 0===e)throw new Error("useUIContext must be used within a UIProvider");return e}();return{config:e,visual:e.visual,animation:e.animation,performance:e.performance,feedback:e.feedback,theme:e.theme,debug:e.debug}}function ms(e){const[t,a]=s.useState({}),r=s.useRef(void 0);return s.useEffect(()=>{if(!e)return void a({});const t=()=>{try{let t;t="function"==typeof e?e():"value"in e?e.value:e;const s=function(e){if(us(),!e||"object"!=typeof e)return{};const t={},s=e;if(s.transform&&Array.isArray(s.transform)){const e=[];s.transform.forEach(t=>{if(t&&"object"==typeof t){const s=t;void 0!==s.scale&&e.push(`scale(${s.scale})`),void 0!==s.translateX&&e.push(`translateX(${s.translateX}px)`),void 0!==s.translateY&&e.push(`translateY(${s.translateY}px)`),void 0!==s.rotateX&&e.push(`rotateX(${s.rotateX})`),void 0!==s.rotateY&&e.push(`rotateY(${s.rotateY})`),void 0!==s.rotate&&e.push(`rotate(${s.rotate}deg)`)}}),e.length>0&&(t.transform=e.join(" "))}if(void 0!==s.opacity&&(t.opacity=Number(s.opacity)),void 0!==s.shadowColor){const e=s.shadowOffset,a=s.shadowRadius;t.boxShadow=`${(null==e?void 0:e.width)||0}px ${(null==e?void 0:e.height)||0}px ${a||0}px ${s.shadowColor}`}return t}(t);a(s)}catch{a({})}r.current=requestAnimationFrame(t)};return r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(t),()=>{r.current&&cancelAnimationFrame(r.current)}},[e]),t}function hs({children:e,style:t,className:s,onMouseEnter:r,onMouseLeave:i,onClick:n,...o}){const l=t?ms(t):{};return a.jsx("div",{className:s,style:l,onMouseEnter:r,onMouseLeave:i,onClick:n,...o,children:e})}const ps=1.05,gs=-8,xs=25,fs=400;function vs(e={}){const{scale:t=ps,translateY:a=gs,damping:r=xs,stiffness:i=fs}=e,n=Jt(1),o=Jt(0),l=is(()=>({transform:[{scale:n.value},{translateY:o.value}]})),c=s.useCallback(()=>{n.value=Zt(t),o.value=Zt(a)},[n,o,t,a,r,i]),d=s.useCallback(()=>{n.value=Zt(1),o.value=Zt(0)},[n,o,r,i]);return{scale:n,translateY:o,animatedStyle:l,handleEnter:c,handleLeave:d}}const ys=_t("Haptics");const js=new class{constructor(){t(this,"isSupported"),this.isSupported="vibrate"in navigator}vibrate(e){if(this.isSupported)try{navigator.vibrate(e)}catch(t){ys.warn("Haptic feedback failed",t instanceof Error?t:new Error(String(t)))}}light(){this.vibrate(10)}medium(){this.vibrate(20)}heavy(){this.vibrate(40)}selection(){this.vibrate(5)}success(){this.vibrate([10,50,10])}warning(){this.vibrate([20,100,20])}error(){this.vibrate([30,100,30,100,30])}notification(e="success"){switch(e){case"success":this.success();break;case"warning":this.warning();break;case"error":this.error()}}impact(e="light"){switch(e){case"light":this.vibrate(10);break;case"medium":this.vibrate(20);break;case"heavy":this.vibrate(40)}}trigger(e){switch(e){case"light":this.light();break;case"medium":this.medium();break;case"heavy":this.heavy();break;case"selection":this.selection();break;case"success":this.success();break;case"warning":this.warning();break;case"error":this.error()}}};function ws(e){js.trigger(e)}const bs=Object.freeze(Object.defineProperty({__proto__:null,haptics:js,triggerHaptic:ws},Symbol.toStringTag,{value:"Module"})),Ns=.95,Ss=15,Es=400;function ks(e={}){const{scale:t=Ns,damping:a=Ss,stiffness:r=Es,onPress:i,hapticFeedback:n=!0}=e,o=Jt(1),l=is(()=>({transform:[{scale:o.value}]})),c=s.useCallback(()=>{n&&js.impact("light"),o.value=Zt(t,0,()=>{o.value=Zt(1)}),null==i||i()},[o,t,a,r,i,n]);return{scale:o,animatedStyle:l,handlePress:c}}function Is(){const[e,t]=s.useState(()=>"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches);return s.useEffect(()=>{if("undefined"==typeof window)return;const e=window.matchMedia("(prefers-reduced-motion: reduce)"),s=e=>{t(e.matches)};return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[]),e}function As(...e){return ht(pt(e))}function Cs(){return`${Date.now()}-${Math.random().toString(36).substring(2,11)}`}function Ps(){const e=Date.now(),t=Array.from({length:16},()=>Math.floor(256*Math.random()).toString(16).padStart(2,"0")).join("");return`${e.toString(36)}${t}`.toUpperCase()}function Ts(e){const t=e.replace("#",""),s=parseInt(t,16);return{r:s>>16&255,g:s>>8&255,b:255&s}}function Fs(e){const t=e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4);return.2126*t(e.r)+.7152*t(e.g)+.0722*t(e.b)}function Rs(e,t){const s=Ts(e),a=Ts(t),r=Fs(s),i=Fs(a);return(Math.max(r,i)+.05)/(Math.min(r,i)+.05)}function _s(e,t){return Rs(e,t)>=3}function Ms(e,t="#FFFFFF",s="#000000"){const a=Rs(t,e),r=Rs(s,e);if(a>=3&&a>=r)return t;if(r>=3)return s;return Fs(Ts(e))<.5?t:s}const Ds=_t("focus-appearance"),Ls={thickness:2,contrastRatio:3,offset:2,color:"#0066cc",style:"solid",useOutline:!1},Os={thickness:3,contrastRatio:4.5,offset:3,color:"#ffffff",style:"solid",useOutline:!0};function Us(e,t=Ls){const s=window.matchMedia("(prefers-contrast: high)").matches||window.matchMedia("(-ms-high-contrast: active)").matches?Os:t,a=e.style;if(e.className,e.classList.remove("focus-ring","focus-visible-ring"),e.classList.add("focus-ring"),s.useOutline)a.outline=`${s.thickness}px ${s.style} ${s.color}`,a.outlineOffset=`${s.offset}px`;else{const e=2*s.thickness,t=s.thickness;a.boxShadow=`0 0 0 ${t}px ${s.color}, 0 0 ${e}px ${e}px rgba(0, 0, 0, 0.1)`}Ds.debug("Applied focus appearance",{element:e.tagName,config:s})}const zs=_t("target-size"),Bs={minSize:44,minSpacing:8};function $s(e,t=Bs){const s=[];if(!function(e){const t=e.tagName.toLowerCase(),s=e.getAttribute("role"),a=e.getAttribute("tabindex");return!!["button","a","input","select","textarea"].includes(t)||!(!s||!["button","link","tab","menuitem","option"].includes(s))||null!==a&&"-1"!==a||null!==e.onclick}(e))return{valid:!0,sizeValid:!0,spacingValid:!0,visualSizeValid:!0,issues:[]};const a=function(e){const t=e.getBoundingClientRect(),s=window.getComputedStyle(e),a=parseFloat(s.paddingTop)||0,r=parseFloat(s.paddingBottom)||0,i=parseFloat(s.paddingLeft)||0,n=parseFloat(s.paddingRight)||0;return{width:t.width+i+n,height:t.height+a+r}}(e),{width:r,height:i}=a,n=r>=t.minSize&&i>=t.minSize;n||s.push(`Touch target size (${r}x${i}px) is less than minimum (${t.minSize}x${t.minSize}px)`);const o=function(e){const t=e.getBoundingClientRect(),s=document.querySelectorAll("*");let a=1/0;for(const r of s){if(r===e||!(r instanceof HTMLElement))continue;const s=r.getBoundingClientRect();if(s.top<t.bottom&&s.bottom>t.top){const e=Math.min(Math.abs(t.left-s.right),Math.abs(t.right-s.left));e>0&&e<a&&(a=e)}if(s.left<t.right&&s.right>t.left){const e=Math.min(Math.abs(t.top-s.bottom),Math.abs(t.bottom-s.top));e>0&&e<a&&(a=e)}}return a===1/0?0:a}(e),l=o>=t.minSpacing||0===o;l||s.push(`Spacing between touch targets (${o}px) is less than minimum (${t.minSpacing}px)`);const c=window.getComputedStyle(e),d=parseFloat(c.width)||r,u=parseFloat(c.height)||i,m=Math.abs(d-r)<1&&Math.abs(u-i)<1;return m||s.push(`Visual size (${d}x${u}px) does not match touch target size (${r}x${i}px)`),{valid:n&&l&&m,sizeValid:n,spacingValid:l,visualSizeValid:m,issues:s,actualWidth:r,actualHeight:i,minSpacing:o===1/0?void 0:o}}function Vs(e={}){const{enabled:t=!0,autoFix:a=!1,config:r=Bs,onInvalid:i}=e,n=s.useRef(null),o=s.useCallback(e=>$s(e,r),[r]),l=s.useCallback(e=>{if(!t)return;const s=$s(e,r);s.valid||(i&&i(s),a&&function(e,t=Bs){const s=$s(e,t);if(!s.valid){const a=window.getComputedStyle(e),r=parseFloat(a.width)||0,i=parseFloat(a.height)||0;if(!s.sizeValid){const s=Math.max(r,t.minSize),a=Math.max(i,t.minSize);e.style.minWidth=`${s}px`,e.style.minHeight=`${a}px`,zs.debug("Applied minimum target size",{element:e.tagName,width:s,height:a})}if(!s.spacingValid&&void 0!==s.minSpacing){const s=parseFloat(a.margin)||0,r=Math.max(s,t.minSpacing/2);e.style.margin=`${r}px`,zs.debug("Applied minimum spacing",{element:e.tagName,margin:r})}}}(e,r))},[t,a,r,i]);return s.useEffect(()=>{t&&n.current&&l(n.current)},[t,l]),{validate:o,ensure:l}}_t("use-target-size");const Ys=gt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium disabled:pointer-events-none disabled:cursor-default [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-5 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-background aria-invalid:ring-destructive/30 aria-invalid:border-destructive min-h-[44px] min-w-[44px]",{variants:{variant:{default:"bg-[var(--btn-primary-bg)] text-[var(--btn-primary-fg)] shadow-lg hover:shadow-xl hover:bg-[var(--btn-primary-hover-bg)] hover:text-[var(--btn-primary-hover-fg)] active:shadow-md active:bg-[var(--btn-primary-press-bg)] active:text-[var(--btn-primary-press-fg)] disabled:bg-[var(--btn-primary-disabled-bg)] disabled:text-[var(--btn-primary-disabled-fg)] disabled:shadow-none focus-visible:ring-[var(--btn-primary-focus-ring)]",destructive:"bg-[var(--btn-destructive-bg)] text-[var(--btn-destructive-fg)] shadow-lg hover:shadow-xl hover:bg-[var(--btn-destructive-hover-bg)] hover:text-[var(--btn-destructive-hover-fg)] active:shadow-md active:bg-[var(--btn-destructive-press-bg)] active:text-[var(--btn-destructive-press-fg)] focus-visible:ring-[var(--btn-destructive-focus-ring)] disabled:bg-[var(--btn-destructive-disabled-bg)] disabled:text-[var(--btn-destructive-disabled-fg)] disabled:shadow-none",outline:"border-[1.5px] border-[var(--btn-outline-border)] bg-[var(--btn-outline-bg)] text-[var(--btn-outline-fg)] shadow-sm hover:shadow-lg hover:bg-[var(--btn-outline-hover-bg)] hover:text-[var(--btn-outline-hover-fg)] hover:border-[var(--btn-outline-hover-border)] active:bg-[var(--btn-outline-press-bg)] active:text-[var(--btn-outline-press-fg)] active:border-[var(--btn-outline-press-border)] disabled:bg-[var(--btn-outline-disabled-bg)] disabled:text-[var(--btn-outline-disabled-fg)] disabled:border-[var(--btn-outline-disabled-border)] disabled:shadow-none focus-visible:ring-[var(--btn-outline-focus-ring)]",secondary:"bg-[var(--btn-secondary-bg)] text-[var(--btn-secondary-fg)] shadow-lg hover:shadow-xl hover:bg-[var(--btn-secondary-hover-bg)] hover:text-[var(--btn-secondary-hover-fg)] active:shadow-md active:bg-[var(--btn-secondary-press-bg)] active:text-[var(--btn-secondary-press-fg)] disabled:bg-[var(--btn-secondary-disabled-bg)] disabled:text-[var(--btn-secondary-disabled-fg)] disabled:shadow-none focus-visible:ring-[var(--btn-secondary-focus-ring)]",ghost:"bg-[var(--btn-ghost-bg)] text-[var(--btn-ghost-fg)] hover:bg-[var(--btn-ghost-hover-bg)] hover:text-[var(--btn-ghost-hover-fg)] hover:shadow-sm active:bg-[var(--btn-ghost-press-bg)] active:text-[var(--btn-ghost-press-fg)] disabled:bg-[var(--btn-ghost-disabled-bg)] disabled:text-[var(--btn-ghost-disabled-fg)] focus-visible:ring-[var(--btn-ghost-focus-ring)]",link:"text-[var(--btn-link-fg)] underline-offset-4 hover:underline hover:text-[var(--btn-link-hover-fg)] disabled:text-[var(--btn-link-disabled-fg)] disabled:no-underline focus-visible:ring-[var(--btn-link-focus-ring)] bg-transparent"},size:{default:"h-11 px-4 py-2 has-[>svg]:px-3 [&_svg]:size-5",sm:"h-9 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 [&_svg]:size-4 min-h-[44px]",lg:"h-14 rounded-md px-6 has-[>svg]:px-4 text-base [&_svg]:size-6",icon:"size-11 min-w-[44px] min-h-[44px]"}},defaultVariants:{variant:"default",size:"default"}});function Ks({className:e,variant:t,size:i,asChild:n=!1,enableAnimations:o=!0,onClick:l,disabled:c,...d}){const u=Is(),m=o&&!u&&!c,h=vs({scale:m?1.05:1,translateY:m?-4:0}),p=ks({scale:m?.96:1,hapticFeedback:!1}),g=function(e={}){const{ensure:t}=Vs(e),a=s.useRef(null);return s.useEffect(()=>{a.current&&t(a.current)},[t]),a}({enabled:!c&&!n,autoFix:!0}),x=s.useCallback(e=>{e&&(g.current=e,c||n||Us(e))},[c,n,g]),f=ms(is(()=>{if(!m)return{};return{transform:[{scale:h.scale.value*p.scale.value},{translateY:h.translateY.value}]}})),v=s.useCallback(e=>{c||(m&&(js.impact("light"),p.handlePress()),null==l||l(e))},[c,m,p,l]),y=s.useCallback(()=>{m&&h.handleEnter()},[m,h]),j=s.useCallback(()=>{m&&h.handleLeave()},[m,h]),w=n?r:"button";return n||!m?a.jsx(w,{ref:x,"data-slot":"button",className:As(Ys({variant:t,size:i,className:e}),"focus-ring"),onClick:l,disabled:c,...d}):a.jsx(hs,{style:m?f:void 0,className:"inline-block",onMouseEnter:y,onMouseLeave:j,children:a.jsx(w,{ref:x,"data-slot":"button",className:As(Ys({variant:t,size:i,className:e}),"focus-ring"),onClick:v,disabled:c,...d})})}const qs=_t("useStorage");function Gs(e,t){const[a,r]=s.useState(t),[i,n]=s.useState(!0),o=s.useRef(t),l=s.useRef(e),c=s.useRef(!1);s.useEffect(()=>{o.current=t},[t]),s.useEffect(()=>{l.current!==e&&(l.current=e,c.current=!1,n(!0))},[e]),s.useEffect(()=>{let t=!1;return c.current||(async()=>{try{const s=await Kt.get(e);t||(r(void 0!==s?s:o.current),n(!1),c.current=!0)}catch(s){qs.error(`Failed to load value for key ${e}`,s instanceof Error?s:new Error(String(s))),t||(r(o.current),n(!1),c.current=!0)}})().catch(t=>{qs.error(`Failed to load value for key ${e} in useEffect`,t instanceof Error?t:new Error(String(t)))}),()=>{t=!0}},[e]);const d=s.useCallback(async t=>{try{let s;r(e=>(s="function"==typeof t?t(e):t,s)),await Kt.set(e,s),r(s)}catch(s){qs.error(`Failed to set value for key ${e}`,s instanceof Error?s:new Error(String(s)));try{const t=await Kt.get(e);r(void 0!==t?t:o.current)}catch(a){qs.error(`Failed to revert value for key ${e}`,a instanceof Error?a:new Error(String(a)))}throw s}},[e]),u=s.useCallback(async()=>{try{r(o.current),await Kt.delete(e)}catch(t){qs.error(`Failed to delete value for key ${e}`,t instanceof Error?t:new Error(String(t)))}},[e]);return[i?o.current:a,d,u]}const Ws=Gs;const Hs={en:{app:{title:"PawfectMatch",tagline:"AI-Powered Pet Companion Matching"},nav:{discover:"Discover",matches:"Matches",map:"Map",chat:"Chat",community:"Community",adoption:"Adopt","lost-found":"Lost & Found",profile:"Profile"},discover:{title:"Discover Perfect Matches",subtitle:"Find compatible companions for",createProfile:"Create Your Pet's Profile",createProfileDesc:"Start matching by creating a profile for your pet in the Profile section",noMore:"No More Pets to Discover",noMoreDesc:"Check back later for more potential matches!",noMoreDescAdjust:"Try adjusting your filters to see more potential matches!",filters:"Filters",analyzePhoto:"AI Photo Analysis",compatibility:"Compatibility",viewDetails:"View Details",skip:"Skip",like:"Like",pass:"Pass",match:"Match",about:"ABOUT",whyMatch:"WHY YOU'LL MATCH",personality:"PERSONALITY",swipeHintPass:"Pass",swipeHintLike:"Like"},matches:{title:"Your Matches",subtitle:"perfect companion",subtitlePlural:"perfect companions found",noMatches:"No Matches Yet",noMatchesDesc:"Start swiping in the Discover section to find perfect companions!",startChat:"Start Chatting",viewProfile:"View Profile",compatibility:"Compatibility",whyMatched:"WHY YOU MATCHED",compatibilityWith:"Compatibility with"},chat:{title:"Messages",subtitle:"conversation",subtitlePlural:"conversations",noChats:"No conversations yet",noChatsDesc:"Match with pets to start chatting!",createProfile:"Create Your Pet Profile",createProfileDesc:"Create a pet profile to start chatting with matches!",selectConversation:"Select a conversation",selectConversationDesc:"Choose a match to start chatting",typeMessage:"Type a message...",send:"Send",stickers:"Stickers",typing:"typing...",online:"Online",offline:"Offline",react:"React",reply:"Reply",replyingTo:"Replying to",copy:"Copy",report:"Report",delete:"Delete",sent:"Sent",delivered:"Delivered",read:"Read",failed:"Failed",retry:"Retry"},profile:{title:"Your Profile",subtitle:"profile",subtitlePlural:"profiles",myPets:"Your Pets",addPet:"Add Pet",noPets:"No pets yet",noPetsDesc:"Get started by creating a profile for your pet. Share their personality, interests, and what they're looking for in a companion!",createProfile:"Create Your Pet's Profile",createProfileBtn:"Create Pet Profile",stats:"Your Stats",totalMatches:"Total Matches",totalSwipes:"Pets Viewed",successRate:"Success Rate",settings:"Settings",darkMode:"Dark Mode",language:"Language",yearsOld:"years old"},petProfile:{name:"Name",breed:"Breed",age:"Age",size:"Size",location:"Location",personality:"Personality",interests:"Interests",about:"About",photos:"Photos",owner:"Owner",distance:"Distance away",lookingFor:"Looking For",gender:"Gender",male:"Male",female:"Female",bio:"Bio"},filters:{title:"Discovery Filters",age:"Age Range",ageMin:"Minimum Age",ageMax:"Maximum Age",size:"Size",distance:"Maximum Distance",small:"Small",medium:"Medium",large:"Large",extraLarge:"Extra Large",apply:"Apply Filters",reset:"Reset",yearsOld:"years old",km:"km"},createPet:{title:"Create Pet Profile",editTitle:"Edit Pet Profile",uploadPhoto:"Upload Photo",analyzeWithAI:"Analyze Photo with AI",analyzing:"Analyzing...",basicInfo:"Basic Information",name:"Pet Name",namePlaceholder:"e.g., Max",breed:"Breed",breedPlaceholder:"e.g., Golden Retriever",age:"Age",ageYears:"years",gender:"Gender",male:"Male",female:"Female",size:"Size",small:"Small",medium:"Medium",large:"Large",extraLarge:"Extra Large",location:"Location",locationPlaceholder:"e.g., San Francisco, CA",bio:"Bio",bioPlaceholder:"Tell us about your pet...",personality:"Personality Traits",interests:"Interests",lookingFor:"Looking For",save:"Save Profile",cancel:"Cancel",fillRequired:"Please fill in all required fields",profileCreated:"Pet profile created successfully!",profileUpdated:"Pet profile updated successfully!"},welcome:{title:"Welcome to PawfectMatch",subtitle:"Smarter matches. Happier pets.",proof1:"Smart Matching",proof2:"Safe Chat",proof3:"Trusted Community",getStarted:"Get started",signIn:"I already have an account",explore:"Explore first",legal:"By continuing you agree to our",terms:"Terms",and:"and",privacy:"Privacy",offlineMessage:"You're offline. Reconnect to continue or explore later.",deepLinkMessage:"We'll take you to your link after sign-in."},auth:{signInTitle:"Welcome Back",signInSubtitle:"Sign in to continue to PawfectMatch",signIn:"Sign In",signUpTitle:"Create Account",signUpSubtitle:"Join PawfectMatch to find your pet's perfect companion",signUp:"Sign up",createAccount:"Create Account",email:"Email",emailPlaceholder:"you@example.com",emailRequired:"Email is required",emailInvalid:"Please enter a valid email",password:"Password",passwordPlaceholder:"",passwordRequired:"Password is required",passwordTooShort:"Password must be at least 6 characters",confirmPassword:"Confirm Password",confirmPasswordPlaceholder:"",confirmPasswordRequired:"Please confirm your password",passwordMismatch:"Passwords do not match",name:"Full Name",namePlaceholder:"John Doe",nameRequired:"Name is required",nameTooShort:"Name must be at least 2 characters",forgotPassword:"Forgot password?",forgotPasswordInfo:"Password reset link would be sent to your email",noAccount:"Don't have an account?",hasAccount:"Already have an account?",or:"or",agreeToTerms:"I agree to the",terms:"Terms of Service",and:"and",privacyPolicy:"Privacy Policy",termsRequired:"You must agree to the Terms and Privacy Policy",signInSuccess:"Welcome back!",signInError:"Failed to sign in. Please try again.",signUpSuccess:"Account created successfully!",signUpError:"Failed to create account. Please try again.",signInWithGoogle:"Continue with Google",signInWithApple:"Continue with Apple",ageVerificationTitle:"Age Verification",ageVerificationDesc:"You must be at least 18 years old to use PawfectMatch.",birthDateRequired:"Please enter your birth date",birthDate:"Date of Birth",country:"Country (Optional)",countryPlaceholder:"e.g., United States",ageTooYoung:"You must be at least 18 years old to use this app",verificationError:"Verification failed. Please try again.",verify:"Verify"},common:{loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",confirm:"Confirm",yes:"Yes",no:"No",ok:"OK",back:"Back",ago:"ago",just_now:"just now",minutes:"minutes",hours:"hours",days:"days",years:"years old",year_singular:"year old",km:"km",match:"Match!",itsAMatch:"It's a Match!",and:"and",areNowConnected:"are now connected!",posting:"Posting...",post:"Post",submitting:"Submitting..."},traits:{Playful:"Playful",Calm:"Calm",Energetic:"Energetic",Gentle:"Gentle",Social:"Social",Independent:"Independent",Affectionate:"Affectionate",Curious:"Curious",Protective:"Protective",Loyal:"Loyal",Friendly:"Friendly",Quiet:"Quiet"},interests:{Fetch:"Fetch",Swimming:"Swimming",Hiking:"Hiking",Running:"Running",Cuddling:"Cuddling",Treats:"Treats",Toys:"Toys",Parks:"Parks",Beach:"Beach","Car Rides":"Car Rides",Napping:"Napping",Exploring:"Exploring"},lookingFor:{Playdate:"Playdate","Walking Buddy":"Walking Buddy","Best Friend":"Best Friend","Training Partner":"Training Partner","Cuddle Companion":"Cuddle Companion","Adventure Buddy":"Adventure Buddy"},map:{interactiveMap:"Interactive Map",mapDescription:"Discover pet-friendly places, plan playdates, and find matches near you with our privacy-first location features.",searchPlaceholder:"Search places...",locationEnabled:"Location enabled",locationDenied:"Location access denied. Using default location.",approximateLocation:"Using approximate location",enablePrecisePrompt:"Enable precise location for live meet-ups and exact navigation",enable:"Enable",preciseEnabled:"Precise location active",preciseExpires:"Expires in",disable:"Disable",precisionEnabled:"Precise location enabled for 60 minutes",precisionDisabled:"Precise location disabled",precisionExpired:"Precise location sharing ended",nearbyPlaces:"Nearby Places",save:"Save",saved:"Saved",placeSaved:"Place saved",placeRemoved:"Place removed from saved",navigate:"Navigate",placesNearby:"Places",radiusKm:"km radius",viewMode:"View",cards:"Cards",mapView:"Map",planPlaydate:"Plan Playdate",choosePlace:"Choose a place",selectLocation:"Select Location",shareLocation:"Share location",openInMaps:"Open in Maps",locationShared:"Location shared",lostAndFound:"Lost & Found",reportLost:"Report Lost Pet",reportSighting:"Report Sighting",lastSeen:"Last seen",sightings:"Sightings",contactInfo:"Contact Information",preferredArea:"Preferred Area",updateArea:"Update Area",yourArea:"Your Area",selectYourArea:"Select your area to get better recommendations",categoryPark:"Park",categoryVet:"Vet",categoryGroomer:"Groomer",categoryCafe:"Pet Caf",categoryStore:"Pet Store",verified:"Verified",openNow:"Open Now",closed:"Closed",amenities:"Amenities",hours:"Hours",phone:"Phone",website:"Website",distance:"Distance",tapToSelect:"Tap to select",selected:"Selected",confirm:"Confirm",noPlacesFound:"No places found",tryDifferentSearch:"Try a different search or category",loading:"Loading map...",errorLoadingMap:"Error loading map",retryLocation:"Retry"},community:{title:"Community",feed:"Feed",forYou:"For You",following:"Following",createPost:"Create Post",whatsOnYourMind:"What's on your mind?",shareUpdate:"Share an update about your pet...",post:"Post",posting:"Posting...",postSuccess:"Post shared successfully!",postError:"Failed to share post",refreshed:"Feed refreshed!",refreshError:"Failed to refresh",addPhotos:"Add Photos",addVideo:"Add Video",tagPets:"Tag Pets",addLocation:"Add Location",visibility:"Visibility",public:"Public",matchesOnly:"Matches Only",private:"Private",showMore:"Show more",showLess:"Show less",like:"Like",liked:"Liked",comment:"Comment",comments:"Comments",reply:"Reply",replies:"Replies",share:"Share",save:"Save",saved:"Saved!",unsaved:"Removed from saved",linkCopied:"Link copied to clipboard",viewComments:"View comments",writeComment:"Write a comment...",postComment:"Post",deletePost:"Delete Post",editPost:"Edit Post",reportPost:"Report Post",deleteConfirm:"Are you sure you want to delete this post?",report:"Report",reportReason:"Reason for report",spam:"Spam",harassment:"Harassment",inappropriate:"Inappropriate Content",misleading:"Misleading",violence:"Violence",hateSpeech:"Hate Speech",copyright:"Copyright Violation",other:"Other",reportDescription:"Additional details (optional)",reportSubmit:"Submit Report",reportSuccess:"Report submitted. Thank you!",trending:"Trending",explore:"Explore",topThisWeek:"Top This Week",nearMe:"Near Me",savedPosts:"Saved Posts",myPosts:"My Posts",noPosts:"No posts yet",noPostsDesc:"Be the first to share something!",noSavedPosts:"No saved posts",noSavedPostsDesc:"Save posts to view them here later",follow:"Follow",followingUser:"Following",unfollow:"Unfollow",followers:"Followers",viewsCount:"{count} views",likesCount:"{count} likes",commentsCount:"{count} comments",draft:"Draft",drafts:"Drafts",saveDraft:"Save Draft",draftSaved:"Draft saved",loadMore:"Load More",refreshFeed:"Refresh Feed",newPosts:"New posts available",offline:"You're offline. Posts will be uploaded when you reconnect.",uploading:"Uploading...",posted:"Posted",justNow:"Just now",commentsLoadError:"Failed to load comments",commentPosted:"Comment posted!",commentError:"Failed to post comment",noComments:"No comments yet",beFirst:"Be the first to share your thoughts!",replyingTo:"Replying to",replyPlaceholder:"Write a reply...",commentPlaceholder:"Write a comment...",author:"Author",postPlaceholder:"Share an update about your pet...",postCreated:"Post created successfully!",postFailed:"Failed to create post",tags:"Tags",addTag:"Add Tag",maxTagsReached:"Maximum number of tags reached",maxImagesReached:"Maximum number of images reached",imageAdded:"Image added",charsRemaining:"characters remaining",visibilityPublic:"Public",visibilityMatches:"Matches Only",visibilityPrivate:"Private",noFollowingPosts:"No posts from followed users",endOfFeed:"End of feed",mediaNotAvailable:"Media not available",tapToZoom:"Tap to zoom",tapToZoomOut:"Tap to zoom out",downloadError:"Download error",downloaded:"Downloaded"},adoption:{title:"Adoption",subtitle:"Find your perfect companion",available:"Available",pending:"Pending",adopted:"Adopted",onHold:"On Hold",vaccinated:"Vaccinated",spayedNeutered:"Spayed/Neutered",goodWithKids:"Good with kids",goodWithPets:"Good with pets",adoptionFee:"Adoption Fee",viewDetails:"View Details",about:"About",details:"Details",personality:"Personality",specialNeeds:"Special Needs",shelter:"Shelter Information",applyToAdopt:"Apply to Adopt",notAvailable:"Not Available",yes:"Yes",no:"No",age:"Age",size:"Size",energy:"Energy",gender:"Gender",noProfiles:"No pets available for adoption",noProfilesDesc:"Check back soon for pets looking for their forever homes.",endOfList:"You've seen all available pets! ",applicationDesc:"Fill out this application to express your interest in adopting. The shelter will review and contact you.",contactInfo:"Contact Information",fullName:"Full Name",email:"Email",phone:"Phone Number",householdInfo:"Household Information",householdType:"Household Type",house:"House",apartment:"Apartment",condo:"Condo",other:"Other",hasYard:"I have a yard",hasOtherPets:"I have other pets",describeOtherPets:"Describe your other pets...",hasChildren:"I have children",childrenAges:"Ages of children...",additionalInfo:"Additional Information",petExperience:"Pet ownership experience",experiencePlaceholder:"Tell us about your experience with pets...",whyAdopt:"Why do you want to adopt this pet?",reasonPlaceholder:"Tell us why you want to adopt...",submitApplication:"Submit Application",applicationSubmitted:"Application Submitted!",applicationSubmittedDesc:"The shelter will review your application and contact you soon.",applicationFailed:"Failed to submit application. Please try again.",fillRequired:"Please fill in all required fields",pendingReview:"Pending Review",withdrawn:"Withdrawn",myListings:"My Listings",createListing:"Create Listing",editListing:"Edit Listing",adoptable:"Adoptable",filterAdoptable:"Show Adoptable Pets",myApplications:"My Applications",applicationStatus:"Application Status",submitted:"Submitted",underReview:"Under Review",accepted:"Accepted",rejected:"Rejected",homeCheckConsent:"I consent to a home visit",message:"Message",messagePlaceholder:"Tell the owner why you want to adopt...",requirements:"Requirements",vetDocuments:"Veterinary Documents",microchipped:"Microchipped",goodWithCats:"Good with cats",goodWithDogs:"Good with dogs",reasonForAdoption:"Reason for Adoption",apply:"Apply",applySuccess:"Application submitted successfully!",applySuccessDesc:"The owner will review your application and contact you.",noFee:"No fee",fee:"Fee"},lostFound:{title:"Lost & Found",alerts:"alerts",allTime:"All time",last24h:"Last 24h",last7d:"Last 7 days",last30d:"Last 30 days",sightingReported:"Sighting reported",subtitle:"Help reunite pets with their families",reportLost:"Report Lost Pet",reportSighting:"Report Sighting",activeAlerts:"Active Alerts",myAlerts:"My Alerts",lastSeen:"Last Seen",when:"When",where:"Where",reward:"Reward",contact:"Contact",sightings:"Sightings",noSightings:"No sightings yet",reportSightingDesc:"Help reunite this pet with their family",sightingSubmitted:"Sighting reported!",sightingSubmittedDesc:"The owner has been notified.",alertCreated:"Alert created!",alertCreatedDesc:"Your alert is now active and visible to nearby users.",petSummary:"Pet Summary",name:"Name",species:"Species",breed:"Breed",color:"Color",size:"Size",age:"Age",gender:"Gender",distinguishingFeatures:"Distinguishing Features",microchipId:"Microchip ID",description:"Description",descriptionPlaceholder:"Describe the pet and any special details...",location:"Location",address:"Address (blurred)",radius:"Search Radius",radiusKm:"km",photos:"Photos",addPhotos:"Add Photos",contactMask:"Contact (masked)",found:"Found",markFound:"Mark as Found",archived:"Archived",archive:"Archive",active:"Active",noAlerts:"No active alerts",noAlertsDesc:"Check back for lost pets in your area.",nearby:"Nearby Alerts",viewAlert:"View Alert",createAlert:"Create Alert",editAlert:"Edit Alert",alertStatus:"Alert Status",foundAt:"Found At",archivedAt:"Archived At",browseAll:"Browse All",favorites:"Favorites",noFavoritesYet:"No Favorites Yet",noFavoritesDesc:"Start adding alerts to your favorites to see them here.",noResultsFound:"No Results Found",noResultsDesc:"Try adjusting your search terms.",noActiveAlerts:"No Active Alerts",noActiveAlertsDesc:"Check back soon for lost pet alerts in your area.",searchPlaceholder:"Search by pet name, breed, location...",submitSighting:"Submit Sighting Report",sightingDate:"Date of Sighting",sightingTime:"Time of Sighting",sightingDescription:"Description",sightingDescriptionPlaceholder:"Describe what you saw, the pet's condition, any distinctive features...",yourContactInfo:"Your Contact Information",sightingPhotos:"Photos (Optional)",sightingPhotosDesc:"Upload photos of the sighting",sightingPhotosHint:"Up to 3 photos, max 5MB each"},live:{title:"Go Live",subtitle:"Share moments with the community",goLive:"Go Live",liveNow:"Live Now",joinStream:"Join Stream",leaveStream:"Leave Stream",endStream:"End Stream",viewers:"Viewers",viewer:"viewer",viewersPlural:"viewers",reactions:"Reactions",chat:"Chat",sendMessage:"Send a message...",sendReaction:"Send Reaction",emojiHeart:"",emojiClap:"",emojiFire:"",emojiSmile:"",emojiParty:"",hostControls:"Host Controls",mute:"Mute",unmute:"Unmute",flipCamera:"Flip Camera",banUser:"Ban User",allowChat:"Allow Chat",maxDuration:"Max Duration",minutes:"minutes",category:"Category",general:"General",training:"Training",health:"Health",entertainment:"Entertainment",education:"Education",adoption:"Adoption",community:"Community",noStreams:"No active streams",noStreamsDesc:"Be the first to go live!",ended:"Ended",scheduled:"Scheduled",live:"Live",cancelled:"Cancelled",streamTitle:"Stream Title",titlePlaceholder:"What are you sharing today?",streamDescription:"Description",descriptionPlaceholder:"Tell viewers what to expect...",streamStarted:"Stream started!",streamEnded:"Stream ended",streamEndedDesc:"Thank you for sharing with the community",vodAvailable:"Recording available",streamCreated:"Stream created successfully!",streamFailed:"Failed to create stream",streamTitleRequired:"Please enter a stream title",goingLive:"Going live!",streamTips:"Live Streaming Tips",streamTipsStable:"Make sure you have a stable internet connection",streamTipsLighting:"Choose a well-lit environment",streamTipsAudio:"Test your audio before going live",streamTipsInteract:"Interact with your viewers in real-time",streamTipsGuidelines:"Keep content family-friendly and follow community guidelines",watchVod:"Watch Recording",streamTitlePlaceholder:"e.g., Training my Golden Retriever!",streamDescriptionPlaceholder:"Tell viewers what your stream is about...",tags:"Tags (Optional)",addTag:"Add a tag...",maxTags:"5 tags",categoryLabel:"Category",maxDurationLabel:"Max Duration",allowChatLabel:"Allow viewers to chat",streamCreatedSuccess:"Stream created successfully!",streamEndedSuccess:"Stream ended",failedToSendMessage:"Failed to send message",failedToEndStream:"Failed to end stream",playdate:"Playdate",grooming:"Grooming",petCare:"Pet Care",qa:"Q&A",other:"Other"},photoModeration:{title:"Photo Moderation",queue:"Moderation Queue",pending:"Pending",scanning:"Scanning",approved:"Approved",rejected:"Rejected",heldForKYC:"Held for KYC",quarantined:"Quarantined",submitPhoto:"Submit Photo for Moderation",photoSubmitted:"Photo submitted for moderation",photoScanning:"Photo is being scanned",photoApproved:"Photo approved and visible",photoRejected:"Photo rejected",photoHeldForKYC:"Photo held pending KYC verification",photoQuarantined:"Photo quarantined for review",moderationStatus:"Moderation Status",uploadDate:"Upload Date",moderatedBy:"Moderated By",rejectionReason:"Rejection Reason",nsfwScore:"NSFW Score",requiresReview:"Requires Manual Review",approvePhoto:"Approve Photo",rejectPhoto:"Reject Photo",quarantinePhoto:"Quarantine Photo",releaseFromQuarantine:"Release from Quarantine",holdForKYC:"Hold for KYC",noPhotosPending:"No photos pending moderation",noPhotosQuarantined:"No photos in quarantine",queueStats:"Queue Statistics",totalPending:"Total Pending",totalScanning:"Total Scanning",totalHeldForKYC:"Total Held for KYC",totalQuarantined:"Total Quarantined",photoNotVisible:"Photo is not visible until approved",photoWaitingKYC:"Photo waiting for KYC verification",auditLog:"Audit Log",actionPerformed:"Action Performed",previousStatus:"Previous Status",newStatus:"New Status",performedAt:"Performed At",batchProcessing:"Batch Processing",assignBatch:"Assign Batch",processBatch:"Process Batch",batchAssigned:"Batch assigned successfully",batchProcessed:"Batch processed successfully"}},bg:{app:{title:"PawfectMatch",tagline:"AI    "},nav:{discover:"",matches:"",map:"",chat:"",community:"",adoption:"","lost-found":"",profile:""},discover:{title:"   ",subtitle:"   ",createProfile:"    ",createProfileDesc:" ,         ",noMore:"    ",noMoreDesc:" -    !",noMoreDescAdjust:"    ,      !",filters:"",analyzePhoto:"AI   ",compatibility:"",viewDetails:" ",skip:"",like:"",pass:"",match:"",about:"",whyMatch:"   ",personality:"",swipeHintPass:"",swipeHintLike:""},matches:{title:" ",subtitle:" ",subtitlePlural:"  ",noMatches:"   ",noMatchesDesc:"     ,     !",startChat:" ",viewProfile:" ",compatibility:"",whyMatched:"  ",compatibilityWith:" "},chat:{title:"",subtitle:"",subtitlePlural:"",noChats:"   ",noChatsDesc:" ,    !",createProfile:"    ",createProfileDesc:"   ,       !",selectConversation:" ",selectConversationDesc:" ,    ",typeMessage:" ...",send:"",stickers:"",typing:"...",online:"",offline:"",react:"",reply:"",replyingTo:" ",copy:"",report:"",delete:"",sent:"",delivered:"",read:"",failed:"",retry:""},profile:{title:" ",subtitle:"",subtitlePlural:"",myPets:" ",addPet:" ",noPets:"   ",noPetsDesc:",      .  ,      !",createProfile:"    ",createProfileBtn:"   ",stats:" ",totalMatches:" ",totalSwipes:" ",successRate:"  ",settings:"",darkMode:" ",language:"",yearsOld:""},petProfile:{name:"",breed:"",age:"",size:"",location:"",personality:"",interests:"",about:"",photos:"",owner:"",distance:"",lookingFor:"",gender:"",male:"",female:"",bio:""},filters:{title:"  ",age:" ",ageMin:" ",ageMax:" ",size:"",distance:" ",small:"",medium:"",large:"",extraLarge:" ",apply:" ",reset:"",yearsOld:"",km:""},createPet:{title:"   ",editTitle:"   ",uploadPhoto:" ",analyzeWithAI:"   AI",analyzing:"...",basicInfo:" ",name:"  ",namePlaceholder:"., ",breed:"",breedPlaceholder:".,  ",age:"",ageYears:"",gender:"",male:"",female:"",size:"",small:"",medium:"",large:"",extraLarge:" ",location:"",locationPlaceholder:"., , ",bio:"",bioPlaceholder:"    ...",personality:"  ",interests:"",lookingFor:"",save:" ",cancel:"",fillRequired:",    ",profileCreated:"     !",profileUpdated:"     !"},welcome:{title:"   PawfectMatch",subtitle:"- . - .",proof1:" ",proof2:" ",proof3:" ",getStarted:"",signIn:"  ",explore:" ",legal:",  ",terms:" ",and:"",privacy:"  ",offlineMessage:" .  ,   ,   -.",deepLinkMessage:"       ."},auth:{signInTitle:"  ",signInSubtitle:",     PawfectMatch",signIn:"",signUpTitle:" ",signUpSubtitle:"   PawfectMatch,        ",signUp:"",createAccount:" ",email:"",emailPlaceholder:"@.com",emailRequired:"  ",emailInvalid:",   ",password:"",passwordPlaceholder:"",passwordRequired:"  ",passwordTooShort:"     6 ",confirmPassword:" ",confirmPasswordPlaceholder:"",confirmPasswordRequired:",   ",passwordMismatch:"  ",name:" ",namePlaceholder:" ",nameRequired:"  ",nameTooShort:"     2 ",forgotPassword:" ?",forgotPasswordInfo:"          ",noAccount:" ?",hasAccount:"  ?",or:"",agreeToTerms:"",terms:" ",and:"",privacyPolicy:"  ",termsRequired:"        ",signInSuccess:"  !",signInError:" . ,  .",signUpSuccess:"   !",signUpError:"   . ,  .",signInWithGoogle:"  Google",signInWithApple:"  Apple",ageVerificationTitle:"  ",ageVerificationDesc:"    - 18 ,    PawfectMatch.",birthDateRequired:",     ",birthDate:"  ",country:" ( )",countryPlaceholder:"., ",ageTooYoung:"    - 18 ,     ",verificationError:" . ,  .",verify:""},common:{loading:"...",error:"",save:"",cancel:"",delete:"",edit:"",close:"",confirm:"",yes:"",no:"",ok:"",back:"",ago:"",just_now:" ",minutes:"",hours:"",days:"",years:"",year_singular:"",km:"",match:"!",itsAMatch:" !",and:"",areNowConnected:"  !",posting:"...",post:"",submitting:"..."},traits:{Playful:"",Calm:"",Energetic:"",Gentle:"",Social:"",Independent:"",Affectionate:"",Curious:"",Protective:" ",Loyal:"",Friendly:" ",Quiet:""},interests:{Fetch:"",Swimming:"",Hiking:"",Running:"",Cuddling:"",Treats:"",Toys:"",Parks:"",Beach:"","Car Rides":"  ",Napping:"",Exploring:""},lookingFor:{Playdate:"  ","Walking Buddy":"  ","Best Friend":"- ","Training Partner":"  ","Cuddle Companion":"  ","Adventure Buddy":"  "},map:{interactiveMap:" ",mapDescription:" ,     ,                    .",searchPlaceholder:"  ...",locationEnabled:"  ",locationDenied:"    .     .",approximateLocation:"   ",enablePrecisePrompt:"         ",enable:"",preciseEnabled:"   ",preciseExpires:" ",disable:"",precisionEnabled:"    60 ",precisionDisabled:"   ",precisionExpired:"    ",nearbyPlaces:" ",save:"",saved:"",placeSaved:"  ",placeRemoved:"    ",navigate:"",placesNearby:"",radiusKm:" ",viewMode:"",cards:"",mapView:"",planPlaydate:" ",choosePlace:"  ",selectLocation:"  ",shareLocation:" ",openInMaps:"  ",locationShared:"  ",lostAndFound:"  ",reportLost:"  ",reportSighting:" ",lastSeen:" ",sightings:"",contactInfo:"  ",preferredArea:" ",updateArea:" ",yourArea:" ",selectYourArea:"  ,    - ",categoryPark:"",categoryVet:"",categoryGroomer:"",categoryCafe:"  ",categoryStore:"",verified:"",openNow:" ",closed:"",amenities:"",hours:" ",phone:"",website:"",distance:"",tapToSelect:",   ",selected:"",confirm:"",noPlacesFound:"   ",tryDifferentSearch:"    ",loading:"  ...",errorLoadingMap:"    ",retryLocation:" "},community:{title:"",feed:"",forYou:" ",following:"",createPost:" ",whatsOnYourMind:" ?",shareUpdate:"    ...",post:"",posting:"...",postSuccess:"   !",postError:"   ",refreshed:"  !",refreshError:" ",addPhotos:" ",addVideo:" ",tagPets:" ",addLocation:" ",visibility:"",public:"",matchesOnly:" ",private:"",showMore:" ",showLess:" -",like:"",liked:"",comment:"",comments:"",reply:"",replies:"",share:"",save:"",saved:"!",unsaved:"  ",linkCopied:"    ",viewComments:" ",writeComment:" ...",postComment:"",deletePost:" ",editPost:" ",reportPost:" ",deleteConfirm:"  ,      ?",report:"",reportReason:"  ",spam:"",harassment:"",inappropriate:" ",misleading:"",violence:"",hateSpeech:"  ",copyright:"   ",other:"",reportDescription:"  ()",reportSubmit:" ",reportSuccess:"  .  !",trending:"",explore:"",topThisWeek:"  ",nearMe:"   ",savedPosts:" ",myPosts:" ",noPosts:"   ",noPostsDesc:" ,   !",noSavedPosts:"  ",noSavedPostsDesc:" ,      -",follow:"",followingUser:"",unfollow:" ",followers:"",viewsCount:"{count} ",likesCount:"{count} ",commentsCount:"{count} ",draft:"",drafts:"",saveDraft:" ",draftSaved:"  ",loadMore:" ",refreshFeed:" ",newPosts:"   ",offline:" .    ,    .",uploading:"...",posted:"",justNow:" ",commentsLoadError:"   ",commentPosted:"  !",commentError:"   ",noComments:"   ",beFirst:" ,    !",replyingTo:" ",replyPlaceholder:" ...",commentPlaceholder:" ...",author:"",postPlaceholder:"    ...",postCreated:"   !",postFailed:"   ",tags:"",addTag:" ",maxTagsReached:"    ",maxImagesReached:"    ",imageAdded:"  ",charsRemaining:" ",visibilityPublic:"",visibilityMatches:" ",visibilityPrivate:"",noFollowingPosts:"   ",endOfFeed:"  ",mediaNotAvailable:"   ",tapToZoom:"  ",tapToZoomOut:"  ",downloadError:"  ",downloaded:""},adoption:{title:"",subtitle:"   ",available:"",pending:" ",adopted:"",onHold:"",vaccinated:"",spayedNeutered:"/",goodWithKids:"  ",goodWithPets:"   ",adoptionFee:"  ",viewDetails:" ",about:"",details:"",personality:"",specialNeeds:" ",shelter:"  ",applyToAdopt:"  ",notAvailable:"  ",yes:"",no:"",age:"",size:"",energy:"",gender:"",noProfiles:"    ",noProfilesDesc:"   ,    .",endOfList:"   ! ",applicationDesc:"  ,      .         .",contactInfo:"  ",fullName:" ",email:"",phone:" ",householdInfo:"  ",householdType:" ",house:"",apartment:"",condo:"",other:"",hasYard:" ",hasOtherPets:"  ",describeOtherPets:"   ...",hasChildren:" ",childrenAges:"  ...",additionalInfo:" ",petExperience:"   ",experiencePlaceholder:"      ...",whyAdopt:"     ?",reasonPlaceholder:"     ...",submitApplication:" ",applicationSubmitted:"  !",applicationSubmittedDesc:"           .",applicationFailed:"   . ,  .",fillRequired:",    ",pendingReview:"   ",withdrawn:"",myListings:" ",createListing:" ",editListing:" ",adoptable:" ",filterAdoptable:"   ",myApplications:" ",applicationStatus:"  ",submitted:"",underReview:" ",accepted:"",rejected:"",homeCheckConsent:"    ",message:"",messagePlaceholder:"      ...",requirements:"",vetDocuments:" ",microchipped:" ",goodWithCats:"  ",goodWithDogs:"  ",reasonForAdoption:"  ",apply:"",applySuccess:"   !",applySuccessDesc:"          .",noFee:" ",fee:""},lostFound:{title:"  ",subtitle:"       ",reportLost:"  ",reportSighting:" ",activeAlerts:" ",myAlerts:" ",lastSeen:" ",when:"",where:"",reward:"",contact:"",sightings:"",noSightings:"   ",reportSightingDesc:"        ",sightingSubmitted:"  !",sightingSubmittedDesc:"  .",alertCreated:"  !",alertCreatedDesc:"         .",petSummary:"  ",name:"",species:"",breed:"",color:"",size:"",age:"",gender:"",distinguishingFeatures:" ",microchipId:"ID  ",description:"",descriptionPlaceholder:"     ...",location:"",address:" ()",radius:"  ",radiusKm:"",photos:"",addPhotos:" ",contactMask:" ()",found:"",markFound:"  ",archived:"",archive:"",active:"",noAlerts:"  ",noAlertsDesc:"      .",nearby:" ",viewAlert:" ",createAlert:" ",editAlert:" ",alertStatus:"  ",foundAt:" ",archivedAt:" ",browseAll:" ",favorites:"",noFavoritesYet:"   ",noFavoritesDesc:"      ,     .",noResultsFound:"  ",noResultsDesc:"     .",noActiveAlerts:"  ",noActiveAlertsDesc:"         .",searchPlaceholder:"    , , ...",submitSighting:"   ",sightingDate:"  ",sightingTime:"  ",sightingDescription:"",sightingDescriptionPlaceholder:"  ,   ,   ...",yourContactInfo:"  ",sightingPhotos:" ( )",sightingPhotosDesc:"   ",sightingPhotosHint:" 3 ,  5MB "},live:{title:" ",subtitle:"   ",goLive:"  ",liveNow:"  ",joinStream:" ",leaveStream:"",endStream:"",viewers:"",viewer:"",viewersPlural:"",reactions:"",chat:"",sendMessage:" ...",sendReaction:" ",emojiHeart:"",emojiClap:"",emojiFire:"",emojiSmile:"",emojiParty:"",hostControls:"  ",mute:"",unmute:" ",flipCamera:" ",banUser:" ",allowChat:" ",maxDuration:". ",minutes:"",category:"",general:"",training:"",health:"",entertainment:"",education:"",adoption:"",community:"",noStreams:"  ",noStreamsDesc:" ,    !",ended:"",scheduled:"",live:" ",cancelled:"",streamTitle:"  ",titlePlaceholder:"  ?",streamDescription:"",descriptionPlaceholder:"     ...",streamStarted:" !",streamEnded:" ",streamEndedDesc:" ,    ",vodAvailable:"  ",watchVod:" ",streamCreated:"   !",streamFailed:"   ",streamTitleRequired:",    ",goingLive:"  !",streamTips:"    ",streamTipsStable:" ,     ",streamTipsLighting:"   ",streamTipsAudio:"       ",streamTipsInteract:"      ",streamTipsGuidelines:"         ",streamTitlePlaceholder:".,     !",streamDescriptionPlaceholder:"    ...",tags:" ( )",addTag:" ...",maxTags:"5 ",categoryLabel:"",maxDurationLabel:". ",allowChatLabel:"    ",streamCreatedSuccess:"   !",streamEndedSuccess:" ",failedToSendMessage:"   ",failedToEndStream:"   ",playdate:"",grooming:"",petCare:"   ",qa:"  ",other:""},photoModeration:{title:"  ",queue:"  ",pending:"",scanning:"",approved:"",rejected:"",heldForKYC:"  KYC",quarantined:"",submitPhoto:"   ",photoSubmitted:"    ",photoScanning:"  ",photoApproved:"    ",photoRejected:"  ",photoHeldForKYC:"      KYC",photoQuarantined:"    ",moderationStatus:"  ",uploadDate:"  ",moderatedBy:" ",rejectionReason:"  ",nsfwScore:"NSFW ",requiresReview:"  ",approvePhoto:" ",rejectPhoto:" ",quarantinePhoto:" ",releaseFromQuarantine:"  ",holdForKYC:"  KYC",noPhotosPending:"     ",noPhotosQuarantined:"   ",queueStats:"  ",totalPending:"  ",totalScanning:" ",totalHeldForKYC:"   KYC",totalQuarantined:" ",photoNotVisible:"       ",photoWaitingKYC:"    KYC",auditLog:" ",actionPerformed:" ",previousStatus:" ",newStatus:" ",performedAt:" ",batchProcessing:" ",assignBatch:" ",processBatch:" ",batchAssigned:"   ",batchProcessed:"   "}}};function Qs(){const[e,t]=Gs("app-language","en"),s=Hs[e||"en"];return{language:e||"en",setLanguage:t,toggleLanguage:async()=>{await t(e=>"en"===(e||"en")?"bg":"en")},t:s}}const Xs=s.createContext(void 0);function Js({children:e}){const t=function(){const[e,t]=Gs("app-theme-v2","light"),[a,r]=Gs("app-theme-preset-v1","default-light");return s.useEffect(()=>{const t=document.documentElement;if(a){const e=Wt(a);if(e)return void Ht(e)}"dark"===e?t.classList.add("dark"):t.classList.remove("dark")},[e,a]),{theme:e||"light",setTheme:async e=>{await t(t=>{const s="function"==typeof e?e(t||"light"):e;return r("dark"===s?"default-dark":"default-light"),s})},toggleTheme:async()=>{await t(e=>{const t="dark"===(e||"light")?"light":"dark";return r("dark"===t?"default-dark":"default-light"),t})},themePreset:a||"default-light",setThemePreset:async e=>{await r(s=>{const a="function"==typeof e?e(s||"default-light"):e,r=Wt(a);return r&&t(r.mode),a})}}}(),r=Qs();return a.jsx(Xs.Provider,{value:{...t,...r},children:e})}function Zs(){const e=s.useContext(Xs);if(void 0===e)throw new Error("useApp must be used within an AppProvider");return e}const ea={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_TIMEOUT:"30000",VITE_API_URL:"http://localhost:3000/api",VITE_APP_VERSION:"1.0.0",VITE_CORS_ORIGIN:"",VITE_CSP_ENABLED:"true",VITE_ENABLE_KYC:"true",VITE_ENABLE_LIVE_STREAMING:"true",VITE_ENABLE_PAYMENTS:"true",VITE_ENVIRONMENT:"development",VITE_JWT_EXPIRY:"7d",VITE_JWT_SECRET:"development-secret-key-at-least-32-characters-long",VITE_MAPBOX_TOKEN:"pk.development-token",VITE_REFRESH_TOKEN_EXPIRY:"30d",VITE_SENTRY_DSN:"",VITE_SENTRY_TRACES_SAMPLE_RATE:"0.1",VITE_STRIPE_PUBLIC_KEY:"pk_test_development",VITE_USE_MOCKS:"false",VITE_WS_URL:"ws://localhost:3000"},ta=_t("env"),sa=vt({VITE_API_URL:xt().url("Invalid URL").superRefine((e,t)=>{e.startsWith("https://")||t.addIssue({code:ft.custom,message:"Must be https:// in production"})}),VITE_WS_URL:xt().url("Invalid WebSocket URL").superRefine((e,t)=>{e.startsWith("wss://")||t.addIssue({code:ft.custom,message:"Must be wss:// in production"})}).optional(),VITE_API_TIMEOUT:yt.number().positive().default(3e4),VITE_USE_MOCKS:jt(["true","false"]).default("false"),VITE_ENABLE_MAPS:yt.boolean().default(!1),VITE_MAPBOX_TOKEN:xt().optional()}).superRefine((e,t)=>{e.VITE_ENABLE_MAPS&&!e.VITE_MAPBOX_TOKEN&&t.addIssue({code:ft.custom,message:"VITE_MAPBOX_TOKEN is required in production when VITE_ENABLE_MAPS=true.",path:["VITE_MAPBOX_TOKEN"]})}),aa=sa.safeParse(ea);if(!aa.success)throw ta.error("Invalid web env",new Error("Web environment validation failed"),{errors:aa.error.flatten()}),new Error("Web environment validation failed.");const ra=sa.parse(ea),ia=ra;ra.VITE_USE_MOCKS,Boolean(ra.VITE_ENABLE_MAPS);const na=_t("Retry");function oa(e){return e instanceof Error?e:"object"==typeof e&&null!==e&&"message"in e?new Error(String(e.message)):new Error("Retry operation failed")}const la={AUTH:{LOGIN:"/auth/login",REGISTER:"/auth/register",LOGOUT:"/auth/logout",REFRESH:"/auth/refresh",ME:"/auth/me",FORGOT_PASSWORD:"/auth/forgot-password",RESET_PASSWORD:"/auth/reset-password",VERIFY_EMAIL:"/auth/verify-email"},USERS:{PROFILE:"/users/profile",UPDATE_PROFILE:"/users/profile",UPLOAD_AVATAR:"/users/avatar",PREFERENCES:"/users/preferences",NOTIFICATIONS:"/users/notifications",SETTINGS:"/users/settings",LOCATION:"/users/location",LOCATION_NEARBY:"/users/location/nearby"},ADOPTION:{LISTINGS:"/adoption/listings",CREATE_LISTING:"/adoption/listings",GET_LISTING:e=>`/adoption/listings/${e}`,UPDATE_LISTING:e=>`/adoption/listings/${e}`,DELETE_LISTING:e=>`/adoption/listings/${e}`,APPLY:"/adoption/applications",APPLICATIONS:"/adoption/applications",UPDATE_APPLICATION:e=>`/adoption/applications/${e}`},MATCHING:{PREFERENCES:"/matching/preferences",DISCOVER:"/matching/discover",SWIPE:"/matching/swipe",MATCHES:"/matching/matches",SCORE:"/matching/score"},PAYMENTS:{PRODUCTS:"/payments/products",CREATE_INTENT:"/payments/create-intent",CONFIRM_PAYMENT:"/payments/confirm",SUBSCRIPTIONS:"/payments/subscriptions",CANCEL_SUBSCRIPTION:e=>`/payments/subscriptions/${e}`,ENTITLEMENTS:"/payments/entitlements",UPDATE_ENTITLEMENTS:"/payments/entitlements",SUBSCRIPTION:"/payments/subscription",CREATE_SUBSCRIPTION:"/payments/subscription",UPDATE_SUBSCRIPTION:e=>`/payments/subscription/${e}`,CONSUMABLES:"/payments/consumables"},UPLOADS:{SIGN_URL:"/uploads/sign-url",COMPLETE:"/uploads/complete",DELETE:e=>`/uploads/${e}`},CHAT:{CONVERSATIONS:"/chat/conversations",CONVERSATION:e=>`/chat/conversations/${e}`,MESSAGES:e=>`/chat/conversations/${e}/messages`,SEND_MESSAGE:e=>`/chat/conversations/${e}/messages`,MARK_READ:e=>`/chat/conversations/${e}/read`},NOTIFICATIONS:{LIST:"/notifications",MARK_READ:e=>`/notifications/${e}/read`,MARK_ALL_READ:"/notifications/read-all",SETTINGS:"/notifications/settings",GEOFENCE:"/notifications/geofence",USER_LOCATIONS:"/notifications/user-locations"},COMMUNITY:{POSTS:"/community/posts",POST:e=>`/community/posts/${e}`,CREATE_POST:"/community/posts",LIKE_POST:e=>`/community/posts/${e}/like`,COMMENT:e=>`/community/posts/${e}/comments`,LIKE_COMMENT:(e,t)=>`/community/posts/${e}/comments/${t}/like`},ADMIN:{DASHBOARD:"/admin/dashboard",USERS:"/admin/users",USER:e=>`/admin/users/${e}`,RESET_PASSWORD:e=>`/admin/users/${e}/reset-password`,MODERATION_QUEUE:"/admin/moderation",ANALYTICS:"/admin/analytics",SETTINGS:"/admin/settings",CONFIG_BROADCAST:"/admin/config/broadcast",CONFIG_HISTORY:"/admin/config/history",SUPPORT_TICKETS:"/admin/support/tickets",SUPPORT_TICKET:e=>`/admin/support/tickets/${e}`,SUPPORT_TICKET_MESSAGES:e=>`/admin/support/tickets/${e}/messages`,SUPPORT_TICKET_STATUS:e=>`/admin/support/tickets/${e}/status`,SUPPORT_TICKET_ASSIGN:e=>`/admin/support/tickets/${e}/assign`,SUPPORT_STATS:"/admin/support/stats"},KYC:{STATUS:"/kyc/status",START_VERIFICATION:"/kyc/start",SUBMIT_DOCUMENTS:"/kyc/documents",GET_VERIFICATION:e=>`/kyc/verifications/${e}`},GDPR:{EXPORT:"/api/gdpr/export",DELETE:"/api/gdpr/delete",CONSENT:"/api/gdpr/consent",CONSENT_STATUS:e=>`/api/gdpr/consent?userId=${e}`,UPDATE_CONSENT:"/api/gdpr/consent"},BLOCKING:{BLOCK:"/blocking/block",BLOCK_USER:"/blocking/block-user",UNBLOCK:(e,t)=>`/blocking/unblock/${e}/${t}`,UNBLOCK_USER:(e,t)=>`/blocking/unblock-user/${e}/${t}`,STATUS:(e,t)=>`/blocking/status/${e}/${t}`,BLOCKED_PETS:e=>`/blocking/pets/${e}/blocked`,BLOCKED_USERS:e=>`/blocking/users/${e}/blocked`},LOST_FOUND:{CREATE_ALERT:"/alerts/lost",QUERY_ALERTS:"/alerts/lost",GET_ALERT:e=>`/alerts/lost/${e}`,UPDATE_STATUS:e=>`/alerts/lost/${e}/status`,INCREMENT_VIEW:e=>`/alerts/lost/${e}/increment-view`,CREATE_SIGHTING:"/alerts/sightings",GET_SIGHTINGS:"/alerts/sightings"},STREAMING:{CREATE_ROOM:"/live/createRoom",END_ROOM:"/live/endRoom",QUERY_ACTIVE:"/live/active",GET_STREAM:e=>`/live/${e}`,JOIN_STREAM:e=>`/live/${e}/join`,LEAVE_STREAM:e=>`/live/${e}/leave`,SEND_REACTION:e=>`/live/${e}/react`,SEND_CHAT:e=>`/live/${e}/chat`,GET_CHAT:e=>`/live/${e}/chat`,REPORT_STREAM:e=>`/live/${e}/report`},SYNC:{QUEUE:"/sync/queue",LAST_SYNC_TIME:"/sync/last-sync-time",SYNC_ACTION:"/sync/actions"},PHOTOS:{LIST:"/photos",GET:e=>`/photos/${e}`,CREATE:"/photos",CHECK_DUPLICATE:"/photos/check-duplicate",BY_STATUS:"/photos",BY_OWNER:"/photos",PUBLIC:"/photos/public",RELEASE_HELD:"/photos/release-held"},MODERATION:{POLICY:"/admin/moderation/policy",TASKS:"/admin/moderation/tasks",TASK:e=>`/admin/moderation/tasks/${e}`,TAKE_TASK:e=>`/admin/moderation/tasks/${e}/take`,METRICS:"/admin/moderation/metrics"},QUOTAS:{GET:e=>`/users/${e}/quota`,INCREMENT:e=>`/users/${e}/quota/increment`},AUDIT:{LOGS:"/admin/audit-logs",CREATE:"/admin/audit-logs"},EVENTS:{CREATE:"/events"},IMAGES:{UPLOAD:"/uploads/images"}};function ca(e,t){if(!t)return e;const s=new URL(e,"http://dummy-base");return Object.entries(t).forEach(([e,t])=>{null!=t&&(Array.isArray(t)?t.forEach(t=>s.searchParams.append(e,String(t))):"object"==typeof t?s.searchParams.append(e,JSON.stringify(t)):"string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t||s.searchParams.append(e,String(t)))}),`${s.pathname}${s.search}`}const da=_t("APIClient");class ua extends Error{constructor(e,s){super(e,s.cause?{cause:s.cause}:void 0),t(this,"status"),t(this,"code"),t(this,"details"),this.name="APIClientError",this.status=s.status,void 0!==s.code&&(this.code=s.code),void 0!==s.details&&(this.details=s.details)}}class ma extends Error{constructor(e,s){super(e,s.cause?{cause:s.cause}:void 0),t(this,"status",0),t(this,"code","NETWORK_UNREACHABLE"),t(this,"url"),t(this,"method"),t(this,"isNetworkError",!0),this.name="NetworkError",this.url=s.url,this.method=s.method}}const ha={attempts:3,delay:1e3,exponentialBackoff:!0},pa=class e{constructor(e){t(this,"baseUrl"),t(this,"timeout"),t(this,"accessToken",null),t(this,"refreshToken",null),t(this,"refreshPromise",null),this.baseUrl=e.VITE_API_URL,this.timeout=e.VITE_API_TIMEOUT,this.loadTokens()}loadTokens(){try{this.accessToken=localStorage.getItem(e.ACCESS_TOKEN_KEY),this.refreshToken=localStorage.getItem(e.REFRESH_TOKEN_KEY)}catch(t){da.warn("Failed to load tokens from storage",{error:t})}}saveTokens(t){const{accessToken:s,refreshToken:a}=t;try{this.accessToken=s,localStorage.setItem(e.ACCESS_TOKEN_KEY,s),a&&(this.refreshToken=a,localStorage.setItem(e.REFRESH_TOKEN_KEY,a))}catch(r){da.error("Failed to persist auth tokens",{error:r})}}clearTokens(){this.accessToken=null,this.refreshToken=null,localStorage.removeItem(e.ACCESS_TOKEN_KEY),localStorage.removeItem(e.REFRESH_TOKEN_KEY)}async refreshAccessToken(){if(!this.refreshToken)throw new Error("No refresh token available");if(this.refreshPromise)await this.refreshPromise;else{this.refreshPromise=this.performTokenRefresh();try{await this.refreshPromise}finally{this.refreshPromise=null}}}async performTokenRefresh(){const e=await fetch(`${this.baseUrl}${la.AUTH.REFRESH}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:this.refreshToken})});if(!e.ok)throw this.clearTokens(),await this.createAPIError(e);const t=await e.json();this.saveTokens({accessToken:t.accessToken,...t.refreshToken?{refreshToken:t.refreshToken}:{}})}async makeRequest(e,t={}){const{timeout:s=this.timeout,retry:a=ha,idempotent:r=!1,...i}=t,n={...ha,...a},o=async()=>{const t=new AbortController,a=setTimeout(()=>t.abort(),s);try{const s=this.prepareHeaders(i.headers),a=await fetch(`${this.baseUrl}${e}`,{...i,headers:s,signal:t.signal});if(401===a.status&&this.refreshToken){await this.handleUnauthorized();const s=await fetch(`${this.baseUrl}${e}`,{...i,headers:this.prepareHeaders(i.headers),signal:t.signal});return await this.ensureSuccessfulResponse(s),s.json()}return await this.ensureSuccessfulResponse(a),a.json()}catch(r){throw this.normaliseRequestError(r,e,(i.method??"GET").toString())}finally{clearTimeout(a)}};return r?async function(e,t){const{attempts:s,delay:a,exponentialBackoff:r=!1,onRetry:i}=t;let n=null;for(let l=1;l<=s;l+=1)try{return await e()}catch(o){if(n=oa(o),l===s)throw na.error(`All ${s} attempts failed`,n),n;const e=r?a*Math.pow(2,l-1):a;na.warn(`Attempt ${l}/${s} failed, retrying in ${e}ms`,{error:n.message,attempt:l,delay:e}),null==i||i(n,l),await new Promise(t=>setTimeout(t,e))}throw new Error("Retry operation failed without throwing last error")}(o,n):o()}prepareHeaders(e){const t={"Content-Type":"application/json",...e};return this.accessToken&&(t.Authorization=`Bearer ${this.accessToken}`),t}async ensureSuccessfulResponse(e){if(!e.ok)throw await this.createAPIError(e)}async handleUnauthorized(){try{await this.refreshAccessToken()}catch(e){throw da.warn("Token refresh failed, clearing session",{error:e}),this.clearTokens(),e}}async parseErrorDetails(e){try{return await e.json()}catch(t){return da.debug("Failed to parse error body as JSON",{error:t}),{message:e.statusText}}}async createAPIError(e){const t=await this.parseErrorDetails(e);return new ua(t.message||`HTTP ${e.status}`,{status:e.status,...t.code?{code:t.code}:{},...t.details?{details:t.details}:{}})}normaliseRequestError(e,t,s){if(e instanceof ma)return e;if(e instanceof Error)return"AbortError"===e.name?new ma("Request timed out while contacting backend service",{url:t,method:s,cause:e}):e instanceof TypeError?new ma("Unable to reach backend service",{url:t,method:s,cause:e}):e;if("object"==typeof e&&null!==e&&"message"in e){const a=String(e.message);return new ma(a,{url:t,method:s,cause:e})}return new ma("Network request failed",{url:t,method:s,cause:e})}async get(e,t={}){return this.makeRequest(e,{method:"GET",idempotent:!0,...t})}async post(e,t,s={}){return this.makeRequest(e,{method:"POST",...t?{body:JSON.stringify(t)}:{},...s})}async put(e,t,s={}){return this.makeRequest(e,{method:"PUT",...t?{body:JSON.stringify(t)}:{},idempotent:!0,...s})}async patch(e,t,s={}){return this.makeRequest(e,{method:"PATCH",...t?{body:JSON.stringify(t)}:{},...s})}async delete(e,t={}){return this.makeRequest(e,{method:"DELETE",idempotent:!0,...t})}setTokens(e,t){this.saveTokens({accessToken:e,...t?{refreshToken:t}:{}})}logout(){this.clearTokens()}isAuthenticated(){return Boolean(this.accessToken)}};t(pa,"ACCESS_TOKEN_KEY","access_token"),t(pa,"REFRESH_TOKEN_KEY","refresh_token");const ga=new pa(ia),xa=2e3,fa=1,va="rgba(var(--primary), 0.6)";function ya(e={}){const{duration:t=xa,intensity:a=fa,enabled:r=!0,color:i=va}=e,n=Jt(0),o=is(()=>{const e=rs(n.value,[0,.5,1],[.3*a,.6*a,.3*a]);return{shadowColor:i,shadowOffset:{width:0,height:0},shadowOpacity:e,shadowRadius:rs(n.value,[0,.5,1],[10,20,10]),elevation:rs(n.value,[0,.5,1],[5,10,5])}}),l=()=>{n.value=as(es(1,Xt.inOut(Xt.ease)))},c=()=>{n.value=0};return s.useEffect(()=>{r?l():c()},[r]),{animatedStyle:o,start:l,stop:c}}const ja={smooth:{damping:25,stiffness:400},bouncy:{}},wa={fast:{duration:150,easing:Xt.ease},smooth:{duration:300,easing:Xt.inOut(Xt.ease)},slow:{easing:Xt.inOut(Xt.ease)},elastic:{easing:Xt.elastic(1)}};function ba(e){return Array.isArray(e)?e.filter(e=>!(new Date(e.expiresAt)<new Date)):[]}function Na(e){const t=new Map;return Array.isArray(e)?(e.forEach(e=>{const s=t.get(e.userId)||[];s.push(e),t.set(e.userId,s)}),t):t}const Sa=jt(["text","image","video","voice","location","sticker","pet-card"]),Ea=jt(["sending","sent","delivered","read","failed"]),ka=jt(["","","","","","",""]),Ia=vt({messageId:xt().optional(),translation:vt({originalLang:xt(),translatedText:xt(),targetLang:xt()}).optional(),media:vt({url:xt().url(),thumbnail:xt().url().optional(),width:wt().int().positive().optional(),height:wt().int().positive().optional(),duration:wt().nonnegative().optional(),size:wt().int().nonnegative().optional(),mimeType:xt().optional()}).optional(),location:vt({lat:wt().min(-90).max(90),lng:wt().min(-180).max(180),latitude:wt().min(-90).max(90).optional(),longitude:wt().min(-180).max(180).optional(),address:xt().optional()}).optional(),voiceNote:vt({waveform:bt(wt()),duration:wt().nonnegative()}).optional(),sticker:vt({id:xt(),pack:xt()}).optional(),petCard:vt({petId:xt(),petName:xt(),petPhoto:xt().url().optional()}).optional(),replyTo:xt().optional()}).strict(),Aa=vt({id:xt(),type:jt(["photo","video","voice","document"]),url:xt().url(),thumbnail:xt().url().optional(),name:xt().optional(),size:wt().int().nonnegative().optional(),duration:wt().nonnegative().optional(),mimeType:xt().optional()}).strict(),Ca=vt({emoji:xt(),userId:xt().optional(),userName:xt().optional(),userAvatar:xt().url().optional(),timestamp:xt().datetime().optional(),userIds:bt(xt()).optional(),count:wt().int().nonnegative().optional()}).strict(),Pa=vt({id:xt(),roomId:xt(),senderId:xt(),senderName:xt().optional(),senderAvatar:xt().url().optional(),type:Sa,content:xt(),status:Ea,timestamp:xt().datetime().optional(),attachments:bt(Aa).optional(),metadata:Ia.optional(),reactions:Nt([bt(Ca),St(ka,bt(xt()))]).optional(),createdAt:xt().datetime(),updatedAt:xt().datetime().optional(),deletedAt:xt().datetime().optional(),deletedFor:bt(xt()).optional()}).strict(),Ta=vt({id:xt(),participantIds:bt(xt()).min(2),type:jt(["direct","group"]),lastMessage:Pa.optional(),lastMessageAt:xt().datetime().optional(),unreadCount:Nt([St(xt(),wt().int().nonnegative()),wt().int().nonnegative()]).optional(),matchedPetId:xt().optional(),matchId:xt().optional(),matchedPetName:xt().optional(),matchedPetPhoto:xt().url().optional(),isTyping:Et().optional(),typingUsers:bt(vt({userId:xt(),userName:xt(),startedAt:xt().datetime()})).optional(),createdAt:xt().datetime(),updatedAt:xt().datetime()}).strict();vt({userId:xt(),messageId:xt(),roomId:xt(),readAt:xt().datetime()}).strict(),vt({userId:xt(),roomId:xt(),startedAt:xt().datetime()}).strict(),vt({id:xt(),messageId:xt(),roomId:xt(),reportedBy:xt(),reportedUserId:xt(),reason:jt(["spam","harassment","inappropriate","other"]),description:xt().optional(),status:jt(["pending","reviewed","resolved","dismissed"]),reviewedBy:xt().optional(),reviewedAt:xt().datetime().optional(),action:jt(["warning","mute","suspend","no_action"]).optional(),createdAt:xt().datetime()}).strict(),vt({roomId:xt(),content:xt().min(1),type:Sa.default("text"),metadata:Ia.optional(),attachments:bt(Aa).optional(),replyTo:xt().optional()}).strict(),vt({roomId:xt(),messageId:xt(),emoji:ka}).strict(),vt({roomId:xt(),messageId:xt(),emoji:ka}).strict(),vt({roomId:xt(),messageId:xt()}).strict(),vt({items:bt(Pa),cursor:xt().optional(),hasMore:Et().optional()}).strict(),vt({items:bt(Ta),cursor:xt().optional(),hasMore:Et().optional()}).strict();const Fa="1.0.0",Ra={essential:!0,analytics:!1,marketing:!1,thirdParty:!1};class _a{static isConsentRequired(e){return"essential"!==e}static hasConsent(e,t){if("essential"===t)return!0;const s=e.find(e=>e.category===t);return"accepted"===(null==s?void 0:s.status)}static getConsentPreferences(e){return{essential:!0,analytics:this.hasConsent(e,"analytics"),marketing:this.hasConsent(e,"marketing"),thirdParty:this.hasConsent(e,"third_party")}}static hasRequiredConsents(e){return["essential","analytics"].every(t=>this.hasConsent(e,t))}static getConsentStatus(e,t){if("essential"===t)return"accepted";const s=e.find(e=>e.category===t);return(null==s?void 0:s.status)??"pending"}static canWithdrawConsent(e){return"essential"!==e}static validateConsentUpdate(e,t){return"essential"!==e||"accepted"===t}static getConsentRecord(e,t){return e.find(e=>e.category===t)}static filterByStatus(e,t){return e.filter(e=>e.status===t)}static getLatestConsentVersion(e){if(0===e.length)return"1.0.0";return e.map(e=>e.version).sort().reverse()[0]??"1.0.0"}}const Ma="undefined"!=typeof window&&"undefined"!=typeof document,Da=s.forwardRef(({style:e,animatedStyle:t,...s},r)=>{const i=t?[e,t]:e??{},n=Ma&&t?{willChange:"transform, opacity",contain:"layout paint style"}:void 0,o=n?[i,n]:i;return a.jsx(ns.View,{ref:r,...s,style:o})});Da.displayName="MotionView";const La=s.forwardRef(({style:e,animatedStyle:t,...s},r)=>{const i=t?[e,t]:e??{};return a.jsx(ns.Text,{ref:r,...s,style:i})});La.displayName="MotionText";const Oa={easing:{outQuint:Xt.out(Xt.poly(5)),outExpo:Xt.out(Xt.exp),inOutCubic:Xt.inOut(Xt.cubic)}};let Ua=null,za=null;async function Ba(){return null!==Ua?Ua:za||(za=Pt(()=>Promise.resolve().then(()=>Ga),void 0).then(e=>(function(e){return"object"==typeof e&&null!==e&&"AccessibilityInfo"in e}(e)&&(Ua=e.AccessibilityInfo??null),Ua)).catch(()=>null),za)}Ba().catch(()=>{});const $a="(prefers-reduced-motion: reduce)";function Va(){if("undefined"!=typeof window&&"function"==typeof window.matchMedia)try{return window.matchMedia($a).matches}catch{return!1}return!1}function Ya(){const[e,t]=s.useState(()=>Va());return s.useEffect(()=>{let e=!0,s=null;Ba().then(a=>{var r;e&&a&&a.isReduceMotionEnabled&&(a.isReduceMotionEnabled().then(s=>{e&&t(!!s)}).catch(()=>{}),s=(null==(r=a.addEventListener)?void 0:r.call(a,"reduceMotionChanged",s=>{e&&t(!!s)}))??null)}).catch(()=>{});let a=null;if("undefined"!=typeof window&&"function"==typeof window.matchMedia)try{const s=window.matchMedia($a);if(!s)return;const r=s=>{e&&t(!!s.matches)};"function"==typeof s.addEventListener&&(s.addEventListener("change",r),a=()=>{s&&"function"==typeof s.removeEventListener&&s.removeEventListener("change",r)}),t(s.matches)}catch{}return()=>{var t;e=!1,null==(t=null==s?void 0:s.remove)||t.call(s),null==a||a()}},[]),e}let Ka=null,qa=null;(async function(){return null!==Ka?Ka:qa||(qa=Pt(()=>import("./_react-native-gesture-handler-stub-B1_bHZPA.js"),[]).then(e=>{var t;if(!e)return null;const s=e.default??e;return function(e){var t;return"object"==typeof e&&null!==e&&("Gesture"in e||"object"==typeof e.default&&void 0!==(null==(t=e.default)?void 0:t.Gesture))}(s)&&(Ka=s.Gesture??(null==(t=s.default)?void 0:t.Gesture)??null),Ka}).catch(()=>null),qa)})().catch(()=>{});const Ga=Object.freeze(Object.defineProperty({__proto__:null,ActivityIndicator:"div",Alert:{alert:function(){},prompt:function(){}},Image:"img",Platform:{OS:"web",select:function(e){return void 0!==e.web?e.web:e.default}},Pressable:"button",ScrollView:"div",StyleSheet:{create:function(e){return e},flatten:function(e){return e}},Text:"span",TouchableHighlight:"button",TouchableOpacity:"button",TouchableWithoutFeedback:"div",View:"div",default:{}},Symbol.toStringTag,{value:"Module"}));let Wa=null,Ha=null;function Qa({visible:e,children:t}){const r=function(){const e=Jt(Va()),t=Ya();return s.useEffect(()=>{e.value=t},[t,e]),e}(),i=Jt(e?1:0);s.useEffect(()=>{r.value,i.value=es(e?1:0)},[e,r,i]);const n=is(()=>r.value?{opacity:i.value,transform:[{scale:.99+.01*i.value}]}:{opacity:i.value,transform:[{translateY:12*(1-i.value)},{scale:.98+.02*i.value}]});return a.jsx(ns.View,{style:n,children:t})}function Xa(e){const{isVisible:t,duration:a=300,delay:r=0,direction:i="up"}=e,n=Jt(0),o=Jt("up"===i?30:"down"===i?-30:0),l=Jt(.98);s.useEffect(()=>{if(t){n.value=ts(0,es(1)),o.value=ts(0,es(0)),l.value=ts(0,es(1))}else n.value=es(0),o.value=es("up"===i?-30:30),l.value=es(.98)},[t,a,r,i,n,o,l]);const c=is(()=>({opacity:n.value,transform:[{translateY:o.value},{scale:l.value}]}));return{opacity:n,translateY:o,scale:l,style:c}}function Ja(e={}){const{delay:t=200}=e,a=Jt(0),r=Jt(100),i=Jt(.95),n=Jt(-100),o=Jt(0);s.useEffect(()=>{a.value=ts(0,Zt(1)),r.value=ts(0,Zt(0)),i.value=ts(0,es(1)),n.value=as(ss(es(100),es(100))),o.value=as(ss(es(0),es(.4),es(.4),es(0)))},[t,a,r,i,n,o]);const l=is(()=>({opacity:a.value,transform:[{translateY:r.value},{scale:i.value}]})),c=is(()=>({transform:[{translateX:`${n.value}%`}],opacity:o.value}));return{opacity:a,translateY:r,scale:i,navStyle:l,shimmerTranslateX:n,shimmerOpacity:o,shimmerStyle:c}}function Za(e={}){const{delay:t=.1}=e,a=Jt(-100),r=Jt(0),i=Jt(-100),n=Jt(0);s.useEffect(()=>{a.value=ts(0,es(0)),r.value=ts(0,es(1)),i.value=as(ss(es(-100),es(100))),n.value=as(ss(es(0),es(.5),es(0)))},[t,a,r,i,n]);const o=is(()=>({transform:[{translateY:a.value}],opacity:r.value})),l=is(()=>({transform:[{translateX:`${i.value}%`}],opacity:n.value}));return{y:a,opacity:r,shimmerX:i,shimmerOpacity:n,headerStyle:o,shimmerStyle:l}}function er(e={}){const{delay:t=0,scale:a=1.12,translateY:r=-3,rotation:i=-5}=e,n=Jt(0),o=Jt(.8),l=Jt(0),c=Jt(0),d=Jt(1),u=Jt(0),m=Jt(0);s.useEffect(()=>{n.value=ts(0,es(1)),o.value=ts(0,Zt(1))},[t,n,o]);const h=is(()=>({opacity:n.value,transform:[{scale:o.value*d.value},{translateY:l.value+u.value},{rotate:`${c.value+m.value}deg`}]}));return{opacity:n,scale:o,translateY:l,rotation:c,hoverScale:d,hoverY:u,hoverRotation:m,buttonStyle:h,handleEnter:()=>{d.value=Zt(a),u.value=Zt(r),m.value=Zt(i)},handleLeave:()=>{d.value=Zt(1),u.value=Zt(0),m.value=Zt(0)},handleTap:()=>{d.value=Zt(.9),setTimeout(()=>{d.value=Zt(1)},150)}}}function tr(e={}){const{delay:t=.2,staggerDelay:a=.1}=e,r=Jt(0),i=Jt(20);s.useEffect(()=>{r.value=ts(0,es(1)),i.value=ts(0,Zt(0))},[t,a,r,i]);const n=is(()=>({opacity:r.value,transform:[{translateX:i.value}]}));return{opacity:r,x:i,containerStyle:n}}function sr(e){const{isVisible:t,duration:a=300,delay:r=0}=e,i=Jt(0),n=Jt(.9),o=Jt(20);s.useEffect(()=>{if(t){i.value=ts(0,es(1)),n.value=Zt(1),o.value=Zt(0)}else i.value=es(0),n.value=es(.9),o.value=es(20)},[t,a,r,i,n,o]);const l=is(()=>({opacity:i.value,transform:[{scale:n.value},{translateY:o.value}]}));return{opacity:i,scale:n,y:o,style:l}}function ar(e={}){const{enabled:t=!1,targetRotation:a=360,duration:r=500,enablePulse:i=!1}=e,n=Jt(0);s.useEffect(()=>{n.value=es(t?a:0)},[t,r,a,n,i]);const o=is(()=>({transform:[{rotate:`${n.value}deg`}]}));return{rotation:n,style:o}}function rr(){const e=Jt(1);s.useEffect(()=>{e.value=as(ss(es(1),es(1.12),es(1)))},[e]);const t=is(()=>({transform:[{scale:e.value}]}));return{scale:e,style:t}}function ir(){const e=Jt(1),t=Jt(.7);s.useEffect(()=>{e.value=as(ss(es(1),es(1.5),es(1))),t.value=as(ss(es(.7),es(1),es(.7)))},[e,t]);const a=is(()=>({transform:[{scale:e.value}],opacity:t.value}));return{scale:e,opacity:t,style:a}}function nr(e){const{key:t,duration:a=300,direction:r="up"}=e,[i,n]=s.useState(!1),o=Jt(0),l=Jt("up"===r?30:"down"===r?-30:0),c=Jt(.98);s.useEffect(()=>(n(!0),o.value=es(1),l.value=Zt(0),c.value=Zt(1),()=>{o.value=es(0),l.value=es("up"===r?-30:30),c.value=es(.98),n(!1)}),[t,a,r,o,l,c]);const d=is(()=>({opacity:o.value,transform:[{translateY:l.value},{scale:c.value}]}));return{opacity:o,translateY:l,scale:c,style:d,isVisible:i}}function or(e){const{isExpanded:t,duration:a=300,enableOpacity:r=!0}=e,i=Jt(t?1:0),n=Jt(t?1:0),o=s.useRef(1e3);s.useEffect(()=>{i.value=es(t?1:0),r&&(n.value=es(t?1:0))},[t,a,r,i,n]);return{heightStyle:is(()=>({maxHeight:1===i.value?o.current:0,opacity:i.value})),opacityStyle:is(()=>({opacity:n.value}))}}function lr(e={}){const{enabled:t=!0,duration:a=1e3,repeat:r=!0}=e,i=Jt(0);s.useEffect(()=>{i.value=t?as(es(360)):0},[t,a,r,i]);const n=is(()=>({transform:[{rotate:`${i.value}deg`}]}));return{rotation:i,rotationStyle:n}}function cr(e){const{index:t,delay:a=0,staggerDelay:r=50}=e,i=Jt(0),n=Jt(20);s.useEffect(()=>{i.value=ts(0,es(1)),n.value=ts(0,es(0))},[t,a,r,i,n]);const o=is(()=>({opacity:i.value,transform:[{translateY:n.value}]}));return{opacity:i,y:n,itemStyle:o}}(async function(){return null!==Wa?Wa:Ha||(Ha=Pt(()=>import("./_expo-haptics-stub-Dhg6IzGY.js"),[]).then(e=>{const t=e.default??e;return function(e){return"object"==typeof e&&null!==e&&("impactAsync"in e||"ImpactFeedbackStyle"in e)}(t)&&(Wa=t),Wa}).catch(()=>null),Ha)})().catch(()=>{});const dr=1.1,ur=.95,mr=15,hr=400;function pr(e={}){const{hoverScale:t=dr,tapScale:a=ur,damping:r=mr,stiffness:i=hr,onPress:n}=e,o=Jt(1),l=is(()=>({transform:[{scale:o.value}]})),c=s.useCallback(()=>{o.value=Zt(t)},[o,t,r,i]),d=s.useCallback(()=>{o.value=Zt(1)},[o,r,i]),u=s.useCallback(()=>{o.value=Zt(a,0,()=>{o.value=Zt(1)}),null==n||n()},[o,a,r,i,n]);return{scale:o,animatedStyle:l,handleMouseEnter:c,handleMouseLeave:d,handlePress:u}}function gr(e={}){const{delay:t=0,duration:a=800,enabled:r=!0,index:i=0,perspective:n=1e3,rotationIntensity:o=15}=e,l=Jt(0),c=Jt(.5),d=Jt(o),u=Jt(-o),m=Jt(-100);s.useEffect(()=>{if(r){l.value=ts(0,Zt(1)),c.value=ts(0,ss(Zt(1.1),Zt(1))),d.value=ts(0,Zt(0)),u.value=ts(0,Zt(0)),m.value=ts(0,Zt(0))}},[r,t,i,a]);return{animatedStyle:is(()=>({opacity:rs(l.value,[0,.3,1],[0,.6,1]),transform:[{perspective:n},{scale:c.value},{rotateX:`${d.value}deg`},{rotateY:`${u.value}deg`},{translateZ:m.value}]})),progress:l}}function xr(e={}){const{strength:t=.3,damping:a=20,stiffness:r=150,maxDistance:i=50,enabled:n=!0}=e,o=Jt(0),l=Jt(0),c=Jt(1),[d,u]=s.useState(null),m=s.useCallback(()=>{n&&(c.value=Zt(1.05))},[n,a,r]),h=s.useCallback(()=>{n&&(o.value=Zt(0),l.value=Zt(0),c.value=Zt(1))},[n,a,r]),p=s.useCallback(e=>{if(!n||!d)return;const s=d.left+d.width/2,a=d.top+d.height/2,r=e.clientX-s,c=e.clientY-a;if(Math.sqrt(r*r+c*c)<d.width/2){const e=Math.max(-i,Math.min(i,r*t)),s=Math.max(-i,Math.min(i,c*t));o.value=Zt(e),l.value=Zt(s)}},[n,d,t,i,a,r]),g=s.useCallback(e=>{e&&u(e.getBoundingClientRect())},[]);return{animatedStyle:is(()=>({transform:[{translateX:o.value},{translateY:l.value},{scale:c.value}]})),handleMouseEnter:m,handleMouseLeave:h,handleMouseMove:p,handleRef:g}}function fr(e={}){const{scaleUp:t=1.15,scaleDown:a=.95,damping:r=12,stiffness:i=200,mass:n=.8}=e,o=Jt(1),l=s.useCallback(()=>{o.value=Zt(a)},[a,r,i,n]),c=s.useCallback(()=>{o.value=ss(Zt(t),Zt(1))},[t,r,i,n]);return{animatedStyle:is(()=>({transform:[{scale:o.value}]})),handlePressIn:l,handlePressOut:c}}function vr(e={}){const{color:t="rgba(99, 102, 241, 0.8)",intensity:a=20,speed:r=2e3,enabled:i=!0,pulseSize:n=8}=e,o=Jt(0);s.useEffect(()=>{o.value=i?as(ss(es(1,Xt.inOut(Xt.ease)),es(0,Xt.inOut(Xt.ease)))):0},[i,r]);return{animatedStyle:is(()=>{const e=rs(o.value,[0,.5,1],[0,a,0]),s=rs(o.value,[0,.5,1],[.3,.8,.3]);return{boxShadow:`0 0 ${e}px ${n}px ${t}, 0 0 ${.5*e}px ${.5*n}px ${t} inset`,filter:`drop-shadow(0 0 ${.5*e}px ${t})`,opacity:s}}),progress:o}}function yr(e={}){const{minScale:t=.98,maxScale:a=1.02,duration:r=3e3,enabled:i=!0,easing:n="sine"}=e,o=Jt(0),l={ease:Xt.inOut(Xt.ease),sine:Xt.inOut(Xt.sin),cubic:Xt.inOut(Xt.cubic)}[n];s.useEffect(()=>{o.value=i?as(ss(es(1),es(0))):es(0)},[i,r,l]);return{animatedStyle:is(()=>({transform:[{scale:rs(o.value,[0,.5,1],[t,a,t])}],opacity:rs(o.value,[0,.5,1],[.95,1,.95])})),progress:o}}function jr(e,t,s={}){return t?"string"==typeof t?(null==e?void 0:e[t])??s:t:s}function wr(e,t,s){const a=(null==s?void 0:s.delay)??0;(null==s?void 0:s.duration)??wa.smooth.duration,"spring"===(null==s?void 0:s.type)?(s.stiffness??ja.smooth.stiffness,s.damping??ja.smooth.damping,s.mass,e.value=a>0?ts(0,Zt(t)):Zt(t)):e.value=a>0?ts(0,es(t)):es(t)}function br(e={}){const{variants:t={},initial:a,animate:r,exit:i,transition:n,enabled:o=!0}=e,l=jr(t,a,{opacity:1,scale:1}),c=jr(t,r,{opacity:1,scale:1});jr(t,i,{opacity:0,scale:.95});const d=Jt(l.opacity??c.opacity??1),u=Jt(l.scale??c.scale??1),m=Jt(l.translateX??l.x??c.translateX??c.x??0),h=Jt(l.translateY??l.y??c.translateY??c.y??0),p=Jt(l.rotate??c.rotate??0),g=Jt(l.rotateX??c.rotateX??0),x=Jt(l.rotateY??c.rotateY??0),f=Jt(l.backgroundColor??c.backgroundColor??"transparent"),v=Jt(l.color??c.color??"inherit"),y=s.useCallback(e=>{if(!o)return;const t=e.transition??n;void 0!==e.opacity&&wr(d,e.opacity,t),void 0!==e.scale&&wr(u,e.scale,t),void 0===e.translateX&&void 0===e.x||wr(m,e.translateX??e.x??0,t),void 0===e.translateY&&void 0===e.y||wr(h,e.translateY??e.y??0,t),void 0!==e.rotate&&wr(p,e.rotate,t),void 0!==e.rotateX&&wr(g,e.rotateX,t),void 0!==e.rotateY&&wr(x,e.rotateY,t),void 0!==e.backgroundColor&&(f.value=e.backgroundColor),void 0!==e.color&&(v.value=e.color)},[o,n,d,u,m,h,p,g,x,f,v]);s.useEffect(()=>{if(o&&r){const e="string"==typeof r?t[r]:r;e&&y(e)}},[o,r,t,y]);const j=s.useCallback(e=>{const s=t[e];s&&y(s)},[t,y]),w=s.useCallback(e=>{y(e)},[y]),b=is(()=>{const e=[];0!==m.value&&e.push({translateX:m.value}),0!==h.value&&e.push({translateY:h.value}),1!==u.value&&e.push({scale:u.value}),0!==p.value&&e.push({rotate:`${p.value}deg`}),0!==g.value&&e.push({rotateX:`${g.value}deg`}),0!==x.value&&e.push({rotateY:`${x.value}deg`});const t={opacity:d.value};return e.length>0&&(t.transform=e),"transparent"!==f.value&&(t.backgroundColor=f.value),"inherit"!==v.value&&(t.color=v.value),t});return{opacity:d,scale:u,translateX:m,translateY:h,rotate:p,rotateX:g,rotateY:x,backgroundColor:f,color:v,animatedStyle:b,setVariant:j,setCustomVariant:w}}function Nr(e){const{isVisible:t,initial:a=!1,exitDuration:r=wa.fast.duration,enterDuration:i=wa.smooth.duration,exitTransition:n="fade",enterTransition:o="fade",onExitComplete:l,enabled:c=!0}=e,d=Jt(a&&t?1:0),u=Jt(a&&t?1:.95),m=Jt(0),h=Jt(a&&t?0:-20),[p,g]=s.useState(a&&t),x=s.useRef(void 0);s.useEffect(()=>{if(c){if(t)switch(g(!0),o){case"fade":case"scale":d.value=es(1),u.value=Zt(1),h.value=Zt(0);break;case"slideUp":case"slideDown":d.value=es(1),u.value=Zt(1),h.value=Zt(0),m.value=Zt(0);break;case"slideLeft":case"slideRight":d.value=es(1),u.value=Zt(1),m.value=Zt(0),h.value=Zt(0)}else{switch(n){case"fade":d.value=es(0),u.value=es(.95);break;case"scale":d.value=es(0),u.value=es(.8);break;case"slideUp":d.value=es(0),h.value=es(-20);break;case"slideDown":d.value=es(0),h.value=es(20);break;case"slideLeft":d.value=es(0),m.value=es(-20);break;case"slideRight":d.value=es(0),m.value=es(20)}x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{g(!1),null==l||l()},r)}return()=>{x.current&&clearTimeout(x.current)}}g(t)},[t,c,r,i,n,o,l,d,u,m,h]);const f=is(()=>{const e=[];return 0!==m.value&&e.push({translateX:m.value}),0!==h.value&&e.push({translateY:h.value}),1!==u.value&&e.push({scale:u.value}),{opacity:d.value,transform:e.length>0?e:void 0}});return{opacity:d,scale:u,translateX:m,translateY:h,animatedStyle:f,shouldRender:p}}function Sr(e,...t){return e.reduce((e,s,a)=>{const r=t[a];if(void 0===r)return e+s;if(null===r)return e+s;if("string"==typeof r||"number"==typeof r||"bigint"==typeof r||"boolean"==typeof r)return e+s+String(r);if(r instanceof Date)return e+s+r.toISOString();try{if(Array.isArray(r)||function(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(r))return e+s+JSON.stringify(r)}catch{}return e+s+String(r)},"")}const Er=_t("LLMAPI");const kr=new class{async call(e,t,s){try{const a={prompt:e,...void 0!==t&&{model:t},...void 0!==s&&{jsonMode:s}};return(await ga.post("/llm/chat",a)).data.response}catch(a){const s=a instanceof Error?a:new Error(String(a));throw Er.error("Failed to call LLM",s,{prompt:"string"==typeof e?e.substring(0,100):"object",model:t}),s}}},Ir=_t("LLMService");const Ar=new class{async llm(e,t,s){try{return await kr.call(e,t,s)}catch(a){const r=a instanceof Error?a:new Error(String(a));throw Ir.error("LLM call failed",r,{prompt:"string"==typeof e?e.substring(0,100):"object",model:t,jsonMode:s}),r}}async call(e,t){return this.llm(e,null==t?void 0:t.model,null==t?void 0:t.jsonMode)}};function Cr(e){const t=e instanceof Error?e.message:String("object"==typeof e&&null!==e&&"message"in e?e.message:e),s=t.toLowerCase();return s.includes("budget limit")||s.includes("quota exceeded")?{isBudgetLimit:!0,isRateLimit:!1,isNetworkError:!1,userMessage:"AI features are temporarily unavailable due to usage limits. Using fallback data instead.",technicalMessage:"LLM budget limit reached: "+t}:s.includes("rate limit")||s.includes("429")?{isBudgetLimit:!1,isRateLimit:!0,isNetworkError:!1,userMessage:"AI service is temporarily busy. Please try again in a moment.",technicalMessage:"LLM rate limit hit: "+t}:s.includes("network")||s.includes("fetch")||s.includes("timeout")?{isBudgetLimit:!1,isRateLimit:!1,isNetworkError:!0,userMessage:"Unable to connect to AI service. Using fallback data instead.",technicalMessage:"LLM network error: "+t}:{isBudgetLimit:!1,isRateLimit:!1,isNetworkError:!1,userMessage:"AI service temporarily unavailable. Using fallback data instead.",technicalMessage:"LLM error: "+t}}const Pr=new class{constructor(){t(this,"currentUser",null),t(this,"currentUserPromise",null)}async user(){if(this.currentUser)return this.currentUser;if(this.currentUserPromise)return this.currentUserPromise;this.currentUserPromise=this.loadUser();try{const e=await this.currentUserPromise;return this.currentUser=e,e}finally{this.currentUserPromise=null}}async loadUser(){try{const e=await Kt.get("current-user-id");if(e){const t=await Kt.get(`user:${e}`);if(t)return t}if(await Kt.get("is-authenticated")){const t=(await Kt.get("all-users")??[]).find(t=>t.id===e);if(t)return t}return this.createGuestUser()}catch(e){return Dt.error("Failed to load user",e instanceof Error?e:new Error(String(e)),"UserService"),this.createGuestUser()}}createGuestUser(){return{id:`guest-${Date.now()}`,login:null,avatarUrl:null,email:null,isGuest:!0}}async setUser(e){this.currentUser=e,await Kt.set("current-user-id",e.id),await Kt.set(`user:${e.id}`,e);const t=await Kt.get("all-users")??[],s=t.findIndex(t=>t.id===e.id);s>=0?t[s]=e:t.push(e),await Kt.set("all-users",t),await Kt.set("is-authenticated",!e.isGuest)}async clearUser(){this.currentUser=null,await Kt.delete("current-user-id"),await Kt.set("is-authenticated",!1)}async getUserById(e){try{const t=await Kt.get(`user:${e}`);if(t)return t;return(await Kt.get("all-users")??[]).find(t=>t.id===e)??null}catch(t){return Dt.error(`Failed to get user ${e}`,t instanceof Error?t:new Error(String(t)),"UserService"),null}}},Tr=Object.freeze(Object.defineProperty({__proto__:null,userService:Pr},Symbol.toStringTag,{value:"Module"}));function Fr(){const[e,t]=s.useState(()=>{if("undefined"==typeof window)return!1;return window.matchMedia("(prefers-reduced-motion: reduce)").matches});return s.useEffect(()=>{if("undefined"==typeof window)return;const e=window.matchMedia("(prefers-reduced-motion: reduce)"),s=e=>{t(e.matches)};return e.addEventListener?(e.addEventListener("change",s),()=>e.removeEventListener("change",s)):(e.addListener(s),()=>e.removeListener(s))},[]),e}function Rr({hapticFeedback:e=!0,...t}){const r=s.useCallback(s=>{var a;e&&s&&js.trigger("light"),null==(a=t.onOpenChange)||a.call(t,s)},[e,t]);return a.jsx(i,{"data-slot":"dialog",...t,onOpenChange:r})}function _r({...e}){return a.jsx(u,{"data-slot":"dialog-portal",...e})}function Mr({className:e,...t}){return a.jsx(m,{"data-slot":"dialog-overlay",className:As("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t})}function Dr({className:e,children:t,showCloseButton:r=!0,hapticFeedback:i=!0,...c}){const d=Fr(),u=Jt(0),m=Jt(.95),h=Jt(20);s.useEffect(()=>{u.value=es(1),m.value=Zt(1),h.value=Zt(0)},[u,m,h,d]);const p=is(()=>({opacity:u.value,transform:[{scale:m.value},{translateY:h.value}]})),g=s.useCallback(()=>{i&&js.trigger("light")},[i]);return a.jsxs(_r,{"data-slot":"dialog-portal",children:[a.jsx(Mr,{}),a.jsxs(n,{"data-slot":"dialog-content",className:As("fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)]","translate-x-[-50%] translate-y-[-50%] gap-4","rounded-2xl border bg-background p-6 shadow-lg","focus:outline-none","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","sm:max-w-lg",e),...c,children:[a.jsx(hs,{style:p,className:"contents",children:t}),r&&a.jsxs(o,{className:As("absolute top-4 right-4 rounded-xs opacity-70","ring-offset-background transition-opacity","hover:opacity-100 focus:ring-2 focus:ring-ring focus:ring-offset-2","focus:outline-none disabled:pointer-events-none","data-[state=open]:bg-accent data-[state=open]:text-muted-foreground","[&_svg]:pointer-events-none [&_svg]:shrink-0","[&_svg:not([class*='size-'])]:size-4"),onClick:g,"aria-label":"Close dialog",children:[a.jsx(l,{}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Lr({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-header",className:As("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Or({className:e,...t}){return a.jsx("div",{"data-slot":"dialog-footer",className:As("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Ur({className:e,...t}){return a.jsx(c,{"data-slot":"dialog-title",className:As("text-lg font-semibold leading-none tracking-tight",e),...t})}function zr({className:e,...t}){return a.jsx(d,{"data-slot":"dialog-description",className:As("text-sm text-muted-foreground",e),...t})}const Br=_t("AdoptionApi",void 0,{enableSentry:!1});const $r=new class{async getAdoptionProfiles(e){try{const t=new URLSearchParams;(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.breed)&&t.append("breed",e.breed),(null==e?void 0:e.minAge)&&t.append("minAge",String(e.minAge)),(null==e?void 0:e.maxAge)&&t.append("maxAge",String(e.maxAge)),(null==e?void 0:e.size)&&e.size.length>0&&e.size.forEach(e=>t.append("size",e)),(null==e?void 0:e.location)&&t.append("location",e.location),void 0!==(null==e?void 0:e.goodWithKids)&&t.append("goodWithKids",String(e.goodWithKids)),void 0!==(null==e?void 0:e.goodWithPets)&&t.append("goodWithPets",String(e.goodWithPets)),(null==e?void 0:e.cursor)&&t.append("cursor",e.cursor),(null==e?void 0:e.limit)&&t.append("limit",String(e.limit));const s=t.toString();return(await ga.get(`${la.ADOPTION.LISTINGS}${s?`?${s}`:""}`)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Br.error("Failed to get adoption profiles",s,{filters:e}),s}}async getProfileById(e){try{return(await ga.get(la.ADOPTION.GET_LISTING(e))).data}catch(t){const s=t instanceof Error?t:new Error(String(t));if(s instanceof Error&&"status"in s&&404===s.status)return null;throw Br.error("Failed to get adoption profile",s,{id:e}),s}}async submitApplication(e){try{return(await ga.post(la.ADOPTION.APPLY,e)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Br.error("Failed to submit application",s,{adoptionProfileId:e.adoptionProfileId}),s}}async getUserApplications(e){try{return(await ga.get(`${la.ADOPTION.APPLICATIONS}?applicantId=${e}`)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return Br.error("Failed to get user applications",s,{userId:e}),[]}}async getAllApplications(){try{return(await ga.get(la.ADOPTION.APPLICATIONS)).data}catch(e){const t=e instanceof Error?e:new Error(String(e));return Br.error("Failed to get all applications",t),[]}}async getApplicationsByProfile(e){try{return(await ga.get(`${la.ADOPTION.APPLICATIONS}?adoptionProfileId=${e}`)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return Br.error("Failed to get applications by profile",s,{profileId:e}),[]}}async createAdoptionProfile(e){try{return(await ga.post(la.ADOPTION.CREATE_LISTING,e)).data}catch(t){const e=t instanceof Error?t:new Error(String(t));throw Br.error("Failed to create adoption profile",e),e}}async updateProfileStatus(e,t){try{await ga.patch(la.ADOPTION.UPDATE_LISTING(e),{status:t})}catch(s){const a=s instanceof Error?s:new Error(String(s));throw Br.error("Failed to update profile status",a,{profileId:e,status:t}),a}}async updateApplicationStatus(e,t){try{await ga.patch(la.ADOPTION.UPDATE_APPLICATION(e),t)}catch(s){const a=s instanceof Error?s:new Error(String(s));throw Br.error("Failed to update application status",a,{applicationId:e,status:t.status}),a}}async getShelters(){try{return(await ga.get("/api/v1/adoption/shelters")).data}catch(e){const t=e instanceof Error?e:new Error(String(e));return Br.error("Failed to get shelters",t),[]}}async deleteProfile(e){try{await ga.delete(la.ADOPTION.DELETE_LISTING(e))}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Br.error("Failed to delete adoption profile",s,{profileId:e}),s}}},Vr=gt("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Yr({className:e,variant:t,asChild:s=!1,...i}){const n=s?r:"span";return a.jsx(n,{"data-slot":"badge",className:As(Vr({variant:t}),e),...i})}function Kr({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:As("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border border-border/60 shadow-lg hover:shadow-xl hover:border-border/80 hover:-translate-y-0.5 transition-all duration-300 backdrop-blur-sm",e),...t})}function qr({className:e,...t}){return a.jsx("div",{"data-slot":"card-header",className:As("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Gr({className:e,...t}){return a.jsx("div",{"data-slot":"card-title",className:As("leading-none font-semibold",e),...t})}function Wr({className:e,...t}){return a.jsx("div",{"data-slot":"card-description",className:As("text-muted-foreground text-sm",e),...t})}function Hr({className:e,...t}){return a.jsx("div",{"data-slot":"card-content",className:As("px-6",e),...t})}function Qr({className:e,...t}){return a.jsx("div",{"data-slot":"card-footer",className:As("flex items-center px-6 [.border-t]:pt-6",e),...t})}function Xr({className:e,...t}){return a.jsx(h,{"data-slot":"avatar",className:As("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function Jr({className:e,...t}){return a.jsx(p,{"data-slot":"avatar-image",className:As("aspect-square size-full",e),...t})}function Zr({className:e,...t}){return a.jsx(g,{"data-slot":"avatar-fallback",className:As("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function ei({className:e,value:t,...s}){return a.jsx(x,{"data-slot":"progress",className:As("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full shadow-inner",e),...s,children:a.jsx(f,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 rounded-full shadow-sm transition-all duration-500 ease-out",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function ti({className:e,orientation:t="horizontal",decorative:s=!0,...r}){return a.jsx(v,{"data-slot":"separator-root",decorative:s,orientation:t,className:As("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const si={},ai=_t("MapProviderConfig"),ri={MAP_STYLE_URL:"https://api.maptiler.com/maps/streets-v2/style.json?key=",MAP_TILES_API_KEY:"",GEOCODING_API_KEY:"",GEOCODING_ENDPOINT:"https://api.maptiler.com/geocoding",PROVIDER:"maplibre"};function ii(){const e={development:{MAP_STYLE_URL:si.VITE_MAP_STYLE_URL||ri.MAP_STYLE_URL,MAP_TILES_API_KEY:si.VITE_MAP_TILES_API_KEY||"",GEOCODING_API_KEY:si.VITE_GEOCODING_API_KEY||"",GEOCODING_ENDPOINT:si.VITE_GEOCODING_ENDPOINT||ri.GEOCODING_ENDPOINT,PROVIDER:si.VITE_MAP_PROVIDER||"maplibre"},staging:{MAP_STYLE_URL:si.VITE_MAP_STYLE_URL||ri.MAP_STYLE_URL,MAP_TILES_API_KEY:si.VITE_MAP_TILES_API_KEY||"",GEOCODING_API_KEY:si.VITE_GEOCODING_API_KEY||"",GEOCODING_ENDPOINT:si.VITE_GEOCODING_ENDPOINT||ri.GEOCODING_ENDPOINT,PROVIDER:si.VITE_MAP_PROVIDER||"maplibre"},production:{MAP_STYLE_URL:si.VITE_MAP_STYLE_URL||ri.MAP_STYLE_URL,MAP_TILES_API_KEY:si.VITE_MAP_TILES_API_KEY||"",GEOCODING_API_KEY:si.VITE_GEOCODING_API_KEY||"",GEOCODING_ENDPOINT:si.VITE_GEOCODING_ENDPOINT||ri.GEOCODING_ENDPOINT,PROVIDER:si.VITE_MAP_PROVIDER||"maplibre"}};return{...ri,...e.production}}let ni=null;function oi(){if("undefined"==typeof window)return ii();try{const e=localStorage.getItem("admin-map-provider-config");if(e)return ni=JSON.parse(e),ni||ii()}catch{return ii()}return ii()}function li(e){const t={...oi(),...e};try{localStorage.setItem("admin-map-provider-config",JSON.stringify(t)),ni=t}catch(s){const e=s instanceof Error?s:new Error(String(s));ai.error("Failed to save map provider config",e)}}function ci(){const e=oi();return e.MAP_STYLE_URL.includes("?key=")?`${e.MAP_STYLE_URL}${e.MAP_TILES_API_KEY}`:e.MAP_STYLE_URL}function di({className:e,type:t,...s}){return a.jsx("input",{type:t,"data-slot":"input",className:As("flex h-9 w-full min-w-0 rounded-md border border-input bg-background px-3 py-1 text-base text-foreground shadow-sm transition-all duration-200 outline-none","placeholder:text-muted-foreground placeholder:transition-opacity","selection:bg-primary selection:text-primary-foreground","file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground","focus:placeholder:opacity-50 focus-visible:border-ring focus-visible:ring-2 focus-visible:ring-ring/20 focus-visible:shadow-md","hover:border-ring/50 hover:shadow-md","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted/30","aria-invalid:border-destructive aria-invalid:ring-2 aria-invalid:ring-destructive/20 aria-invalid:animate-pulse","read-only:bg-muted/20 read-only:cursor-default",e),...s})}function ui({className:e,...t}){return a.jsx(y,{"data-slot":"label",className:As("flex items-center gap-2 text-sm leading-none font-medium text-foreground select-none","group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50","peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function mi({className:e,children:t,...s}){return a.jsxs(j,{"data-slot":"scroll-area",className:As("relative",e),...s,children:[a.jsx(w,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),a.jsx(hi,{}),a.jsx(b,{})]})}function hi({className:e,orientation:t="vertical",...s}){return a.jsx(N,{"data-slot":"scroll-area-scrollbar",orientation:t,className:As("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",e),...s,children:a.jsx(S,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function pi({className:e,defaultValue:t,value:r,min:i=0,max:n=100,...o}){const l=s.useMemo(()=>Array.isArray(r)?r:Array.isArray(t)?t:[i,n],[r,t,i,n]);return a.jsxs(E,{"data-slot":"slider",...void 0!==t?{defaultValue:t}:{},...void 0!==r?{value:r}:{},min:i,max:n,className:As("relative flex w-full touch-none items-center select-none group","data-disabled:opacity-50 data-disabled:cursor-not-allowed","data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col","py-4",e),...o,children:[a.jsx(k,{"data-slot":"slider-track",className:As("relative grow overflow-visible rounded-full","bg-muted/80 backdrop-blur-sm","shadow-inner","transition-all duration-300","group-hover:bg-muted","data-[orientation=horizontal]:h-2.5 data-[orientation=horizontal]:w-full","data-[orientation=vertical]:h-full data-[orientation=vertical]:w-2.5"),children:a.jsx(I,{"data-slot":"slider-range",className:As("absolute rounded-full","bg-gradient-to-r from-primary via-primary/95 to-accent","shadow-lg shadow-primary/25","transition-all duration-300","group-hover:shadow-xl group-hover:shadow-primary/30","data-[orientation=horizontal]:h-full","data-[orientation=vertical]:w-full","relative overflow-hidden"),children:a.jsx(Da,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,ease:"linear",repeatDelay:1}})})}),Array.from({length:l.length},(e,t)=>a.jsx(A,{"data-slot":"slider-thumb",className:As("block size-5 shrink-0 rounded-full","border-2 border-primary","bg-background","shadow-xl shadow-primary/30","transition-all duration-200 ease-out","hover:scale-125 hover:shadow-2xl hover:shadow-primary/40 hover:border-primary/80","active:scale-110 active:shadow-lg","focus-visible:scale-125 focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-primary/25 focus-visible:shadow-2xl","disabled:pointer-events-none disabled:opacity-50","relative overflow-hidden","cursor-grab active:cursor-grabbing"),children:a.jsx(Da,{className:"absolute inset-0 bg-primary/10 rounded-full",animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})},t))]})}function gi({className:e,...t}){return a.jsx(C,{"data-slot":"switch",className:As("peer data-[state=checked]:bg-primary data-[state=checked]:shadow-md data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all duration-200 outline-none focus-visible:ring-[3px] hover:shadow-md active:scale-95 disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted/30",e),...t,children:a.jsx(P,{"data-slot":"switch-thumb",className:As("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full shadow-sm ring-0 transition-all duration-200 data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=checked]:scale-110 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:scale-100")})})}function xi({className:e,...t}){return a.jsx(T,{"data-slot":"tabs",className:As("flex flex-col gap-2",e),...t})}function fi({className:e,...t}){return a.jsx(F,{"data-slot":"tabs-list",className:As("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function vi({className:e,...t}){return a.jsx(R,{"data-slot":"tabs-trigger",className:As("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function yi({className:e,...t}){return a.jsx(_,{"data-slot":"tabs-content",className:As("flex-1 outline-none",e),...t})}function ji({className:e,...t}){return a.jsx("textarea",{"data-slot":"textarea",className:As("border-input placeholder:text-muted-foreground placeholder:transition-opacity focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive aria-invalid:animate-pulse dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-background px-3 py-2 text-base text-foreground shadow-xs transition-all duration-200 outline-none focus-visible:ring-[3px] focus-visible:shadow-md focus:placeholder:opacity-50 hover:border-ring/50 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted/30 read-only:bg-muted/20 read-only:cursor-default selection:bg-primary selection:text-primary-foreground md:text-sm",e),...t})}oi();const wi=_t("realtime");const bi=new class{constructor(){t(this,"listeners",new Map),t(this,"connected",!1),t(this,"accessToken",null),t(this,"offlineQueue",[])}setAccessToken(e){this.accessToken=e}connect(){this.accessToken?(this.connected=!0,this.flushOfflineQueue()):wi.warn("Cannot connect without access token")}disconnect(){this.connected=!1}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){const s=this.listeners.get(e);s&&s.delete(t)}emit(e,t){return new Promise(s=>{if(!this.connected)return this.enqueueOfflineEvent(e,t),void s({success:!1,error:"Offline"});try{s({success:!0}),this.processEvent(e,t)}catch(a){s({success:!1,error:a.message})}})}processEvent(e,t){if("message_send"===e)this.trigger("message_delivered",{messageId:t.messageId});else if("webrtc_signal"===e){const e=t;this.trigger(`webrtc_signal:${e.to}:${e.callId}`,e),this.trigger("webrtc_signal_received",e)}}trigger(e,t){const s=this.listeners.get(e);s&&s.forEach(s=>{try{s(t)}catch(a){wi.error(`Error in event listener for ${e}`,a instanceof Error?a:new Error(String(a)))}})}enqueueOfflineEvent(e,t){this.offlineQueue.push({id:`${Date.now()}-${Math.random()}`,name:e,data:t,timestamp:Date.now()})}async flushOfflineQueue(){const e=[...this.offlineQueue];this.offlineQueue=[];for(const t of e)await this.emit(t.name,t.data)}emitMatchCreated(e){this.trigger("match_created",e)}emitNewMessage(e){this.trigger("message_received",e)}emitNotification(e){this.trigger("notification",e)}emitUserOnline(e){this.trigger("user_online",e)}emitUserOffline(e){this.trigger("user_offline",e)}emitTyping(e,t,s){this.trigger("user_typing",{userId:e,roomId:t,isTyping:s})}async emitWebRTCSignal(e){return this.emit("webrtc_signal",e)}onWebRTCSignal(e,t,s){const a=`webrtc_signal:${t}:${e}`,r=a=>{const r=a;r.callId===e&&r.to===t&&s(r)};return this.on(a,r),this.on("webrtc_signal_received",r),()=>{this.off(a,r),this.off("webrtc_signal_received",r)}}broadcastToRoom(e,t,s){const a=`room:${e}:${t}`;this.trigger(a,s),"object"==typeof s&&null!==s?this.trigger(t,{roomId:e,...s}):this.trigger(t,{roomId:e})}broadcastReaction(e,t){this.broadcastToRoom(e,"reaction",t)}broadcastChatMessage(e,t){this.broadcastToRoom(e,"chat",t)}},Ni={version:"1.0.0",lastUpdated:(new Date).toISOString(),plans:[{id:"plan_free",tier:"free",name:"Free",description:"Start matching with basic features",priceMonthly:0,priceYearly:0,currency:"USD",entitlements:[]},{id:"plan_premium",tier:"premium",name:"Premium",description:"Unlock advanced matching features",priceMonthly:9.99,priceYearly:99.99,currency:"USD",entitlements:["unlimited_swipes","who_liked_you","video_calls","advanced_filters","read_receipts","rewind","boost_5x"],trialDays:7,popular:!0},{id:"plan_elite",tier:"elite",name:"Elite",description:"Premium features plus priority support",priceMonthly:19.99,priceYearly:199.99,currency:"USD",entitlements:["unlimited_swipes","who_liked_you","video_calls","advanced_filters","priority_support","read_receipts","rewind","boost_10x","super_like_10x"],trialDays:14}],consumables:[{id:"consumable_boost_5",key:"boosts",name:"5 Boosts",description:"Boost your profile for 5 sessions",quantity:5,price:4.99,currency:"USD"},{id:"consumable_boost_10",key:"boosts",name:"10 Boosts",description:"Boost your profile for 10 sessions",quantity:10,price:8.99,currency:"USD"},{id:"consumable_superlike_5",key:"super_likes",name:"5 Super Likes",description:"Stand out with 5 Super Likes",quantity:5,price:3.99,currency:"USD"},{id:"consumable_superlike_10",key:"super_likes",name:"10 Super Likes",description:"Stand out with 10 Super Likes",quantity:10,price:6.99,currency:"USD"}]};function Si(e){return Ni.plans.find(t=>t.id===e)}const Ei=_t("PaymentsApi");const ki=new class{async getUserEntitlements(e){try{return(await ga.get(`${la.PAYMENTS.ENTITLEMENTS}?userId=${e}`)).data.entitlements}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Ei.error("Failed to get user entitlements",s,{userId:e}),s}}async updateEntitlements(e,t,s,a){try{const r={planTier:t,...void 0!==s&&{reason:s},...void 0!==a&&{actorUserId:a}};return(await ga.put(`${la.PAYMENTS.UPDATE_ENTITLEMENTS}?userId=${e}`,r)).data.entitlements}catch(r){const s=r instanceof Error?r:new Error(String(r));throw Ei.error("Failed to update entitlements",s,{userId:e,planTier:t}),s}}async getUserSubscription(e){try{return(await ga.get(`${la.PAYMENTS.SUBSCRIPTION}?userId=${e}`)).data.subscription}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Ei.error("Failed to get user subscription",s,{userId:e}),s}}async createSubscription(e,t,s,a={}){try{const r={planId:t,store:s,metadata:a};return(await ga.post(`${la.PAYMENTS.CREATE_SUBSCRIPTION}?userId=${e}`,r)).data.subscription}catch(r){const s=r instanceof Error?r:new Error(String(r));throw Ei.error("Failed to create subscription",s,{userId:e,planId:t}),s}}async updateSubscription(e,t){try{return(await ga.patch(la.PAYMENTS.UPDATE_SUBSCRIPTION(e),t)).data.subscription}catch(s){const t=s instanceof Error?s:new Error(String(s));throw Ei.error("Failed to update subscription",t,{subscriptionId:e}),t}}async addConsumable(e,t,s,a){try{const r={consumableKey:t,quantity:s,...void 0!==a&&{actorUserId:a}};return(await ga.post(`${la.PAYMENTS.CONSUMABLES}?userId=${e}`,r)).data.entitlements}catch(r){const s=r instanceof Error?r:new Error(String(r));throw Ei.error("Failed to add consumable",s,{userId:e,consumableKey:t}),s}}async redeemConsumable(e,t,s){try{const a={consumableKey:t,idempotencyKey:s};return(await ga.post(`${la.PAYMENTS.CONSUMABLES}/redeem?userId=${e}`,a)).data}catch(a){const s=a instanceof Error?a:new Error(String(a));throw Ei.error("Failed to redeem consumable",s,{userId:e,consumableKey:t}),s}}async getUserBillingIssue(e){try{return(await ga.get(`/payments/billing-issue?userId=${e}`)).data.issue}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Ei.error("Failed to get billing issue",s,{userId:e}),s}}async createBillingIssue(e,t,s){try{const a={subscriptionId:t,type:s};return(await ga.post(`/payments/billing-issue?userId=${e}`,a)).data.issue}catch(a){const s=a instanceof Error?a:new Error(String(a));throw Ei.error("Failed to create billing issue",s,{userId:e,subscriptionId:t}),s}}async resolveBillingIssue(e){try{await ga.post(`/payments/billing-issue/${e}/resolve`)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Ei.error("Failed to resolve billing issue",s,{issueId:e}),s}}async getAuditLogs(e=50){try{return(await ga.get(`/payments/audit-logs?limit=${e}`)).data.logs}catch(t){const e=t instanceof Error?t:new Error(String(t));throw Ei.error("Failed to get audit logs",e),e}}async getAllSubscriptions(){try{return(await ga.get("/payments/subscriptions/all")).data.subscriptions}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Ei.error("Failed to get all subscriptions",t),t}}async getRevenueMetrics(){try{return(await ga.get("/payments/revenue-metrics")).data.metrics}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Ei.error("Failed to get revenue metrics",t),t}}async getUsageCounter(e,t){try{const s=new URLSearchParams;s.append("userId",e),t&&s.append("date",t);return(await ga.get(`/payments/usage-counter?${s.toString()}`)).data.usageCounter}catch(s){const a=s instanceof Error?s:new Error(String(s));throw Ei.error("Failed to get usage counter",a,{userId:e,date:t}),a}}async incrementUsage(e,t,s){try{const a={type:t,...s?{operationId:s}:{}};return(await ga.post(`/payments/usage-counter/increment?userId=${e}`,a)).data}catch(a){const r=a instanceof Error?a:new Error(String(a));throw Ei.error("Failed to increment usage",r,{userId:e,type:t,operationId:s}),r}}},Ii=_t("PaymentsService");class Ai{static getCatalog(){return Ni}static async getUserEntitlements(e){try{return await ki.getUserEntitlements(e)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Ii.error("Failed to get user entitlements",s,{userId:e}),s}}static async updateEntitlements(e,t,s,a){try{return await ki.updateEntitlements(e,t,s,a)}catch(r){const s=r instanceof Error?r:new Error(String(r));throw Ii.error("Failed to update entitlements",s,{userId:e,planTier:t}),s}}static async getUserSubscription(e){try{return await ki.getUserSubscription(e)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Ii.error("Failed to get user subscription",s,{userId:e}),s}}static async createSubscription(e,t,s,a={}){try{return await ki.createSubscription(e,t,s,a)}catch(r){const s=r instanceof Error?r:new Error(String(r));throw Ii.error("Failed to create subscription",s,{userId:e,planId:t}),s}}static async cancelSubscription(e,t=!1,s,a){try{const r=(await ki.getAllSubscriptions()).find(t=>t.id===e);if(!r)throw new Error("Subscription not found");const i=t?{status:"canceled"}:{cancelAtPeriodEnd:!0},n=await ki.updateSubscription(e,i);return t&&await ki.updateEntitlements(r.userId,"free",a,s),n}catch(r){const t=r instanceof Error?r:new Error(String(r));throw Ii.error("Failed to cancel subscription",t,{subscriptionId:e}),t}}static async compSubscription(e,t,s,a,r){var i;try{const n=await ki.createSubscription(e,t,"web",{compMonths:s,compReason:r,compByUserId:a});return await ki.updateEntitlements(e,(null==(i=Si(t))?void 0:i.tier)||"premium",r,a),n}catch(n){const s=n instanceof Error?n:new Error(String(n));throw Ii.error("Failed to comp subscription",s,{userId:e,planId:t}),s}}static async addConsumable(e,t,s,a){try{return await ki.addConsumable(e,t,s,a)}catch(r){const s=r instanceof Error?r:new Error(String(r));throw Ii.error("Failed to add consumable",s,{userId:e,consumableKey:t}),s}}static async redeemConsumable(e,t,s){try{return await ki.redeemConsumable(e,t,s)}catch(a){const s=a instanceof Error?a:new Error(String(a));throw Ii.error("Failed to redeem consumable",s,{userId:e,consumableKey:t}),s}}static async createBillingIssue(e,t,s){try{return await ki.createBillingIssue(e,t,s)}catch(a){const s=a instanceof Error?a:new Error(String(a));throw Ii.error("Failed to create billing issue",s,{userId:e,subscriptionId:t}),s}}static async getUserBillingIssue(e){try{return await ki.getUserBillingIssue(e)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Ii.error("Failed to get user billing issue",s,{userId:e}),s}}static async resolveBillingIssue(e){try{await ki.resolveBillingIssue(e)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Ii.error("Failed to resolve billing issue",s,{issueId:e}),s}}static createSubscriptionEvent(e){return Ii.warn("createSubscriptionEvent should be handled by backend",{event:e}),{id:"",...e,timestamp:(new Date).toISOString()}}static logAudit(e){return Ii.warn("logAudit should be handled by backend",{entry:e}),{id:"",timestamp:(new Date).toISOString(),actorRole:"user",...e}}static async getAuditLogs(e=50){try{return await ki.getAuditLogs(e)}catch(t){const e=t instanceof Error?t:new Error(String(t));throw Ii.error("Failed to get audit logs",e),e}}static async getAllSubscriptions(){try{return await ki.getAllSubscriptions()}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Ii.error("Failed to get all subscriptions",t),t}}static async getRevenueMetrics(){try{return await ki.getRevenueMetrics()}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Ii.error("Failed to get revenue metrics",t),t}}}const Ci=_t("push-notifications");const Pi=new class{constructor(){t(this,"registration",null),t(this,"permission","default")}async initialize(){if(!("serviceWorker"in navigator)||!("PushManager"in window))return Ci.warn("Push notifications not supported"),!1;this.permission=Notification.permission;try{return this.registration=await navigator.serviceWorker.ready,!0}catch(e){return Ci.error("Service worker initialization failed",e instanceof Error?e:new Error(String(e))),!1}}async requestPermission(){if(!("Notification"in window))return!1;if("granted"===this.permission)return!0;try{return this.permission=await Notification.requestPermission(),"granted"===this.permission}catch(e){return Ci.error("Permission request failed",e instanceof Error?e:new Error(String(e))),!1}}async showNotification(e){if(this.registration&&"granted"===this.permission)try{const t={body:e.body,icon:e.icon??"/icon-192.png",badge:e.badge??"/badge-72.png",...e.image?{image:e.image}:{},...e.data?{data:e.data}:{},...e.tag?{tag:e.tag}:{},...void 0!==e.requireInteraction?{requireInteraction:e.requireInteraction}:{},...e.actions?{actions:e.actions}:{}};await this.registration.showNotification(e.title,t)}catch(t){Ci.error("Failed to show notification",t instanceof Error?t:new Error(String(t)))}else Ci.warn("Cannot show notification: registration or permission missing")}isSupported(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}getPermission(){return this.permission}hasPermission(){return"granted"===this.permission}};const Ti=new class{constructor(){t(this,"routes",new Map),t(this,"initialized",!1)}initialize(){this.initialized||(this.handleInitialUrl(),window.addEventListener("popstate",()=>{this.handleCurrentUrl()}),this.initialized=!0)}handleInitialUrl(){const e=new URL(window.location.href);this.processUrl(e)}handleCurrentUrl(){const e=new URL(window.location.href);this.processUrl(e)}processUrl(e){const t=e.pathname,s={};e.searchParams.forEach((e,t)=>{s[t]=e});const a=this.routes.get(t);a&&a(s)}registerRoute(e,t){this.routes.set(e,t)}navigate(e,t){const s=new URL(e,window.location.origin);t&&Object.entries(t).forEach(([e,t])=>{s.searchParams.set(e,t)}),window.history.pushState({},"",s.toString()),this.processUrl(s)}parseDeepLink(e){try{const t=new URL(e),s={};return t.searchParams.forEach((e,t)=>{s[t]=e}),{path:t.pathname,params:s}}catch(t){return Ci.error("Invalid deep link",t instanceof Error?t:new Error(String(t))),null}}handlePushNotificationClick(e){if(e.url&&"string"==typeof e.url){const t=this.parseDeepLink(e.url);t&&this.navigate(t.path,t.params)}else if(e.path&&"string"==typeof e.path){const t=e.params&&"object"==typeof e.params?e.params:{},s={};for(const[e,a]of Object.entries(t))s[e]=String(a);this.navigate(e.path,s)}}},Fi=_t("NotificationsApi");const Ri=new class{async updateUserLocation(e,t,s){try{const a={userId:e,lat:t,lon:s};await ga.post(la.USERS.LOCATION,a)}catch(a){const t=a instanceof Error?a:new Error(String(a));throw Fi.error("Failed to update user location",t,{userId:e}),t}}async queryNearbyUsers(e,t,s){try{const a=`${la.USERS.LOCATION_NEARBY}?lat=${e}&lon=${t}&radius=${s}`;return(await ga.get(a)).data.userIds}catch(a){const r=a instanceof Error?a:new Error(String(a));throw Fi.error("Failed to query nearby users",r,{centerLat:e,centerLon:t,radiusKm:s}),r}}async triggerGeofence(e,t,s,a){try{const r={alertId:e,lat:t,lon:s,radiusKm:a};await ga.post(la.NOTIFICATIONS.GEOFENCE,r)}catch(r){const t=r instanceof Error?r:new Error(String(r));throw Fi.error("Failed to trigger geofence",t,{alertId:e}),t}}async getUserLocations(){try{return(await ga.get(la.NOTIFICATIONS.USER_LOCATIONS)).data.locations}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Fi.error("Failed to get user locations",t),t}}},_i=_t("NotificationsService");const Mi=new class{async notifyNewLostAlert(e,t){try{await Pi.showNotification({id:`lost-alert-${e.id}`,title:`Lost Pet Alert: ${e.petSummary.name}`,body:`${e.petSummary.species}  Last seen ${new Date(e.lastSeen.whenISO).toLocaleDateString()}`,icon:(e.photos&&e.photos.length>0?e.photos[0]:"/icon-192.png")??"/icon-192.png",...e.photos&&e.photos.length>0?{image:e.photos[0]}:{},tag:"lost-alert",data:{type:"lost-alert",alertId:e.id,deepLink:`/lost-found/alert/${e.id}`},actions:[{action:"view",title:"View Alert",icon:"/icon-192.png"},{action:"report-sighting",title:"Report Sighting",icon:"/icon-192.png"}],requireInteraction:!1})}catch(s){_i.error("Failed to send lost alert notification",s instanceof Error?s:new Error(String(s)))}}async notifyNewSighting(e,t){try{await Pi.showNotification({id:`sighting-${e.id}`,title:"New Sighting Reported!",body:`Someone reported seeing ${t.petSummary.name}`,icon:(t.photos&&t.photos.length>0?t.photos[0]:"/icon-192.png")??"/icon-192.png",...e.photos&&e.photos.length>0?{image:e.photos[0]}:{},tag:"sighting",data:{type:"sighting",sightingId:e.id,alertId:t.id,deepLink:`/lost-found/alert/${t.id}/sighting/${e.id}`},actions:[{action:"view",title:"View Sighting",icon:"/icon-192.png"}],requireInteraction:!0})}catch(s){_i.error("Failed to send sighting notification",s instanceof Error?s:new Error(String(s)))}}async notifyNewCommunityPost(e,t){try{const{shouldNotifyForPost:s}=await Pt(async()=>{const{shouldNotifyForPost:e}=await import("./feature-community-DxZ7YsOF.js").then(e=>e.s);return{shouldNotifyForPost:e}},__vite__mapDeps([6,1,2,3,4,5]));if(!(await s(e.authorId,t)))return;const a=e.media&&e.media.length>0&&e.media[0]?"string"==typeof e.media[0]?e.media[0]:e.media[0].url:void 0;await Pi.showNotification({id:`community-post-${e.id}`,title:`New Post by ${e.authorName}`,body:e.text?e.text.slice(0,100):"New post",icon:e.authorAvatar??"/icon-192.png",...a?{image:a}:{},tag:"community-post",data:{type:"community-post",postId:e.id,deepLink:`/community/post/${e.id}`},actions:[{action:"view",title:"View Post",icon:"/icon-192.png"},{action:"react",title:"React",icon:"/icon-192.png"}],requireInteraction:!1})}catch(s){_i.error("Failed to send community post notification",s instanceof Error?s:new Error(String(s)))}}async notifyGoLive(e,t){try{const{shouldNotifyForStream:s}=await Pt(async()=>{const{shouldNotifyForStream:e}=await import("./feature-community-DxZ7YsOF.js").then(e=>e.s);return{shouldNotifyForStream:e}},__vite__mapDeps([6,1,2,3,4,5]));if(!(await s(e.hostId,t)))return;await Pi.showNotification({id:`live-stream-${e.id}`,title:`${e.hostName} is Live!`,body:e.title,icon:e.hostAvatar??"/icon-192.png",tag:"live-stream",data:{type:"live-stream",streamId:e.id,deepLink:`/live/${e.id}`},actions:[{action:"join",title:"Join Stream",icon:"/icon-192.png"}],requireInteraction:!1})}catch(s){_i.error("Failed to send go live notification",s instanceof Error?s:new Error(String(s)))}}async notifyAlertView(e,t){try{if(10===t||50===t||100===t){const s=await Li.getAlertById(e);if(!s)return;const a=(s.photos&&s.photos.length>0?s.photos[0]:"/icon-192.png")??"/icon-192.png";await Pi.showNotification({id:`alert-view-${e}-${t}`,title:`${t} People Viewed Your Alert`,body:`${s.petSummary.name}'s alert has been seen by ${t} people`,icon:a,tag:"alert-view",data:{type:"alert-view",alertId:s.id,deepLink:`/lost-found/alert/${s.id}`},requireInteraction:!1})}}catch(s){_i.error("Failed to send alert view notification",s instanceof Error?s:new Error(String(s)))}}async notifyPostPopular(e,t){try{10!==t&&50!==t&&100!==t||await Pi.showNotification({id:`post-popular-${e.id}-${t}`,title:"Your Post is Getting Popular!",body:`Your post has ${t} reactions`,icon:e.authorAvatar??"/icon-192.png",tag:"post-popular",data:{type:"post-popular",postId:e.id,deepLink:`/community/post/${e.id}`},requireInteraction:!1})}catch(s){_i.error("Failed to send post popular notification",s instanceof Error?s:new Error(String(s)))}}async initialize(){await Pi.initialize(),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("notificationclick",e=>{const t=e;t.notification.close();const s=t.notification.data;(null==s?void 0:s.deepLink)&&Ti.navigate(s.deepLink,s.params??{}),"view"===t.action?(null==s?void 0:s.deepLink)&&Ti.navigate(s.deepLink,s.params??{}):"report-sighting"===t.action?(null==s?void 0:s.alertId)&&Ti.navigate(`/lost-found/alert/${s.alertId}/report-sighting`,{}):"join"===t.action&&(null==s?void 0:s.streamId)&&Ti.navigate(`/live/${s.streamId}`,{})})}async requestPermission(){return await Pi.requestPermission()}isSupported(){return Pi.isSupported()}hasPermission(){return Pi.hasPermission()}async triggerGeofencedNotifications(e,t=10){try{if(!e.lastSeen.lat||!e.lastSeen.lon)return void _i.warn("Alert missing location data, skipping geofenced notifications",{alertId:e.id});await Ri.triggerGeofence(e.id,e.lastSeen.lat,e.lastSeen.lon,t),_i.info("Geofenced notifications triggered",{alertId:e.id,radiusKm:t})}catch(s){_i.error("Failed to trigger geofenced notifications",s instanceof Error?s:new Error(String(s)),{alertId:e.id})}}};"undefined"!=typeof window&&Mi.initialize().catch(e=>{_i.error("Failed to initialize notifications service",e instanceof Error?e:new Error(String(e)))});const Di=_t("LostFoundAPI");const Li=new class{async createAlert(e){try{const s={...e,ownerId:e.ownerId,ownerName:e.ownerName,...e.ownerAvatar?{ownerAvatar:e.ownerAvatar}:{}},a=(await ga.post(la.LOST_FOUND.CREATE_ALERT,s)).data.alert;try{const e=a.lastSeen.radiusM/1e3||10;await Mi.triggerGeofencedNotifications(a,e),Di.info("Geofenced notifications triggered",{alertId:a.id,radiusKm:e})}catch(t){Di.error("Failed to trigger geofenced notifications",t instanceof Error?t:new Error(String(t)),{alertId:a.id})}return a}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Di.error("Failed to create alert",s,{ownerId:e.ownerId}),s}}async queryAlerts(e){try{const t={};(null==e?void 0:e.status)&&e.status.length>0&&(t.status=e.status),(null==e?void 0:e.species)&&e.species.length>0&&(t.species=e.species),(null==e?void 0:e.location)&&(t.near=`${e.location.lat},${e.location.lon}`,t.radius=e.location.radiusKm),void 0!==(null==e?void 0:e.minReward)&&(t.minReward=e.minReward),(null==e?void 0:e.dateFrom)&&(t.dateFrom=e.dateFrom),(null==e?void 0:e.dateTo)&&(t.dateTo=e.dateTo),(null==e?void 0:e.cursor)&&(t.cursor=e.cursor),(null==e?void 0:e.limit)&&(t.limit=e.limit);const s=la.LOST_FOUND.QUERY_ALERTS+(Object.keys(t).length>0?"?"+new URLSearchParams(Object.entries(t).map(([e,t])=>[e,String(t)])).toString():"");return(await ga.get(s)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Di.error("Failed to query alerts",s,{filters:e}),s}}async getAlertById(e){try{const s=(await ga.get(la.LOST_FOUND.GET_ALERT(e))).data.alert;try{await ga.post(la.LOST_FOUND.INCREMENT_VIEW(e))}catch(t){Di.warn("Failed to increment view count",{alertId:e,error:t instanceof Error?t:new Error(String(t))})}return s}catch(t){const s=t instanceof Error?t:new Error(String(t));if(s.message.includes("404")||s.message.includes("not found"))return null;throw Di.error("Failed to get alert by ID",s,{id:e}),s}}async updateAlertStatus(e,t,s){try{const a=await this.getAlertById(e);if(!a)throw new Error("Alert not found");if(a.ownerId!==s)throw new Error("Unauthorized: Only alert owner can update status");if(!function(e,t){if(e===t)return!1;switch(e){case"active":return"found"===t||"archived"===t;case"found":return"archived"===t;default:return!1}}(a.status,t))throw new Error(`Invalid status transition from ${a.status} to ${t}`);const r={status:t};return(await ga.patch(la.LOST_FOUND.UPDATE_STATUS(e),r)).data.alert}catch(a){const r=a instanceof Error?a:new Error(String(a));throw Di.error("Failed to update alert status",r,{id:e,status:t,userId:s}),r}}async createSighting(e){try{const s=await this.getAlertById(e.alertId);if(!s)throw new Error("Alert not found");if("active"!==s.status)throw new Error("Cannot report sighting for inactive alert");const a={...e,reporterId:e.reporterId,reporterName:e.reporterName,...e.reporterAvatar?{reporterAvatar:e.reporterAvatar}:{}},r=(await ga.post(la.LOST_FOUND.CREATE_SIGHTING,a)).data.sighting;try{await Mi.notifyNewSighting(r,s),Di.info("Sighting notification sent",{sightingId:r.id,alertId:s.id,ownerId:s.ownerId})}catch(t){Di.error("Failed to send sighting notification",t instanceof Error?t:new Error(String(t)))}return r}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Di.error("Failed to create sighting",s,{alertId:e.alertId}),s}}async querySightings(e){try{const t=`${la.LOST_FOUND.GET_SIGHTINGS}?alertId=${e}`;return(await ga.get(t)).data.sightings}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Di.error("Failed to query sightings",s,{alertId:e}),s}}async getUserAlerts(e){try{const t=`${la.LOST_FOUND.QUERY_ALERTS}?mine=1&ownerId=${e}`;return(await ga.get(t)).data.alerts}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Di.error("Failed to get user alerts",s,{userId:e}),s}}async verifySighting(e,t,s){try{return(await ga.post(`/alerts/sightings/${e}/verify`,{verified:t,userId:s})).data.sighting}catch(a){const s=a instanceof Error?a:new Error(String(a));throw Di.error("Failed to verify sighting",s,{sightingId:e,verified:t}),s}}};const Oi=_t("RateLimitingAPI");const Ui=new class{async checkRateLimit(e,t,s,a){try{const r={userId:e,action:t,maxRequests:s,windowMs:a};return(await ga.post("/rate-limiting/check",r)).data}catch(r){const s=r instanceof Error?r:new Error(String(r));throw Oi.error("Failed to check rate limit",s,{userId:e,action:t}),s}}},zi=_t("RateLimiting");const Bi=new class{constructor(){t(this,"abuseDetections",new Map),t(this,"metrics",new Map),t(this,"ipThrottles",new Map),t(this,"enableAbuseDetection",!0),t(this,"abuseThreshold",10),t(this,"blockDuration",36e5)}getClientIP(){return"client-ip"}checkAbuse(e,t){if(!this.enableAbuseDetection)return!1;const s=t?`user:${t}`:`ip:${e}`,a=this.abuseDetections.get(s);return!!a&&(!!(a.blocked&&a.blockedUntil&&a.blockedUntil>Date.now())||(a.blocked&&a.blockedUntil&&a.blockedUntil<=Date.now()?(this.abuseDetections.delete(s),!1):a.blocked))}recordViolation(e,t){if(!this.enableAbuseDetection)return;const s=t?`user:${t}`:`ip:${e}`,a=this.abuseDetections.get(s);if(a){const e={...a,violations:a.violations+1,lastViolation:Date.now(),blocked:a.violations+1>=this.abuseThreshold,blockedUntil:a.violations+1>=this.abuseThreshold?Date.now()+this.blockDuration:a.blockedUntil};this.abuseDetections.set(s,e)}else{const a={ip:e,userId:t,violations:1,lastViolation:Date.now(),blocked:!1};this.abuseDetections.set(s,a)}}async checkIPRateLimit(e,t){const s=Date.now(),a=`ip-rate-limit:${t.action}:${e}`,r=(this.ipThrottles.get(a)??[]).filter(e=>s-e<t.windowMs);if(r.length>=t.maxRequests){this.recordViolation(e);const s=r[0];if(s){return{allowed:!1,remaining:0,resetAt:s+t.windowMs,limit:t.maxRequests}}}r.push(s),this.ipThrottles.set(a,r);return{allowed:!0,remaining:Math.max(0,t.maxRequests-r.length),resetAt:r.length>0&&r[0]?r[0]+t.windowMs:s+t.windowMs,limit:t.maxRequests}}getAbuseDetection(e,t){const s=t?`user:${t}`:`ip:${e}`;return this.abuseDetections.get(s)??null}getMetrics(e){return this.metrics.get(e)??null}updateMetrics(e,t,s){const a=this.metrics.get(e)??{action:e,totalRequests:0,allowedRequests:0,blockedRequests:0,averageResponseTime:0,peakRequestsPerSecond:0},r={...a,totalRequests:a.totalRequests+1,allowedRequests:t?a.allowedRequests+1:a.allowedRequests,blockedRequests:t?a.blockedRequests:a.blockedRequests+1,averageResponseTime:(a.averageResponseTime*a.totalRequests+s)/(a.totalRequests+1)};this.metrics.set(e,r)}};async function $i(e,t){const s=await async function(e,t){const{maxRequests:s,windowMs:a,action:r}=t,i=Date.now(),n=performance.now(),o=Bi.getClientIP();if(Bi.checkAbuse(o,e))return zi.warn("Request blocked due to abuse detection",{userId:e,ip:o,action:r}),{allowed:!1,remaining:0,resetAt:i+a,limit:s};const l=await Bi.checkIPRateLimit(o,t);if(!l.allowed){Bi.recordViolation(o,e);const t=performance.now()-n;return Bi.updateMetrics(r,!1,t),l}try{const t=await Ui.checkRateLimit(e,r,s,a),i=performance.now()-n;return Bi.updateMetrics(r,t.allowed,i),t}catch(c){const t=c instanceof Error?c:new Error(String(c));zi.error("Rate limit check failed, falling back to local storage",t,{userId:e,action:r});const l=`rate-limit:${r}:${e}`,d=(await Kt.get(l)??[]).filter(e=>i-e<a);if(d.length>=s){Bi.recordViolation(o,e);const t=d[0];if(t){const e=t+a,i=performance.now()-n;return Bi.updateMetrics(r,!1,i),{allowed:!1,remaining:0,resetAt:e,limit:s}}}d.push(i),await Kt.set(l,d);const u=Math.max(0,s-d.length),m=d.length>0&&d[0]?d[0]+a:i+a,h=performance.now()-n;return Bi.updateMetrics(r,!0,h),{allowed:!0,remaining:u,resetAt:m,limit:s}}}(e,t);if(!s.allowed){const e=Math.ceil((s.resetAt-Date.now())/6e4);throw new Error(`Rate limit exceeded. Maximum ${t.maxRequests} ${t.action} requests per ${Math.floor(t.windowMs/6e4)} minutes. Try again in ${e} minute${1!==e?"s":""}.`)}}const Vi=_t("CommunityAPI");class Yi{async createPost(e){try{const t={...e,authorId:e.authorId,authorName:e.authorName,...e.authorAvatar?{authorAvatar:e.authorAvatar}:{},status:"pending_review"},s=(await ga.post(la.COMMUNITY.CREATE_POST,t)).data.post;return"pending_review"!==s.status?Vi.info("Post created, awaiting admin approval",{postId:s.id,currentStatus:s.status}):Vi.info("Post created and queued for admin approval",{postId:s.id}),s}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Vi.error("Failed to create post",s,{authorId:e.authorId}),s}}async queryFeed(e,t){try{const s={};(null==e?void 0:e.kind)&&e.kind.length>0&&(s.kind=e.kind),(null==e?void 0:e.authorId)&&(s.authorId=e.authorId),(null==e?void 0:e.tags)&&e.tags.length>0&&(s.tags=e.tags),(null==e?void 0:e.location)&&(s.near=`${e.location.lat},${e.location.lon}`,s.radius=e.location.radiusKm),(null==e?void 0:e.visibility)&&e.visibility.length>0?s.visibility=e.visibility:t&&(s.visibility=["public","matches"]),(null==e?void 0:e.featured)&&(s.featured=e.featured),(null==e?void 0:e.sortBy)&&(s.sortBy=e.sortBy),(null==e?void 0:e.cursor)&&(s.cursor=e.cursor),(null==e?void 0:e.limit)&&(s.limit=e.limit),t&&(s.userId=t);const a=la.COMMUNITY.POSTS+(Object.keys(s).length>0?"?"+new URLSearchParams(Object.entries(s).map(([e,t])=>[e,String(t)])).toString():"");return(await ga.get(a)).data}catch(s){const t=s instanceof Error?s:new Error(String(s));throw Vi.error("Failed to query feed",t,{filters:e}),t}}async getPostById(e){try{const s=(await ga.get(la.COMMUNITY.POST(e))).data.post;try{await ga.post(`${la.COMMUNITY.POST(e)}/view`)}catch(t){Vi.warn("Failed to increment view count",{postId:e,error:t instanceof Error?t:new Error(String(t))})}return s}catch(t){const s=t instanceof Error?t:new Error(String(t));if(s.message.includes("404")||s.message.includes("not found"))return null;throw Vi.error("Failed to get post by ID",s,{id:e}),s}}async getAllPosts(){try{return(await this.queryFeed({limit:1e3})).posts}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Vi.error("Failed to get all posts",t),t}}async getContentFingerprints(){try{return(await ga.get("/community/posts/fingerprints")).data.fingerprints}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Vi.error("Failed to get content fingerprints",t),t}}async toggleReaction(e,t,s,a,r){try{const i={userId:t,userName:s,...void 0!==a&&{userAvatar:a},emoji:r};return(await ga.post(la.COMMUNITY.LIKE_POST(e),i)).data}catch(i){const s=i instanceof Error?i:new Error(String(i));throw Vi.error("Failed to toggle reaction",s,{postId:e,userId:t}),s}}async createComment(e){try{const t=await this.getPostById(e.postId);if(!t)throw new Error("Post not found");if("active"!==t.status)throw new Error("Cannot comment on inactive post");await $i(e.authorId,{maxRequests:50,windowMs:36e5,action:"comment"});const s={...e,authorId:e.authorId,authorName:e.authorName,...e.authorAvatar?{authorAvatar:e.authorAvatar}:{}};return(await ga.post(la.COMMUNITY.COMMENT(e.postId),s)).data.comment}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Vi.error("Failed to create comment",s,{postId:e.postId}),s}}async getPostComments(e){try{return(await ga.get(la.COMMUNITY.COMMENT(e))).data.comments}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Vi.error("Failed to get post comments",s,{postId:e}),s}}async reportContent(e){try{const t={...e,reporterId:e.reporterId};await ga.post(`${la.COMMUNITY.POST(e.resourceId)}/report`,t),Vi.info("Content reported",{resourceType:e.resourceType,resourceId:e.resourceId,reason:e.reason,reporterId:e.reporterId})}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Vi.error("Failed to report content",s,{resourceId:e.resourceId}),s}}async appealModeration(e,t,s,a,r,i){try{const n={resourceId:e,resourceType:t,userId:s,userName:a,appealText:r,...void 0!==i&&{reportId:i}};await ga.post("/community/appeals",n),Vi.info("Appeal submitted",{resourceType:t,resourceId:e,userId:s,reportId:i})}catch(n){const t=n instanceof Error?n:new Error(String(n));throw Vi.error("Failed to submit appeal",t,{resourceId:e,userId:s}),t}}async getReportsForModeration(e){try{const t={};(null==e?void 0:e.status)&&e.status.length>0&&(t.status=e.status),(null==e?void 0:e.entityType)&&e.entityType.length>0&&(t.entityType=e.entityType),(null==e?void 0:e.limit)&&(t.limit=e.limit);const s="/community/reports"+(Object.keys(t).length>0?"?"+new URLSearchParams(Object.entries(t).map(([e,t])=>[e,String(t)])).toString():"");return(await ga.get(s)).data.reports}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Vi.error("Failed to get reports for moderation",s,{filters:e}),s}}async getPendingPosts(){try{return(await this.queryFeed({limit:1e3})).posts.filter(e=>"pending_review"===e.status)}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Vi.error("Failed to get pending posts",t),t}}async updatePostStatus(e,t,s,a){try{const r=await this.getPostById(e);if(!r)throw new Error("Post not found");if(!function(e,t){if(e===t)return!1;switch(e){case"pending_review":return"active"===t||"rejected"===t;case"active":case"rejected":return"archived"===t;default:return!1}}(r.status,t))throw new Error(`Invalid status transition from ${r.status} to ${t}`);return(await ga.patch(la.COMMUNITY.POST(e),{status:t,adminId:s,reason:a})).data.post}catch(r){const a=r instanceof Error?r:new Error(String(r));throw Vi.error("Failed to update post status",a,{postId:e,status:t,adminId:s}),a}}}let Ki=null;const qi=(Ki||(Ki=new Yi),Ki),Gi=_t("CommunityApi");const Wi=new class{async getFeed(e){try{const t=new URLSearchParams;t.append("mode",e.mode),void 0!==e.lat&&t.append("lat",String(e.lat)),void 0!==e.lng&&t.append("lng",String(e.lng)),void 0!==e.cursor&&t.append("cursor",e.cursor),void 0!==e.limit&&t.append("limit",String(e.limit));const s=t.toString();return(await ga.get(`${la.COMMUNITY.POSTS}${s?`?${s}`:""}`)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to get feed",s,{options:e}),s}}async createPost(e){try{return(await ga.post(la.COMMUNITY.CREATE_POST,e)).data}catch(t){const e=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to create post",e),e}}async getPost(e){try{return(await ga.get(la.COMMUNITY.POST(e))).data}catch(t){const s=t instanceof Error?t:new Error(String(t));if(s instanceof Error&&"status"in s&&404===s.status)return null;throw Gi.error("Failed to get post",s,{postId:e}),s}}async deletePost(e){try{await ga.delete(la.COMMUNITY.POST(e))}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to delete post",s,{postId:e}),s}}async likePost(e){try{return(await ga.post(la.COMMUNITY.LIKE_POST(e),{})).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to like post",s,{postId:e}),s}}async unlikePost(e){try{await ga.delete(`${la.COMMUNITY.LIKE_POST(e)}`)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to unlike post",s,{postId:e}),s}}async getPostLikes(e){try{return(await ga.get(`${la.COMMUNITY.POST(e)}/reactions`)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return Gi.error("Failed to get post likes",s,{postId:e}),[]}}async isPostLiked(e){try{return(await ga.get(`${la.COMMUNITY.POST(e)}/liked`)).data.liked}catch(t){const s=t instanceof Error?t:new Error(String(t));return Gi.error("Failed to check if post is liked",s,{postId:e}),!1}}async getComments(e,t){try{const s=t?`?cursor=${t}`:"";return(await ga.get(`${la.COMMUNITY.COMMENT(e)}${s}`)).data}catch(s){const a=s instanceof Error?s:new Error(String(s));return Gi.error("Failed to get comments",a,{postId:e,cursor:t}),[]}}async addComment(e,t){try{return(await ga.post(la.COMMUNITY.COMMENT(e),t)).data}catch(s){const t=s instanceof Error?s:new Error(String(s));throw Gi.error("Failed to add comment",t,{postId:e}),t}}async savePost(e){try{return(await ga.post(`${la.COMMUNITY.POST(e)}/save`,{})).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to save post",s,{postId:e}),s}}async unsavePost(e){try{await ga.delete(`${la.COMMUNITY.POST(e)}/save`)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to unsave post",s,{postId:e}),s}}async getSavedPosts(){try{return(await ga.get(`${la.COMMUNITY.POSTS}?saved=true`)).data}catch(e){const t=e instanceof Error?e:new Error(String(e));return Gi.error("Failed to get saved posts",t),[]}}async isPostSaved(e){try{return(await ga.get(`${la.COMMUNITY.POST(e)}/saved`)).data.saved}catch(t){const s=t instanceof Error?t:new Error(String(t));return Gi.error("Failed to check if post is saved",s,{postId:e}),!1}}async followUser(e,t){try{return(await ga.post("/api/v1/community/follow",{targetId:e,targetName:t})).data}catch(s){const t=s instanceof Error?s:new Error(String(s));throw Gi.error("Failed to follow user",t,{targetId:e}),t}}async unfollowUser(e){try{await ga.delete(`/api/v1/community/follow/${e}`)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to unfollow user",s,{targetId:e}),s}}async isFollowing(e,t="user"){try{return(await ga.get(`/api/v1/community/follow/${e}?type=${t}`)).data.following}catch(s){const a=s instanceof Error?s:new Error(String(s));return Gi.error("Failed to check following status",a,{targetId:e,type:t}),!1}}async getTrendingTags(e="day"){try{return(await ga.get(`/api/v1/community/trending/tags?period=${e}`)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return Gi.error("Failed to get trending tags",s,{period:e}),[]}}async reportContent(e,t,s){try{return(await ga.post("/api/v1/community/report",{targetType:e,targetId:t,...s})).data}catch(a){const s=a instanceof Error?a:new Error(String(a));throw Gi.error("Failed to report content",s,{targetType:e,targetId:t}),s}}async saveDraft(e){try{return(await ga.post("/api/v1/community/drafts",e)).data}catch(t){const e=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to save draft",e),e}}async getDrafts(){try{return(await ga.get("/api/v1/community/drafts")).data}catch(e){const t=e instanceof Error?e:new Error(String(e));return Gi.error("Failed to get drafts",t),[]}}async deleteDraft(e){try{await ga.delete(`/api/v1/community/drafts/${e}`)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to delete draft",s,{draftId:e}),s}}async getNotifications(){try{return(await ga.get("/api/v1/community/notifications")).data}catch(e){const t=e instanceof Error?e:new Error(String(e));return Gi.error("Failed to get notifications",t),[]}}async markNotificationRead(e){try{await ga.post(`/api/v1/community/notifications/${e}/read`,{})}catch(t){const s=t instanceof Error?t:new Error(String(t));throw Gi.error("Failed to mark notification as read",s,{notificationId:e}),s}}},Hi=_t("CommunityService"),Qi={async getFeed(e){try{return await Wi.getFeed(e)}catch(t){return Hi.error("Failed to get feed",t instanceof Error?t:new Error(String(t)),{options:e}),{posts:[],hasMore:!1}}},async createPost(e){try{return await Wi.createPost({kind:e.kind||"photo",...e.petIds?{petIds:e.petIds}:{},...e.text?{text:e.text}:{},media:Array.isArray(e.media)?e.media.filter(e=>"string"==typeof e):[],...e.location?{location:e.location}:{},...e.tags?{tags:e.tags}:{},visibility:e.visibility||"public"})}catch(t){throw Hi.error("Failed to create post",t instanceof Error?t:new Error(String(t))),t}},async getPost(e){try{return await Wi.getPost(e)||void 0}catch(t){return void Hi.error("Failed to get post",t instanceof Error?t:new Error(String(t)),{postId:e})}},async deletePost(e){try{await Wi.deletePost(e)}catch(t){throw Hi.error("Failed to delete post",t instanceof Error?t:new Error(String(t)),{postId:e}),t}},async likePost(e){try{return await Wi.likePost(e)}catch(t){throw Hi.error("Failed to like post",t instanceof Error?t:new Error(String(t)),{postId:e}),t}},async unlikePost(e){try{await Wi.unlikePost(e)}catch(t){throw Hi.error("Failed to unlike post",t instanceof Error?t:new Error(String(t)),{postId:e}),t}},async getPostLikes(e){try{return await Wi.getPostLikes(e)}catch(t){return Hi.error("Failed to get post likes",t instanceof Error?t:new Error(String(t)),{postId:e}),[]}},async isPostLiked(e){try{return await Wi.isPostLiked(e)}catch(t){return Hi.error("Failed to check if post is liked",t instanceof Error?t:new Error(String(t)),{postId:e}),!1}},async getComments(e,t){try{return await Wi.getComments(e,t)}catch(s){return Hi.error("Failed to get comments",s instanceof Error?s:new Error(String(s)),{postId:e,cursor:t}),[]}},async addComment(e,t){try{return await Wi.addComment(e,{text:t.text,...void 0!==t.parentId&&{parentId:t.parentId}})}catch(s){throw Hi.error("Failed to add comment",s instanceof Error?s:new Error(String(s)),{postId:e}),s}},async savePost(e){try{return await Wi.savePost(e)}catch(t){throw Hi.error("Failed to save post",t instanceof Error?t:new Error(String(t)),{postId:e}),t}},async unsavePost(e){try{await Wi.unsavePost(e)}catch(t){throw Hi.error("Failed to unsave post",t instanceof Error?t:new Error(String(t)),{postId:e}),t}},async getSavedPosts(){try{return await Wi.getSavedPosts()}catch(e){return Hi.error("Failed to get saved posts",e instanceof Error?e:new Error(String(e))),[]}},async isPostSaved(e){try{return await Wi.isPostSaved(e)}catch(t){return Hi.error("Failed to check if post is saved",t instanceof Error?t:new Error(String(t)),{postId:e}),!1}},async followUser(e,t){try{return await Wi.followUser(e,t)}catch(s){throw Hi.error("Failed to follow user",s instanceof Error?s:new Error(String(s)),{targetId:e}),s}},async unfollowUser(e){try{await Wi.unfollowUser(e)}catch(t){throw Hi.error("Failed to unfollow user",t instanceof Error?t:new Error(String(t)),{targetId:e}),t}},async isFollowing(e,t="user"){try{return await Wi.isFollowing(e,t)}catch(s){return Hi.error("Failed to check following status",s instanceof Error?s:new Error(String(s)),{targetId:e,type:t}),!1}},async getTrendingTags(e="day"){try{return await Wi.getTrendingTags(e)}catch(t){return Hi.error("Failed to get trending tags",t instanceof Error?t:new Error(String(t)),{period:e}),[]}},async reportContent(e,t,s,a){try{return await Wi.reportContent(e,t,{reasons:s,...void 0!==a&&{description:a}})}catch(r){throw Hi.error("Failed to report content",r instanceof Error?r:new Error(String(r)),{targetType:e,targetId:t}),r}},async saveDraft(e){try{return await Wi.saveDraft(e)}catch(t){throw Hi.error("Failed to save draft",t instanceof Error?t:new Error(String(t))),t}},async getDrafts(){try{return await Wi.getDrafts()}catch(e){return Hi.error("Failed to get drafts",e instanceof Error?e:new Error(String(e))),[]}},async deleteDraft(e){try{await Wi.deleteDraft(e)}catch(t){throw Hi.error("Failed to delete draft",t instanceof Error?t:new Error(String(t)),{draftId:e}),t}},createNotification:e=>(Hi.debug("Notification creation handled by backend API",{notification:e}),Promise.resolve()),async getNotifications(){try{return await Wi.getNotifications()}catch(e){return Hi.error("Failed to get notifications",e instanceof Error?e:new Error(String(e))),[]}},async markNotificationRead(e){try{await Wi.markNotificationRead(e)}catch(t){throw Hi.error("Failed to mark notification as read",t instanceof Error?t:new Error(String(t)),{notificationId:e}),t}}};function Xi({...e}){return a.jsx(M,{"data-slot":"select",...e})}function Ji({...e}){return a.jsx(U,{"data-slot":"select-value",...e})}function Zi({className:e,size:t="default",children:s,...r}){return a.jsxs(D,{"data-slot":"select-trigger","data-size":t,className:As("border-input data-placeholder:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive aria-invalid:animate-pulse dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-background px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-all duration-200 outline-none focus-visible:ring-[3px] focus-visible:shadow-md hover:border-ring/50 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted/30 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[s,a.jsx(L,{asChild:!0,children:a.jsx(O,{className:"size-4 opacity-50 transition-transform duration-200 data-[state=open]:rotate-180"})})]})}function en({className:e,children:t,position:s="popper",...r}){return a.jsx(z,{children:a.jsxs(B,{"data-slot":"select-content",className:As("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[a.jsx(sn,{}),a.jsx($,{className:As("p-1","popper"===s&&"h-(--radix-select-trigger-height) w-full min-w-(--radix-select-trigger-width) scroll-my-1"),children:t}),a.jsx(an,{})]})})}function tn({className:e,children:t,...s}){return a.jsxs(V,{"data-slot":"select-item",className:As("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-disabled:pointer-events-none data-disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...s,children:[a.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:a.jsx(Y,{children:a.jsx(K,{className:"size-4"})})}),a.jsx(q,{children:t})]})}function sn({className:e,...t}){return a.jsx(G,{"data-slot":"select-scroll-up-button",className:As("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(W,{className:"size-4"})})}function an({className:e,...t}){return a.jsx(H,{"data-slot":"select-scroll-down-button",className:As("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(O,{className:"size-4"})})}const rn=_t("AdoptionMarketplaceService");const nn=new class{async createListing(e){var t,s;try{const a=await $r.createAdoptionProfile({petId:e.petId||"",petName:e.petName,petPhoto:(null==(t=e.petPhotos)?void 0:t[0])||"",breed:e.petBreed,age:e.petAge,gender:e.petGender,size:"tiny"===e.petSize?"small":e.petSize,location:`${e.locationCity}, ${e.locationCountry}`,shelterId:e.ownerId,shelterName:e.ownerName,status:"pending",description:e.petDescription,healthStatus:"good",vaccinated:e.vaccinated,spayedNeutered:e.spayedNeutered,goodWithKids:e.goodWithKids,goodWithPets:e.goodWithPets,energyLevel:"very-high"===e.energyLevel?"high":e.energyLevel,specialNeeds:e.specialNeeds,adoptionFee:(null==(s=e.fee)?void 0:s.amount)||0,personality:e.temperament||[],photos:e.petPhotos,contactEmail:"",contactPhone:e.ownerId});return this.convertProfileToListing(a,e)}catch(a){const t=a instanceof Error?a:new Error(String(a));throw rn.error("Failed to create listing",t,{ownerId:e.ownerId}),t}}async getListingById(e){try{const t=await $r.getProfileById(e);if(!t)return;return this.convertProfileToListing(t)}catch(t){const s=t instanceof Error?t:new Error(String(t));return void rn.error("Failed to get listing",s,{id:e})}}async getActiveListings(e){try{let t=(await $r.getAdoptionProfiles({status:"active",...(null==e?void 0:e.breed)&&{breed:e.breed.join(",")},...void 0!==(null==e?void 0:e.ageMin)&&{minAge:e.ageMin},...void 0!==(null==e?void 0:e.ageMax)&&{maxAge:e.ageMax},...(null==e?void 0:e.size)&&e.size.length>0&&{size:e.size},...(null==e?void 0:e.location)&&{location:e.location},...void 0!==(null==e?void 0:e.goodWithKids)&&{goodWithKids:e.goodWithKids},...void 0!==(null==e?void 0:e.goodWithPets)&&{goodWithPets:e.goodWithPets}})).profiles.map(e=>this.convertProfileToListing(e));if((null==e?void 0:e.species)&&e.species.length>0&&(t=t.filter(t=>e.species.includes(t.petSpecies))),(null==e?void 0:e.goodWithCats)&&(t=t.filter(e=>!0===e.goodWithCats)),(null==e?void 0:e.goodWithDogs)&&(t=t.filter(e=>!0===e.goodWithDogs)),(null==e?void 0:e.energyLevel)&&e.energyLevel.length>0&&(t=t.filter(t=>e.energyLevel.includes(t.energyLevel))),(null==e?void 0:e.temperament)&&e.temperament.length>0&&(t=t.filter(t=>e.temperament.some(e=>t.temperament.includes(e)))),(null==e?void 0:e.vaccinated)&&(t=t.filter(e=>e.vaccinated)),(null==e?void 0:e.spayedNeutered)&&(t=t.filter(e=>e.spayedNeutered)),void 0!==(null==e?void 0:e.feeMax)&&(t=t.filter(t=>!t.fee||t.fee.amount<=e.feeMax)),(null==e?void 0:e.featured)&&(t=t.filter(e=>e.featured)),null==e?void 0:e.sortBy)switch(e.sortBy){case"recent":t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());break;case"age":t.sort((e,t)=>e.petAge-t.petAge);break;case"fee_low":t.sort((e,t)=>{var s,a;return((null==(s=e.fee)?void 0:s.amount)||0)-((null==(a=t.fee)?void 0:a.amount)||0)});break;case"fee_high":t.sort((e,t)=>{var s,a;return((null==(s=t.fee)?void 0:s.amount)||0)-((null==(a=e.fee)?void 0:a.amount)||0)})}else t.sort((e,t)=>e.featured&&!t.featured?-1:!e.featured&&t.featured?1:new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());return t}catch(t){const s=t instanceof Error?t:new Error(String(t));return rn.error("Failed to get active listings",s,{filters:e}),[]}}async getUserListings(e){try{return(await $r.getAdoptionProfiles({})).profiles.filter(t=>t.shelterId===e).map(e=>this.convertProfileToListing(e))}catch(t){const s=t instanceof Error?t:new Error(String(t));return rn.error("Failed to get user listings",s,{userId:e}),[]}}async updateListingStatus(e,t,s,a){try{await $r.updateProfileStatus(e,"pending_review"===t?"pending":"adopted"===t?"adopted":"withdrawn"===t?"on-hold":"available")}catch(r){const s=r instanceof Error?r:new Error(String(r));throw rn.error("Failed to update listing status",s,{listingId:e,status:t}),s}}async incrementViewCount(e){}async createApplication(e){try{const t=await $r.submitApplication({adoptionProfileId:e.listingId,applicantId:e.applicantId,applicantName:e.applicantName,applicantEmail:e.applicantEmail,applicantPhone:e.applicantPhone||"",householdType:"house"===e.homeType?"house":"apartment"===e.homeType?"apartment":"condo"===e.homeType?"condo":"other",hasYard:e.hasYard,hasOtherPets:e.hasOtherPets,...e.otherPetsDetails&&{otherPetsDetails:e.otherPetsDetails},hasChildren:e.hasChildren,...e.childrenAges&&{childrenAges:e.childrenAges},experience:e.message||"",reason:e.message});return{id:t._id,listingId:t.adoptionProfileId,applicantId:t.applicantId,applicantName:t.applicantName,applicantEmail:t.applicantEmail,applicantPhone:t.applicantPhone,message:t.reason||t.experience||"",homeType:"house"===t.householdType?"house":"apartment"===t.householdType?"apartment":"condo"===t.householdType?"condo":"other",hasYard:t.hasYard,yardFenced:void 0,hasOtherPets:t.hasOtherPets,otherPetsDetails:t.otherPetsDetails,previousPetExperience:t.experience||"",employmentStatus:"other",hoursAlonePerDay:void 0,homeCheckConsent:!0,veterinarianReference:void 0,personalReferences:void 0,hasChildren:t.hasChildren,childrenAges:t.childrenAges,status:"pending"===t.status?"submitted":"approved"===t.status?"accepted":"rejected"===t.status?"rejected":"submitted",createdAt:t.submittedAt,updatedAt:t.submittedAt,reviewedAt:t.reviewedAt,reviewedBy:void 0,reviewNotes:t.reviewNotes,ownerNotes:void 0}}catch(t){const s=t instanceof Error?t:new Error(String(t));throw rn.error("Failed to create application",s,{listingId:e.listingId}),s}}async getApplicationById(e){try{const t=(await $r.getAllApplications()).find(t=>t._id===e);if(!t)return;return{id:t._id,listingId:t.adoptionProfileId,applicantId:t.applicantId,applicantName:t.applicantName,applicantEmail:t.applicantEmail,applicantPhone:t.applicantPhone,message:t.reason||t.experience||"",homeType:"house"===t.householdType?"house":"apartment"===t.householdType?"apartment":"condo"===t.householdType?"condo":"other",hasYard:t.hasYard,yardFenced:void 0,hasOtherPets:t.hasOtherPets,otherPetsDetails:t.otherPetsDetails,previousPetExperience:t.experience||"",employmentStatus:"other",hoursAlonePerDay:void 0,homeCheckConsent:!0,veterinarianReference:void 0,personalReferences:void 0,hasChildren:t.hasChildren,childrenAges:t.childrenAges,status:"pending"===t.status?"submitted":"approved"===t.status?"accepted":"rejected"===t.status?"rejected":"submitted",createdAt:t.submittedAt,updatedAt:t.submittedAt,reviewedAt:t.reviewedAt,reviewedBy:void 0,reviewNotes:t.reviewNotes,ownerNotes:void 0}}catch(t){const s=t instanceof Error?t:new Error(String(t));return void rn.error("Failed to get application",s,{id:e})}}async getListingApplications(e){try{return(await $r.getApplicationsByProfile(e)).map(e=>({id:e._id,listingId:e.adoptionProfileId,applicantId:e.applicantId,applicantName:e.applicantName,applicantEmail:e.applicantEmail,applicantPhone:e.applicantPhone,message:e.reason||e.experience||"",homeType:"house"===e.householdType?"house":"apartment"===e.householdType?"apartment":"condo"===e.householdType?"condo":"other",hasYard:e.hasYard,yardFenced:void 0,hasOtherPets:e.hasOtherPets,otherPetsDetails:e.otherPetsDetails,previousPetExperience:e.experience||"",employmentStatus:"other",hoursAlonePerDay:void 0,homeCheckConsent:!0,veterinarianReference:void 0,personalReferences:void 0,hasChildren:e.hasChildren,childrenAges:e.childrenAges,status:"pending"===e.status?"submitted":"approved"===e.status?"accepted":"rejected"===e.status?"rejected":"submitted",createdAt:e.submittedAt,updatedAt:e.submittedAt,reviewedAt:e.reviewedAt,reviewedBy:void 0,reviewNotes:e.reviewNotes,ownerNotes:void 0}))}catch(t){const s=t instanceof Error?t:new Error(String(t));return rn.error("Failed to get listing applications",s,{listingId:e}),[]}}async getUserApplications(e){try{return(await $r.getUserApplications(e)).map(e=>({id:e._id,listingId:e.adoptionProfileId,applicantId:e.applicantId,applicantName:e.applicantName,applicantEmail:e.applicantEmail,applicantPhone:e.applicantPhone,message:e.reason||e.experience||"",homeType:"house"===e.householdType?"house":"apartment"===e.householdType?"apartment":"condo"===e.householdType?"condo":"other",hasYard:e.hasYard,yardFenced:void 0,hasOtherPets:e.hasOtherPets,otherPetsDetails:e.otherPetsDetails,previousPetExperience:e.experience||"",employmentStatus:"other",hoursAlonePerDay:void 0,homeCheckConsent:!0,veterinarianReference:void 0,personalReferences:void 0,hasChildren:e.hasChildren,childrenAges:e.childrenAges,status:"pending"===e.status?"submitted":"approved"===e.status?"accepted":"rejected"===e.status?"rejected":"submitted",createdAt:e.submittedAt,updatedAt:e.submittedAt,reviewedAt:e.reviewedAt,reviewedBy:void 0,reviewNotes:e.reviewNotes,ownerNotes:void 0}))}catch(t){const s=t instanceof Error?t:new Error(String(t));return rn.error("Failed to get user applications",s,{userId:e}),[]}}async updateApplicationStatus(e,t,s,a){try{const s="submitted"===t||"under_review"===t?"pending":"accepted"===t?"approved":"rejected";if(await $r.updateApplicationStatus(e,{status:s,...void 0!==a&&{reviewNotes:a}}),"accepted"===t){const t=await this.getApplicationById(e);t&&await this.updateListingStatus(t.listingId,"adopted")}}catch(r){const s=r instanceof Error?r:new Error(String(r));throw rn.error("Failed to update application status",s,{applicationId:e,status:t}),s}}async getPendingListings(){try{return(await $r.getAdoptionProfiles({status:"pending_review"})).profiles.map(e=>this.convertProfileToListing(e)).sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())}catch(e){const t=e instanceof Error?e:new Error(String(e));return rn.error("Failed to get pending listings",t),[]}}async getPendingApplications(){try{return(await $r.getAllApplications()).filter(e=>"pending"===e.status||"approved"===e.status).map(e=>({id:e._id,listingId:e.adoptionProfileId,applicantId:e.applicantId,applicantName:e.applicantName,applicantEmail:e.applicantEmail,applicantPhone:e.applicantPhone,message:e.reason||e.experience||"",homeType:"house"===e.householdType?"house":"apartment"===e.householdType?"apartment":"condo"===e.householdType?"condo":"other",hasYard:e.hasYard,yardFenced:!1,hasOtherPets:e.hasOtherPets,otherPetsDetails:e.otherPetsDetails,hasChildren:e.hasChildren,childrenAges:e.childrenAges,previousPetExperience:e.experience||"",employmentStatus:"other",hoursAlonePerDay:void 0,homeCheckConsent:!0,veterinarianReference:void 0,personalReferences:void 0,status:"pending"===e.status?"submitted":"approved"===e.status?"accepted":"rejected"===e.status?"rejected":"submitted",createdAt:e.submittedAt,updatedAt:e.submittedAt,reviewedAt:e.reviewedAt,reviewedBy:void 0,reviewNotes:e.reviewNotes,ownerNotes:void 0})).filter(e=>"submitted"===e.status||"under_review"===e.status).sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())}catch(e){const t=e instanceof Error?e:new Error(String(e));return rn.error("Failed to get pending applications",t),[]}}convertProfileToListing(e,t){const s=e.location.split(", "),a=s[0]||"",r=s[1]||"";return{id:e._id,ownerId:e.shelterId,ownerName:e.shelterName,...void 0!==(null==t?void 0:t.ownerAvatar)&&{ownerAvatar:t.ownerAvatar},petId:e.petId,petName:e.petName,petBreed:e.breed,petAge:e.age,petGender:e.gender,petSize:"extra-large"===e.size?"extra-large":e.size,petSpecies:(null==t?void 0:t.petSpecies)||"dog",petColor:(null==t?void 0:t.petColor)||"",petPhotos:e.photos,petDescription:e.description,status:{available:"active",pending:"pending_review",adopted:"adopted","on-hold":"pending_review"}[e.status]||"pending_review",fee:e.adoptionFee>0?{amount:e.adoptionFee,currency:"USD"}:null,location:{city:a,country:r,privacyRadiusM:1e3},requirements:(null==t?void 0:t.requirements)||[],vetDocuments:(null==t?void 0:t.vetDocuments)||[],vaccinated:e.vaccinated,spayedNeutered:e.spayedNeutered,microchipped:(null==t?void 0:t.microchipped)||!1,goodWithKids:e.goodWithKids,goodWithPets:e.goodWithPets,...void 0!==(null==t?void 0:t.goodWithCats)&&{goodWithCats:t.goodWithCats},...void 0!==(null==t?void 0:t.goodWithDogs)&&{goodWithDogs:t.goodWithDogs},energyLevel:"high"===e.energyLevel?"high":e.energyLevel,temperament:e.personality||[],...void 0!==e.specialNeeds&&{specialNeeds:e.specialNeeds},reasonForAdoption:(null==t?void 0:t.reasonForAdoption)||"",createdAt:e.postedDate,updatedAt:e.postedDate,viewsCount:0,applicationsCount:0,featured:!1}}},on=_t("AdminLayout");function ln({children:e,currentView:t,onViewChange:r,onExit:i}){const[n]=Gs("current-user",null),[o,l]=s.useState(!0),c=function(e){const{isOpen:t,openWidth:a=280,closedWidth:r=80,enableOpacity:i=!0}=e,n=Jt(t?a:r),o=Jt(t?1:0);s.useEffect(()=>{n.value=Zt(t?a:r),i&&(o.value=Zt(t?1:0))},[t,a,r,i,n,o]);const l=is(()=>({width:n.value})),c=is(()=>({opacity:o.value}));return{width:t?a:r,widthStyle:l,opacityStyle:c}}({isOpen:o,openWidth:280,closedWidth:80,enableOpacity:!0}),d=s.useCallback(()=>{try{l(e=>!e)}catch(e){const t=e instanceof Error?e:new Error(String(e));on.error("Failed to toggle sidebar",t)}},[]),u=s.useCallback(e=>{try{r(e)}catch(t){const s=t instanceof Error?t:new Error(String(t));on.error("Failed to change view",s,{view:e})}},[r]),m=s.useCallback(()=>{try{null==i||i()}catch(e){const t=e instanceof Error?e:new Error(String(e));on.error("Failed to exit admin console",t)}},[i]),h=[{id:"dashboard",label:"Dashboard",icon:Z},{id:"subscriptions",label:"Subscriptions",icon:ee},{id:"business-config",label:"Business Config",icon:te},{id:"reports",label:"Reports",icon:se},{id:"users",label:"Users",icon:ae},{id:"community",label:"Community Posts",icon:re},{id:"adoption",label:"Adoption Profiles",icon:ie},{id:"adoption-applications",label:"Adoption Applications",icon:ne},{id:"content",label:"Content",icon:oe},{id:"moderation",label:"Photo Moderation",icon:le},{id:"content-moderation",label:"Content Moderation",icon:Q},{id:"chat-moderation",label:"Chat Moderation",icon:ce},{id:"support-chat",label:"Support Tickets",icon:de},{id:"kyc",label:"KYC Verification",icon:ue},{id:"verification",label:"Verification",icon:Q},{id:"performance",label:"Performance",icon:me},{id:"system-map",label:"System Map",icon:he},{id:"map-settings",label:"Map Configuration",icon:pe},{id:"api-config",label:"API Configuration",icon:ge},{id:"audit",label:"Audit Log",icon:xe},{id:"settings",label:"Settings",icon:te}];return a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsxs(hs,{style:c.widthStyle,className:"border-r border-border bg-card flex flex-col shrink-0",children:[a.jsxs("div",{className:"p-4 sm:p-6 flex items-center justify-between shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-linear-to-br from-primary via-accent to-secondary flex items-center justify-center shrink-0",children:a.jsx(Q,{className:"text-white",size:20,weight:"fill"})}),o&&a.jsxs(hs,{style:c.opacityStyle,className:"min-w-0",children:[a.jsx("h2",{className:"font-bold text-lg truncate",children:"Admin Console"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Moderation & Management"})]})]}),i?o&&a.jsx(Ks,{variant:"ghost",size:"icon",onClick:m,className:"rounded-full hover:bg-destructive/10 shrink-0","aria-label":"Exit Admin Console",children:a.jsx(X,{size:20,className:"text-muted-foreground hover:text-destructive"})}):o&&a.jsx(Ks,{variant:"ghost",size:"icon",onClick:()=>{try{window.location.href="/"}catch(e){const t=e instanceof Error?e:new Error(String(e));on.error("Failed to navigate to main app",t)}},className:"rounded-full hover:bg-primary/10 shrink-0","aria-label":"Go to Main App",title:"Go to Main App",children:a.jsx(J,{size:20,className:"text-muted-foreground hover:text-primary"})})]}),a.jsx(ti,{}),a.jsx(mi,{className:"flex-1 px-3 py-4",children:a.jsx("nav",{className:"space-y-1",children:h.map(e=>{const s=e.icon,r=t===e.id;return a.jsxs(Ks,{variant:r?"default":"ghost",className:As("w-full justify-start gap-3 h-11",!o&&"justify-center px-2"),onClick:()=>u(e.id),title:o?void 0:e.label,children:[a.jsx(s,{size:20,weight:r?"fill":"regular",className:"shrink-0"}),o&&a.jsx("span",{className:"truncate",children:e.label})]},e.id)})})}),a.jsx(ti,{}),a.jsxs("div",{className:"p-3 space-y-2 shrink-0",children:[n&&o&&a.jsxs("div",{className:"px-3 py-2 text-sm",children:[a.jsx("p",{className:"font-semibold truncate",children:n.name}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n.role??"Admin"})]}),!i&&a.jsxs(Ks,{variant:"ghost",className:As("w-full justify-start gap-3",!o&&"justify-center"),onClick:()=>{try{window.location.href="/"}catch(e){const t=e instanceof Error?e:new Error(String(e));on.error("Failed to navigate to main app",t)}},title:o?void 0:"Go to Main App",children:[a.jsx(J,{size:20,className:"shrink-0"}),o&&a.jsx("span",{children:"Main App"})]}),a.jsxs(Ks,{variant:"ghost",className:As("w-full justify-start gap-3",!o&&"justify-center"),onClick:()=>{on.info("Sign out clicked - handler not implemented")},title:o?void 0:"Sign Out",children:[a.jsx(fe,{size:20,className:"shrink-0"}),o&&a.jsx("span",{children:"Sign Out"})]}),a.jsx(Ks,{variant:"ghost",size:"sm",className:"w-full",onClick:d,title:o?"Collapse sidebar":"Expand sidebar",children:o?"":""})]})]}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-4 sm:p-6 lg:p-8 min-h-full",children:e})})]})}const cn=_t("AdminSyncService");const dn=new class{constructor(){t(this,"realtimeClient",null),t(this,"listeners",new Set),t(this,"isInitialized",!1)}initialize(e){this.isInitialized?cn.warn("Admin sync service already initialized"):(this.realtimeClient=e,this.realtimeClient.on("admin:action",e=>{this.handleAdminAction(e)}),this.realtimeClient.on("admin:config:updated",e=>{this.handleConfigUpdate(e)}),this.realtimeClient.on("admin:moderation:decision",e=>{this.handleModerationDecision(e)}),this.realtimeClient.on("admin:user:updated",e=>{this.handleUserUpdate(e)}),this.realtimeClient.on("admin:ticket:updated",e=>{this.handleTicketUpdate(e)}),this.isInitialized=!0,cn.info("Admin sync service initialized"))}async broadcastAdminAction(e,t,s,a,r,i={}){if(!this.realtimeClient)return void cn.warn("Realtime client not initialized, cannot broadcast admin action");const n={type:"action",action:e,adminId:t,adminName:s,targetType:a,targetId:r,data:i,timestamp:(new Date).toISOString()};try{await this.realtimeClient.emit("admin:action",n),this.realtimeClient.trigger("admin:action",n),this.notifyListeners(n),cn.info("Admin action broadcasted",{action:e,adminId:t,targetType:a,targetId:r})}catch(o){const s=o instanceof Error?o:new Error(String(o));cn.error("Failed to broadcast admin action",s,{action:e,adminId:t,targetType:a,targetId:r})}}async broadcastConfigUpdate(e,t,s,a){if(!this.realtimeClient)return void cn.warn("Realtime client not initialized, cannot broadcast config update");const r={type:"config",action:"config_updated",adminId:t,adminName:s,targetType:"config",targetId:e,data:{configType:e,config:a},timestamp:(new Date).toISOString()};try{await this.realtimeClient.emit("admin:config:updated",r),this.realtimeClient.trigger("admin:config:updated",r),this.notifyListeners(r),cn.info("Config update broadcasted",{configType:e,adminId:t})}catch(i){const t=i instanceof Error?i:new Error(String(i));cn.error("Failed to broadcast config update",t,{configType:e})}}async broadcastModerationDecision(e,t,s,a,r,i){if(!this.realtimeClient)return void cn.warn("Realtime client not initialized, cannot broadcast moderation decision");const n={type:"moderation",action:e,adminId:t,adminName:s,targetType:a,targetId:r,data:i,timestamp:(new Date).toISOString()};try{await this.realtimeClient.emit("admin:moderation:decision",n),this.realtimeClient.trigger("admin:moderation:decision",n),this.notifyListeners(n),cn.info("Moderation decision broadcasted",{action:e,adminId:t,targetType:a,targetId:r})}catch(o){const t=o instanceof Error?o:new Error(String(o));cn.error("Failed to broadcast moderation decision",t,{action:e,targetType:a,targetId:r})}}async broadcastUserUpdate(e,t,s,a,r){if(!this.realtimeClient)return void cn.warn("Realtime client not initialized, cannot broadcast user update");const i={type:"user_update",action:e,adminId:t,adminName:s,targetType:"user",targetId:a,data:r,timestamp:(new Date).toISOString()};try{await this.realtimeClient.emit("admin:user:updated",i),this.realtimeClient.trigger("admin:user:updated",i),this.notifyListeners(i),cn.info("User update broadcasted",{action:e,adminId:t,userId:a})}catch(n){const t=n instanceof Error?n:new Error(String(n));cn.error("Failed to broadcast user update",t,{action:e,userId:a})}}async broadcastTicketUpdate(e,t,s,a,r){if(!this.realtimeClient)return void cn.warn("Realtime client not initialized, cannot broadcast ticket update");const i={type:"ticket_update",action:e,adminId:t,adminName:s,targetType:"ticket",targetId:a,data:r,timestamp:(new Date).toISOString()};try{await this.realtimeClient.emit("admin:ticket:updated",i),this.realtimeClient.trigger("admin:ticket:updated",i),this.notifyListeners(i),cn.info("Ticket update broadcasted",{action:e,adminId:t,ticketId:a})}catch(n){const t=n instanceof Error?n:new Error(String(n));cn.error("Failed to broadcast ticket update",t,{action:e,ticketId:a})}}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}handleAdminAction(e){this.notifyListeners(e),cn.info("Admin action received",{action:e.action,adminId:e.adminId,targetType:e.targetType})}handleConfigUpdate(e){this.notifyListeners(e),cn.info("Config update received",{configType:e.targetId,adminId:e.adminId})}handleModerationDecision(e){this.notifyListeners(e),cn.info("Moderation decision received",{action:e.action,targetType:e.targetType,targetId:e.targetId})}handleUserUpdate(e){this.notifyListeners(e),cn.info("User update received",{action:e.action,userId:e.targetId})}handleTicketUpdate(e){this.notifyListeners(e),cn.info("Ticket update received",{action:e.action,ticketId:e.targetId})}notifyListeners(e){this.listeners.forEach(t=>{try{t.onAdminAction(e)}catch(s){const e=s instanceof Error?s:new Error(String(s));cn.error("Error notifying admin sync listener",e)}})}isReady(){return this.isInitialized&&null!==this.realtimeClient}disconnect(){this.listeners.clear(),this.realtimeClient=null,this.isInitialized=!1,cn.info("Admin sync service disconnected")}},un=_t("KYCApi");const mn=new class{async startKYC(e){try{return(await ga.post(la.KYC.START_VERIFICATION,e)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw un.error("Failed to start KYC",s,{userId:e.userId,provider:e.provider}),s}}async getKYCStatus(e){try{return(await ga.get(`${la.KYC.STATUS}?userId=${e}`)).data.status}catch(t){const s=t instanceof Error?t:new Error(String(t));throw un.error("Failed to get KYC status",s,{userId:e}),s}}async getKYCSubmission(e){try{return(await ga.get(la.KYC.GET_VERIFICATION(e))).data}catch(t){const s=t instanceof Error?t:new Error(String(t));if(un.error("Failed to get KYC submission",s,{submissionId:e}),s instanceof Error&&"status"in s&&404===s.status)return null;throw s}}async getUserKYCSubmissions(e){try{return(await ga.get(`${la.KYC.STATUS}?userId=${e}&submissions=true`)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return un.error("Failed to get user KYC submissions",s,{userId:e}),[]}}async handleKYCWebhook(e){try{await ga.post(`${la.KYC.GET_VERIFICATION(e.submissionId)}/webhook`,e)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw un.error("Failed to handle KYC webhook",s,{submissionId:e.submissionId}),s}}async manualKYCReview(e){try{await ga.post(`${la.KYC.GET_VERIFICATION(e.submissionId)}/review`,e)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw un.error("Failed to manual review KYC",s,{submissionId:e.submissionId}),s}}async recordAgeVerification(e){try{return(await ga.post(`${la.KYC.STATUS}/age-verification`,e)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw un.error("Failed to record age verification",s,{userId:e.userId}),s}}async recordConsent(e){try{return(await ga.post(`${la.KYC.STATUS}/consent`,e)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw un.error("Failed to record consent",s,{userId:e.userId,type:e.type}),s}}async getUserConsents(e){try{return(await ga.get(`${la.KYC.STATUS}/consent?userId=${e}`)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return un.error("Failed to get user consents",s,{userId:e}),[]}}async getKYCAuditLogs(e,t){try{const s=new URLSearchParams;e&&s.append("userId",e),t&&s.append("submissionId",t);return(await ga.get(`${la.KYC.STATUS}/audit?${s.toString()}`)).data}catch(s){const a=s instanceof Error?s:new Error(String(s));return un.error("Failed to get KYC audit logs",a,{userId:e,submissionId:t}),[]}}async getAllKYCSubmissions(){try{return(await ga.get(`${la.KYC.STATUS}/admin/submissions`)).data}catch(e){const t=e instanceof Error?e:new Error(String(e));return un.error("Failed to get all KYC submissions",t),[]}}},hn=_t("AdoptionApplicationReview");function pn(){const e=lr({enabled:!0,duration:1e3,repeat:!0});return a.jsxs(a.Fragment,{children:[a.jsx(hs,{style:e.rotationStyle,className:"mr-2 inline-block",children:a.jsx(ve,{size:16})}),"Processing..."]})}function gn({application:e,index:t,isExpanded:s,onToggleExpanded:r,onReviewClick:i,getStatusColor:n,getStatusIcon:o}){var l,c;const d=cr({index:t,delay:0,staggerDelay:50}),u=or({isExpanded:s,duration:300,enableOpacity:!0});return a.jsx(hs,{style:d.itemStyle,children:a.jsxs(Kr,{className:"overflow-hidden transition-all duration-300 "+("pending"===e.status?"border-amber-500/30 shadow-lg shadow-amber-500/5":""),children:[a.jsx(qr,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs(Xr,{className:"h-16 w-16 border-2 border-primary/20",children:[(null==(l=e.profile)?void 0:l.petPhoto)?a.jsx(Jr,{src:e.profile.petPhoto,alt:e.profile.petName}):null,a.jsx(Zr,{children:a.jsx(Ne,{size:24,weight:"fill"})})]}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[e.applicantName,"pending"===e.status&&a.jsxs(Yr,{variant:"secondary",className:n(e.status),children:[o(e.status),a.jsx("span",{className:"ml-1",children:"Pending Review"})]})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Applying for:"," ",a.jsx("span",{className:"font-medium text-foreground",children:(null==(c=e.profile)?void 0:c.petName)??"Unknown Pet"})]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Submitted"," ",new Date(e.submittedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),"pending"!==e.status&&a.jsxs(Yr,{variant:"secondary",className:n(e.status),children:[o(e.status),a.jsx("span",{className:"ml-1 capitalize",children:e.status})]})]})})]})}),a.jsxs(Hr,{className:"space-y-3 pb-3",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ke,{size:16,className:"text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground truncate",children:e.applicantEmail})]}),e.applicantPhone&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ie,{size:16,className:"text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:e.applicantPhone})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ae,{size:16,className:"text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground capitalize",children:e.householdType}),e.hasYard&&a.jsx("span",{className:"text-xs text-green-600",children:" Has Yard"})]})]}),s&&a.jsxs(hs,{style:u.heightStyle,className:"overflow-hidden",children:[a.jsx(ti,{className:"my-3"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-semibold",children:"Household Details"}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Other Pets:"}),a.jsx("span",{className:"font-medium",children:e.hasOtherPets?"Yes":"No"})]}),e.hasOtherPets&&e.otherPetsDetails&&a.jsx("p",{className:"text-muted-foreground text-xs pl-4",children:e.otherPetsDetails}),a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-muted-foreground",children:"Children:"}),a.jsx("span",{className:"font-medium",children:e.hasChildren?"Yes":"No"})]}),e.hasChildren&&e.childrenAges&&a.jsxs("p",{className:"text-muted-foreground text-xs pl-4",children:["Ages: ",e.childrenAges]})]})]}),e.experience&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-semibold",children:"Pet Experience"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.experience})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-semibold",children:"Why They Want to Adopt"}),a.jsx("p",{className:"text-sm text-muted-foreground bg-muted/30 p-3 rounded-lg",children:e.reason})]}),e.reviewNotes&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[a.jsx(ce,{size:16,weight:"fill"}),"Review Notes"]}),a.jsx("p",{className:"text-sm text-muted-foreground bg-accent/10 p-3 rounded-lg border border-accent/20",children:e.reviewNotes}),e.reviewedAt&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reviewed on"," ",new Date(e.reviewedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})]})]}),a.jsxs(Qr,{className:"flex items-center justify-between gap-3 pt-0",children:[a.jsx(Ks,{variant:"ghost",size:"sm",onClick:()=>r(e._id),className:"gap-2",children:s?a.jsxs(a.Fragment,{children:[a.jsx(Ce,{size:16,weight:"bold"}),"Show Less"]}):a.jsxs(a.Fragment,{children:[a.jsx(Pe,{size:16,weight:"bold"}),"Show Details"]})}),"pending"===e.status&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{variant:"outline",size:"sm",onClick:()=>i(e,"reject"),className:"gap-2 border-red-500/30 hover:bg-red-500/10 hover:text-red-600",children:[a.jsx(je,{size:16,weight:"fill"}),"Reject"]}),a.jsxs(Ks,{size:"sm",onClick:()=>i(e,"approve"),className:"gap-2 bg-green-600 hover:bg-green-700",children:[a.jsx(ye,{size:16,weight:"fill"}),"Approve"]})]})]})]})},e._id)}const xn=Object.freeze(Object.defineProperty({__proto__:null,default:function(){var e,t,r;const[i,n]=s.useState([]),[o,l]=s.useState([]),[c,d]=s.useState(!0),[u,m]=s.useState(""),[h,p]=s.useState(null),[g,x]=s.useState(!1),[f,v]=s.useState(null),[y,j]=s.useState(""),[w,b]=s.useState(!1),[N,S]=s.useState("pending"),[E,k]=s.useState(new Set);s.useEffect(()=>{!async function(){try{d(!0);const[e,t]=await Promise.all([$r.getAllApplications(),$r.getAdoptionProfiles({})]);n(e),l(t.profiles)}catch(e){hn.error("Failed to load applications",e instanceof Error?e:new Error(String(e))),Se.error("Failed to load applications")}finally{d(!1)}}()},[]);const I=i.map(e=>{const t=o.find(t=>t._id===e.adoptionProfileId),s={...e};return void 0!==t&&(s.profile=t),s}),A=()=>{let e=I;return"all"!==N&&(e=e.filter(e=>e.status===N)),u&&(e=e.filter(e=>{var t;return e.applicantName.toLowerCase().includes(u.toLowerCase())||e.applicantEmail.toLowerCase().includes(u.toLowerCase())||(null==(t=e.profile)?void 0:t.petName.toLowerCase().includes(u.toLowerCase()))})),e.sort((e,t)=>"pending"===e.status&&"pending"!==t.status?-1:"pending"!==e.status&&"pending"===t.status?1:new Date(t.submittedAt).getTime()-new Date(e.submittedAt).getTime())},C=s.useCallback((e,t)=>{try{p(e),v(t),j(""),x(!0)}catch(s){const a=s instanceof Error?s:new Error(String(s));hn.error("Failed to open review dialog",a,{applicationId:e._id,action:t})}},[]),P=s.useCallback(e=>{try{k(t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})}catch(t){const s=t instanceof Error?t:new Error(String(t));hn.error("Failed to toggle expanded state",s,{appId:e})}},[]),T={total:I.length,pending:I.filter(e=>"pending"===e.status).length,approved:I.filter(e=>"approved"===e.status).length,rejected:I.filter(e=>"rejected"===e.status).length,withdrawn:I.filter(e=>"withdrawn"===e.status).length,last7days:I.filter(e=>new Date(e.submittedAt).getTime()>Date.now()-6048e5).length},F=e=>{switch(e){case"pending":return"bg-amber-500/10 text-amber-600 border-amber-500/20";case"approved":return"bg-green-500/10 text-green-600 border-green-500/20";case"rejected":return"bg-red-500/10 text-red-600 border-red-500/20";case"withdrawn":return"bg-gray-500/10 text-gray-600 border-gray-500/20";default:return""}},R=e=>{switch(e){case"pending":return a.jsx(ve,{size:16,weight:"fill"});case"approved":return a.jsx(ye,{size:16,weight:"fill"});case"rejected":return a.jsx(je,{size:16,weight:"fill"});case"withdrawn":return a.jsx(Ee,{size:16,weight:"fill"})}};return c?a.jsx("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"Loading applications..."})})}):a.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold",children:"Adoption Applications"}),a.jsx("p",{className:"text-muted-foreground",children:"Review and manage adoption applications"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsx(Kr,{className:"card-hover-lift",children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Applications"}),a.jsx("p",{className:"text-2xl font-bold",children:T.total})]}),a.jsx(ne,{size:32,className:"text-primary",weight:"fill"})]})})}),a.jsx(Kr,{className:"card-hover-lift",children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Review"}),a.jsx("p",{className:"text-2xl font-bold",children:T.pending})]}),a.jsx(ve,{size:32,className:"text-amber-500",weight:"fill"})]})})}),a.jsx(Kr,{className:"card-hover-lift",children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"}),a.jsx("p",{className:"text-2xl font-bold",children:T.approved})]}),a.jsx(ye,{size:32,className:"text-green-500",weight:"fill"})]})})}),a.jsx(Kr,{className:"card-hover-lift",children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected"}),a.jsx("p",{className:"text-2xl font-bold",children:T.rejected})]}),a.jsx(je,{size:32,className:"text-red-500",weight:"fill"})]})})}),a.jsx(Kr,{className:"card-hover-lift",children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Last 7 Days"}),a.jsx("p",{className:"text-2xl font-bold",children:T.last7days})]}),a.jsx(we,{size:32,className:"text-secondary",weight:"fill"})]})})})]}),a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),a.jsx(di,{placeholder:"Search by applicant name, email, or pet name...",value:u,onChange:e=>m(e.target.value),className:"pl-10"})]})}),a.jsx(xi,{value:N,onValueChange:e=>S(e),children:a.jsxs(fi,{children:[a.jsxs(vi,{value:"all",children:["All"," ",T.total>0&&a.jsx(Yr,{variant:"secondary",className:"ml-2",children:T.total})]}),a.jsxs(vi,{value:"pending",children:["Pending"," ",T.pending>0&&a.jsx(Yr,{variant:"secondary",className:"ml-2 bg-amber-500/20 text-amber-700",children:T.pending})]}),a.jsxs(vi,{value:"approved",children:["Approved"," ",T.approved>0&&a.jsx(Yr,{variant:"secondary",className:"ml-2",children:T.approved})]}),a.jsxs(vi,{value:"rejected",children:["Rejected"," ",T.rejected>0&&a.jsx(Yr,{variant:"secondary",className:"ml-2",children:T.rejected})]}),a.jsx(vi,{value:"withdrawn",children:"Withdrawn"})]})})]})}),a.jsx(Hr,{children:a.jsx(mi,{className:"h-[700px] pr-4",children:a.jsx("div",{className:"space-y-3",children:0===A().length?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No applications found"})}):A().map((e,t)=>a.jsx(gn,{application:e,index:t,isExpanded:E.has(e._id),onToggleExpanded:P,onReviewClick:C,getStatusColor:F,getStatusIcon:R},e._id))})})})]}),a.jsx(Rr,{open:g,onOpenChange:x,children:a.jsxs(Dr,{className:"max-w-xl",children:[a.jsxs(Lr,{children:[a.jsx(Ur,{className:"flex items-center gap-2",children:"approve"===f?a.jsxs(a.Fragment,{children:[a.jsx(ye,{size:24,weight:"fill",className:"text-green-600"}),"Approve Application"]}):a.jsxs(a.Fragment,{children:[a.jsx(je,{size:24,weight:"fill",className:"text-red-600"}),"Reject Application"]})}),a.jsx(zr,{children:"approve"===f?`You are approving ${null==h?void 0:h.applicantName}'s application to adopt ${null==(e=null==h?void 0:h.profile)?void 0:e.petName}.`:`You are rejecting ${null==h?void 0:h.applicantName}'s application to adopt ${null==(t=null==h?void 0:h.profile)?void 0:t.petName}.`})]}),h&&a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsx(Kr,{className:"bg-muted/30",children:a.jsx(Hr,{className:"pt-4 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Xr,{className:"h-12 w-12",children:[(null==(r=h.profile)?void 0:r.petPhoto)?a.jsx(Jr,{src:h.profile.petPhoto,alt:h.profile.petName}):null,a.jsx(Zr,{children:a.jsx(Ne,{size:20,weight:"fill"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:h.applicantName}),a.jsx("p",{className:"text-sm text-muted-foreground",children:h.applicantEmail})]})]})})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{htmlFor:"review-notes",children:"approve"===f?"Approval Notes (Optional)":"Rejection Reason (Optional)"}),a.jsx(ji,{id:"review-notes",placeholder:"approve"===f?"Add any notes for the approval...":"Explain why this application is being rejected...",value:y,onChange:e=>j(e.target.value),rows:4}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"approve"===f?"These notes will be saved with the application record.":"These notes will help improve future application reviews."})]})]}),a.jsxs(Or,{children:[a.jsx(Ks,{variant:"outline",onClick:()=>{x(!1),j("")},disabled:w,children:"Cancel"}),a.jsx(Ks,{onClick:()=>{(async()=>{var e;if(h&&f){b(!0),js.trigger("light");try{const t="approve"===f?"approved":"rejected",s={status:t};y.trim()&&(s.reviewNotes=y.trim()),await $r.updateApplicationStatus(h._id,s),n(e=>e.map(e=>e._id===h._id?{...e,status:t,reviewedAt:(new Date).toISOString(),...y.trim()?{reviewNotes:y.trim()}:{}}:e)),"approve"===f&&h.profile&&(await $r.updateProfileStatus(h.adoptionProfileId,"pending"),l(e=>e.map(e=>e._id===h.adoptionProfileId?{...e,status:"pending"}:e))),js.trigger("success"),Se.success("approve"===f?"Application Approved!":"Application Rejected",{description:"approve"===f?`${h.applicantName} has been approved to adopt ${(null==(e=h.profile)?void 0:e.petName)??"this pet"}.`:`Application from ${h.applicantName} has been rejected.`}),x(!1),p(null),v(null),j("")}catch(t){hn.error("Failed to submit review",t instanceof Error?t:new Error(String(t))),js.trigger("error"),Se.error("Failed to submit review. Please try again.")}finally{b(!1)}}})()},disabled:w,className:"approve"===f?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:w?a.jsx(pn,{}):a.jsx(a.Fragment,{children:"approve"===f?"Approve Application":"Reject Application"})})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),fn=_t("AdoptionListingReview");function vn({listing:e,isSelected:t,onSelect:s}){const r=ks({scale:.98,hapticFeedback:!0});return a.jsx(yn,{listing:e,isSelected:t,onSelect:s,animation:r})}function yn({listing:e,isSelected:t,onSelect:r,animation:i}){const n=s.useCallback(()=>{i.handlePress(),r()},[i,r]);return a.jsx(hs,{style:i.animatedStyle,onClick:n,className:"w-full text-left p-4 rounded-lg border-2 transition-all cursor-pointer "+(t?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:a.jsxs("div",{className:"flex items-start gap-3",children:[e.petPhotos[0]&&a.jsx("img",{src:e.petPhotos[0],alt:e.petName,className:"w-16 h-16 rounded-lg object-cover"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold",children:e.petName}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.petBreed,"  ",e.petAge," years"]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["by ",e.ownerName]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]})]})})}const jn=Object.freeze(Object.defineProperty({__proto__:null,AdoptionListingReview:function(){const[e,t]=s.useState([]),[r,i]=s.useState(null),[n,o]=s.useState(""),[l,c]=s.useState(!1),d=s.useCallback(async()=>{try{const e=await nn.getPendingListings();t(e)}catch(e){const t=e instanceof Error?e:new Error(String(e));fn.error("Failed to load pending listings",t,{action:"loadPendingListings"}),Se.error("Failed to load listings")}},[]);s.useEffect(()=>{d()},[d]);const u=s.useCallback(async e=>{try{c(!0);const t=await Pr.user();if(!t)throw new Error("User context unavailable");await nn.updateListingStatus(e,"active",t.id),Se.success("Listing approved"),await d(),i(null)}catch(t){const s=t instanceof Error?t:new Error(String(t));fn.error("Failed to approve listing",s,{listingId:e,action:"approve"}),Se.error("Failed to approve listing")}finally{c(!1)}},[d]),m=s.useCallback(async e=>{if(n.trim())try{c(!0);const t=await Pr.user();if(!t)throw new Error("User context unavailable");await nn.updateListingStatus(e,"withdrawn",t.id,n),Se.success("Listing rejected"),await d(),i(null),o("")}catch(t){const s=t instanceof Error?t:new Error(String(t));fn.error("Failed to reject listing",s,{listingId:e,action:"reject",hasReason:!!n.trim()}),Se.error("Failed to reject listing")}finally{c(!1)}else Se.error("Please provide a rejection reason")},[n,d]);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold",children:"Adoption Listing Review"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Review and approve adoption listings before they go live"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(Kr,{className:"lg:col-span-1",children:[a.jsxs(qr,{children:[a.jsxs(Gr,{className:"flex items-center gap-2",children:[a.jsx(ve,{size:20}),"Pending Review (",e.length,")"]}),a.jsx(Wr,{children:"Click to review listing details"})]}),a.jsx(Hr,{children:a.jsx(mi,{className:"h-[600px]",children:a.jsx("div",{className:"space-y-3",children:0===e.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ne,{size:48,className:"mx-auto text-muted-foreground mb-2"}),a.jsx("p",{className:"text-muted-foreground",children:"No pending listings"})]}):e.map(e=>a.jsx(vn,{listing:e,isSelected:(null==r?void 0:r.id)===e.id,onSelect:()=>i(e)},e.id))})})})]}),a.jsxs(Kr,{className:"lg:col-span-2",children:[a.jsx(qr,{children:a.jsx(Gr,{children:"Review Details"})}),a.jsx(Hr,{children:r?a.jsx(mi,{className:"h-[600px] pr-4",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs(Xr,{className:"w-16 h-16",children:[a.jsx(Jr,{src:r.ownerAvatar}),a.jsx(Zr,{children:r.ownerName[0]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:r.petName}),a.jsxs("p",{className:"text-muted-foreground",children:["Listed by ",r.ownerName]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(r.createdAt).toLocaleString()})]})]}),r.petPhotos.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.petPhotos.map((e,t)=>a.jsx("img",{src:e,alt:`${r.petName} ${t+1}`,className:"w-full aspect-square object-cover rounded-lg"},t))}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Species"}),a.jsx("p",{className:"font-medium capitalize",children:r.petSpecies})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Breed"}),a.jsx("p",{className:"font-medium",children:r.petBreed})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Age"}),a.jsxs("p",{className:"font-medium",children:[r.petAge," years"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gender"}),a.jsx("p",{className:"font-medium capitalize",children:r.petGender})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Size"}),a.jsx("p",{className:"font-medium capitalize",children:r.petSize})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Energy Level"}),a.jsx("p",{className:"font-medium capitalize",children:r.energyLevel})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Description"}),a.jsx("p",{className:"text-sm",children:r.petDescription})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Temperament"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.temperament.map(e=>a.jsx(Yr,{variant:"secondary",children:e},e))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Health Status"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.vaccinated&&a.jsx(Yr,{variant:"outline",children:"Vaccinated"}),r.spayedNeutered&&a.jsx(Yr,{variant:"outline",children:"Spayed/Neutered"}),r.microchipped&&a.jsx(Yr,{variant:"outline",children:"Microchipped"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Good With"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.goodWithKids&&a.jsx(Yr,{variant:"outline",children:"Children"}),r.goodWithPets&&a.jsx(Yr,{variant:"outline",children:"Other Pets"}),r.goodWithDogs&&a.jsx(Yr,{variant:"outline",children:"Dogs"}),r.goodWithCats&&a.jsx(Yr,{variant:"outline",children:"Cats"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Location"}),a.jsxs("p",{className:"text-sm font-medium",children:[r.location.city,", ",r.location.country]})]}),r.requirements.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Requirements"}),a.jsx("ul",{className:"text-sm space-y-1",children:r.requirements.map((e,t)=>a.jsxs("li",{children:[" ",e]},t))})]}),r.fee&&r.fee.amount>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Adoption Fee"}),a.jsxs("p",{className:"text-lg font-semibold",children:[r.fee.currency," ",r.fee.amount]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Reason for Adoption"}),a.jsx("p",{className:"text-sm",children:r.reasonForAdoption})]}),a.jsxs("div",{className:"border-t pt-6 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Rejection Reason (if rejecting)"}),a.jsx(ji,{value:n,onChange:e=>o(e.target.value),placeholder:"Explain why this listing is being rejected...",rows:3})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{r&&m(r.id)},variant:"outline",className:"flex-1",disabled:l||!r,children:[a.jsx(X,{size:18,className:"mr-2"}),"Reject"]}),a.jsxs(Ks,{onClick:()=>{r&&u(r.id)},className:"flex-1",disabled:l||!r,children:[a.jsx(Te,{size:18,className:"mr-2"}),"Approve"]})]})]})]})}):a.jsxs("div",{className:"text-center py-24",children:[a.jsx(le,{size:48,className:"mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Select a listing to review"})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"})),wn=_t("AdoptionManagement");function bn({profile:e,index:t,isHidden:s,onHide:r,onUnhide:i,onDelete:n}){const o=cr({index:t,staggerDelay:50});return a.jsxs(hs,{style:o.itemStyle,className:"relative",role:"article","aria-label":`Adoption profile for ${e.petName}`,children:[a.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[s?a.jsxs(Ks,{size:"sm",variant:"secondary",onClick:()=>i(e._id),"aria-label":`Unhide ${e.petName}`,children:[a.jsx(le,{size:16,className:"mr-2","aria-hidden":"true"}),"Unhide"]}):a.jsxs(Ks,{size:"sm",variant:"outline",onClick:()=>r(e._id),"aria-label":`Hide ${e.petName}`,children:[a.jsx(Fe,{size:16,className:"mr-2","aria-hidden":"true"}),"Hide"]}),a.jsxs(Ks,{size:"sm",variant:"destructive",onClick:()=>n(e),"aria-label":`Delete ${e.petName}`,children:[a.jsx(Re,{size:16,className:"mr-2","aria-hidden":"true"}),"Delete"]})]}),a.jsx(It,{profile:e,onFavorite:()=>{},isFavorited:!1,onSelect:()=>{}})]})}const Nn=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e]=Gs("adoption-profiles",[]),[t]=Gs("flagged-adoption-profiles",[]),[r,i]=Gs("hidden-adoption-profiles",[]),[n,o]=s.useState(""),[l,c]=s.useState(null),[d,u]=s.useState(!1),[m,h]=s.useState("all"),[p,g]=s.useState(!1),x=s.useMemo(()=>e||[],[e]),f=s.useMemo(()=>x.filter(e=>null==t?void 0:t.includes(e._id)),[x,t]),v=s.useMemo(()=>x.filter(e=>null==r?void 0:r.includes(e._id)),[x,r]),y=s.useMemo(()=>{let e=x;if("flagged"===m?e=f:"hidden"===m?e=v:"all"!==m&&(e=e.filter(e=>e.status===m)),n.trim()){const t=n.toLowerCase();e=e.filter(e=>{var s,a,r;return(null==(s=e.petName)?void 0:s.toLowerCase().includes(t))||(null==(a=e.breed)?void 0:a.toLowerCase().includes(t))||(null==(r=e.shelterName)?void 0:r.toLowerCase().includes(t))})}return e.sort((e,t)=>new Date(t.postedDate).getTime()-new Date(e.postedDate).getTime())},[x,m,f,v,n]),j=s.useCallback(e=>{i(t=>{const s=t||[];return s.includes(e)?s:[...s,e]}).then(()=>{Se.success("Adoption profile hidden"),wn.info("Profile hidden",{profileId:e})}).catch(t=>{const s=t instanceof Error?t:new Error(String(t));wn.error("Failed to hide profile",s,{profileId:e}),Se.error("Failed to hide profile")})},[i]),w=s.useCallback(e=>{i(t=>(t||[]).filter(t=>t!==e)).then(()=>{Se.success("Adoption profile restored"),wn.info("Profile unhidden",{profileId:e})}).catch(t=>{const s=t instanceof Error?t:new Error(String(t));wn.error("Failed to unhide profile",s,{profileId:e}),Se.error("Failed to restore profile")})},[i]),b=s.useCallback(async()=>{if(l){g(!0);try{await $r.deleteProfile(l._id),Se.success("Adoption profile deleted successfully"),wn.info("Profile deleted",{profileId:l._id}),u(!1),c(null)}catch(e){const t=e instanceof Error?e:new Error(String(e));wn.error("Failed to delete profile",t,{profileId:l._id}),Se.error("Failed to delete adoption profile. Please try again.")}finally{g(!1)}}},[l]),N=s.useCallback(e=>{c(e),u(!0)},[]),S=s.useMemo(()=>{const e=Date.now()-6048e5;return{total:x.length,available:x.filter(e=>"available"===e.status).length,pending:x.filter(e=>"pending"===e.status).length,adopted:x.filter(e=>"adopted"===e.status).length,flagged:f.length,hidden:v.length,last7days:x.filter(t=>new Date(t.postedDate).getTime()>e).length}},[x,f.length,v.length]);return a.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6",role:"main","aria-label":"Adoption Management",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Adoption Profiles"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage adoption listings and applications"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",role:"region","aria-label":"Statistics",children:[a.jsx(Kr,{children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Profiles"}),a.jsx("p",{className:"text-2xl font-bold","aria-live":"polite",children:S.total})]}),a.jsx(Ne,{size:32,className:"text-primary",weight:"fill","aria-hidden":"true"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Available"}),a.jsx("p",{className:"text-2xl font-bold","aria-live":"polite",children:S.available})]}),a.jsx(ie,{size:32,className:"text-accent",weight:"fill","aria-hidden":"true"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),a.jsx("p",{className:"text-2xl font-bold","aria-live":"polite",children:S.pending})]}),a.jsx(le,{size:32,className:"text-secondary",weight:"fill","aria-hidden":"true"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Adopted"}),a.jsx("p",{className:"text-2xl font-bold","aria-live":"polite",children:S.adopted})]}),a.jsx(ye,{size:32,className:"text-green-500",weight:"fill","aria-hidden":"true"})]})})})]}),a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"Adoption Profiles"}),a.jsx(Wr,{children:"Search and filter adoption listings"}),a.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("label",{htmlFor:"adoption-search",className:"sr-only",children:"Search adoption profiles"}),a.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:20,"aria-hidden":"true"}),a.jsx(di,{id:"adoption-search",placeholder:"Search by name, breed, or organization...",value:n,onChange:e=>o(e.target.value),className:"pl-10","aria-label":"Search adoption profiles"})]})}),a.jsx(xi,{value:m,onValueChange:e=>h(e),children:a.jsxs(fi,{role:"tablist","aria-label":"Filter adoption profiles",children:[a.jsx(vi,{value:"all",role:"tab","aria-selected":"all"===m,children:"All"}),a.jsx(vi,{value:"available",role:"tab","aria-selected":"available"===m,children:"Available"}),a.jsx(vi,{value:"pending",role:"tab","aria-selected":"pending"===m,children:"Pending"}),a.jsx(vi,{value:"adopted",role:"tab","aria-selected":"adopted"===m,children:"Adopted"}),a.jsxs(vi,{value:"flagged",role:"tab","aria-selected":"flagged"===m,children:["Flagged"," ",S.flagged>0&&a.jsx(Yr,{variant:"destructive",className:"ml-2",children:S.flagged})]}),a.jsx(vi,{value:"hidden",role:"tab","aria-selected":"hidden"===m,children:"Hidden"})]})})]})]}),a.jsx(Hr,{children:a.jsx(mi,{className:"h-[600px]",role:"region","aria-label":"Adoption profiles list",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===y.length?a.jsx("div",{className:"col-span-full text-center py-12",role:"status","aria-live":"polite",children:a.jsx("p",{className:"text-muted-foreground",children:"No adoption profiles found"})}):y.map((e,t)=>a.jsx(bn,{profile:e,index:t,isHidden:(null==r?void 0:r.includes(e._id))??!1,onHide:j,onUnhide:w,onDelete:N},e._id))})})})]}),a.jsx(Rr,{open:d,onOpenChange:u,children:a.jsxs(Dr,{role:"alertdialog","aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[a.jsxs(Lr,{children:[a.jsx(Ur,{id:"delete-dialog-title",children:"Delete Adoption Profile"}),a.jsxs(zr,{id:"delete-dialog-description",children:["Are you sure you want to delete this adoption profile? This action cannot be undone.",l&&a.jsxs("span",{className:"block mt-2 font-semibold",children:["Profile: ",l.petName]})]})]}),a.jsxs(Or,{children:[a.jsx(Ks,{variant:"outline",onClick:()=>u(!1),disabled:p,"aria-label":"Cancel deletion",children:"Cancel"}),a.jsx(Ks,{variant:"destructive",onClick:()=>{b().catch(e=>{const t=e instanceof Error?e:new Error(String(e));wn.error("Failed to delete profile from button",t)})},disabled:p,"aria-label":"Confirm deletion",children:p?"Deleting...":"Delete"})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Sn=_t("APIConfigAPI");const En=_t("AdminApi");const kn=new class{async getSystemStats(){try{return(await ga.get(la.ADMIN.ANALYTICS)).data}catch(e){const t=e instanceof Error?e:new Error(String(e));return En.error("Failed to get system stats",t),{totalUsers:0,activeUsers:0,totalPets:0,totalMatches:0,totalMessages:0,pendingReports:0,pendingVerifications:0,resolvedReports:0}}}async createAuditLog(e){try{await ga.post(`${la.ADMIN.SETTINGS}/audit`,{...e,timestamp:(new Date).toISOString()})}catch(t){const s=t instanceof Error?t:new Error(String(t));En.error("Failed to create audit log",s,{action:e.action})}}async getAuditLogs(e=100){try{return(await ga.get(`${la.ADMIN.SETTINGS}/audit?limit=${e}`)).data}catch(t){const e=t instanceof Error?t:new Error(String(t));return En.error("Failed to get audit logs",e),[]}}async moderatePhoto(e,t,s){try{await ga.post(`${la.ADMIN.SETTINGS}/moderate`,{taskId:e,action:t,reason:s||void 0})}catch(a){const s=a instanceof Error?a:new Error(String(a));throw En.error("Failed to moderate photo",s,{taskId:e,action:t}),s}}async resetUserPassword(e,t){try{return(await ga.post(la.ADMIN.RESET_PASSWORD(e),{sendEmail:(null==t?void 0:t.sendEmail)??!0,newPassword:null==t?void 0:t.newPassword})).data}catch(s){const t=s instanceof Error?s:new Error(String(s));throw En.error("Failed to reset user password",t,{userId:e}),t}}async getUserDetails(e){try{return(await ga.get(la.ADMIN.USER(e))).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw En.error("Failed to get user details",s,{userId:e}),s}}async updateUser(e,t){try{await ga.put(la.ADMIN.USER(e),t)}catch(s){const t=s instanceof Error?s:new Error(String(s));throw En.error("Failed to update user",t,{userId:e}),t}}async broadcastConfig(e,t){try{return(await ga.post(la.ADMIN.CONFIG_BROADCAST,{configType:e,config:t,timestamp:(new Date).toISOString()})).data}catch(s){const t=s instanceof Error?s:new Error(String(s));throw En.error("Failed to broadcast config",t,{configType:e}),t}}async getConfigHistory(e,t=50){try{const s=new URLSearchParams;e&&s.append("type",e),s.append("limit",t.toString());return(await ga.get(`${la.ADMIN.CONFIG_HISTORY}?${s.toString()}`)).data}catch(s){const e=s instanceof Error?s:new Error(String(s));return En.error("Failed to get config history",e),[]}}},In=_t("ConfigBroadcastService");const An=new class{constructor(){t(this,"realtimeClient",null),t(this,"listeners",new Set),t(this,"configVersions",new Map)}initialize(e){this.realtimeClient=e,this.realtimeClient.on("config:business:updated",e=>{this.handleConfigUpdate("business",e)}),this.realtimeClient.on("config:matching:updated",e=>{this.handleConfigUpdate("matching",e)}),this.realtimeClient.on("config:map:updated",e=>{this.handleConfigUpdate("map",e)}),this.realtimeClient.on("config:api:updated",e=>{this.handleConfigUpdate("api",e)}),this.realtimeClient.on("config:system:updated",e=>{this.handleConfigUpdate("system",e)}),In.info("Config broadcast service initialized")}async broadcastConfig(e,t,s){try{const a=(this.configVersions.get(e)||0)+1;this.configVersions.set(e,a);const r={type:e,config:t,version:a,changedBy:s,timestamp:(new Date).toISOString()};await kn.broadcastConfig(e,t);if(this.realtimeClient){const t=`config:${e}:updated`;await this.realtimeClient.emit(t,r),this.realtimeClient.trigger(t,r)}return await dn.broadcastConfigUpdate(e,s,s,t),this.notifyListeners(r),In.info("Config broadcasted",{configType:e,version:a,changedBy:s}),{success:!0,version:a}}catch(a){const t=a instanceof Error?a:new Error(String(a));throw In.error("Failed to broadcast config",t,{configType:e}),t}}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}handleConfigUpdate(e,t){this.configVersions.set(e,t.version),this.notifyListeners(t),In.info("Config update received",{configType:e,version:t.version,changedBy:t.changedBy})}notifyListeners(e){this.listeners.forEach(t=>{try{t.onConfigUpdate(e)}catch(s){const e=s instanceof Error?s:new Error(String(s));In.error("Error notifying config listener",e)}})}getConfigVersion(e){return this.configVersions.get(e)||0}resetVersions(){this.configVersions.clear(),In.info("Config versions reset")}},Cn=_t("APIConfigView");function Pn({children:e,onClick:t,disabled:r=!1,variant:i="default",size:n="default",className:o="",bounceAnimation:l,"aria-label":c,...d}){const u=s.useCallback(()=>{r||(l.handlePress(),t())},[r,t,l]);return a.jsx(hs,{style:l.animatedStyle,className:o,children:a.jsx(Ks,{variant:i,size:n,onClick:u,disabled:r,"aria-label":c,...d,children:e})})}const Tn={maps:{provider:"openstreetmap",apiKey:"",enabled:!0,rateLimit:100},ai:{provider:"spark",apiKey:"",model:"gpt-4o",enabled:!0,maxTokens:1e3,temperature:.7},kyc:{provider:"manual",apiKey:"",enabled:!0,autoApprove:!1,requireDocuments:!0},photoModeration:{provider:"spark",apiKey:"",enabled:!0,autoReject:!1,confidenceThreshold:.8},sms:{provider:"disabled",apiKey:"",apiSecret:"",enabled:!1,fromNumber:""},email:{provider:"disabled",apiKey:"",enabled:!1,fromEmail:"",fromName:"PawfectMatch"},storage:{provider:"local",apiKey:"",apiSecret:"",bucket:"",region:"us-east-1",enabled:!0},analytics:{provider:"disabled",apiKey:"",enabled:!1},livekit:{apiKey:"",apiSecret:"",wsUrl:"",enabled:!1}};const Fn=Object.freeze(Object.defineProperty({__proto__:null,default:function(){var e,t,r,i,n,o,l,c,d,u,m,h,p,g,x,f,v,y,j,w,b,N,S,E,k,I,A,C,P,T,F,R,_,M,D,L,O,U,z,B,$,V,Y,K,q,G,W,H,X,J,Z,ee,te,se,ae,re,ie,ne;const[ce,de]=s.useState(Tn),[ue,me]=s.useState(!0),[he,xe]=s.useState(!1),[fe,ve]=s.useState({}),[ye,je]=s.useState(null),[we,be]=s.useState(!1),[Ne]=Gs("current-user",null),ke=s.useCallback(async()=>{me(!0);try{const e=await async function(){try{return(await ga.get("/admin/config/api")).data.config}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Sn.error("Failed to get API config",t),t}}();e&&de(e)}catch(e){const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to load API config",t),Se.error("Failed to load API configuration")}finally{me(!1)}},[]);s.useEffect(()=>{ke()},[ke]);const Ie=s.useCallback(async()=>{if(Ne){xe(!0);try{const e=await async function(e,t){try{return(await ga.put("/admin/config/api",{config:e,updatedBy:t})).data.config}catch(s){const e=s instanceof Error?s:new Error(String(s));throw Sn.error("Failed to update API config",e,{updatedBy:t}),e}}(ce,Ne.id||"admin");de(e),Se.success("API configuration saved successfully")}catch(e){const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to save API config",t),Se.error("Failed to save API configuration")}finally{xe(!1)}}else Se.error("User not authenticated")},[ce,Ne]),Ae=s.useCallback(e=>{try{ws("light"),ve(t=>({...t,[e]:!t[e]})),Cn.info("Secret visibility toggled",{key:e,visible:!fe[e]})}catch(t){const s=t instanceof Error?t:new Error(String(t));Cn.error("Failed to toggle secret visibility",s,{key:e})}},[fe]),Ce=s.useCallback((e,t,s)=>{try{ws("selection"),de(a=>{if(!a)return Cn.warn("Config is null, using defaults"),Tn;const r=a[e];return r&&"object"==typeof r?{...a,[e]:{...r,[t]:s}}:{...a,[e]:{[t]:s}}}),Cn.info("Configuration updated",{section:e,field:t,value:s}),Ie().catch(a=>{const r=a instanceof Error?a:new Error(String(a));Cn.error("Failed to save configuration",r,{section:e,field:t,value:s})})}catch(a){const r=a instanceof Error?a:new Error(String(a));Cn.error("Failed to update configuration",r,{section:e,field:t,value:s}),Se.error("Failed to update configuration")}},[Ie,Cn]),Pe=s.useCallback(async e=>{try{ws("light"),je(e),Cn.info("Testing connection",{service:e}),await new Promise(e=>setTimeout(e,1500)),je(null),ws("success"),Se.success(`${e} connection test successful`),Cn.info("Connection test successful",{service:e})}catch(t){const s=t instanceof Error?t:new Error(String(t));je(null),ws("error"),Se.error(`${e} connection test failed`),Cn.error("Connection test failed",s,{service:e})}},[Cn]),Te=s.useCallback(e=>{try{ws("medium"),de(t=>({...t,[e]:Tn[e]})),Cn.info("Configuration reset to defaults",{section:e}),Ie().catch(t=>{const s=t instanceof Error?t:new Error(String(t));Cn.error("Failed to save after reset",s,{section:e}),Se.error("Failed to reset configuration")}),Se.success("Reset to default configuration")}catch(t){const s=t instanceof Error?t:new Error(String(t));Cn.error("Failed to reset configuration",s,{section:e}),Se.error("Failed to reset configuration")}},[Ie,Cn]),Re=s.useCallback(async()=>{if(ce&&Ne)try{be(!0),ws("light"),await Ie(),await An.broadcastConfig("api",ce,Ne.id||"admin"),Se.success("API configuration saved and broadcasted successfully"),await kn.createAuditLog({adminId:Ne.id||"admin",action:"config_broadcast",targetType:"api_config",targetId:"api-config",details:JSON.stringify({configType:"api"})})}catch(e){const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to broadcast API config",t),Se.error("Failed to broadcast API configuration")}finally{be(!1)}else Se.error("User not authenticated")},[ce,Ne,Ie]),Ue=ks({scale:.92}),ze=ks({scale:.93}),Be=ks({scale:.9}),$e=vs({scale:1.02});return a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"border-b border-border p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"API Configuration"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure external service integrations and API keys"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Yr,{variant:"outline",className:"gap-2",children:[a.jsx(ge,{size:16}),"Secure Storage"]}),a.jsxs(Ks,{onClick:()=>{Re().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to broadcast config from button",t)})},disabled:we,variant:"default",children:[a.jsx(_e,{size:16,className:"mr-2"}),we?"Broadcasting...":"Broadcast Config"]})]})]})}),a.jsx(mi,{className:"flex-1",children:a.jsxs("div",{className:"p-6 space-y-6 max-w-6xl",children:[a.jsx(hs,{style:$e.animatedStyle,onMouseEnter:$e.handleEnter,onMouseLeave:$e.handleLeave,children:a.jsx(Kr,{className:"border-amber-500/50 bg-amber-500/5",children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ee,{size:24,className:"text-amber-600 shrink-0",weight:"fill"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Security Notice"}),a.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"API keys and secrets are stored securely using Spark's KV storage. Never share these credentials or commit them to version control. All keys are encrypted at rest."})]})]})})})}),a.jsxs(xi,{defaultValue:"maps",className:"space-y-6",children:[a.jsxs(fi,{className:"grid w-full grid-cols-4 lg:grid-cols-9",children:[a.jsx(vi,{value:"maps",children:"Maps"}),a.jsx(vi,{value:"ai",children:"AI"}),a.jsx(vi,{value:"kyc",children:"KYC"}),a.jsx(vi,{value:"moderation",children:"Moderation"}),a.jsx(vi,{value:"sms",children:"SMS"}),a.jsx(vi,{value:"email",children:"Email"}),a.jsx(vi,{value:"storage",children:"Storage"}),a.jsx(vi,{value:"analytics",children:"Analytics"}),a.jsx(vi,{value:"livekit",children:"LiveKit"})]}),a.jsx(yi,{value:"maps",className:"space-y-4",children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:a.jsx(pe,{size:24,className:"text-blue-600",weight:"fill"})}),a.jsxs("div",{children:[a.jsx(Gr,{children:"Maps Service"}),a.jsx(Wr,{children:"Configure map provider for location features"})]})]}),a.jsx(gi,{checked:(null==(e=null==ce?void 0:ce.maps)?void 0:e.enabled)??!0,onCheckedChange:e=>Ce("maps","enabled",e)})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"maps-provider",children:"Provider"}),a.jsxs("select",{id:"maps-provider",value:(null==(t=null==ce?void 0:ce.maps)?void 0:t.provider)??"openstreetmap",onChange:e=>Ce("maps","provider",e.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[a.jsx("option",{value:"google",children:"Google Maps"}),a.jsx("option",{value:"mapbox",children:"Mapbox"}),a.jsx("option",{value:"openstreetmap",children:"OpenStreetMap (Free)"})]})]}),"openstreetmap"!==(null==(r=null==ce?void 0:ce.maps)?void 0:r.provider)&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"maps-key",children:"API Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"relative flex-1",children:a.jsx(di,{id:"maps-key",type:fe["maps-key"]?"text":"password",value:(null==(i=null==ce?void 0:ce.maps)?void 0:i.apiKey)??"",onChange:e=>Ce("maps","apiKey",e.target.value),placeholder:"sk_..."})}),a.jsx(Pn,{variant:"outline",size:"icon",onClick:()=>Ae("maps-key"),bounceAnimation:Be,"aria-label":fe["maps-key"]?"Hide maps API key":"Show maps API key",children:fe["maps-key"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"maps-rate",children:"Rate Limit (requests/min)"}),a.jsx(di,{id:"maps-rate",type:"number",value:(null==(n=null==ce?void 0:ce.maps)?void 0:n.rateLimit)??100,onChange:e=>Ce("maps","rateLimit",parseInt(e.target.value))})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Pn,{onClick:()=>{Pe("Maps").catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to test Maps connection from button",t)})},disabled:"Maps"===ye,className:"flex-1",bounceAnimation:Ue,children:[a.jsx(Me,{size:20,className:"mr-2"}),"Maps"===ye?"Testing...":"Test Connection"]}),a.jsx(Pn,{onClick:()=>Te("maps"),variant:"outline",bounceAnimation:ze,children:"Reset"})]})]})]})}),a.jsx(yi,{value:"ai",className:"space-y-4",children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-purple-500/10",children:a.jsx(De,{size:24,className:"text-purple-600",weight:"fill"})}),a.jsxs("div",{children:[a.jsx(Gr,{children:"AI Service"}),a.jsx(Wr,{children:"Configure AI provider for matching and analysis"})]})]}),a.jsx(gi,{checked:(null==(o=null==ce?void 0:ce.ai)?void 0:o.enabled)??!0,onCheckedChange:e=>Ce("ai","enabled",e)})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"ai-provider",children:"Provider"}),a.jsxs("select",{id:"ai-provider",value:(null==(l=null==ce?void 0:ce.ai)?void 0:l.provider)??"spark",onChange:e=>Ce("ai","provider",e.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[a.jsx("option",{value:"spark",children:"Spark AI (Included)"}),a.jsx("option",{value:"openai",children:"OpenAI"}),a.jsx("option",{value:"anthropic",children:"Anthropic"})]})]}),"spark"!==(null==(c=null==ce?void 0:ce.ai)?void 0:c.provider)&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"ai-key",children:"API Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"relative flex-1",children:a.jsx(di,{id:"ai-key",type:fe["ai-key"]?"text":"password",value:(null==(d=null==ce?void 0:ce.ai)?void 0:d.apiKey)??"",onChange:e=>Ce("ai","apiKey",e.target.value),placeholder:"sk_..."})}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("ai-key"),"aria-label":fe["ai-key"]?"Hide AI API key":"Show AI API key",children:fe["ai-key"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"ai-model",children:"Model"}),a.jsxs("select",{id:"ai-model",value:(null==(u=null==ce?void 0:ce.ai)?void 0:u.model)??"gpt-4o",onChange:e=>Ce("ai","model",e.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[a.jsx("option",{value:"gpt-4o",children:"GPT-4o (Recommended)"}),a.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini (Faster)"}),a.jsx("option",{value:"claude-3-5-sonnet",children:"Claude 3.5 Sonnet"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"ai-tokens",children:"Max Tokens"}),a.jsx(di,{id:"ai-tokens",type:"number",value:(null==(m=null==ce?void 0:ce.ai)?void 0:m.maxTokens)??1e3,onChange:e=>Ce("ai","maxTokens",parseInt(e.target.value))})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"ai-temp",children:"Temperature"}),a.jsx(di,{id:"ai-temp",type:"number",step:"0.1",min:"0",max:"2",value:(null==(h=null==ce?void 0:ce.ai)?void 0:h.temperature)??.7,onChange:e=>Ce("ai","temperature",parseFloat(e.target.value))})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{Pe("AI").catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to test AI connection from button",t)})},disabled:"AI"===ye,className:"flex-1",children:[a.jsx(Me,{size:20,className:"mr-2"}),"AI"===ye?"Testing...":"Test Connection"]}),a.jsx(Ks,{variant:"outline",onClick:()=>Te("ai"),children:"Reset"})]})]})]})}),a.jsx(yi,{value:"kyc",className:"space-y-4",children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-green-500/10",children:a.jsx(Q,{size:24,className:"text-green-600",weight:"fill"})}),a.jsxs("div",{children:[a.jsx(Gr,{children:"KYC / Identity Verification"}),a.jsx(Wr,{children:"Configure identity verification service"})]})]}),a.jsx(gi,{checked:(null==(p=null==ce?void 0:ce.kyc)?void 0:p.enabled)??!0,onCheckedChange:e=>Ce("kyc","enabled",e)})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"kyc-provider",children:"Provider"}),a.jsxs("select",{id:"kyc-provider",value:(null==(g=null==ce?void 0:ce.kyc)?void 0:g.provider)??"manual",onChange:e=>Ce("kyc","provider",e.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[a.jsx("option",{value:"manual",children:"Manual Review"}),a.jsx("option",{value:"stripe",children:"Stripe Identity"}),a.jsx("option",{value:"onfido",children:"Onfido"}),a.jsx("option",{value:"jumio",children:"Jumio"})]})]}),"manual"!==(null==(x=null==ce?void 0:ce.kyc)?void 0:x.provider)&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"kyc-key",children:"API Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"relative flex-1",children:a.jsx(di,{id:"kyc-key",type:fe["kyc-key"]?"text":"password",value:(null==(f=null==ce?void 0:ce.kyc)?void 0:f.apiKey)??"",onChange:e=>Ce("kyc","apiKey",e.target.value),placeholder:"sk_..."})}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("kyc-key"),"aria-label":fe["kyc-key"]?"Hide KYC API key":"Show KYC API key",children:fe["kyc-key"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(ui,{children:"Auto-approve Verifications"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically approve successful verification checks"})]}),a.jsx(gi,{checked:(null==(v=null==ce?void 0:ce.kyc)?void 0:v.autoApprove)??!1,onCheckedChange:e=>Ce("kyc","autoApprove",e)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(ui,{children:"Require Documents"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Require photo ID and proof of pet ownership"})]}),a.jsx(gi,{checked:(null==(y=null==ce?void 0:ce.kyc)?void 0:y.requireDocuments)??!0,onCheckedChange:e=>Ce("kyc","requireDocuments",e)})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{Pe("KYC").catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to test KYC connection from button",t)})},disabled:"KYC"===ye,className:"flex-1",children:[a.jsx(Me,{size:20,className:"mr-2"}),"KYC"===ye?"Testing...":"Test Connection"]}),a.jsx(Ks,{variant:"outline",onClick:()=>Te("kyc"),children:"Reset"})]})]})]})}),a.jsx(yi,{value:"moderation",className:"space-y-4",children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-red-500/10",children:a.jsx(oe,{size:24,className:"text-red-600",weight:"fill"})}),a.jsxs("div",{children:[a.jsx(Gr,{children:"Photo Moderation"}),a.jsx(Wr,{children:"Configure automated content moderation"})]})]}),a.jsx(gi,{checked:(null==(j=null==ce?void 0:ce.photoModeration)?void 0:j.enabled)??!0,onCheckedChange:e=>Ce("photoModeration","enabled",e)})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"mod-provider",children:"Provider"}),a.jsxs("select",{id:"mod-provider",value:(null==(w=null==ce?void 0:ce.photoModeration)?void 0:w.provider)??"spark",onChange:e=>Ce("photoModeration","provider",e.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[a.jsx("option",{value:"spark",children:"Spark Moderation (Included)"}),a.jsx("option",{value:"openai",children:"OpenAI Vision"}),a.jsx("option",{value:"google-vision",children:"Google Cloud Vision"}),a.jsx("option",{value:"aws-rekognition",children:"AWS Rekognition"})]})]}),"spark"!==(null==(b=null==ce?void 0:ce.photoModeration)?void 0:b.provider)&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"mod-key",children:"API Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"relative flex-1",children:a.jsx(di,{id:"mod-key",type:fe["mod-key"]?"text":"password",value:(null==(N=null==ce?void 0:ce.photoModeration)?void 0:N.apiKey)??"",onChange:e=>Ce("photoModeration","apiKey",e.target.value),placeholder:"sk_..."})}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("mod-key"),"aria-label":fe["mod-key"]?"Hide moderation API key":"Show moderation API key",children:fe["mod-key"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(ui,{htmlFor:"mod-threshold",children:["Confidence Threshold (",Math.round(100*((null==(S=null==ce?void 0:ce.photoModeration)?void 0:S.confidenceThreshold)??.8)),"%)"]}),a.jsx(di,{id:"mod-threshold",type:"range",min:"0",max:"1",step:"0.05",value:(null==(E=null==ce?void 0:ce.photoModeration)?void 0:E.confidenceThreshold)??.8,onChange:e=>Ce("photoModeration","confidenceThreshold",parseFloat(e.target.value)),className:"w-full"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Higher values are more strict but may have false positives"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(ui,{children:"Auto-reject Violations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically reject photos that violate policies"})]}),a.jsx(gi,{checked:(null==(k=null==ce?void 0:ce.photoModeration)?void 0:k.autoReject)??!1,onCheckedChange:e=>Ce("photoModeration","autoReject",e)})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{Pe("Photo Moderation").catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to test Photo Moderation connection from button",t)})},disabled:"Photo Moderation"===ye,className:"flex-1",children:[a.jsx(Me,{size:20,className:"mr-2"}),"Photo Moderation"===ye?"Testing...":"Test Connection"]}),a.jsx(Ks,{variant:"outline",onClick:()=>Te("photoModeration"),children:"Reset"})]})]})]})}),a.jsx(yi,{value:"sms",className:"space-y-4",children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/10",children:a.jsx(Le,{size:24,className:"text-indigo-600",weight:"fill"})}),a.jsxs("div",{children:[a.jsx(Gr,{children:"SMS Service"}),a.jsx(Wr,{children:"Configure SMS notifications and verification"})]})]}),a.jsx(gi,{checked:(null==(I=null==ce?void 0:ce.sms)?void 0:I.enabled)??!1,onCheckedChange:e=>Ce("sms","enabled",e)})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"sms-provider",children:"Provider"}),a.jsxs("select",{id:"sms-provider",value:(null==(A=null==ce?void 0:ce.sms)?void 0:A.provider)??"disabled",onChange:e=>Ce("sms","provider",e.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"twilio",children:"Twilio"}),a.jsx("option",{value:"vonage",children:"Vonage (Nexmo)"}),a.jsx("option",{value:"aws-sns",children:"AWS SNS"})]})]}),"disabled"!==(null==(C=null==ce?void 0:ce.sms)?void 0:C.provider)&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"sms-key",children:"API Key / Account SID"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(di,{id:"sms-key",type:fe["sms-key"]?"text":"password",value:(null==(P=null==ce?void 0:ce.sms)?void 0:P.apiKey)??"",onChange:e=>Ce("sms","apiKey",e.target.value)}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("sms-key"),"aria-label":fe["sms-key"]?"Hide SMS API key":"Show SMS API key",children:fe["sms-key"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"sms-secret",children:"API Secret / Auth Token"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(di,{id:"sms-secret",type:fe["sms-secret"]?"text":"password",value:(null==(T=null==ce?void 0:ce.sms)?void 0:T.apiSecret)??"",onChange:e=>Ce("sms","apiSecret",e.target.value)}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("sms-secret"),"aria-label":fe["sms-secret"]?"Hide SMS API secret":"Show SMS API secret",children:fe["sms-secret"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"sms-from",children:"From Number"}),a.jsx(di,{id:"sms-from",type:"tel",value:(null==(F=null==ce?void 0:ce.sms)?void 0:F.fromNumber)??"",onChange:e=>Ce("sms","fromNumber",e.target.value),placeholder:"+1234567890"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{Pe("SMS").catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to test SMS connection from button",t)})},disabled:"SMS"===ye||"disabled"===(null==(R=null==ce?void 0:ce.sms)?void 0:R.provider),className:"flex-1",children:[a.jsx(Me,{size:20,className:"mr-2"}),"SMS"===ye?"Testing...":"Test Connection"]}),a.jsx(Ks,{variant:"outline",onClick:()=>Te("sms"),children:"Reset"})]})]})]})}),a.jsx(yi,{value:"email",className:"space-y-4",children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-cyan-500/10",children:a.jsx(Le,{size:24,className:"text-cyan-600",weight:"fill"})}),a.jsxs("div",{children:[a.jsx(Gr,{children:"Email Service"}),a.jsx(Wr,{children:"Configure email notifications and alerts"})]})]}),a.jsx(gi,{checked:(null==(_=null==ce?void 0:ce.email)?void 0:_.enabled)??!1,onCheckedChange:e=>Ce("email","enabled",e)})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"email-provider",children:"Provider"}),a.jsxs("select",{id:"email-provider",value:(null==(M=null==ce?void 0:ce.email)?void 0:M.provider)??"disabled",onChange:e=>Ce("email","provider",e.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"sendgrid",children:"SendGrid"}),a.jsx("option",{value:"mailgun",children:"Mailgun"}),a.jsx("option",{value:"aws-ses",children:"AWS SES"})]})]}),"disabled"!==(null==(D=null==ce?void 0:ce.email)?void 0:D.provider)&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"email-key",children:"API Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(di,{id:"email-key",type:fe["email-key"]?"text":"password",value:(null==(L=null==ce?void 0:ce.email)?void 0:L.apiKey)??"",onChange:e=>Ce("email","apiKey",e.target.value)}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("email-key"),"aria-label":fe["email-key"]?"Hide email API key":"Show email API key",children:fe["email-key"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"email-from",children:"From Email"}),a.jsx(di,{id:"email-from",type:"email",value:(null==(O=null==ce?void 0:ce.email)?void 0:O.fromEmail)??"",onChange:e=>Ce("email","fromEmail",e.target.value),placeholder:"noreply@pawfectmatch.com"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"email-name",children:"From Name"}),a.jsx(di,{id:"email-name",value:(null==(U=null==ce?void 0:ce.email)?void 0:U.fromName)??"PawfectMatch",onChange:e=>Ce("email","fromName",e.target.value)})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{Pe("Email").catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to test Email connection from button",t)})},disabled:"Email"===ye||"disabled"===(null==(z=null==ce?void 0:ce.email)?void 0:z.provider),className:"flex-1",children:[a.jsx(Me,{size:20,className:"mr-2"}),"Email"===ye?"Testing...":"Test Connection"]}),a.jsx(Ks,{variant:"outline",onClick:()=>Te("email"),children:"Reset"})]})]})]})}),a.jsx(yi,{value:"storage",className:"space-y-4",children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-orange-500/10",children:a.jsx(oe,{size:24,className:"text-orange-600",weight:"fill"})}),a.jsxs("div",{children:[a.jsx(Gr,{children:"Storage Service"}),a.jsx(Wr,{children:"Configure file and image storage"})]})]}),a.jsx(gi,{checked:(null==(B=null==ce?void 0:ce.storage)?void 0:B.enabled)??!0,onCheckedChange:e=>Ce("storage","enabled",e)})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"storage-provider",children:"Provider"}),a.jsxs("select",{id:"storage-provider",value:(null==($=null==ce?void 0:ce.storage)?void 0:$.provider)??"local",onChange:e=>Ce("storage","provider",e.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[a.jsx("option",{value:"local",children:"Local Storage"}),a.jsx("option",{value:"aws-s3",children:"AWS S3"}),a.jsx("option",{value:"cloudflare-r2",children:"Cloudflare R2"})]})]}),"local"!==(null==(V=null==ce?void 0:ce.storage)?void 0:V.provider)&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"storage-key",children:"Access Key ID"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(di,{id:"storage-key",type:fe["storage-key"]?"text":"password",value:(null==(Y=null==ce?void 0:ce.storage)?void 0:Y.apiKey)??"",onChange:e=>Ce("storage","apiKey",e.target.value)}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("storage-key"),"aria-label":fe["storage-key"]?"Hide storage API key":"Show storage API key",children:fe["storage-key"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"storage-secret",children:"Secret Access Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(di,{id:"storage-secret",type:fe["storage-secret"]?"text":"password",value:(null==(K=null==ce?void 0:ce.storage)?void 0:K.apiSecret)??"",onChange:e=>Ce("storage","apiSecret",e.target.value)}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("storage-secret"),"aria-label":fe["storage-secret"]?"Hide storage secret key":"Show storage secret key",children:fe["storage-secret"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"storage-bucket",children:"Bucket Name"}),a.jsx(di,{id:"storage-bucket",value:(null==(q=null==ce?void 0:ce.storage)?void 0:q.bucket)??"",onChange:e=>Ce("storage","bucket",e.target.value),placeholder:"my-bucket"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"storage-region",children:"Region"}),a.jsx(di,{id:"storage-region",value:(null==(G=null==ce?void 0:ce.storage)?void 0:G.region)??"us-east-1",onChange:e=>Ce("storage","region",e.target.value),placeholder:"us-east-1"})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{Pe("Storage").catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to test Storage connection from button",t)})},disabled:"Storage"===ye,className:"flex-1",children:[a.jsx(Me,{size:20,className:"mr-2"}),"Storage"===ye?"Testing...":"Test Connection"]}),a.jsx(Ks,{variant:"outline",onClick:()=>Te("storage"),children:"Reset"})]})]})]})}),a.jsx(yi,{value:"analytics",className:"space-y-4",children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-pink-500/10",children:a.jsx(Le,{size:24,className:"text-pink-600",weight:"fill"})}),a.jsxs("div",{children:[a.jsx(Gr,{children:"Analytics Service"}),a.jsx(Wr,{children:"Configure user analytics and tracking"})]})]}),a.jsx(gi,{checked:(null==(W=null==ce?void 0:ce.analytics)?void 0:W.enabled)??!1,onCheckedChange:e=>Ce("analytics","enabled",e)})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"analytics-provider",children:"Provider"}),a.jsxs("select",{id:"analytics-provider",value:(null==(H=null==ce?void 0:ce.analytics)?void 0:H.provider)??"disabled",onChange:e=>Ce("analytics","provider",e.target.value),className:"w-full h-10 px-3 rounded-md border border-input bg-background",children:[a.jsx("option",{value:"disabled",children:"Disabled"}),a.jsx("option",{value:"google-analytics",children:"Google Analytics"}),a.jsx("option",{value:"mixpanel",children:"Mixpanel"}),a.jsx("option",{value:"amplitude",children:"Amplitude"})]})]}),"disabled"!==(null==(X=null==ce?void 0:ce.analytics)?void 0:X.provider)&&a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"analytics-key",children:"google-analytics"===(null==(J=null==ce?void 0:ce.analytics)?void 0:J.provider)?"Measurement ID":"API Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(di,{id:"analytics-key",type:fe["analytics-key"]?"text":"password",value:(null==(Z=null==ce?void 0:ce.analytics)?void 0:Z.apiKey)??"",onChange:e=>Ce("analytics","apiKey",e.target.value),placeholder:"google-analytics"===(null==(ee=null==ce?void 0:ce.analytics)?void 0:ee.provider)?"G-XXXXXXXXXX":"api_key"}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("analytics-key"),"aria-label":fe["analytics-key"]?"Hide analytics API key":"Show analytics API key",children:fe["analytics-key"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{Pe("Analytics").catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to test Analytics connection from button",t)})},disabled:"Analytics"===ye||"disabled"===(null==(te=null==ce?void 0:ce.analytics)?void 0:te.provider),className:"flex-1",children:[a.jsx(Me,{size:20,className:"mr-2"}),"Analytics"===ye?"Testing...":"Test Connection"]}),a.jsx(Ks,{variant:"outline",onClick:()=>Te("analytics"),children:"Reset"})]})]})]})}),a.jsx(yi,{value:"livekit",className:"space-y-4",children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-violet-500/10",children:a.jsx(Oe,{size:24,className:"text-violet-600",weight:"fill"})}),a.jsxs("div",{children:[a.jsx(Gr,{children:"LiveKit Streaming"}),a.jsx(Wr,{children:"Configure live streaming and video chat"})]})]}),a.jsx(gi,{checked:(null==(se=null==ce?void 0:ce.livekit)?void 0:se.enabled)??!1,onCheckedChange:e=>Ce("livekit","enabled",e)})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsx(Kr,{className:"border-amber-500/50 bg-amber-500/5",children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ee,{size:24,className:"text-amber-600 shrink-0",weight:"fill"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Server-Side Implementation Required"}),a.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"LiveKit tokens must be generated server-side for security. Configure these credentials on your backend server and use them to sign tokens via API."})]})]})})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"livekit-key",children:"API Key"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"relative flex-1",children:a.jsx(di,{id:"livekit-key",type:fe["livekit-key"]?"text":"password",value:(null==(ae=null==ce?void 0:ce.livekit)?void 0:ae.apiKey)??"",onChange:e=>Ce("livekit","apiKey",e.target.value),placeholder:"APxxxxxxxxxxxx"})}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("livekit-key"),"aria-label":fe["livekit-key"]?"Hide LiveKit API key":"Show LiveKit API key",children:fe["livekit-key"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"livekit-secret",children:"API Secret"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"relative flex-1",children:a.jsx(di,{id:"livekit-secret",type:fe["livekit-secret"]?"text":"password",value:(null==(re=null==ce?void 0:ce.livekit)?void 0:re.apiSecret)??"",onChange:e=>Ce("livekit","apiSecret",e.target.value),placeholder:"secret_..."})}),a.jsx(Ks,{variant:"outline",size:"icon",onClick:()=>Ae("livekit-secret"),"aria-label":fe["livekit-secret"]?"Hide LiveKit API secret":"Show LiveKit API secret",children:fe["livekit-secret"]?a.jsx(Fe,{size:20}):a.jsx(le,{size:20})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{htmlFor:"livekit-url",children:"WebSocket URL"}),a.jsx(di,{id:"livekit-url",type:"url",value:(null==(ie=null==ce?void 0:ce.livekit)?void 0:ie.wsUrl)??"",onChange:e=>Ce("livekit","wsUrl",e.target.value),placeholder:"wss://your-project.livekit.cloud"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Your LiveKit server WebSocket URL"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{Pe("LiveKit").catch(e=>{const t=e instanceof Error?e:new Error(String(e));Cn.error("Failed to test LiveKit connection from button",t)})},disabled:"LiveKit"===ye||!(null==(ne=null==ce?void 0:ce.livekit)?void 0:ne.enabled),className:"flex-1",children:[a.jsx(Me,{size:20,className:"mr-2"}),"LiveKit"===ye?"Testing...":"Test Connection"]}),a.jsx(Ks,{variant:"outline",onClick:()=>Te("livekit"),children:"Reset"})]})]})]})})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));function Rn({action:e}){const t={resolve_report:se,suspend_user:Ue,ban_user:Ue,reactivate_user:ye,approve_verification:Q,deny_verification:Q}[e]??xe;return a.jsx(t,{size:20,className:"text-primary",weight:"fill"})}function _n({action:e}){const t={resolve_report:{variant:"default",label:"Resolved Report"},suspend_user:{variant:"secondary",label:"Suspended User"},ban_user:{variant:"destructive",label:"Banned User"},reactivate_user:{variant:"default",label:"Reactivated User"},approve_verification:{variant:"default",label:"Approved Verification"},deny_verification:{variant:"secondary",label:"Denied Verification"}}[e]??{variant:"outline",label:e.replace(/_/g," ").toUpperCase()};return a.jsx(Yr,{variant:t.variant,className:"text-xs",children:t.label})}const Mn=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e]=Gs("admin-audit-log",[]),[t,r]=s.useState(""),[i,n]=s.useState("all"),o=(e??[]).filter(e=>{const s=e.adminName.toLowerCase().includes(t.toLowerCase())||e.action.toLowerCase().includes(t.toLowerCase())||e.targetId.toLowerCase().includes(t.toLowerCase()),a="all"===i||e.action===i;return s&&a}),l=Array.from(new Set((e??[]).map(e=>e.action)));return a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"border-b border-border p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Audit Log"}),a.jsx("p",{className:"text-muted-foreground",children:"Complete history of all admin actions"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),a.jsx(di,{placeholder:"Search by admin, action, or target...",value:t,onChange:e=>r(e.target.value),className:"pl-10"})]}),a.jsxs(Xi,{value:i,onValueChange:n,children:[a.jsx(Zi,{className:"w-64",children:a.jsx(Ji,{placeholder:"Filter by action"})}),a.jsxs(en,{children:[a.jsx(tn,{value:"all",children:"All Actions"}),l.map(e=>a.jsx(tn,{value:e,children:e.replace(/_/g," ").toUpperCase()},e))]})]})]})]})}),a.jsx(mi,{className:"flex-1 p-6",children:a.jsxs("div",{className:"space-y-3",children:[o.map((e,t)=>a.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",style:{animationDelay:50*t+"ms"},children:a.jsx(Kr,{className:"hover:shadow-md transition-shadow",children:a.jsx(Hr,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:a.jsx(Rn,{action:e.action})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-semibold",children:e.adminName}),a.jsx(_n,{action:e.action}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.targetType,": ",e.targetId]})]}),e.details&&a.jsx("div",{className:"mt-2 text-sm text-muted-foreground",children:JSON.stringify(e.details,null,2)})]}),a.jsxs("div",{className:"text-right shrink-0",children:[a.jsx("div",{className:"text-sm font-medium",children:new Date(e.timestamp).toLocaleDateString()}),a.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleTimeString()})]})]})})]})})})},e.id)),0===o.length&&a.jsx(Kr,{className:"p-12",children:a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx(xe,{size:48,className:"mx-auto text-muted-foreground"}),a.jsx("h3",{className:"text-lg font-semibold",children:"No audit entries found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t||"all"!==i?"Try adjusting your search or filters":"Audit entries will appear here as admins take actions"})]})})]})})]})}},Symbol.toStringTag,{value:"Module"})),Dn=_t("purchase-service");async function Ln(e,t){try{return(await ga.put("/payments/business-config",{...e,updatedBy:t})).data.config}catch(s){const e=s instanceof Error?s:new Error(String(s));throw Dn.error("Failed to update business config",e,{updatedBy:t}),e}}const On=Object.freeze(Object.defineProperty({__proto__:null,default:function(){Zs();const[e,t]=s.useState(null),[r,i]=s.useState(!1),[n,o]=s.useState(!1),[l,c]=s.useState(!1),[d]=Gs("current-user",null),u=s.useCallback(async()=>{i(!0);try{const e=await async function(){try{return(await ga.get("/payments/business-config")).data.config}catch(e){const t=e instanceof Error?e:new Error(String(e));throw Dn.error("Failed to get business config",t),t}}();if(e)t(e);else{const e={id:"default",version:"1",prices:{premium:{monthly:9.99,yearly:99.99,currency:"USD"},elite:{monthly:19.99,yearly:199.99,currency:"USD"},boost:{price:2.99,currency:"USD"},superLike:{price:.99,currency:"USD"}},limits:{free:{swipeDailyCap:5,adoptionListingLimit:1},premium:{boostsPerWeek:1,superLikesPerDay:0},elite:{boostsPerWeek:2,superLikesPerDay:10}},experiments:{},updatedAt:(new Date).toISOString(),updatedBy:(null==d?void 0:d.id)||"admin"};t(e)}}catch(e){const t=e instanceof Error?e:new Error(String(e));Mt.error("Load config error",t,{action:"loadConfig"}),Se.error("Failed to load config")}finally{i(!1)}},[d]);s.useEffect(()=>{u()},[u]);const m=(s,a)=>{if(!e)return;const r={...e};let i=r;for(let e=0;e<s.length-1;e++){const t=s[e];if(void 0===t)return;const a=i[t];if("object"!=typeof a||null===a||Array.isArray(a))return;i=a}const n=s[s.length-1];void 0!==n&&(i[n]=a),t(r)},h=(s,a)=>{if(!e)return;const r={...e};let i=r;for(let e=0;e<s.length-1;e++){const t=s[e];if(void 0===t)return;const a=i[t];if("object"!=typeof a||null===a||Array.isArray(a))return;i=a}const n=s[s.length-1];void 0!==n&&(i[n]=a),t(r)};return r||!e?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"text-muted-foreground",children:"Loading config..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Business Configuration"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage prices, limits, and experiments"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Ks,{onClick:()=>{(async()=>{if(e&&d){o(!0);try{await Ln(e,d.id||"admin"),Se.success("Business config updated successfully")}catch(t){const e=t instanceof Error?t:new Error(String(t));Mt.error("Save config error",e,{action:"saveConfig"}),Se.error("Failed to save config")}finally{o(!1)}}})().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Mt.error("Failed to save config",t,{action:"handleSave"}),Se.error("Failed to save config")})},disabled:n||l,variant:"outline",children:[a.jsx(ye,{size:20,className:"mr-2"}),n?"Saving...":"Save Changes"]}),a.jsxs(Ks,{onClick:()=>{(async()=>{if(e&&d){o(!0),c(!0);try{await Ln(e,d.id||"admin"),await An.broadcastConfig("business",e,d.id||"admin"),Se.success("Business config saved and broadcasted successfully"),await kn.createAuditLog({adminId:d.id||"admin",action:"config_broadcast",targetType:"business_config",targetId:e.id||"default",details:JSON.stringify({configType:"business"})})}catch(t){const e=t instanceof Error?t:new Error(String(t));Mt.error("Save and broadcast config error",e,{action:"saveAndBroadcastConfig"}),Se.error("Failed to save and broadcast config")}finally{o(!1),c(!1)}}})().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Mt.error("Failed to save and broadcast config",t,{action:"handleSaveAndBroadcast"}),Se.error("Failed to save and broadcast config")})},disabled:n||l,children:[a.jsx(_e,{size:20,className:"mr-2"}),l?"Broadcasting...":"Save & Broadcast"]})]})]}),a.jsxs(xi,{defaultValue:"prices",className:"space-y-4",children:[a.jsxs(fi,{children:[a.jsxs(vi,{value:"prices",children:[a.jsx(ze,{size:16,className:"mr-2"}),"Prices"]}),a.jsxs(vi,{value:"limits",children:[a.jsx(te,{size:16,className:"mr-2"}),"Limits"]}),a.jsxs(vi,{value:"experiments",children:[a.jsx(Be,{size:16,className:"mr-2"}),"Experiments"]})]}),a.jsxs(yi,{value:"prices",className:"space-y-4",children:[a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Premium Plan"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Monthly Price (USD)"}),a.jsx(di,{type:"number",step:"0.01",value:e.prices.premium.monthly,onChange:e=>m(["prices","premium","monthly"],parseFloat(e.target.value)||0)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Yearly Price (USD)"}),a.jsx(di,{type:"number",step:"0.01",value:e.prices.premium.yearly,onChange:e=>m(["prices","premium","yearly"],parseFloat(e.target.value)||0)})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Elite Plan"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Monthly Price (USD)"}),a.jsx(di,{type:"number",step:"0.01",value:e.prices.elite.monthly,onChange:e=>m(["prices","elite","monthly"],parseFloat(e.target.value)||0)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Yearly Price (USD)"}),a.jsx(di,{type:"number",step:"0.01",value:e.prices.elite.yearly,onChange:e=>m(["prices","elite","yearly"],parseFloat(e.target.value)||0)})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Consumables"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Boost Price (USD)"}),a.jsx(di,{type:"number",step:"0.01",value:e.prices.boost.price,onChange:e=>m(["prices","boost","price"],parseFloat(e.target.value)||0)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Super Like Price (USD)"}),a.jsx(di,{type:"number",step:"0.01",value:e.prices.superLike.price,onChange:e=>m(["prices","superLike","price"],parseFloat(e.target.value)||0)})]})]})]})]}),a.jsxs(yi,{value:"limits",className:"space-y-4",children:[a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Free Plan Limits"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Daily Swipe Cap"}),a.jsx(di,{type:"number",value:e.limits.free.swipeDailyCap,onChange:e=>h(["limits","free","swipeDailyCap"],parseInt(e.target.value)||0)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Adoption Listing Limit"}),a.jsx(di,{type:"number",value:e.limits.free.adoptionListingLimit,onChange:e=>h(["limits","free","adoptionListingLimit"],parseInt(e.target.value)||0)})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Premium Plan Limits"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Boosts Per Week"}),a.jsx(di,{type:"number",value:e.limits.premium.boostsPerWeek,onChange:e=>h(["limits","premium","boostsPerWeek"],parseInt(e.target.value)||0)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Super Likes Per Day"}),a.jsx(di,{type:"number",value:e.limits.premium.superLikesPerDay,onChange:e=>h(["limits","premium","superLikesPerDay"],parseInt(e.target.value)||0)})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Elite Plan Limits"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Boosts Per Week"}),a.jsx(di,{type:"number",value:e.limits.elite.boostsPerWeek,onChange:e=>h(["limits","elite","boostsPerWeek"],parseInt(e.target.value)||0)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Super Likes Per Day"}),a.jsx(di,{type:"number",value:e.limits.elite.superLikesPerDay,onChange:e=>h(["limits","elite","superLikesPerDay"],parseInt(e.target.value)||0)})]})]})]})]}),a.jsx(yi,{value:"experiments",className:"space-y-4",children:a.jsx(Kr,{className:"p-6",children:a.jsx("p",{className:"text-muted-foreground",children:"Experiment configuration UI coming soon. For now, experiments can be managed via API."})})})]})]})}},Symbol.toStringTag,{value:"Module"})),Un=_t("admin.api"),zn=`${ra.VITE_API_URL}/admin`;function Bn(e){switch(e){case"OPEN":return"pending";case"RESOLVED":return"resolved";case"DISMISSED":return"dismissed";default:return e.toLowerCase()}}function $n(e){const t=["spam","harassment","inappropriate","other"].includes(e.reason)?e.reason:"other",s={id:e.id,messageId:e.messageId,roomId:e.roomId,reportedBy:e.reporterId,reportedUserId:e.reportedUserId,reason:t,status:Bn(e.status),createdAt:e.createdAt};if(void 0!==e.description&&(s.description=e.description),void 0!==e.reviewedBy&&(s.reviewedBy=e.reviewedBy),void 0!==e.reviewedAt&&(s.reviewedAt=e.reviewedAt),void 0!==e.action){const t=["warning","mute","suspend","no_action"].includes(e.action)?e.action:void 0;t&&(s.action=t)}return s}function Vn(e){const t=["spam","inappropriate","fake","harassment","other"].includes(e.reason)?e.reason:"other",s={id:e.id,reporterId:e.reporterId,reportedEntityType:e.reportedEntityType,reportedEntityId:e.reportedEntityId,reason:t,details:e.details,status:e.status,createdAt:e.createdAt};if(void 0!==e.assignedTo&&(s.assignedTo=e.assignedTo),void 0!==e.resolution){const t=["warn","suspend","ban","remove_content","no_action"].includes(e.resolution.action)?e.resolution.action:"no_action";s.resolution={action:t,notes:e.resolution.notes,resolvedBy:e.resolution.resolvedBy}}return void 0!==e.resolvedAt&&(s.resolvedAt=e.resolvedAt),s}async function Yn(e,t={}){const s=await fetch(`${zn}${e}`,{credentials:"include",headers:{"Content-Type":"application/json",...t.headers??{}},...t});if(!s.ok){const t=await s.text().catch(()=>""),a=new Error(`Admin API ${e} failed with ${s.status}: ${t}`);throw Un.error("Admin API request failed",a,{path:e,status:s.status}),a}if(204!==s.status)return await s.json()}const Kn={listReports:async()=>(await Yn("/reports")).map($n),resolveReport:async(e,t)=>$n(await Yn(`/reports/${e}/resolve`,{method:"POST",body:JSON.stringify({notes:t})})),dismissReport:async(e,t)=>$n(await Yn(`/reports/${e}/dismiss`,{method:"POST",body:JSON.stringify({notes:t})}))},qn={listReports:async()=>(await Yn("/reports/all")).map(Vn),getReport:async e=>Vn(await Yn(`/reports/${e}`)),resolveReport:async(e,t)=>Vn(await Yn(`/reports/${e}/resolve`,{method:"POST",body:JSON.stringify(t)})),dismissReport:async(e,t)=>Vn(await Yn(`/reports/${e}/dismiss`,{method:"POST",body:JSON.stringify({notes:t})}))},Gn=_t("ChatModerationPanel");const Wn=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=s.useState([]),[r,i]=s.useState(!1),[n,o]=s.useState(null),[l,c]=s.useState("no_action"),[d,u]=s.useState(!1);s.useEffect(()=>{m()},[]);const m=async()=>{i(!0);try{const e=await Kn.listReports();t(e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()))}catch(e){Gn.error("Load reports error",e instanceof Error?e:new Error(String(e))),Se.error("Failed to load reports")}finally{i(!1)}},h=e=>{switch(e){case"pending":return a.jsx(Yr,{variant:"destructive",children:"Pending"});case"reviewed":return a.jsx(Yr,{variant:"secondary",children:"Reviewed"});case"resolved":return a.jsx(Yr,{variant:"default",children:"Resolved"});default:return a.jsx(Yr,{variant:"outline",children:"Dismissed"})}},p=e=>{switch(e){case"spam":return a.jsx(Yr,{variant:"destructive",children:"Spam"});case"harassment":return a.jsx(Yr,{variant:"destructive",children:"Harassment"});case"inappropriate":return a.jsx(Yr,{variant:"destructive",children:"Inappropriate"});default:return a.jsx(Yr,{variant:"outline",children:"Other"})}},g=e.filter(e=>e&&"string"==typeof e.status&&"pending"===e.status),x=e.filter(e=>e&&"string"==typeof e.status&&("reviewed"===e.status||"resolved"===e.status));return r?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"text-muted-foreground",children:"Loading reports..."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Chat Moderation"}),a.jsx("p",{className:"text-muted-foreground",children:"Review reported messages and take action"})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"text-sm text-muted-foreground",children:[g.length," pending reports"]})})]}),a.jsxs(xi,{defaultValue:"pending",className:"space-y-4",children:[a.jsxs(fi,{children:[a.jsxs(vi,{value:"pending",children:[a.jsx(se,{size:16,className:"mr-2"}),"Pending (",g.length,")"]}),a.jsxs(vi,{value:"reviewed",children:[a.jsx(Te,{size:16,className:"mr-2"}),"Reviewed (",x.length,")"]})]}),a.jsx(yi,{value:"pending",className:"space-y-4",children:0===g.length?a.jsx(Kr,{className:"p-8 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No pending reports"})}):a.jsx("div",{className:"grid gap-4",children:g.map(e=>a.jsx(Kr,{className:"p-4 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>o(e),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h(e.status),p(e.reason),a.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]}),a.jsxs("p",{className:"text-sm font-medium mb-1",children:["Reported by: ",e.reportedBy]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reason: ",e.reason]}),e.description&&a.jsx("p",{className:"text-sm mt-2",children:e.description})]}),a.jsxs(Ks,{variant:"outline",size:"sm",onClick:t=>{t.stopPropagation(),o(e)},children:[a.jsx(le,{size:16,className:"mr-2"}),"Review"]})]})},e.id))})}),a.jsx(yi,{value:"reviewed",className:"space-y-4",children:0===x.length?a.jsx(Kr,{className:"p-8 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No reviewed reports"})}):a.jsx("div",{className:"grid gap-4",children:x.map(e=>a.jsx(Kr,{className:"p-4",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h(e.status),p(e.reason),e.action&&a.jsx(Yr,{variant:"outline",children:e.action})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reviewed by: ",e.reviewedBy," on"," ",e.reviewedAt&&new Date(e.reviewedAt).toLocaleDateString()]})]})})},e.id))})})]}),n&&a.jsx(Da,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-background/95 backdrop-blur-sm",onClick:()=>o(null),children:a.jsxs(Kr,{className:"max-w-2xl w-full p-6",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold",children:"Report Details"}),a.jsx(Ks,{variant:"ghost",size:"icon",onClick:()=>o(null),"aria-label":"Close report details",children:a.jsx(X,{size:20})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ui,{className:"text-sm font-medium",children:"Report Reason"}),a.jsx("p",{className:"text-sm",children:n.reason})]}),n.description&&a.jsxs("div",{children:[a.jsx(ui,{className:"text-sm font-medium",children:"Description"}),a.jsx("p",{className:"text-sm",children:n.description})]}),a.jsxs("div",{children:[a.jsx(ui,{className:"text-sm font-medium mb-2 block",children:"Action"}),a.jsxs(Xi,{value:l,onValueChange:e=>c(e),children:[a.jsx(Zi,{children:a.jsx(Ji,{})}),a.jsxs(en,{children:[a.jsx(tn,{value:"no_action",children:"No Action"}),a.jsx(tn,{value:"warning",children:"Warning"}),a.jsx(tn,{value:"mute",children:"Mute User"}),a.jsx(tn,{value:"suspend",children:"Suspend User"})]})]})]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx(Ks,{variant:"outline",onClick:()=>o(null),disabled:d,children:"Cancel"}),a.jsxs(Ks,{onClick:async()=>{if(n){u(!0);try{let e;const s="no_action"===l?void 0:`Action: ${l}`;e="no_action"===l?await Kn.dismissReport(n.id):await Kn.resolveReport(n.id,s),t(t=>t.map(t=>t.id===n.id?e:t)),Se.success(`Action taken: ${l}`),o(null),c("no_action")}catch(e){Gn.error("Review error",e instanceof Error?e:new Error(String(e))),Se.error("Failed to review report")}finally{u(!1)}}},disabled:d,children:[a.jsx(Te,{size:16,className:"mr-2"}),d?"Processing":"Take Action"]})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Hn=_t("CommunityManagement");function Qn({post:e,isHidden:t,onHide:r,onUnhide:i,onDelete:n}){const o=Jt(0),l=Jt(20);s.useEffect(()=>{o.value=es(1),l.value=es(0)},[o,l]);const c=is(()=>({opacity:o.value,transform:[{translateY:l.value}]})),d=e._id??e.id;return d?a.jsxs(hs,{style:c,className:"relative",children:[a.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2",children:[t?a.jsxs(Ks,{size:"sm",variant:"secondary",onClick:()=>i(d),children:[a.jsx(le,{size:16,className:"mr-2"}),"Unhide"]}):a.jsxs(Ks,{size:"sm",variant:"outline",onClick:()=>r(d),children:[a.jsx(Fe,{size:16,className:"mr-2"}),"Hide"]}),a.jsxs(Ks,{size:"sm",variant:"destructive",onClick:()=>n(e),children:[a.jsx(Re,{size:16,className:"mr-2"}),"Delete"]})]}),a.jsx(At,{post:e})]}):null}const Xn=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=s.useState([]),[r,i]=s.useState(!0),[n]=Gs("flagged-posts",[]),[o,l]=Gs("hidden-posts",[]),[c,d]=s.useState(""),[u,m]=s.useState(null),[h,p]=s.useState(!1),[g,x]=s.useState("all"),f=s.useCallback(async()=>{try{i(!0);const e=await Qi.getFeed({mode:"for-you",limit:1e3});t(e.posts)}catch(e){const t=e instanceof Error?e:new Error(String(e));Hn.error("Failed to load posts",t,{action:"loadPosts"}),Se.error("Failed to load posts")}finally{i(!1)}},[]);s.useEffect(()=>{f()},[f]);const v=s.useMemo(()=>e.filter(e=>{const t=e._id??e.id;return t&&(null==n?void 0:n.includes(t))}),[e,n]),y=s.useMemo(()=>e.filter(e=>{const t=e._id??e.id;return t&&(null==o?void 0:o.includes(t))}),[e,o]),j=s.useMemo(()=>{let t="all"===g?e:"flagged"===g?v:y;if(c){const e=c.toLowerCase();t=t.filter(t=>{var s,a;return((null==(s=t.text)?void 0:s.toLowerCase().includes(e))??!1)||((null==(a=t.authorName)?void 0:a.toLowerCase().includes(e))??!1)})}return t.sort((e,t)=>{const s=new Date(e.createdAt??0).getTime();return new Date(t.createdAt??0).getTime()-s})},[e,v,y,g,c]),w=s.useCallback(e=>{l(t=>(null==t?void 0:t.includes(e))?t:[...t||[],e]).catch(t=>{const s=t instanceof Error?t:new Error(String(t));Hn.error("Failed to hide post",s,{postId:e}),Se.error("Failed to hide post")}),Se.success("Post hidden from feed")},[l]),b=s.useCallback(e=>{l(t=>(t||[]).filter(t=>t!==e)).catch(t=>{const s=t instanceof Error?t:new Error(String(t));Hn.error("Failed to unhide post",s,{postId:e}),Se.error("Failed to restore post")}),Se.success("Post restored to feed")},[l]),N=s.useCallback(async()=>{if(!u)return;const e=u._id??u.id;if(e)try{await Qi.deletePost(e),Se.success("Post deleted successfully"),p(!1),m(null),await f()}catch(t){const s=t instanceof Error?t:new Error(String(t));Hn.error("Failed to delete post",s,{postId:e,action:"deletePost"}),Se.error("Failed to delete post")}else Se.error("Invalid post ID")},[u,f]),S=s.useCallback(e=>{m(e),p(!0)},[]),E=s.useMemo(()=>{const t=Date.now()-864e5;return{total:e.length,flagged:v.length,hidden:y.length,last24h:e.filter(e=>new Date(e.createdAt??0).getTime()>t).length}},[e,v,y]);return a.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold",children:"Community Posts"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage and moderate community content"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(Kr,{children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Posts"}),a.jsx("p",{className:"text-2xl font-bold",children:E.total})]}),a.jsx(ce,{size:32,className:"text-primary",weight:"fill"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Last 24h"}),a.jsx("p",{className:"text-2xl font-bold",children:E.last24h})]}),a.jsx($e,{size:32,className:"text-accent",weight:"fill"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Flagged"}),a.jsx("p",{className:"text-2xl font-bold",children:E.flagged})]}),a.jsx(se,{size:32,className:"text-destructive",weight:"fill"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Hidden"}),a.jsx("p",{className:"text-2xl font-bold",children:E.hidden})]}),a.jsx(Fe,{size:32,className:"text-muted-foreground",weight:"fill"})]})})})]}),a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"Posts"}),a.jsxs("div",{className:"flex items-center justify-between gap-4 mt-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),a.jsx(di,{placeholder:"Search posts by content or author...",value:c,onChange:e=>d(e.target.value),className:"pl-10"})]}),a.jsx(xi,{value:g,onValueChange:e=>x(e),children:a.jsxs(fi,{children:[a.jsx(vi,{value:"all",children:"All"}),a.jsxs(vi,{value:"flagged",children:["Flagged"," ",E.flagged>0&&a.jsx(Yr,{variant:"destructive",className:"ml-2",children:E.flagged})]}),a.jsx(vi,{value:"hidden",children:"Hidden"})]})})]})]}),a.jsx(Hr,{children:a.jsx(mi,{className:"h-[600px]",children:a.jsx("div",{className:"space-y-4",children:r?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"Loading posts..."})}):0===j.length?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"No posts found"})}):j.map(e=>{const t=e._id??e.id;return t?a.jsx(Qn,{post:e,isHidden:(null==o?void 0:o.includes(t))??!1,onHide:w,onUnhide:b,onDelete:S},t):null})})})})]}),a.jsx(Rr,{open:h,onOpenChange:p,children:a.jsxs(Dr,{children:[a.jsxs(Lr,{children:[a.jsx(Ur,{children:"Delete Post"}),a.jsx(zr,{children:"Are you sure you want to delete this post? This action cannot be undone."})]}),a.jsxs(Or,{children:[a.jsx(Ks,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),a.jsx(Ks,{variant:"destructive",onClick:()=>{N().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Hn.error("Failed to delete post from button",t)})},children:"Delete"})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Jn={},Zn=_t("TokenSigning");class eo extends Error{constructor(e,t,s){super(e),this.code=t,this.context=s,this.name="TokenSigningError"}}function to(e){const t=function(){var e,t,s;if("undefined"==typeof window)return null;try{const a=localStorage.getItem("admin-api-config");if(!a)return null;const r=JSON.parse(a);return(null==(e=r.livekit)?void 0:e.enabled)&&(null==(t=r.livekit)?void 0:t.apiKey)&&(null==(s=r.livekit)?void 0:s.apiSecret)?{apiKey:r.livekit.apiKey,apiSecret:r.livekit.apiSecret,issuer:"livekit",...r.livekit.wsUrl&&{apiUrl:r.livekit.wsUrl}}:null}catch(a){const e=a instanceof Error?a:new Error(String(a));return Zn.warn("Failed to read admin config",e),null}}();return t||function(){const e=Jn.VITE_LIVEKIT_API_KEY||Jn.LIVEKIT_API_KEY,t=Jn.VITE_LIVEKIT_API_SECRET||Jn.LIVEKIT_API_SECRET;if(!e||!t)return null;const s=Jn.VITE_LIVEKIT_WS_URL||Jn.LIVEKIT_WS_URL;return{apiKey:e,apiSecret:t,issuer:Jn.VITE_LIVEKIT_ISSUER||"livekit",...void 0!==s&&{apiUrl:s}}}()}const so=_t("LiveStreamingAPI");const ao=new class{async createRoom(e){try{const t={...e,hostId:e.hostId,hostName:e.hostName,...e.hostAvatar?{hostAvatar:e.hostAvatar}:{}},s=await ga.post(la.STREAMING.CREATE_ROOM,t),{stream:a,joinToken:r,publishToken:i}=s.data;if(!r||!i){const t=[];throw r||t.push("joinToken"),i||t.push("publishToken"),so.error("Server did not provide required LiveKit tokens",{roomId:a.roomId,hostId:e.hostId,missingTokens:t}),new Error(`Server did not provide required LiveKit tokens: ${t.join(", ")}. LiveKit tokens must be generated server-side for security.`)}return{stream:a,joinToken:r,publishToken:i}}catch(t){const s=t instanceof Error?t:new Error(String(t));throw so.error("Failed to create room",s,{hostId:e.hostId}),s}}async endRoom(e,t){try{const a=(await ga.post(la.STREAMING.END_ROOM,{streamId:e,hostId:t})).data.stream;try{if(a.roomId){const e=await async function(e){return to()?(Zn.info("HLS VOD recording requested",{roomId:e}),Zn.warn("HLS VOD recording not implemented. Implement server-side using LiveKit SDK.",{roomId:e}),null):(Zn.error("LiveKit configuration missing for HLS recording",{roomId:e}),null)}(a.roomId);e&&so.info("VOD recording completed",{streamId:a.id,vodUrl:e.vodUrl})}}catch(s){so.error("Failed to create VOD recording",s instanceof Error?s:new Error(String(s)),{streamId:a.id,roomId:a.roomId})}try{a.roomId&&(await async function(e){if(!to())throw new eo("LiveKit configuration missing. Configure via Admin Panel > API Configuration > LiveKit, or set LIVEKIT_API_KEY and LIVEKIT_API_SECRET environment variables, or provide config parameter.","CONFIG_MISSING",{roomId:e});throw Zn.info("LiveKit room deletion requested",{roomId:e}),new eo("Room deletion must be implemented server-side using livekit-server-sdk package.","SERVER_SIDE_REQUIRED",{roomId:e,suggestion:"Install livekit-server-sdk and implement room deletion on your backend API"})}(a.roomId),so.info("LiveKit room closed",{streamId:a.id,roomId:a.roomId}))}catch(s){so.error("Failed to close LiveKit room",s instanceof Error?s:new Error(String(s)),{streamId:a.id,roomId:a.roomId})}return a}catch(s){const a=s instanceof Error?s:new Error(String(s));throw so.error("Failed to end room",a,{streamId:e,hostId:t}),a}}async queryActiveStreams(e){try{const t={};(null==e?void 0:e.status)&&e.status.length>0&&(t.status=e.status),(null==e?void 0:e.category)&&e.category.length>0&&(t.category=e.category),(null==e?void 0:e.hostId)&&(t.hostId=e.hostId),(null==e?void 0:e.sortBy)&&(t.sortBy=e.sortBy),(null==e?void 0:e.cursor)&&(t.cursor=e.cursor),(null==e?void 0:e.limit)&&(t.limit=e.limit);const s=la.STREAMING.QUERY_ACTIVE+(Object.keys(t).length>0?"?"+new URLSearchParams(Object.entries(t).map(([e,t])=>[e,String(t)])).toString():"");return(await ga.get(s)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw so.error("Failed to query active streams",s,{filters:e}),s}}async getStreamById(e){try{return(await ga.get(la.STREAMING.GET_STREAM(e))).data.stream}catch(t){const s=t instanceof Error?t:new Error(String(t));if(s.message.includes("404")||s.message.includes("not found"))return null;throw so.error("Failed to get stream by ID",s,{id:e}),s}}async joinStream(e,t,s,a){try{const r={userId:t,userName:s,...void 0!==a&&{userAvatar:a}};return(await ga.post(la.STREAMING.JOIN_STREAM(e),r)).data.viewer}catch(r){const s=r instanceof Error?r:new Error(String(r));throw so.error("Failed to join stream",s,{streamId:e,userId:t}),s}}async leaveStream(e,t){try{await ga.post(la.STREAMING.LEAVE_STREAM(e),{userId:t})}catch(s){const a=s instanceof Error?s:new Error(String(s));throw so.error("Failed to leave stream",a,{streamId:e,userId:t}),a}}async sendReaction(e,t,s,a,r){try{const n={userId:t,userName:s,...void 0!==a&&{userAvatar:a},emoji:r},o=(await ga.post(la.STREAMING.SEND_REACTION(e),n)).data.reaction;try{const t=await this.getStreamById(e),s=(null==t?void 0:t.roomId)||`live:${e}`;bi.broadcastReaction(s,{id:o.id,userId:o.userId,userName:o.userName,...o.userAvatar?{userAvatar:o.userAvatar}:{},emoji:o.emoji,createdAt:o.createdAt}),so.debug("Reaction broadcasted",{streamId:e,reactionId:o.id})}catch(i){so.error("Failed to broadcast reaction",i instanceof Error?i:new Error(String(i)),{streamId:e,reactionId:o.id})}return o}catch(i){const s=i instanceof Error?i:new Error(String(i));throw so.error("Failed to send reaction",s,{streamId:e,userId:t}),s}}async sendChatMessage(e,t,s,a,r){try{const n=await this.getStreamById(e);if(!n)throw new Error("Stream not found");if(!n.allowChat)throw new Error("Chat is disabled for this stream");if("live"!==n.status)throw new Error("Stream is not live");const o={userId:t,userName:s,...void 0!==a&&{userAvatar:a},text:r},l=(await ga.post(la.STREAMING.SEND_CHAT(e),o)).data.message;try{bi.broadcastChatMessage(n.roomId,{id:l.id,userId:l.userId,userName:l.userName,...l.userAvatar?{userAvatar:l.userAvatar}:{},text:l.text,createdAt:l.createdAt}),so.debug("Chat message broadcasted",{streamId:e,messageId:l.id})}catch(i){so.error("Failed to broadcast chat message",i instanceof Error?i:new Error(String(i)),{streamId:e,messageId:l.id})}return l}catch(i){const s=i instanceof Error?i:new Error(String(i));throw so.error("Failed to send chat message",s,{streamId:e,userId:t}),s}}async queryChatMessages(e){try{return(await ga.get(la.STREAMING.GET_CHAT(e))).data.messages}catch(t){const s=t instanceof Error?t:new Error(String(t));throw so.error("Failed to query chat messages",s,{streamId:e}),s}}async getAllStreams(){try{return(await this.queryActiveStreams({limit:1e3})).streams}catch(e){const t=e instanceof Error?e:new Error(String(e));throw so.error("Failed to get all streams",t),t}}},ro=_t("ContentModerationQueue");const io=Object.freeze(Object.defineProperty({__proto__:null,ContentModerationQueue:function(){const[e,t]=s.useState("community"),[r,i]=s.useState("pending"),[n,o]=s.useState([]),[l,c]=s.useState(null),[d,u]=s.useState(!1),[m,h]=s.useState(""),[p,g]=s.useState(""),x=s.useCallback(async()=>{try{u(!0);const t=[];if("lost-found"===e){const e={limit:50};"pending"===r&&(e.status=["active"]);(await Li.queryAlerts(void 0!==e.status?{limit:e.limit,status:e.status}:{limit:e.limit})).alerts.forEach(e=>{"pending"!==r&&"active"!==e.status||t.push({id:e.id,type:"lost-found",status:"pending",content:e})})}else if("community"===e){(await qi.getPendingPosts()).forEach(e=>{t.push({id:e.id,type:"community",status:"pending_review"===e.status?"pending":"active"===e.status?"approved":"rejected",content:e})});const e=await qi.getAllPosts(),s=await qi.getReportsForModeration({status:["pending"],entityType:["pet","message"],limit:50});for(const a of s){const s=e.find(e=>e.id===a.reportedEntityId);if(s){const e=t.find(e=>e.id===s.id);e?e.reportedBy||(e.reportedBy=a.reporterId,e.reportedAt=a.createdAt,e.reason=a.reason):t.push({id:s.id,type:"community",status:"pending_review"===s.status?"pending":"active"===s.status?"approved":"rejected",content:s,reportedBy:a.reporterId,reportedAt:a.createdAt,reason:a.reason})}}}else if("live-stream"===e){(await ao.getAllStreams()).forEach(e=>{("live"===e.status||"ended"===e.status&&e.endedAt&&new Date(e.endedAt).getTime()>Date.now()-864e5)&&t.push({id:e.id,type:"live-stream",status:"pending",content:e})})}const s=t.filter(e=>"pending"===r?"pending"===e.status:"approved"===r?"approved"===e.status:"rejected"===e.status);o(s)}catch(t){ro.error("Failed to load moderation queue",t instanceof Error?t:new Error(String(t))),Se.error("Failed to load moderation queue")}finally{u(!1)}},[e,r]);s.useEffect(()=>{x().catch(e=>{const t=e instanceof Error?e:new Error(String(e));ro.error("Failed to load queue in useEffect",t)})},[x]);const f=e=>{switch(e){case"lost-found":return"Lost & Found";case"community":return"Community Post";case"live-stream":return"Live Stream"}},v=e=>{if("lost-found"===e.type){const t=e.content;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yr,{variant:"outline",children:f(e.type)}),a.jsx(Yr,{variant:"active"===t.status?"destructive":"default",children:t.status})]}),a.jsx("h4",{className:"font-semibold",children:t.petSummary.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.petSummary.species,"  ",t.petSummary.breed??"Unknown breed"]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last seen: ",kt(new Date(t.lastSeen.whenISO),{addSuffix:!0})]}),t.photos&&t.photos.length>0&&a.jsx("div",{className:"w-24 h-24 bg-muted rounded overflow-hidden",children:a.jsx("img",{src:t.photos[0],alt:t.petSummary.name,className:"w-full h-full object-cover"})})]})}if("community"===e.type){const t=e.content;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yr,{variant:"outline",children:f(e.type)}),a.jsx(Yr,{variant:"active"===t.status?"default":"pending_review"===t.status?"secondary":"destructive",children:t.status})]}),a.jsxs("h4",{className:"font-semibold",children:["Post by ",t.authorName]}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.text??"No text content"}),t.media&&t.media.length>0&&t.media[0]&&a.jsx("div",{className:"w-24 h-24 bg-muted rounded overflow-hidden",children:(()=>{var e;const s=null==(e=t.media)?void 0:e[0];if(!s)return null;const r="string"==typeof s?s:"url"in s?s.url:"";return a.jsx("img",{src:r,alt:"Post media",className:"w-full h-full object-cover"})})()})]})}if("live-stream"===e.type){const t=e.content;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yr,{variant:"outline",children:f(e.type)}),a.jsx(Yr,{variant:"live"===t.status?"destructive":"default",children:t.status})]}),a.jsx("h4",{className:"font-semibold",children:t.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Host: ",t.hostName,"  ",t.viewerCount," viewers"]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Category: ",t.category]})]})}return null},y=n.filter(t=>t.type===e);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Content Moderation Queue"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Review and moderate Lost & Found alerts, Community posts, and Live streams"})]}),a.jsxs(Ks,{onClick:x,variant:"outline",children:[a.jsx(ve,{size:16,className:"mr-2"}),"Refresh"]})]}),a.jsxs(xi,{value:e,onValueChange:e=>t(e),className:"w-full",children:[a.jsxs(fi,{className:"w-full grid grid-cols-3",children:[a.jsxs(vi,{value:"community",children:[a.jsx(ce,{size:16,className:"mr-2"}),"Community (",n.filter(e=>"community"===e.type).length,")"]}),a.jsxs(vi,{value:"lost-found",children:[a.jsx(pe,{size:16,className:"mr-2"}),"Lost & Found (",n.filter(e=>"lost-found"===e.type).length,")"]}),a.jsxs(vi,{value:"live-stream",children:[a.jsx(Oe,{size:16,className:"mr-2"}),"Live Streams (",n.filter(e=>"live-stream"===e.type).length,")"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"flex gap-4 mb-4",children:a.jsx(xi,{value:r,onValueChange:e=>i(e),children:a.jsxs(fi,{children:[a.jsxs(vi,{value:"pending",children:["Pending (",y.filter(e=>"pending"===e.status).length,")"]}),a.jsxs(vi,{value:"approved",children:["Approved (",y.filter(e=>"approved"===e.status).length,")"]}),a.jsxs(vi,{value:"rejected",children:["Rejected (",y.filter(e=>"rejected"===e.status).length,")"]})]})})}),a.jsx(mi,{className:"h-[600px]",children:a.jsx("div",{className:"space-y-4",children:d&&0===y.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]}):0===y.length?a.jsxs(hs,{className:"text-center py-12",children:[a.jsx(ye,{size:48,className:"mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No items in this queue"})]}):y.map(e=>a.jsx(hs,{layout:!0,children:a.jsx(Kr,{className:"p-4 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>c(e),children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"flex-1",children:v(e)}),a.jsx("div",{className:"flex items-center",children:a.jsx(Yr,{variant:"pending"===e.status?"secondary":"approved"===e.status?"default":"destructive",children:e.status})})]})})},e.id))})})]})]}),a.jsx(Rr,{open:null!==l,onOpenChange:()=>{c(null),g(""),h("")},children:a.jsxs(Dr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(Lr,{children:[a.jsx(Ur,{children:"Content Review"}),a.jsxs(zr,{children:["Review ",l&&f(l.type)," content"]})]}),l&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"space-y-4",children:v(l)}),"pending"===l.status&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Rejection Reason (if rejecting)"}),a.jsxs(Xi,{value:m,onValueChange:h,children:[a.jsx(Zi,{children:a.jsx(Ji,{placeholder:"Select a reason"})}),a.jsxs(en,{children:[a.jsx(tn,{value:"inappropriate",children:"Inappropriate Content"}),a.jsx(tn,{value:"spam",children:"Spam"}),a.jsx(tn,{value:"misinformation",children:"Misinformation"}),a.jsx(tn,{value:"harassment",children:"Harassment"}),a.jsx(tn,{value:"violence",children:"Violence"}),a.jsx(tn,{value:"other",children:"Other"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Additional Notes"}),a.jsx(ji,{value:p,onChange:e=>g(e.target.value),placeholder:"Add any additional context...",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(Ks,{onClick:()=>{(async()=>{if(l)try{u(!0);const e=await Pr.user();if(!e)throw new Error("Moderator context unavailable");if("community"===l.type){const t=l.content;await qi.updatePostStatus(t.id,"active",e.id,"Approved by moderator"),ro.info("Content approved",{type:"community",contentId:t.id,moderatorId:e.id,action:"approve"})}else if("lost-found"===l.type){const t=l.content;ro.info("Lost & Found alert reviewed",{alertId:t.id,reviewerId:e.id,status:"approved"})}else l.type;Se.success("Content approved"),await x(),c(null),g("")}catch(e){ro.error("Failed to approve content",e instanceof Error?e:new Error(String(e))),Se.error("Failed to approve content")}finally{u(!1)}})().catch(e=>{const t=e instanceof Error?e:new Error(String(e));ro.error("Failed to approve from button",t)})},disabled:d,className:"bg-green-600 hover:bg-green-700",children:[a.jsx(ye,{size:16,className:"mr-2"}),"Approve"]}),a.jsxs(Ks,{onClick:()=>{(async()=>{if(l&&p)try{u(!0);const e=await Pr.user();if(!e)throw new Error("Moderator context unavailable");if("community"===l.type){const t=l.content;await qi.updatePostStatus(t.id,"rejected",e.id,p),ro.info("Content rejected",{type:"community",contentId:t.id,moderatorId:e.id,action:"reject",reason:m,details:p})}else if("lost-found"===l.type){const t=l.content;await Li.updateAlertStatus(t.id,"archived",e.id)}else"live-stream"===l.type&&Se.info("Live stream rejection noted for review");Se.success("Content rejected"),await x(),c(null),g(""),h("")}catch(e){ro.error("Failed to reject content",e instanceof Error?e:new Error(String(e))),Se.error("Failed to reject content")}finally{u(!1)}})().catch(e=>{const t=e instanceof Error?e:new Error(String(e));ro.error("Failed to reject from button",t)})},disabled:d||!p,variant:"destructive",children:[a.jsx(je,{size:16,className:"mr-2"}),"Reject"]})]})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));function no({label:e,value:t}){return a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:e}),a.jsx("p",{className:"text-sm font-medium capitalize",children:t})]})}const oo=Object.freeze(Object.defineProperty({__proto__:null,default:function(){var e;const[t]=Gs("all-pets",[]),[r,i]=s.useState(""),[n,o]=s.useState(null),[l,c]=s.useState(!1),[d,u]=s.useState("all"),m=(t??[]).filter(e=>{var t,s;return(null==(t=e.name)?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null==(s=e.breed)?void 0:s.toLowerCase().includes(r.toLowerCase()))});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Content Moderation"}),a.jsx("p",{className:"text-muted-foreground",children:"Review and moderate pet profiles and photos"})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),a.jsx(di,{placeholder:"Search pets by name or breed...",value:r,onChange:e=>i(e.target.value),className:"pl-10"})]})}),a.jsx(xi,{value:d,onValueChange:e=>u(e),children:a.jsxs(fi,{children:[a.jsxs(vi,{value:"all",children:["All (",(t??[]).length,")"]}),a.jsxs(vi,{value:"active",children:["Active (",(t??[]).length,")"]}),a.jsx(vi,{value:"flagged",children:"Flagged (0)"})]})}),a.jsx(mi,{className:"h-[600px]",children:a.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:m.map((e,t)=>{var s;return a.jsxs(Kr,{className:"overflow-hidden transition-shadow animate-in fade-in slide-in-from-bottom-4 duration-300 hover:shadow-lg",style:{animationDelay:50*t+"ms"},children:[a.jsxs("div",{className:"aspect-square relative bg-muted",children:[e.photo?a.jsx("img",{src:e.photo,alt:e.name,className:"h-full w-full object-cover"}):a.jsx("div",{className:"flex h-full w-full items-center justify-center",children:a.jsx(oe,{size:48,className:"text-muted-foreground"})}),a.jsx(Yr,{className:"absolute right-2 top-2",variant:"secondary",children:"Active"})]}),a.jsxs(Hr,{className:"p-4",children:[a.jsx("h3",{className:"truncate font-semibold",children:e.name}),a.jsxs("p",{className:"truncate text-sm text-muted-foreground",children:[e.breed,"  ",(null==(s=e.age)?void 0:s.toString())??"N/A"]}),a.jsxs("p",{className:"mt-2 text-xs text-muted-foreground",children:["Owner: ",e.ownerName]}),a.jsxs(Ks,{size:"sm",variant:"outline",className:"mt-3 w-full",onClick:()=>(e=>{o(e),c(!0)})(e),children:[a.jsx(le,{size:16,className:"mr-2"}),"Review"]})]})]},e.id)})})}),0===m.length&&a.jsx(Kr,{className:"p-12",children:a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx(oe,{size:48,className:"mx-auto text-muted-foreground"}),a.jsx("h3",{className:"text-lg font-semibold",children:"No content found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Try adjusting your search query":"No content to display"})]})}),a.jsx(Rr,{open:l,onOpenChange:c,children:a.jsxs(Dr,{className:"max-w-2xl",children:[a.jsxs(Lr,{children:[a.jsx(Ur,{children:"Review Pet Profile"}),a.jsx(zr,{children:"Review pet profile details and take moderation action"})]}),n&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"aspect-video relative bg-muted rounded-lg overflow-hidden",children:n.photo?a.jsx("img",{src:n.photo,alt:n.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(oe,{size:64,className:"text-muted-foreground"})})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(no,{label:"Name",value:n.name}),a.jsx(no,{label:"Breed",value:n.breed}),a.jsx(no,{label:"Age",value:(null==(e=n.age)?void 0:e.toString())??"N/A"}),a.jsx(no,{label:"Size",value:n.size}),a.jsx(no,{label:"Gender",value:n.gender}),a.jsx(no,{label:"Owner",value:n.ownerName})]}),n.bio&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium mb-1",children:"Bio:"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n.bio})]}),n.personality&&Array.isArray(n.personality)&&n.personality.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Personality Traits:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:n.personality.map(e=>a.jsx(Yr,{variant:"secondary",children:e},e))})]})]}),a.jsxs(Or,{children:[a.jsx(Ks,{variant:"outline",onClick:()=>c(!1),children:"Close"}),a.jsxs(Ks,{variant:"destructive",onClick:()=>{Se.success("Pet profile removed"),c(!1)},children:[a.jsx(je,{size:16,className:"mr-2"}),"Remove Profile"]}),a.jsxs(Ks,{onClick:()=>{Se.success("Pet profile approved"),c(!1)},children:[a.jsx(ye,{size:16,className:"mr-2"}),"Approve"]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),lo=_t("PetProfileGenerator");function co(){const[e,t]=s.useState(!1),[r,i]=s.useState(0),[n,o]=Gs("all-pets",[]);return a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsxs(Gr,{className:"flex items-center gap-2",children:[a.jsx(Ve,{size:24,weight:"fill",className:"text-primary"}),"AI Pet Profile Generator"]}),a.jsx(Wr,{children:"Use AI to generate 15 diverse, realistic pet profiles with photos, personalities, and interests"})]}),a.jsxs(Hr,{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsx(Ks,{onClick:async()=>{t(!0),i(0);try{Se.info("AI is generating 15 diverse pet profiles...");const e=Sr`Generate exactly 15 diverse and realistic pet profiles for a pet matching platform. Create a mix of dogs and cats with varied breeds, ages, personalities, and interests.

Each pet should have:
- Unique and realistic pet names
- Realistic breed names (like Golden Retriever, Maine Coon, Border Collie, Persian, Siamese, Labrador, etc.)
- Ages between 1-12 years
- Mix of male and female
- Various sizes (small, medium, large, extra-large)
- Engaging bio that captures personality (2-3 sentences)
- 3-5 personality traits from: Playful, Calm, Energetic, Gentle, Social, Independent, Affectionate, Curious, Protective, Loyal, Friendly, Quiet
- 3-5 interests from: Fetch, Swimming, Hiking, Running, Cuddling, Treats, Toys, Parks, Beach, Car Rides, Napping, Exploring
- 1-3 looking for from: Playdate, Walking Buddy, Best Friend, Training Partner, Cuddle Companion, Adventure Buddy
- Realistic location (US cities like "San Francisco, CA", "Austin, TX", "New York, NY", etc.)
- Different owner names (realistic first + last names)

Use high quality Unsplash pet photos. Use real Unsplash photo IDs for dogs and cats in this format: https://images.unsplash.com/photo-[ID]?w=800&q=80

Examples of real Unsplash photo IDs for pets:
- Dogs: 1587300408141-39e3f2d86e3f, 1561037404-61cd46aa615b, 1601758228041-f3b2795255f1, 1583511655857-d19b40a7a54e, 1558788353-f76d92427f16, 1537151608828-57f8d847fa8e, 1552053831-71594a27632d, 1548199973-03cce0bbc87b
- Cats: 1514888286974-6c03e2ca1dba, 1573865526739-10c1de0fa0d5, 1529257414772-1f6d4621e8e3, 1574158622682-e40e69881006, 1543852786-1cf6624fb86e, 1513360371669-4adf3dd7dff8, 1495360010541-bf61d9913a84, 1519052537078-e6302a4968d4

Return the result as a valid JSON object with a single property called "pets" that contains the pet list. Return ONLY the JSON object, no other text.

JSON format:
{
  "pets": [
    {
      "name": "string",
      "breed": "string",
      "age": number,
      "gender": "male" | "female",
      "size": "small" | "medium" | "large" | "extra-large",
      "photo": "string (unsplash URL)",
      "bio": "string",
      "personality": ["string"],
      "interests": ["string"],
      "lookingFor": ["string"],
      "location": "string (City, State)",
      "ownerName": "string",
      "verified": boolean (randomly true/false)
    }
  ]
}`,t=await Ar.llm(e,"gpt-4o",!0),s=JSON.parse(t);if(!s.pets||!Array.isArray(s.pets))throw new Error("Invalid response format");i(s.pets.length);const a=new Set((n||[]).map(e=>e.id));let r=0;const l=s.pets.map(e=>{let t;do{t=`pet-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}while(a.has(t));return a.add(t),r++,{id:t,name:e.name,breed:e.breed,age:e.age,gender:e.gender,size:e.size,photoUrl:e.photo,photo:e.photo,bio:e.bio,personality:e.personality,interests:e.interests,lookingFor:e.lookingFor,location:e.location,ownerName:e.ownerName,verified:e.verified||!1,liked:!1,disliked:!1,createdAt:Date.now()}});o(e=>[...e||[],...l]),Se.success(`Successfully generated and added ${r} new pet profiles!`,{duration:5e3}),lo.info("Generated pets",{count:l.length,pets:l})}catch(e){const t=Cr(e),s=e instanceof Error?e:new Error(String(e));lo.error("Failed to generate pet profiles",s,{technicalMessage:t.technicalMessage,userMessage:t.userMessage,action:"generatePets"}),Se.error("Failed to generate pet profiles",{description:t.userMessage,duration:6e3})}finally{t(!1)}},disabled:e,className:"w-full sm:w-auto",children:e?a.jsxs(a.Fragment,{children:[a.jsx(Ve,{size:20,weight:"fill",className:"mr-2 animate-spin"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ve,{size:20,weight:"fill",className:"mr-2"}),"Generate 15 Pets"]})})}),r>0&&a.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg flex items-start gap-3",children:[a.jsx(Te,{size:20,weight:"bold",className:"text-green-600 dark:text-green-400 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-green-900 dark:text-green-100",children:["Successfully Generated ",r," Pets"]}),a.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:"New pet profiles have been added to the discovery pool"})]})]}),a.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg flex items-start gap-3",children:[a.jsx(Ee,{size:20,weight:"fill",className:"text-blue-600 dark:text-blue-400 shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-100",children:[a.jsx("p",{className:"font-semibold mb-1",children:"How it works:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-700 dark:text-blue-300",children:[a.jsx("li",{children:"AI generates unique pet profiles with realistic details"}),a.jsx("li",{children:"Each pet has a photo from Unsplash's pet collection"}),a.jsx("li",{children:"Personalities, interests, and bios are diverse and engaging"}),a.jsx("li",{children:"Profiles are automatically added to the discovery feed"})]})]})]})]})]})}function uo({icon:e,title:t,description:s,time:r,type:i}){return a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`p-2 rounded-lg bg-muted ${{info:"text-blue-600",success:"text-green-600",warning:"text-orange-600",error:"text-red-600"}[i]}`,children:a.jsx(e,{size:16,weight:"fill"})}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:t}),a.jsx("p",{className:"text-sm text-muted-foreground",children:s}),a.jsx("p",{className:"text-xs text-muted-foreground",children:r})]})]})}function mo({service:e,status:t,uptime:s}){return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full "+("operational"===t?"bg-green-600":"bg-red-600")}),a.jsx("span",{className:"text-sm font-medium",children:e})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Yr,{variant:"secondary",className:"text-xs",children:s}),a.jsx(Yr,{variant:"operational"===t?"default":"destructive",children:t})]})]})}const ho=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=s.useState({totalUsers:0,activeUsers:0,totalPets:0,totalMatches:0,totalMessages:0,pendingReports:0,pendingVerifications:0,resolvedReports:0}),[r]=Gs("all-pets",[]),[i]=Gs("user-matches",[]),[n]=Gs("admin-reports",[]),[o]=Gs("admin-verifications",[]),l=_t("DashboardView");s.useEffect(()=>{(async()=>{try{const e=await kn.getSystemStats(),s={totalUsers:new Set(r.map(e=>e.ownerId??e.ownerName)).size,activeUsers:Math.floor(.7*new Set(r.map(e=>e.ownerId??e.ownerName)).size),totalPets:r.length,totalMatches:i.length,totalMessages:e.totalMessages,pendingReports:n.filter(e=>"pending"===e.status).length,pendingVerifications:o.filter(e=>"pending"===e.status).length,resolvedReports:n.filter(e=>"resolved"===e.status).length};t({...s,...e,totalMessages:e.totalMessages??s.totalMessages})}catch(e){const s=e instanceof Error?e:new Error(String(e));l.warn("Failed to load system stats from API, falling back to local calculations",s);const a=new Set(r.map(e=>e.ownerId??e.ownerName));t({totalUsers:a.size,activeUsers:Math.floor(.7*a.size),totalPets:r.length,totalMatches:i.length,totalMessages:0,pendingReports:n.filter(e=>"pending"===e.status).length,pendingVerifications:o.filter(e=>"pending"===e.status).length,resolvedReports:n.filter(e=>"resolved"===e.status).length})}})().catch(e=>{const t=e instanceof Error?e:new Error(String(e));l.error("Failed to load stats in useEffect",t)})},[r,i,n,o,l]);const c=[{title:"Total Users",value:e.totalUsers,change:"+12%",trend:"up",icon:ae,color:"text-primary"},{title:"Active Users",value:e.activeUsers,change:"+8%",trend:"up",icon:ye,color:"text-green-600"},{title:"Total Pets",value:e.totalPets,change:"+15%",trend:"up",icon:ie,color:"text-accent"},{title:"Total Matches",value:e.totalMatches,change:"+20%",trend:"up",icon:ie,color:"text-pink-600"},{title:"Total Messages",value:e.totalMessages,change:"+25%",trend:"up",icon:ce,color:"text-blue-600"},{title:"Pending Reports",value:e.pendingReports,change:e.pendingReports>0?"Needs attention":"All clear",trend:e.pendingReports>0?"down":"up",icon:se,color:e.pendingReports>0?"text-red-600":"text-green-600"},{title:"Pending Verifications",value:e.pendingVerifications,change:e.pendingVerifications>0?"Needs review":"All clear",trend:"neutral",icon:ve,color:"text-orange-600"},{title:"Resolved Reports",value:e.resolvedReports,change:"+10%",trend:"up",icon:ye,color:"text-green-600"}];return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"System overview and key metrics"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map(e=>{const t=e.icon,s="up"===e.trend?Ye:"down"===e.trend?Ke:ve;return a.jsx(hs,{children:a.jsxs(Kr,{children:[a.jsxs(qr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Gr,{className:"text-sm font-medium",children:e.title}),a.jsx(t,{className:e.color,size:20})]}),a.jsxs(Hr,{children:[a.jsx("div",{className:"text-2xl font-bold",children:e.value}),a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(s,{size:14,className:e.color}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.change})]})]})]})},e.title)})}),a.jsx("div",{className:"mb-6",children:a.jsx(co,{})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"Recent Activity"}),a.jsx(Wr,{children:"Latest system events"})]}),a.jsx(Hr,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(uo,{icon:ae,title:"New user registered",description:"John D. joined the platform",time:"2 minutes ago",type:"info"}),a.jsx(uo,{icon:ie,title:"New match created",description:"Max and Luna matched",time:"5 minutes ago",type:"success"}),a.jsx(uo,{icon:se,title:"New report submitted",description:"Content reported by user",time:"10 minutes ago",type:"warning"}),a.jsx(uo,{icon:ye,title:"Verification approved",description:"Photo verification completed",time:"15 minutes ago",type:"success"})]})})]}),a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"System Health"}),a.jsx(Wr,{children:"Service status and uptime"})]}),a.jsx(Hr,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(mo,{service:"API Server",status:"operational",uptime:"99.9%"}),a.jsx(mo,{service:"Realtime Gateway",status:"operational",uptime:"99.8%"}),a.jsx(mo,{service:"Media Service",status:"operational",uptime:"99.7%"}),a.jsx(mo,{service:"Database",status:"operational",uptime:"100%"})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"}));const po=Object.freeze(Object.defineProperty({__proto__:null,KYCManagement:function(){const[e,t]=s.useState([]),[r,i]=s.useState("pending"),[n,o]=s.useState(null),[l,c]=s.useState(!1),[d,u]=s.useState("blurry_document"),[m,h]=s.useState("");s.useEffect(()=>{p()},[]);const p=async()=>{try{const e=await mn.getAllKYCSubmissions();t(e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()))}catch{Se.error("Failed to load KYC sessions")}},g=e.filter(e=>"all"===r||e.status===r),x=e=>{switch(e){case"verified":return"text-green-500 bg-green-500/10";case"rejected":return"text-red-500 bg-red-500/10";case"pending":return"text-orange-500 bg-orange-500/10";case"expired":default:return"text-gray-500 bg-gray-500/10";case"not_started":return"text-blue-500 bg-blue-500/10"}},f=e=>{switch(e){case"verified":return a.jsx(ye,{size:16,weight:"fill"});case"rejected":return a.jsx(je,{size:16,weight:"fill"});case"pending":return a.jsx(ve,{size:16});case"expired":return a.jsx(Ee,{size:16});default:return a.jsx(Q,{size:16})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"KYC Verification Management"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Review and verify user identity documents"})]}),a.jsxs(Ks,{onClick:p,variant:"outline",children:[a.jsx(ve,{size:16,className:"mr-2"}),"Refresh"]})]}),a.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[a.jsxs(Kr,{className:"p-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Sessions"}),a.jsx("div",{className:"text-2xl font-bold mt-1",children:e.length})]}),a.jsxs(Kr,{className:"p-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"}),a.jsx("div",{className:"text-2xl font-bold mt-1 text-orange-500",children:e.filter(e=>"pending"===e.status).length})]}),a.jsxs(Kr,{className:"p-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Verified"}),a.jsx("div",{className:"text-2xl font-bold mt-1 text-green-500",children:e.filter(e=>"verified"===e.status).length})]}),a.jsxs(Kr,{className:"p-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Rejected"}),a.jsx("div",{className:"text-2xl font-bold mt-1 text-red-500",children:e.filter(e=>"rejected"===e.status).length})]}),a.jsxs(Kr,{className:"p-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Pass Rate"}),a.jsxs("div",{className:"text-2xl font-bold mt-1",children:[e.length>0?Math.round(e.filter(e=>"verified"===e.status).length/e.length*100):0,"%"]})]})]}),a.jsxs(xi,{value:r,onValueChange:e=>i(e),className:"w-full",children:[a.jsxs(fi,{className:"w-full grid grid-cols-6",children:[a.jsx(vi,{value:"all",children:"All"}),a.jsx(vi,{value:"not_started",children:"Not Started"}),a.jsx(vi,{value:"pending",children:"Pending"}),a.jsx(vi,{value:"verified",children:"Verified"}),a.jsx(vi,{value:"rejected",children:"Rejected"}),a.jsx(vi,{value:"expired",children:"Expired"})]}),a.jsx(yi,{value:r,className:"mt-4",children:a.jsx(mi,{className:"h-[600px]",children:a.jsx("div",{className:"space-y-4",children:0===g.length?a.jsxs(hs,{className:"text-center py-12",children:[a.jsx(Q,{size:48,className:"mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No sessions in this category"})]}):g.map(e=>{var t;return a.jsx(hs,{layout:!0,children:a.jsx(Kr,{className:"p-4 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>(e=>{o(e)})(e),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs(Yr,{className:x(e.status),children:[f(e.status),a.jsx("span",{className:"ml-1",children:e.status})]}),a.jsx(Yr,{variant:"outline",children:e.provider}),e.retryCount>0&&a.jsxs(Yr,{variant:"outline",className:"text-orange-500",children:["Retry #",e.retryCount]})]}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(qe,{size:14}),a.jsxs("span",{children:["User ID: ",e.userId.substring(0,16),"..."]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(ue,{size:14}),a.jsxs("span",{children:["Documents: ",(null==(t=e.documents)?void 0:t.length)??0]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(we,{size:14}),a.jsxs("span",{children:["Created: ",new Date(e.createdAt).toLocaleString()]})]}),e.verifiedAt&&a.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[a.jsx(ye,{size:14}),a.jsxs("span",{children:["Verified: ",new Date(e.verifiedAt).toLocaleString()]})]}),e.rejectedAt&&a.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[a.jsx(je,{size:14}),a.jsxs("span",{children:["Rejected: ",new Date(e.rejectedAt).toLocaleString()]})]})]})]}),a.jsx(Ge,{size:20,className:"text-muted-foreground shrink-0"})]})})},e.id)})})})})]}),a.jsx(Rr,{open:null!==n,onOpenChange:()=>{o(null),h("")},children:a.jsxs(Dr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(Lr,{children:a.jsx(Ur,{children:"KYC Session Details"})}),n&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Kr,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Session Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Status:"}),a.jsx(Yr,{className:x(n.status),children:n.status})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Provider:"}),a.jsx("span",{className:"font-medium",children:n.provider})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Created:"}),a.jsx("span",{children:new Date(n.createdAt).toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),a.jsx("span",{children:n.updatedAt?new Date(n.updatedAt).toLocaleString():"N/A"})]}),n.expiresAt&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Expires:"}),a.jsx("span",{children:new Date(n.expiresAt).toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Retry Count:"}),a.jsx("span",{children:n.retryCount})]})]})]}),n.documents&&n.documents.length>0&&a.jsxs(Kr,{className:"p-4",children:[a.jsxs("h3",{className:"font-semibold mb-3",children:["Documents (",n.documents.length,")"]}),a.jsx("div",{className:"space-y-2",children:n.documents.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm",children:e.type.replace("_"," ")}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Status: ",e.status]})]}),a.jsx(Yr,{variant:"verified"===e.status?"default":"outline",children:"verified"===e.status?"Verified":"Pending"})]},t))})]}),n.livenessCheck&&a.jsxs(Kr,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Liveness Check"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Passed:"}),a.jsx(Yr,{variant:n.livenessCheck.passed?"default":"destructive",children:n.livenessCheck.passed?"Yes":"No"})]}),void 0!==n.livenessCheck.score&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Score:"}),a.jsxs("span",{children:[(100*n.livenessCheck.score).toFixed(0),"%"]})]}),n.livenessCheck.images&&n.livenessCheck.images.length>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Images:"}),a.jsx("span",{children:n.livenessCheck.images.length})]})]})]}),n.rejectionReason&&a.jsxs(Kr,{className:"p-4 border-destructive",children:[a.jsx("h3",{className:"font-semibold mb-2 text-destructive",children:"Rejection Reason"}),a.jsxs("p",{className:"text-sm",children:[a.jsxs("strong",{children:[n.rejectionReason.replace("_"," "),":"]})," ",n.rejectReasonText??"No additional details provided"]})]}),"pending"===n.status&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Rejection Reason (if rejecting)"}),a.jsxs(Xi,{value:d,onValueChange:e=>u(e),children:[a.jsx(Zi,{children:a.jsx(Ji,{})}),a.jsxs(en,{children:[a.jsx(tn,{value:"blurry_document",children:"Blurry Document"}),a.jsx(tn,{value:"expired_document",children:"Expired Document"}),a.jsx(tn,{value:"invalid_document",children:"Invalid Document"}),a.jsx(tn,{value:"mismatched_information",children:"Mismatched Information"}),a.jsx(tn,{value:"fraudulent_document",children:"Fraudulent Document"}),a.jsx(tn,{value:"poor_quality",children:"Poor Quality"}),a.jsx(tn,{value:"missing_information",children:"Missing Information"}),a.jsx(tn,{value:"other",children:"Other"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Detailed Explanation"}),a.jsx(ji,{value:m,onChange:e=>h(e.target.value),placeholder:"Provide specific feedback for the user...",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(Ks,{onClick:async()=>{if(n){c(!0);try{const{userService:e}=await Pt(async()=>{const{userService:e}=await Promise.resolve().then(()=>Tr);return{userService:e}},void 0),t=await e.user();if(!t)throw new Error("Not authenticated");await mn.manualKYCReview({submissionId:n.id,decision:"verified",actorUserId:t.id}),Se.success("KYC session verified!"),await p(),o(null)}catch{Se.error("Failed to verify session")}finally{c(!1)}}},disabled:l,className:"bg-green-600 hover:bg-green-700",children:[a.jsx(ye,{size:16,className:"mr-2"}),"Verify & Approve"]}),a.jsxs(Ks,{onClick:async()=>{if(n&&m){c(!0);try{const{userService:e}=await Pt(async()=>{const{userService:e}=await Promise.resolve().then(()=>Tr);return{userService:e}},void 0),t=await e.user();if(!t)throw new Error("Not authenticated");await mn.manualKYCReview({submissionId:n.id,decision:"rejected",actorUserId:t.id,reason:m}),Se.success("KYC session rejected"),await p(),o(null),h(""),u("blurry_document")}catch{Se.error("Failed to reject session")}finally{c(!1)}}},disabled:l||!m,variant:"destructive",children:[a.jsx(je,{size:16,className:"mr-2"}),"Reject"]})]})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),go=_t("StreamingService");function xo(e){let t="idle";return"live"===e.status?t="live":"ended"===e.status||"cancelled"===e.status?t="ended":"scheduled"===e.status&&(t="connecting"),{id:e.id,hostId:e.hostId,hostName:e.hostName,...e.hostAvatar?{hostAvatar:e.hostAvatar}:{},title:e.title,...e.description?{description:e.description}:{},category:e.category,status:t,allowChat:e.allowChat,maxDuration:e.maxDuration??60,startedAt:e.startedAt??e.createdAt,...e.endedAt?{endedAt:e.endedAt}:{},viewerCount:e.viewerCount,peakViewerCount:e.peakViewerCount,totalViews:e.viewerCount,likesCount:e.reactionsCount??0,roomToken:e.roomId,...e.vodUrl&&{recordingUrl:e.vodUrl},...e.posterUrl??e.thumbnail?{thumbnailUrl:e.posterUrl??e.thumbnail}:{},tags:[]}}function fo(e){return{id:e.id,streamId:e.streamId,userId:e.userId,userName:e.userName,...e.userAvatar?{userAvatar:e.userAvatar}:{},message:e.text,timestamp:e.createdAt,type:"message"}}const vo=new class{async createStream(e,t,s,a){try{const r=await ao.queryActiveStreams({hostId:e});if(r.streams.find(e=>"live"===e.status))throw new Error("You already have an active stream");const i={title:s.title,category:s.category,...void 0!==s.description&&{description:s.description},allowChat:s.allowChat,...void 0!==s.maxDuration&&{maxDuration:s.maxDuration}};return xo((await ao.createRoom({...i,hostId:e,hostName:t,...a?{hostAvatar:a}:{}})).stream)}catch(r){const t=r instanceof Error?r:new Error(String(r));throw go.error("Failed to create stream",t,{hostId:e}),t}}async getStreamById(e){try{const t=await ao.getStreamById(e);return t?xo(t):void 0}catch(t){const s=t instanceof Error?t:new Error(String(t));throw go.error("Failed to get stream by ID",s,{streamId:e}),s}}async getActiveStreams(e){try{const t=e?{category:[e]}:void 0;return(await ao.queryActiveStreams(t)).streams.map(xo)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw go.error("Failed to get active streams",s,{category:e}),s}}async getUserStreams(e){try{return(await ao.queryActiveStreams({hostId:e})).streams.map(xo).sort((e,t)=>new Date(t.startedAt).getTime()-new Date(e.startedAt).getTime())}catch(t){const s=t instanceof Error?t:new Error(String(t));throw go.error("Failed to get user streams",s,{userId:e}),s}}async updateStreamStatus(e,t){try{let s="live";"ended"===t?s="ended":"idle"!==t&&"ending"!==t||(s="cancelled");const a=await ao.getStreamById(e);if(!a)throw new Error("Stream not found");"ended"===s&&await ao.endRoom(e,a.hostId)}catch(s){const a=s instanceof Error?s:new Error(String(s));throw go.error("Failed to update stream status",a,{streamId:e,status:t}),a}}async joinStream(e,t,s,a){try{await ao.joinStream(e,t,s,a)}catch(r){const s=r instanceof Error?r:new Error(String(r));throw go.error("Failed to join stream",s,{streamId:e,userId:t}),s}}async leaveStream(e,t){try{await ao.leaveStream(e,t)}catch(s){const a=s instanceof Error?s:new Error(String(s));throw go.error("Failed to leave stream",a,{streamId:e,userId:t}),a}}async sendChatMessage(e,t,s,a,r){try{return fo(await ao.sendChatMessage(e,t,s,r,a))}catch(i){const s=i instanceof Error?i:new Error(String(i));throw go.error("Failed to send chat message",s,{streamId:e,userId:t}),s}}async getChatHistory(e,t=100){try{return(await ao.queryChatMessages(e)).slice(-t).map(fo)}catch(s){const t=s instanceof Error?s:new Error(String(s));throw go.error("Failed to get chat history",t,{streamId:e}),t}}incrementLikes(e){throw go.warn("IncrementLikes is deprecated - use sendReaction instead",{streamId:e}),new Error('incrementLikes requires userId - use sendReaction(streamId, userId, "like") instead')}async endStream(e){try{const t=await ao.getStreamById(e);if(!t)throw new Error("Stream not found");await ao.endRoom(e,t.hostId)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw go.error("Failed to end stream",s,{streamId:e}),s}}async reportStream(e,t,s,a){try{await ga.post(la.STREAMING.REPORT_STREAM(e),{reporterId:t,reason:s,description:a}),go.info("Stream reported",{streamId:e,reporterId:t,reason:s})}catch(r){const s=r instanceof Error?r:new Error(String(r));throw go.error("Failed to report stream",s,{streamId:e,reporterId:t}),s}}async banUserFromStream(e,t){try{await ao.leaveStream(e,t)}catch(s){const a=s instanceof Error?s:new Error(String(s));throw go.error("Failed to ban user from stream",a,{streamId:e,userId:t}),a}}},yo=_t("LiveStreamManagement");const jo=Object.freeze(Object.defineProperty({__proto__:null,LiveStreamManagement:function(){const[e,t]=s.useState([]),[r,i]=s.useState(null),n=s.useCallback(async()=>{try{const e=(await ao.getAllStreams()).map(e=>{let t="idle";return"live"===e.status?t="live":"ended"===e.status||"cancelled"===e.status?t="ended":"scheduled"===e.status&&(t="connecting"),{id:e.id,hostId:e.hostId,hostName:e.hostName,hostAvatar:e.hostAvatar,title:e.title,description:e.description,category:e.category,status:t,allowChat:e.allowChat,maxDuration:e.maxDuration||60,startedAt:e.startedAt||e.createdAt,endedAt:e.endedAt,viewerCount:e.viewerCount,peakViewerCount:e.peakViewerCount,totalViews:e.viewerCount,likesCount:e.reactionsCount||0,roomToken:e.roomId,recordingUrl:e.vodUrl,thumbnailUrl:e.posterUrl||e.thumbnail,tags:[]}});t(e.sort((e,t)=>new Date(t.startedAt).getTime()-new Date(e.startedAt).getTime()))}catch(e){yo.error("Failed to load streams",e instanceof Error?e:new Error(String(e))),Se.error("Failed to load streams")}},[]);s.useEffect(()=>{n();const e=setInterval(()=>{n()},5e3);return()=>clearInterval(e)},[n]);const o=s.useCallback(async e=>{try{await vo.endStream(e),Se.success("Stream ended"),await n(),i(null)}catch(t){yo.error("Failed to end stream",t instanceof Error?t:new Error(String(t))),Se.error("Failed to end stream")}},[n]),l=e=>{switch(e){case"live":return"bg-red-500 animate-pulse";case"connecting":return"bg-yellow-500";case"ending":return"bg-orange-500";default:return"bg-gray-500"}},c=e.filter(e=>"live"===e.status||"connecting"===e.status);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold",children:"Live Stream Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor active streams and review stream history"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[a.jsx(Kr,{children:a.jsx(Hr,{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-red-500",children:c.length}),a.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Live Now"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold",children:e.length}),a.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Total Streams"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold",children:e.reduce((e,t)=>e+t.totalViews,0)}),a.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Total Views"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold",children:Math.max(...e.map(e=>e.peakViewerCount),0)}),a.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Peak Viewers"})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(Kr,{className:"lg:col-span-1",children:[a.jsxs(qr,{children:[a.jsxs(Gr,{children:["Streams (",e.length,")"]}),a.jsx(Wr,{children:"Click to view details"})]}),a.jsx(Hr,{children:a.jsx(mi,{className:"h-[600px]",children:a.jsx("div",{className:"space-y-3",children:e.map(e=>a.jsx("button",{onClick:()=>i(e),className:"w-full text-left p-4 rounded-lg border-2 transition-all "+((null==r?void 0:r.id)===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs(Xr,{className:"w-12 h-12",children:[a.jsx(Jr,{src:e.hostAvatar}),a.jsx(Zr,{children:e.hostName[0]})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${l(e.status)}`}),a.jsx(Yr,{variant:"outline",className:"text-xs",children:e.status})]}),a.jsx("h4",{className:"font-semibold line-clamp-1",children:e.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.hostName}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(le,{size:12}),e.viewerCount]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ie,{size:12}),e.likesCount]})]})]})]})},e.id))})})})]}),a.jsxs(Kr,{className:"lg:col-span-2",children:[a.jsx(qr,{children:a.jsx(Gr,{children:"Stream Details"})}),a.jsx(Hr,{children:r?a.jsx(mi,{className:"h-[600px] pr-4",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs(Xr,{className:"w-16 h-16",children:[a.jsx(Jr,{src:r.hostAvatar}),a.jsx(Zr,{children:r.hostName[0]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:r.title}),a.jsx("p",{className:"text-muted-foreground",children:r.hostName})]})]}),a.jsx(Yr,{variant:"live"===r.status?"destructive":"secondary",className:"live"===r.status?"animate-pulse":"",children:r.status.toUpperCase()})]}),r.description&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Description"}),a.jsx("p",{className:"text-sm",children:r.description})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),a.jsx("p",{className:"font-medium capitalize",children:r.category.replace("_"," ")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Started"}),a.jsx("p",{className:"font-medium",children:new Date(r.startedAt).toLocaleString()})]})]}),r.endedAt&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ended"}),a.jsx("p",{className:"font-medium",children:new Date(r.endedAt).toLocaleString()})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(le,{size:18,className:"text-muted-foreground"})}),a.jsx("div",{className:"text-2xl font-bold",children:r.viewerCount}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Current Viewers"})]})}),a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(le,{size:18,className:"text-muted-foreground"})}),a.jsx("div",{className:"text-2xl font-bold",children:r.peakViewerCount}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Peak Viewers"})]})}),a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(le,{size:18,className:"text-muted-foreground"})}),a.jsx("div",{className:"text-2xl font-bold",children:r.totalViews}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Views"})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(ie,{size:18,className:"text-red-500"})}),a.jsx("div",{className:"text-2xl font-bold",children:r.likesCount}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Likes/Reactions"})]})}),a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(ce,{size:18,className:"text-muted-foreground"})}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Chat: ",r.allowChat?"Enabled":"Disabled"]})]})})]}),r.tags.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(e=>a.jsx(Yr,{variant:"outline",children:e},e))})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Max Duration"}),a.jsxs("p",{className:"font-medium",children:[Math.floor(r.maxDuration/60)," minutes"]})]}),("live"===r.status||"connecting"===r.status)&&a.jsx("div",{className:"border-t pt-4",children:a.jsxs(Ks,{onClick:()=>o(r.id),variant:"destructive",className:"w-full",children:[a.jsx(X,{size:18,className:"mr-2"}),"Force End Stream"]})})]})}):a.jsxs("div",{className:"text-center py-24",children:[a.jsx(Oe,{size:48,className:"mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Select a stream to view details"})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"})),wo=_t("LostFoundService");const bo=new class{async createAlert(e,t,s){try{return await Li.createAlert({...t,ownerId:e,ownerName:s})}catch(a){const t=a instanceof Error?a:new Error(String(a));throw wo.error("Failed to create alert",t,{userId:e}),t}}async getAlertById(e){try{return await Li.getAlertById(e)||void 0}catch(t){const s=t instanceof Error?t:new Error(String(t));throw wo.error("Failed to get alert by ID",s,{id:e}),s}}async getActiveAlerts(e){try{return(await Li.queryAlerts(e)).alerts}catch(t){const s=t instanceof Error?t:new Error(String(t));throw wo.error("Failed to get active alerts",s,{filters:e}),s}}async getUserAlerts(e){try{return await Li.getUserAlerts(e)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw wo.error("Failed to get user alerts",s,{userId:e}),s}}async updateAlertStatus(e,t){try{const s=await this.getAlertById(e);if(!s)throw new Error("Alert not found");await Li.updateAlertStatus(e,t,s.ownerId)}catch(s){const a=s instanceof Error?s:new Error(String(s));throw wo.error("Failed to update alert status",a,{alertId:e,status:t}),a}}async incrementViewCount(e){try{await Li.getAlertById(e)}catch(t){const s=t instanceof Error?t:new Error(String(t));wo.warn("Failed to increment view count",{error:s,alertId:e})}}async createSighting(e){try{return await Li.createSighting({...e,reporterId:e.reporterId||"",reporterName:e.reporterName||""})}catch(t){const s=t instanceof Error?t:new Error(String(t));throw wo.error("Failed to create sighting",s,{alertId:e.alertId}),s}}async getAlertSightings(e){try{return await Li.querySightings(e)}catch(t){const s=t instanceof Error?t:new Error(String(t));throw wo.error("Failed to get alert sightings",s,{alertId:e}),s}}async verifySighting(e,t){try{const{userService:s}=await Pt(async()=>{const{userService:e}=await Promise.resolve().then(()=>Tr);return{userService:e}},void 0),a=await s.user();if(!a)throw new Error("User not authenticated");await Li.verifySighting(e,t,a.id)}catch(s){const a=s instanceof Error?s:new Error(String(s));throw wo.error("Failed to verify sighting",a,{sightingId:e,verified:t}),a}}async getNearbyAlerts(e,t,s){try{return(await Li.queryAlerts({location:{lat:e,lon:t,radiusKm:s}})).alerts}catch(a){const r=a instanceof Error?a:new Error(String(a));throw wo.error("Failed to get nearby alerts",r,{lat:e,lon:t,radiusKm:s}),r}}};const No=Object.freeze(Object.defineProperty({__proto__:null,LostFoundManagement:function(){const[e,t]=s.useState([]),[r,i]=s.useState(null),n=s.useCallback(async()=>{try{const e=await Li.queryAlerts({limit:1e3});t(e.alerts.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()))}catch(e){const t=e instanceof Error?e:new Error(String(e));Mt.error("Failed to load alerts",t,{action:"loadAlerts"}),Se.error("Failed to load alerts")}},[]);s.useEffect(()=>{n()},[n]);const o=s.useCallback(async e=>{try{await bo.updateAlertStatus(e,"archived"),Se.success("Alert archived"),await n(),i(null)}catch(t){const s=t instanceof Error?t:new Error(String(t));Mt.error("Failed to archive alert",s,{action:"archiveAlert",alertId:e}),Se.error("Failed to archive alert")}},[n]),l=e=>{switch(e){case"active":return"bg-green-500";case"found":return"bg-blue-500";default:return"bg-gray-500"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold",children:"Lost & Found Management"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor and manage lost pet alerts"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx(Kr,{children:a.jsx(Hr,{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold",children:e.filter(e=>"active"===e.status).length}),a.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Active Alerts"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600",children:e.filter(e=>"found"===e.status).length}),a.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Found"})]})})}),a.jsx(Kr,{children:a.jsx(Hr,{className:"p-6",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold",children:e.reduce((e,t)=>e+t.viewsCount,0)}),a.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Total Views"})]})})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(Kr,{className:"lg:col-span-1",children:[a.jsxs(qr,{children:[a.jsxs(Gr,{children:["All Alerts (",e.length,")"]}),a.jsx(Wr,{children:"Click to view details"})]}),a.jsx(Hr,{children:a.jsx(mi,{className:"h-[600px]",children:a.jsx("div",{className:"space-y-3",children:e.map(e=>a.jsx("button",{onClick:()=>i(e),className:"w-full text-left p-4 rounded-lg border-2 transition-all "+((null==r?void 0:r.id)===e.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:a.jsxs("div",{className:"flex items-start gap-3",children:[e.photos[0]&&a.jsx("img",{src:e.photos[0],alt:e.petSummary.name,className:"w-16 h-16 rounded-lg object-cover"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-semibold",children:e.petSummary.name}),a.jsx("div",{className:`w-2 h-2 rounded-full ${l(e.status)}`})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.petSummary.species,"  ",e.petSummary.breed]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(e.lastSeen.whenISO).toLocaleDateString()}),a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(le,{size:12,className:"text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:e.viewsCount})]})]})]})},e.id))})})})]}),a.jsxs(Kr,{className:"lg:col-span-2",children:[a.jsx(qr,{children:a.jsx(Gr,{children:"Alert Details"})}),a.jsx(Hr,{children:r?a.jsx(mi,{className:"h-[600px] pr-4",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-2xl font-bold",children:r.petSummary.name}),a.jsx(Yr,{variant:"active"===r.status?"default":"found"===r.status?"secondary":"outline",children:r.status})]}),r.photos.length>0&&a.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.photos.map((e,t)=>a.jsx("img",{src:e,alt:`${r.petSummary.name} ${t+1}`,className:"w-full aspect-square object-cover rounded-lg"},t))}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Species"}),a.jsx("p",{className:"font-medium capitalize",children:r.petSummary.species})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Breed"}),a.jsx("p",{className:"font-medium",children:r.petSummary.breed||"Mixed"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Color"}),a.jsx("p",{className:"font-medium",children:r.petSummary.color||"Unknown"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Size"}),a.jsx("p",{className:"font-medium capitalize",children:r.petSummary.size||"Unknown"})]})]}),r.petSummary.distinctiveFeatures&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Distinctive Features"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.petSummary.distinctiveFeatures.map((e,t)=>a.jsx(Yr,{variant:"outline",children:e},t))})]}),r.petSummary.microchipId&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Microchip ID"}),a.jsx("p",{className:"font-mono",children:r.petSummary.microchipId})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[a.jsx(pe,{size:18,className:"text-primary"}),"Last Seen"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"When"}),a.jsx("p",{className:"font-medium",children:new Date(r.lastSeen.whenISO).toLocaleString()})]}),r.lastSeen.description&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Location Description"}),a.jsx("p",{className:"text-sm",children:r.lastSeen.description})]}),r.lastSeen.landmarks&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Nearby Landmarks"}),a.jsx("p",{className:"text-sm",children:r.lastSeen.landmarks})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Search Radius"}),a.jsxs("p",{className:"font-medium",children:[(r.lastSeen.radiusM/1e3).toFixed(1)," km"]})]}),r.lastSeen.lat&&r.lastSeen.lon&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Coordinates"}),a.jsxs("p",{className:"font-mono text-xs",children:[r.lastSeen.lat.toFixed(6),","," ",r.lastSeen.lon.toFixed(6)]})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Contact (Masked)"}),a.jsx("p",{className:"font-medium",children:r.contactMask})]}),r.reward&&r.reward>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Reward"}),a.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[r.rewardCurrency," ",r.reward]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Views"}),a.jsx("p",{className:"font-medium",children:r.viewsCount})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications Sent"}),a.jsx("p",{className:"font-medium",children:r.notificationsSent})]})]}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs(Ks,{onClick:()=>o(r.id),variant:"outline",disabled:"archived"===r.status,className:"w-full",children:[a.jsx(je,{size:18,className:"mr-2"}),"Archive Alert"]})})]})}):a.jsxs("div",{className:"text-center py-24",children:[a.jsx(Ee,{size:48,className:"mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Select an alert to view details"})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"})),So=_t("MapConfigAPI");const Eo=_t("MapSettingsView"),ko={PRIVACY_GRID_METERS:1e3,DEFAULT_RADIUS_KM:10,MAX_RADIUS_KM:100,MIN_RADIUS_KM:1,UNITS:"metric",COUNTRY_BIAS:"US",ENABLE_PRECISE_LOCATION:!0,PRECISE_LOCATION_TIMEOUT_MINUTES:60,ENABLE_GEOFENCING:!0,ENABLE_LOST_PET_ALERTS:!0,ENABLE_PLAYDATE_PLANNING:!0,ENABLE_PLACE_DISCOVERY:!0,AUTO_CENTER_ON_LOCATION:!0,SHOW_DISTANCE_LABELS:!0,CLUSTER_MARKERS:!0,MAX_MARKERS_VISIBLE:50},Io={categories:[{id:"park",name:"Parks",icon:"",color:"#22c55e"},{id:"vet",name:"Veterinarians",icon:"",color:"#3b82f6"},{id:"groomer",name:"Groomers",icon:"",color:"#a855f7"},{id:"cafe",name:"Pet Cafes",icon:"",color:"#f59e0b"},{id:"store",name:"Pet Stores",icon:"",color:"#ec4899"},{id:"hotel",name:"Pet Hotels",icon:"",color:"#14b8a6"},{id:"beach",name:"Dog Beaches",icon:"",color:"#06b6d4"},{id:"training",name:"Training Centers",icon:"",color:"#8b5cf6"}],defaultCategory:"park",enableUserSubmittedPlaces:!0,requireModeration:!0};function Ao({label:e,description:t,checked:s,onCheckedChange:r}){return a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsx(ui,{className:"text-base",children:e}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),a.jsx(gi,{checked:s,onCheckedChange:r})]})}const Co=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{config:e,updateConfig:t,resetToDefaults:r}=function(){const[e,t]=Gs("admin-map-provider-config",ii()),s=e||ii(),a=ii();return{config:s,updateConfig:e=>{const a={...s,...e};t(a),li(a)},resetToDefaults:()=>{t(a),li(a)}}}(),[i,n]=s.useState(ko),[o,l]=s.useState(Io),[c,d]=s.useState(!0),[u,m]=s.useState(!1),[h,p]=s.useState(null),[g,x]=s.useState(!1),[f,v]=s.useState(!1),[y]=Gs("current-user",null),[j,w]=s.useState({id:"",name:"",icon:"",color:"#000000"}),b=s.useCallback(async()=>{d(!0);try{const e=await async function(){try{return(await ga.get("/admin/config/map")).data.config}catch(e){const t=e instanceof Error?e:new Error(String(e));throw So.error("Failed to get map config",t),t}}();e&&(n(e.settings),l(e.categorySettings))}catch(e){const t=e instanceof Error?e:new Error(String(e));Eo.error("Failed to load map config",t),Se.error("Failed to load map configuration")}finally{d(!1)}},[]);s.useEffect(()=>{b()},[b]);const N=s.useCallback(async()=>{if(y){m(!0);try{const t={settings:i,categorySettings:o,providerConfig:{provider:e.PROVIDER??"maplibre",apiKey:e.MAP_TILES_API_KEY,geocodingApiKey:e.GEOCODING_API_KEY,mapStyleUrl:e.MAP_STYLE_URL,geocodingEndpoint:e.GEOCODING_ENDPOINT}};await async function(e,t){try{return(await ga.put("/admin/config/map",{config:e,updatedBy:t})).data.config}catch(s){const e=s instanceof Error?s:new Error(String(s));throw So.error("Failed to update map config",e,{updatedBy:t}),e}}(t,y.id||"admin"),Se.success("Map configuration saved successfully")}catch(t){const e=t instanceof Error?t:new Error(String(t));Eo.error("Failed to save map config",e),Se.error("Failed to save map configuration")}finally{m(!1)}}else Se.error("User not authenticated")},[i,o,e,y]),S=(e,t)=>{void 0!==t&&(n(s=>({...s,[e]:t})),N().catch(t=>{const s=t instanceof Error?t:new Error(String(t));Eo.error("Failed to save map setting",s,{key:e})}))};return c?a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"text-muted-foreground",children:"Loading map configuration..."})}):a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"border-b border-border p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[a.jsx(pe,{className:"text-primary",size:32,weight:"duotone"}),"Map Configuration"]}),a.jsx("p",{className:"text-muted-foreground",children:"Configure map features, privacy settings, and place categories"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ks,{variant:"outline",onClick:()=>{n(ko),l(Io),N().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Eo.error("Failed to save after reset",t),Se.error("Failed to reset settings")}),Se.success("Settings reset to defaults")},children:"Reset to Defaults"}),a.jsxs(Ks,{onClick:()=>{(async()=>{if(y)try{v(!0),await N();const t={mapSettings:i,providerConfig:e,categorySettings:o};await An.broadcastConfig("map",t,y.id||"admin"),Se.success("Map settings saved and broadcasted successfully"),await kn.createAuditLog({adminId:y.id||"admin",action:"config_broadcast",targetType:"map_config",targetId:"map-settings",details:JSON.stringify({configType:"map"})})}catch(t){const e=t instanceof Error?t:new Error(String(t));Se.error("Failed to broadcast map settings"),Eo.error("Broadcast error",e,{configType:"map"})}finally{v(!1)}else Se.error("User not authenticated")})().catch(e=>{const t=e instanceof Error?e:new Error(String(e));_t("MapSettingsView").error("Failed to broadcast settings from button",t)})},disabled:f,children:[a.jsx(_e,{size:16,className:"mr-2"}),f?"Broadcasting...":"Broadcast Settings"]})]})]})}),a.jsx(mi,{className:"flex-1",children:a.jsxs("div",{className:"p-6 space-y-6 max-w-6xl",children:[a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"Privacy & Location Settings"}),a.jsx(Wr,{children:"Configure how location data is handled and displayed"})]}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{children:"Privacy Grid Size (meters)"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pi,{value:[(null==i?void 0:i.PRIVACY_GRID_METERS)??1e3],onValueChange:([e])=>{void 0!==e&&S("PRIVACY_GRID_METERS",e)},min:100,max:5e3,step:100,className:"flex-1"}),a.jsxs("span",{className:"w-20 text-right font-medium",children:[(null==i?void 0:i.PRIVACY_GRID_METERS)??1e3,"m"]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Approximate user locations are snapped to a grid of this size for privacy"})]}),a.jsx(ti,{}),a.jsx(Ao,{label:"Enable Precise Location",description:"Allow users to temporarily share their exact location",checked:(null==i?void 0:i.ENABLE_PRECISE_LOCATION)??!0,onCheckedChange:e=>S("ENABLE_PRECISE_LOCATION",e)}),a.jsx(ti,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{children:"Precise Location Timeout (minutes)"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pi,{value:[(null==i?void 0:i.PRECISE_LOCATION_TIMEOUT_MINUTES)??60],onValueChange:([e])=>{void 0!==e&&S("PRECISE_LOCATION_TIMEOUT_MINUTES",e)},min:5,max:240,step:5,className:"flex-1"}),a.jsxs("span",{className:"w-20 text-right font-medium",children:[(null==i?void 0:i.PRECISE_LOCATION_TIMEOUT_MINUTES)??60," min"]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"How long precise location sharing remains active before reverting to approximate"})]}),a.jsx(ti,{}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Default Radius (km)"}),a.jsx(di,{type:"number",min:1,max:100,value:(null==i?void 0:i.DEFAULT_RADIUS_KM)??10,onChange:e=>S("DEFAULT_RADIUS_KM",parseInt(e.target.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Max Radius (km)"}),a.jsx(di,{type:"number",min:1,max:500,value:(null==i?void 0:i.MAX_RADIUS_KM)??100,onChange:e=>S("MAX_RADIUS_KM",parseInt(e.target.value))})]})]}),a.jsx(ti,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Units"}),a.jsxs(Xi,{value:(null==i?void 0:i.UNITS)??"metric",onValueChange:e=>{if("metric"===e||"imperial"===e){S("UNITS",e)}},children:[a.jsx(Zi,{children:a.jsx(Ji,{})}),a.jsxs(en,{children:[a.jsx(tn,{value:"metric",children:"Metric (km, m)"}),a.jsx(tn,{value:"imperial",children:"Imperial (mi, ft)"})]})]})]}),a.jsx(ti,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Country Bias"}),a.jsx(di,{placeholder:"US, GB, DE, etc.",value:(null==i?void 0:i.COUNTRY_BIAS)??"US",onChange:e=>S("COUNTRY_BIAS",e.target.value.toUpperCase()),maxLength:2}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Two-letter country code for location search bias"})]})]})]}),a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"Map Features"}),a.jsx(Wr,{children:"Enable or disable map functionality"})]}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsx(Ao,{label:"Geofencing",description:"Enable location-based alerts and notifications",checked:(null==i?void 0:i.ENABLE_GEOFENCING)??!0,onCheckedChange:e=>S("ENABLE_GEOFENCING",e)}),a.jsx(ti,{}),a.jsx(Ao,{label:"Lost Pet Alerts",description:"Allow users to create and view lost pet alerts on the map",checked:(null==i?void 0:i.ENABLE_LOST_PET_ALERTS)??!0,onCheckedChange:e=>S("ENABLE_LOST_PET_ALERTS",e)}),a.jsx(ti,{}),a.jsx(Ao,{label:"Playdate Planning",description:"Enable playdate location suggestions and meeting points",checked:(null==i?void 0:i.ENABLE_PLAYDATE_PLANNING)??!0,onCheckedChange:e=>S("ENABLE_PLAYDATE_PLANNING",e)}),a.jsx(ti,{}),a.jsx(Ao,{label:"Place Discovery",description:"Show pet-friendly places and businesses on the map",checked:(null==i?void 0:i.ENABLE_PLACE_DISCOVERY)??!0,onCheckedChange:e=>S("ENABLE_PLACE_DISCOVERY",e)}),a.jsx(ti,{}),a.jsx(Ao,{label:"Auto Center on Location",description:"Automatically center the map on user's location when loaded",checked:(null==i?void 0:i.AUTO_CENTER_ON_LOCATION)??!0,onCheckedChange:e=>S("AUTO_CENTER_ON_LOCATION",e)}),a.jsx(ti,{}),a.jsx(Ao,{label:"Show Distance Labels",description:"Display distance information on map markers",checked:(null==i?void 0:i.SHOW_DISTANCE_LABELS)??!0,onCheckedChange:e=>S("SHOW_DISTANCE_LABELS",e)}),a.jsx(ti,{}),a.jsx(Ao,{label:"Cluster Markers",description:"Group nearby markers together to reduce clutter",checked:(null==i?void 0:i.CLUSTER_MARKERS)??!0,onCheckedChange:e=>S("CLUSTER_MARKERS",e)}),a.jsx(ti,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{children:"Max Visible Markers"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pi,{value:[(null==i?void 0:i.MAX_MARKERS_VISIBLE)??50],onValueChange:([e])=>{void 0!==e&&S("MAX_MARKERS_VISIBLE",e)},min:10,max:200,step:10,className:"flex-1"}),a.jsx("span",{className:"w-16 text-right font-medium",children:(null==i?void 0:i.MAX_MARKERS_VISIBLE)??50})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum number of markers to display at once"})]})]})]}),a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(Gr,{children:"Place Categories"}),a.jsx(Wr,{children:"Manage the types of places users can discover"})]}),a.jsxs(Ks,{onClick:()=>x(!0),size:"sm",className:"gap-2",children:[a.jsx(We,{size:16}),"Add Category"]})]})}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ao,{label:"User-Submitted Places",description:"Allow users to add new places to the map",checked:(null==o?void 0:o.enableUserSubmittedPlaces)??!0,onCheckedChange:e=>{try{l(t=>({...t,enableUserSubmittedPlaces:e}))}catch(t){const e=t instanceof Error?t:new Error(String(t));Eo.error("Failed to update category setting",e)}}}),a.jsx(ti,{className:"my-4"}),a.jsx(Ao,{label:"Require Moderation",description:"Review user-submitted places before they appear on the map",checked:(null==o?void 0:o.requireModeration)??!0,onCheckedChange:e=>{try{l(t=>({...t,requireModeration:e}))}catch(t){const e=t instanceof Error?t:new Error(String(t));Eo.error("Failed to update category setting",e)}}})]}),a.jsx(ti,{}),g&&a.jsx(Kr,{className:"bg-muted/50",children:a.jsxs(Hr,{className:"pt-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Category ID"}),a.jsx(di,{placeholder:"e.g., dog-park",value:j.id,onChange:e=>w(t=>({...t,id:e.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Name"}),a.jsx(di,{placeholder:"e.g., Dog Parks",value:j.name,onChange:e=>w(t=>({...t,name:e.target.value}))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Icon (emoji)"}),a.jsx(di,{placeholder:"",value:j.icon,onChange:e=>w(t=>({...t,icon:e.target.value}))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Color"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(di,{type:"color",value:j.color,onChange:e=>w(t=>({...t,color:e.target.value})),className:"w-20"}),a.jsx(di,{type:"text",value:j.color,onChange:e=>w(t=>({...t,color:e.target.value})),className:"flex-1"})]})]})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(Ks,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),a.jsx(Ks,{onClick:()=>{j.id&&j.name&&j.icon&&j.color?(l(e=>({...e,categories:[...e.categories,j]})),w({id:"",name:"",icon:"",color:"#000000"}),x(!1),N().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Eo.error("Failed to save category",t),Se.error("Failed to save category")}),Se.success("Category added successfully")):Se.error("Please fill in all category fields")},children:"Add Category"})]})]})}),a.jsx("div",{className:"space-y-3",children:null==o?void 0:o.categories.map(e=>a.jsx(Kr,{children:a.jsx(Hr,{className:"pt-6",children:(null==h?void 0:h.id)===e.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Name"}),a.jsx(di,{value:h.name,onChange:e=>p({...h,name:e.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Icon"}),a.jsx(di,{value:h.icon,onChange:e=>p({...h,icon:e.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{children:"Color"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(di,{type:"color",value:h.color,onChange:e=>p({...h,color:e.target.value}),className:"w-20"}),a.jsx(di,{type:"text",value:h.color,onChange:e=>p({...h,color:e.target.value}),className:"flex-1"})]})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(Ks,{variant:"outline",onClick:()=>p(null),children:"Cancel"}),a.jsx(Ks,{onClick:()=>{return e=h,l(t=>({...t,categories:t.categories.map(t=>t.id===e.id?e:t)})),p(null),N().catch(t=>{const s=t instanceof Error?t:new Error(String(t));Eo.error("Failed to save after updating category",s,{categoryId:e.id}),Se.error("Failed to update category")}),void Se.success("Category updated");var e},children:"Save"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",style:{backgroundColor:`${e.color}20`},children:e.icon}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(Yr,{variant:"outline",className:"text-xs",children:e.id}),a.jsx(Yr,{variant:"secondary",className:"text-xs",style:{backgroundColor:e.color,color:"white"},children:e.color})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ks,{variant:"ghost",size:"icon",onClick:()=>p(e),"aria-label":`Edit category ${e.name}`,children:a.jsx(He,{size:16})}),a.jsx(Ks,{variant:"ghost",size:"icon",onClick:()=>{return t=e.id,l(e=>({...e,categories:e.categories.filter(e=>e.id!==t)})),N().catch(e=>{const s=e instanceof Error?e:new Error(String(e));Eo.error("Failed to save after deleting category",s,{categoryId:t}),Se.error("Failed to delete category")}),void Se.success("Category deleted");var t},"aria-label":`Delete category ${e.name}`,children:a.jsx(Re,{size:16,className:"text-destructive"})})]})]})})},e.id))})]})]}),a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"Map Provider Configuration"}),a.jsx(Wr,{children:"Configure map provider API keys and endpoints. Changes take effect immediately."})]}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{htmlFor:"map-provider",children:"Map Provider"}),a.jsxs(Xi,{value:e.PROVIDER,onValueChange:e=>t({PROVIDER:e}),children:[a.jsx(Zi,{id:"map-provider",children:a.jsx(Ji,{})}),a.jsxs(en,{children:[a.jsx(tn,{value:"maplibre",children:"MapLibre GL (Open Source)"}),a.jsx(tn,{value:"mapbox",children:"Mapbox"})]})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose between MapLibre (open-source) or Mapbox (commercial)"})]}),a.jsx(ti,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{htmlFor:"map-style-url",children:"Map Style URL"}),a.jsx(di,{id:"map-style-url",value:e.MAP_STYLE_URL,onChange:e=>t({MAP_STYLE_URL:e.target.value}),placeholder:"https://api.maptiler.com/maps/streets-v2/style.json?key="}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Map style JSON URL. Include ?key= at the end if your provider requires it."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{htmlFor:"map-tiles-api-key",children:"Map Tiles API Key"}),a.jsx(di,{id:"map-tiles-api-key",type:"password",value:e.MAP_TILES_API_KEY,onChange:e=>t({MAP_TILES_API_KEY:e.target.value}),placeholder:"Enter your map tiles API key"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"API key for accessing map tiles. Required for displaying maps."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{htmlFor:"geocoding-api-key",children:"Geocoding API Key"}),a.jsx(di,{id:"geocoding-api-key",type:"password",value:e.GEOCODING_API_KEY,onChange:e=>t({GEOCODING_API_KEY:e.target.value}),placeholder:"Enter your geocoding API key"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"API key for geocoding (address lookup). Required for search and place discovery."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ui,{htmlFor:"geocoding-endpoint",children:"Geocoding Endpoint"}),a.jsx(di,{id:"geocoding-endpoint",value:e.GEOCODING_ENDPOINT,onChange:e=>t({GEOCODING_ENDPOINT:e.target.value}),placeholder:"https://api.maptiler.com/geocoding"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Base URL for geocoding API requests."})]}),a.jsx(ti,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Reset to Environment Defaults"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Restore configuration from environment variables"})]}),a.jsx(Ks,{variant:"outline",onClick:r,children:"Reset Provider Config"})]}),a.jsxs("div",{className:"rounded-lg bg-muted p-4 space-y-2",children:[a.jsx("p",{className:"text-sm font-medium",children:"Current Configuration Status"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yr,{variant:e.MAP_TILES_API_KEY?"default":"destructive",children:e.MAP_TILES_API_KEY?"Tiles API: Configured":"Tiles API: Missing"}),a.jsx(Yr,{variant:e.GEOCODING_API_KEY?"default":"destructive",children:e.GEOCODING_API_KEY?"Geocoding API: Configured":"Geocoding API: Missing"})]})]})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Po=_t("BackendServices"),To={requireKYCToPublish:!1,requireKYCByRegion:{},blockHumanDominantPhotos:!0,humanDominanceThreshold:.7,breedScoreThreshold:.6,maxUploadsPerDay:50,maxUploadsPerHour:10,maxStoragePerUser:524288e3,retentionDaysRejected:30,retentionDaysLogs:365,autoApproveThreshold:.95,enableDuplicateDetection:!0};function Fo(e,t){if(e&&"object"==typeof e&&t in e){const s=e[t];if(null==s)throw new Error(`Response is missing expected "${t}" payload`);return s}if(null==e)throw new Error(`Response is missing expected "${t}" payload`);return e}function Ro(e,t){if(Array.isArray(e))return e;if(e&&"object"==typeof e&&t in e){const s=e[t];if(!Array.isArray(s))throw new Error(`Response is missing expected "${t}" list payload`);return s}throw new Error(`Response is missing expected "${t}" list payload`)}const _o=new class{async getPolicy(){try{const e=await ga.get(la.MODERATION.POLICY);return Fo(e.data,"policy")??To}catch(e){return Po.warn("Failed to load moderation policy from backend, using defaults",{error:e}),To}}async createUploadSession(e,t){await this.ensureQuotaWithinLimits(e);return Fo((await ga.post(la.UPLOADS.SIGN_URL,{userId:e,petId:t})).data,"session")}async processUpload(e,t){const s=Fo((await ga.post(la.PHOTOS.CREATE,{sessionId:e,file:{size:t.size,mimeType:t.type,content:t.data}})).data,"photo");return await this.emitEvent("photo.uploaded",{photoId:s.id,sessionId:e}),await this.incrementQuota(s.ownerId,t.size),s}async getPhotosByStatus(e){const t=ca(la.PHOTOS.BY_STATUS,{status:e});return Ro((await ga.get(t)).data,"photos")}async getPhotosByOwner(e,t=!1){const s=ca(la.PHOTOS.BY_OWNER,{ownerId:e,includeAll:t});return Ro((await ga.get(s)).data,"photos")}async getPublicPhotos(){return Ro((await ga.get(la.PHOTOS.PUBLIC)).data,"photos")}async createModerationTask(e){const t=Fo((await ga.post(la.MODERATION.TASKS,{photoId:e.id,ownerId:e.ownerId,petId:e.petId,priority:this.calculatePriority(e)})).data,"task");return await this.emitEvent("moderation.task.created",{taskId:t.id,photoId:e.id}),t}async ensureQuotaWithinLimits(e){const t=(await ga.get(la.QUOTAS.GET(e))).data;if(!t)throw new Error("Unable to resolve current upload quota");const s=await this.getPolicy();if(t.uploadsToday>=s.maxUploadsPerDay)throw new Error("Daily upload limit reached");if(t.uploadsThisHour>=s.maxUploadsPerHour)throw new Error("Hourly upload limit reached");if(t.totalStorage>=s.maxStoragePerUser)throw new Error("Storage limit reached")}async incrementQuota(e,t){await ga.post(la.QUOTAS.INCREMENT(e),{fileSize:t})}calculatePriority(e){var t;const s=(null==(t=e.safetyCheck)?void 0:t.flags)??[];return s.includes("nsfw")||s.includes("violent")?"high":s.includes("human_dominant")||s.includes("not_animal")||s.includes("duplicate")?"medium":"low"}async emitEvent(e,t){const s={event:e,data:t,correlationId:Ps(),timestamp:(new Date).toISOString()};await ga.post(la.EVENTS.CREATE,s)}},Mo=new class{async getQueue(){var e,t,s;const a=await ga.get(la.MODERATION.TASKS),r="queue"in a.data?a.data.queue:a.data;return{pending:r.pending??[],inProgress:r.inProgress??[],completed:r.completed??[],totalCount:r.totalCount??((null==(e=r.pending)?void 0:e.length)??0)+((null==(t=r.inProgress)?void 0:t.length)??0)+((null==(s=r.completed)?void 0:s.length)??0),averageReviewTime:r.averageReviewTime??0}}async takeTask(e,t){const s=await ga.post(la.MODERATION.TAKE_TASK(e),{reviewerId:t}),a="task"in s.data?s.data.task:s.data;if(!a)throw new Error("Task assignment failed");return await this.logAudit({id:Ps(),action:"moderation.task.claimed",resource:"moderation_task",resourceId:e,userId:t,userRole:"moderator",userName:"Moderator",timestamp:(new Date).toISOString()}),await this.emitEvent("moderation.task.claimed",{taskId:e,reviewerId:t}),a}async makeDecision(e,t,s,a,r,i){const n=await ga.patch(la.MODERATION.TASK(e),{action:t,reason:s,reasonText:a,reviewerId:r,reviewerName:i}),o="task"in n.data?n.data.task:n.data;if(!o)throw new Error("Moderation decision failed");const l={action:t,...s?{reason:s}:{},...a?{reasonText:a}:{},reviewerId:r,reviewerName:i,reviewedAt:(new Date).toISOString(),requiresKYC:"hold_for_kyc"===t};if(await this.logAudit({id:Ps(),action:"moderation.task.decision",resource:"moderation_task",resourceId:e,userId:r,userRole:"moderator",userName:i,after:{action:l.action,...l.reason?{reason:l.reason}:{},...l.reasonText?{reasonText:l.reasonText}:{},reviewerId:l.reviewerId,reviewerName:l.reviewerName,reviewedAt:l.reviewedAt,requiresKYC:l.requiresKYC},timestamp:l.reviewedAt}),"hold_for_kyc"===t)await this.notifyUserKYCRequired(o.ownerId,o.photoId);else{const e=await this.fetchPhoto(o.photoId);await this.notifyUserDecision(o.ownerId,e,l)}return await this.emitEvent("moderation.task.updated",{taskId:e,action:t,reviewerId:r}),o}async getMetrics(){const e=await ga.get(la.MODERATION.METRICS);return"metrics"in e.data?e.data.metrics:e.data}async fetchPhoto(e){const t=await ga.get(la.PHOTOS.GET(e));return"photo"in t.data?t.data.photo:t.data}async notifyUserKYCRequired(e,t){await ga.post(la.NOTIFICATIONS.LIST,{notificationId:Ps(),userId:e,type:"kyc_required",title:"Verification Required",body:"Please complete identity verification to publish your photo",data:{photoId:t},read:!1,createdAt:(new Date).toISOString()})}async notifyUserDecision(e,t,s){const a="approve"===s.action;await ga.post(la.NOTIFICATIONS.LIST,{notificationId:Ps(),userId:e,type:a?"photo_approved":"photo_rejected",title:a?"Photo Approved!":"Photo Review Update",body:a?"Your photo is now visible to the community.":`Your photo was not approved. Reason: ${s.reasonText||s.reason||"See details in the app."}`,data:{photoId:t.id,decision:s.action},read:!1,createdAt:s.reviewedAt})}async logAudit(e){await ga.post(la.AUDIT.CREATE,e)}async emitEvent(e,t){const s={event:e,data:t,correlationId:Ps(),timestamp:(new Date).toISOString()};await ga.post(la.EVENTS.CREATE,s)}},Do=_t("ModerationQueue");const Lo=Object.freeze(Object.defineProperty({__proto__:null,ModerationQueue:function(){const[e,t]=s.useState([]),[r,i]=s.useState(new Map),[n,o]=s.useState("pending"),[l,c]=s.useState(null),[d,u]=s.useState(null),[m,h]=s.useState(!1),[p,g]=s.useState("other"),[x,f]=s.useState(""),v=s.useCallback(async()=>{try{const s=await Mo.getQueue(),a=[...s.pending,...s.inProgress,...s.completed];t(a);const r=new Map;for(const t of a)try{const e=(await _o.getPhotosByOwner(t.ownerId,!0)).find(e=>e.id===t.photoId);e&&r.set(e.id,e)}catch(e){Do.error("Failed to load photos for task",e instanceof Error?e:new Error(String(e)),{taskId:t.id,ownerId:t.ownerId})}i(r)}catch(e){Do.error("Failed to load moderation queue",e instanceof Error?e:new Error(String(e))),Se.error("Failed to load moderation queue")}},[]);s.useEffect(()=>{v()},[v]);const y=e.filter(e=>"pending"===n?"pending"===e.status:"in_progress"===n?"in_progress"===e.status:"completed"===e.status),j=s.useCallback(e=>{c(e);const t=r.get(e.photoId);u(t??null)},[r]),w=s.useCallback(async()=>{if(l){h(!0);try{const{userService:e}=await Pt(async()=>{const{userService:e}=await Promise.resolve().then(()=>Tr);return{userService:e}},void 0),t=await e.user();if(!t)throw new Error("Not authenticated");await Mo.takeTask(l.id,t.id),Se.success("Task assigned to you"),await v(),c(null),u(null)}catch{Se.error("Failed to take task")}finally{h(!1)}}},[l,v]),b=s.useCallback(async()=>{if(l){h(!0);try{const{userService:e}=await Pt(async()=>{const{userService:e}=await Promise.resolve().then(()=>Tr);return{userService:e}},void 0),t=await e.user();if(!t)throw new Error("Not authenticated");const s="string"==typeof t.name?t.name:"Moderator";await Mo.makeDecision(l.id,"approve",void 0,"Photo meets all quality and safety standards",t.id,s),Se.success("Photo approved!"),await v(),c(null),u(null),f("")}catch{Se.error("Failed to approve photo")}finally{h(!1)}}},[l,v]),N=s.useCallback(async()=>{if(l&&x){h(!0);try{const{userService:e}=await Pt(async()=>{const{userService:e}=await Promise.resolve().then(()=>Tr);return{userService:e}},void 0),t=await e.user();if(!t)throw new Error("Not authenticated");const s="string"==typeof t.name?t.name:"Moderator";await Mo.makeDecision(l.id,"reject",p,x,t.id,s),Se.success("Photo rejected"),await v(),c(null),u(null),f(""),g("other")}catch{Se.error("Failed to reject photo")}finally{h(!1)}}},[l,x,p,v]),S=s.useCallback(async()=>{if(l){h(!0);try{const{userService:e}=await Pt(async()=>{const{userService:e}=await Promise.resolve().then(()=>Tr);return{userService:e}},void 0),t=await e.user();if(!t)throw new Error("Not authenticated");const s="string"==typeof t.name?t.name:"Moderator";await Mo.makeDecision(l.id,"hold_for_kyc",void 0,"Content requires KYC verification before publishing",t.id,s),Se.success("Photo held for KYC"),await v(),c(null),u(null),f("")}catch{Se.error("Failed to hold photo")}finally{h(!1)}}},[l,v]),E=e=>{switch(e){case"high":return"text-red-500 bg-red-500/10";case"medium":return"text-orange-500 bg-orange-500/10";case"low":return"text-green-500 bg-green-500/10";default:return"text-gray-500 bg-gray-500/10"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Photo Moderation Queue"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Review and approve pet photos before they go live"})]}),a.jsxs(Ks,{onClick:()=>{v().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Do.error("Failed to load queue from button",t)})},variant:"outline",children:[a.jsx(ve,{size:16,className:"mr-2"}),"Refresh"]})]}),a.jsxs(xi,{value:n,onValueChange:e=>o(e),className:"w-full",children:[a.jsxs(fi,{className:"w-full grid grid-cols-3",children:[a.jsxs(vi,{value:"pending",children:["Pending (",e.filter(e=>"pending"===e.status).length,")"]}),a.jsxs(vi,{value:"in_progress",children:["In Progress (",e.filter(e=>"in_progress"===e.status).length,")"]}),a.jsxs(vi,{value:"completed",children:["Completed (",e.filter(e=>"completed"===e.status).length,")"]})]}),a.jsx(yi,{value:n,className:"mt-4",children:a.jsx(mi,{className:"h-[600px]",children:a.jsx("div",{className:"space-y-4",children:0===y.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ye,{size:48,className:"mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No tasks in this queue"})]}):y.map(e=>{var t,s;const i=r.get(e.photoId);return a.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:a.jsx(Kr,{className:"p-4 cursor-pointer transition-colors hover:bg-accent/50",onClick:()=>j(e),children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"w-24 h-24 bg-muted rounded-lg overflow-hidden shrink-0",children:(null==i?void 0:i.originalUrl)?a.jsx("img",{src:i.originalUrl,alt:"Pet photo",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(oe,{size:32,className:"text-muted-foreground"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs(Yr,{className:E(e.priority),children:[(n=e.priority,"high"===n?a.jsx(Ee,{size:16,weight:"fill"}):a.jsx(ve,{size:16})),a.jsx("span",{className:"ml-1",children:e.priority})]}),null==(s=null==(t=null==i?void 0:i.safetyCheck)?void 0:t.flags)?void 0:s.map(e=>a.jsx(Yr,{variant:"outline",className:"text-xs",children:e.replace("_"," ")},e))]}),a.jsx(Yr,{variant:"pending"===e.status?"secondary":"in_progress"===e.status?"default":"outline",children:e.status.replace("_"," ")})]}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(qe,{size:14}),a.jsxs("span",{children:["Owner ID:"," ","string"==typeof e.ownerId?e.ownerId.substring(0,12):"N/A","..."]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(Qe,{size:14}),a.jsxs("span",{children:["Pet ID:"," ","string"==typeof e.petId?e.petId.substring(0,12):"N/A","..."]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(we,{size:14}),a.jsxs("span",{children:["Created: ",new Date(e.createdAt).toLocaleString()]})]}),(null==i?void 0:i.safetyCheck)&&a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs",children:[a.jsxs("span",{className:i.safetyCheck.isNSFW?"text-red-500":"text-green-500",children:["NSFW: ",i.safetyCheck.isNSFW?"Yes":"No"]}),a.jsxs("span",{className:i.safetyCheck.hasHumanFaces?"text-orange-500":"text-green-500",children:["Human Faces: ",i.safetyCheck.humanFaceCount]}),a.jsxs("span",{children:["Animal: ",(100*i.safetyCheck.confidence.animal).toFixed(0),"%"]})]})]})]})]})})},e.id);var n})})})})]}),a.jsx(Rr,{open:null!==l,onOpenChange:()=>{c(null),u(null),f("")},children:a.jsxs(Dr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx(Lr,{children:a.jsx(Ur,{children:"Photo Review"})}),d&&d.safetyCheck&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"aspect-video bg-muted rounded-lg overflow-hidden",children:a.jsx("img",{src:d.originalUrl,alt:"Photo for review",className:"w-full h-full object-contain"})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs(Kr,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Safety Check Results"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"NSFW Content:"}),a.jsx(Yr,{variant:d.safetyCheck.isNSFW?"destructive":"outline",children:d.safetyCheck.isNSFW?"Detected":"Clean"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Violent Content:"}),a.jsx(Yr,{variant:d.safetyCheck.isViolent?"destructive":"outline",children:d.safetyCheck.isViolent?"Detected":"Clean"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Human Faces:"}),a.jsxs("span",{children:[d.safetyCheck.humanFaceCount," (",(100*d.safetyCheck.humanFaceDominance).toFixed(0),"%)"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Duplicate:"}),a.jsx(Yr,{variant:d.safetyCheck.isDuplicate?"destructive":"outline",children:d.safetyCheck.isDuplicate?"Yes":"No"})]})]})]}),a.jsxs(Kr,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Confidence Scores"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Animal:"}),a.jsxs("span",{className:"font-medium",children:[(100*d.safetyCheck.confidence.animal).toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"NSFW Risk:"}),a.jsxs("span",{className:"font-medium",children:[(100*d.safetyCheck.confidence.nsfw).toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Violence Risk:"}),a.jsxs("span",{className:"font-medium",children:[(100*d.safetyCheck.confidence.violence).toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Human Face:"}),a.jsxs("span",{className:"font-medium",children:[(100*d.safetyCheck.confidence.humanFace).toFixed(0),"%"]})]})]})]})]}),d.safetyCheck.breedInference&&a.jsxs(Kr,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Breed Detection"}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:d.safetyCheck.breedInference.breed})," ","(Confidence:"," ",(100*d.safetyCheck.breedInference.confidence).toFixed(0),"%)"]})]}),d.safetyCheck.flags&&d.safetyCheck.flags.length>0&&a.jsxs(Kr,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Flags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:d.safetyCheck.flags.map(e=>a.jsxs(Yr,{variant:"outline",children:[a.jsx(Ee,{size:12,className:"mr-1"}),e.replace("_"," ")]},e))})]}),"pending"===(null==l?void 0:l.status)&&a.jsx("div",{className:"space-y-4",children:a.jsxs(Ks,{onClick:()=>{w().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Do.error("Failed to take task from button",t)})},variant:"outline",className:"w-full",disabled:m,children:[a.jsx(le,{size:16,className:"mr-2"}),"Take This Task"]})}),"in_progress"===(null==l?void 0:l.status)&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Rejection Reason (if rejecting)"}),a.jsxs(Xi,{value:p,onValueChange:e=>g(e),children:[a.jsx(Zi,{children:a.jsx(Ji,{})}),a.jsxs(en,{children:[a.jsx(tn,{value:"inappropriate_content",children:"Inappropriate Content"}),a.jsx(tn,{value:"not_animal",children:"Not an Animal"}),a.jsx(tn,{value:"human_faces",children:"Too Many Human Faces"}),a.jsx(tn,{value:"low_quality",children:"Low Quality"}),a.jsx(tn,{value:"duplicate",children:"Duplicate"}),a.jsx(tn,{value:"nsfw",children:"NSFW Content"}),a.jsx(tn,{value:"policy_violation",children:"Policy Violation"}),a.jsx(tn,{value:"other",children:"Other"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Additional Notes"}),a.jsx(ji,{value:x,onChange:e=>f(e.target.value),placeholder:"Add any additional context...",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs(Ks,{onClick:()=>{b().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Do.error("Failed to approve from button",t)})},disabled:m,className:"bg-green-600 hover:bg-green-700",children:[a.jsx(ye,{size:16,className:"mr-2"}),"Approve"]}),a.jsxs(Ks,{onClick:()=>{N().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Do.error("Failed to reject from button",t)})},disabled:m||!x,variant:"destructive",children:[a.jsx(je,{size:16,className:"mr-2"}),"Reject"]}),a.jsxs(Ks,{onClick:()=>{S().catch(e=>{const t=e instanceof Error?e:new Error(String(e));Do.error("Failed to hold for KYC from button",t)})},disabled:m,variant:"outline",children:[a.jsx(Q,{size:16,className:"mr-2"}),"Hold for KYC"]})]})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Oo=_t("Performance");const Uo=new class{constructor(){t(this,"metrics",{}),t(this,"observers",[]),t(this,"loadHandler",null),t(this,"timeoutId",null),"undefined"!=typeof window&&this.initializeObservers()}initializeObservers(){try{if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&(this.metrics.firstContentfulPaint=t.startTime)});e.observe({entryTypes:["paint"]}),this.observers.push(e);const t=new PerformanceObserver(e=>{const t=e.getEntries(),s=t[t.length-1];s&&"startTime"in s&&(this.metrics.largestContentfulPaint=s.startTime)});t.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(t);const s=new PerformanceObserver(e=>{for(const t of e.getEntries()){const e=t;this.metrics.firstInputDelay=e.processingStart-e.startTime}});s.observe({entryTypes:["first-input"]}),this.observers.push(s);const a=new PerformanceObserver(e=>{let t=0;for(const s of e.getEntries()){const e=s;e.hadRecentInput||(t+=e.value)}this.metrics.cumulativeLayoutShift=t});a.observe({entryTypes:["layout-shift"]}),this.observers.push(a)}"performance"in window&&performance.timing&&(this.loadHandler=()=>{this.timeoutId=window.setTimeout(()=>{const e=performance.timing;this.metrics.pageLoadTime=e.loadEventEnd-e.navigationStart,this.metrics.timeToInteractive=e.domInteractive-e.navigationStart,this.timeoutId=null},0)},window.addEventListener("load",this.loadHandler))}catch(e){Oo.warn("Performance monitoring initialization failed",e instanceof Error?e:new Error(String(e)))}}getMetrics(){return{...this.metrics}}destroy(){for(const e of this.observers)e.disconnect();this.observers=[],this.loadHandler&&(window.removeEventListener("load",this.loadHandler),this.loadHandler=null),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}cleanup(){this.destroy()}logMetrics(){Oo.debug("Performance metrics",this.metrics)}};const zo=_t("websocket-manager"),Bo=e=>e instanceof Error?e:new Error(String(e));class $o{constructor(e){t(this,"url"),t(this,"state","disconnected"),t(this,"messageQueue",[]),t(this,"eventHandlers",new Map),t(this,"reconnectAttempts",0),t(this,"maxReconnectAttempts"),t(this,"reconnectInterval"),t(this,"heartbeatInterval"),t(this,"messageTimeout"),t(this,"heartbeatTimer"),t(this,"reconnectTimer"),t(this,"pendingAcknowledgments",new Map),t(this,"ws",null),this.url=e.url,this.reconnectInterval=e.reconnectInterval??3e3,this.maxReconnectAttempts=e.maxReconnectAttempts??10,this.heartbeatInterval=e.heartbeatInterval??3e4,this.messageTimeout=e.messageTimeout??5e3}connect(e){if("connected"!==this.state&&"connecting"!==this.state){this.state="connecting",zo.info("Connecting",{url:this.url,token:`${e.substring(0,10)}...`});try{if("undefined"!=typeof WebSocket){const t=new WebSocket(`${this.url}?token=${encodeURIComponent(e)}`);this.ws=t,t.onopen=()=>{this.state="connected",this.reconnectAttempts=0,zo.info("WebSocket connected successfully"),this.startHeartbeat(),this.flushMessageQueue(),this.emit("connection",{status:"connected"})},t.onerror=e=>{const t=Bo(e.error);zo.error("WebSocket connection error",{message:t.message,stack:t.stack}),this.state="disconnected",this.emit("connection",{status:"error",error:t}),this.reconnect()},t.onclose=()=>{zo.warn("WebSocket connection closed"),this.state="disconnected",this.ws=null,this.emit("connection",{status:"disconnected"}),this.reconnectAttempts<this.maxReconnectAttempts&&this.reconnect()}}else zo.warn("WebSocket not available, using simulated connection"),this.state="connected",this.reconnectAttempts=0,this.startHeartbeat(),this.flushMessageQueue(),this.emit("connection",{status:"connected"})}catch(t){const e=Bo(t);zo.error("Failed to establish WebSocket connection",{message:e.message,stack:e.stack}),this.state="disconnected",this.emit("connection",{status:"error",error:e}),this.reconnect()}}}disconnect(){var e;zo.info("Disconnecting"),null==(e=this.ws)||e.close(),this.ws=null,this.state="disconnected",this.stopHeartbeat(),this.clearReconnectTimer(),this.pendingAcknowledgments.forEach(e=>window.clearTimeout(e)),this.pendingAcknowledgments.clear(),this.emit("connection",{status:"disconnected"})}send(e,t,s){const a={id:Cs(),namespace:e,event:t,data:s,timestamp:Date.now(),correlationId:Cs()};return"connected"!==this.state?(this.queueMessage(a),a.id):(this.sendMessage(a),a.id)}on(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Set),this.eventHandlers.get(e).add(t),()=>{const s=this.eventHandlers.get(e);s&&(s.delete(t),0===s.size&&this.eventHandlers.delete(e))}}getState(){return this.state}sendMessage(e){var t;zo.debug("Sending message",{messageId:e.id,event:e.event,namespace:e.namespace});const s=window.setTimeout(()=>{zo.warn("Message timeout",{messageId:e.id,event:e.event}),this.emit("message_timeout",{messageId:e.id,event:e.event}),this.handleMessageFailure(e)},this.messageTimeout);if(this.pendingAcknowledgments.set(e.id,s),(null==(t=this.ws)?void 0:t.readyState)===WebSocket.OPEN)try{this.ws.send(JSON.stringify(e))}catch(a){const t=Bo(a);zo.error("Failed to send WebSocket message",{message:t.message,stack:t.stack}),this.handleMessageFailure(e)}else this.handleAcknowledgment(e.id)}handleAcknowledgment(e){const t=this.pendingAcknowledgments.get(e);t&&(window.clearTimeout(t),this.pendingAcknowledgments.delete(e),zo.debug("Message acknowledged",{messageId:e}),this.emit("message_acknowledged",{messageId:e}))}handleMessageFailure(e){const t={...e,retries:0,maxRetries:3};this.queueMessage(t)}queueMessage(e){const t="retries"in e?e:{...e,retries:0,maxRetries:3};this.messageQueue.push(t),zo.debug("Message queued",{messageId:t.id,queueLength:this.messageQueue.length})}flushMessageQueue(){if("connected"!==this.state||0===this.messageQueue.length)return;zo.debug("Flushing message queue",{queueLength:this.messageQueue.length});const e=[...this.messageQueue];this.messageQueue=[],e.forEach(e=>{if(e.retries>=e.maxRetries)return zo.error("Message exceeded max retries",{messageId:e.id,event:e.event}),void this.emit("message_failed",{messageId:e.id,event:e.event});e.retries++,this.sendMessage(e)})}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=window.setInterval(()=>{"connected"===this.state&&(zo.debug("Sending heartbeat"),this.send("/notifications","heartbeat",{timestamp:Date.now()}))},this.heartbeatInterval)}stopHeartbeat(){void 0!==this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0)}reconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return zo.error("Max reconnection attempts reached",{attempts:this.reconnectAttempts}),void this.emit("connection",{status:"failed",attempts:this.reconnectAttempts});this.state="reconnecting",this.reconnectAttempts++;const e=Math.min(this.reconnectInterval*Math.pow(2,this.reconnectAttempts-1),3e4);zo.info("Reconnecting",{backoffDelay:e,attempt:this.reconnectAttempts}),this.reconnectTimer=window.setTimeout(()=>{zo.info("Attempting reconnection"),this.connect("reconnect-token")},e)}clearReconnectTimer(){void 0!==this.reconnectTimer&&(window.clearTimeout(this.reconnectTimer),this.reconnectTimer=void 0)}emit(e,t){const s=this.eventHandlers.get(e);s&&s.forEach(s=>{try{s(t)}catch(a){const t=Bo(a);zo.error("Error in event handler",{message:t.message,stack:t.stack,event:e})}})}receiveMessage(e,t,s){zo.debug("Received message",{namespace:e,event:t}),this.emit(`${e}:${t}`,s),this.emit(t,s)}handleConnectionDrop(){zo.warn("Connection dropped"),this.state="disconnected",this.stopHeartbeat(),this.emit("connection",{status:"disconnected",reason:"network"}),this.reconnect()}}let Vo=null;const Yo=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=s.useState(null),[r,i]=s.useState("disconnected"),[n,o]=s.useState("overview");s.useEffect(()=>{l();const e=setInterval(l,2e3),t=(Vo??(Vo=new $o({url:"ws://localhost:3000",reconnectInterval:3e3,maxReconnectAttempts:10,heartbeatInterval:3e4,messageTimeout:5e3})),Vo),s=t.on("connection",e=>{if(e&&"object"==typeof e&&"status"in e){const t=String(e.status);"connected"!==t&&"disconnected"!==t&&"connecting"!==t||i(t)}});return i("connected"===t.getState()?"connected":"disconnected"),()=>{clearInterval(e),s()}},[]);const l=()=>{const e=function(){var e;const t=Uo.getMetrics(),s=performance,a=(null==(e=s.memory)?void 0:e.usedJSHeapSize)?s.memory.usedJSHeapSize/1048576:45+30*Math.random(),r={pageLoadTime:t.pageLoadTime??1200+800*Math.random(),fcp:t.firstContentfulPaint??800+600*Math.random(),lcp:t.largestContentfulPaint??1500+800*Math.random(),fid:t.firstInputDelay??50+80*Math.random(),cls:t.cumulativeLayoutShift??.08*Math.random(),apiResponseTime:150+200*Math.random(),memoryUsage:a};return void 0!==t.firstContentfulPaint&&(r.firstContentfulPaint=t.firstContentfulPaint),void 0!==t.largestContentfulPaint&&(r.largestContentfulPaint=t.largestContentfulPaint),void 0!==t.firstInputDelay&&(r.firstInputDelay=t.firstInputDelay),void 0!==t.cumulativeLayoutShift&&(r.cumulativeLayoutShift=t.cumulativeLayoutShift),void 0!==t.timeToInteractive&&(r.timeToInteractive=t.timeToInteractive),r}();t(e)},c=e=>{switch(e){case"good":return"text-green-600 dark:text-green-400";case"warning":return"text-yellow-600 dark:text-yellow-400";case"critical":return"text-red-600 dark:text-red-400"}},d=e=>{switch(e){case"good":return a.jsx(Yr,{className:"bg-green-500/10 text-green-600 border-green-500/20",children:"Healthy"});case"warning":return a.jsx(Yr,{className:"bg-yellow-500/10 text-yellow-600 border-yellow-500/20",children:"Warning"});case"critical":return a.jsx(Yr,{className:"bg-red-500/10 text-red-600 border-red-500/20",children:"Critical"})}},u=e?[{label:"FCP",value:`${(e.fcp??1200).toFixed(0)}ms`,target:"< 1800ms",status:(e.fcp??1200)<1800?"good":"warning"},{label:"LCP",value:`${(e.lcp??2e3).toFixed(0)}ms`,target:"< 2500ms",status:(e.lcp??2e3)<2500?"good":"warning"},{label:"FID",value:`${(e.fid??80).toFixed(0)}ms`,target:"< 100ms",status:(e.fid??80)<100?"good":"warning"},{label:"CLS",value:(e.cls??.05).toFixed(3),target:"< 0.1",status:(e.cls??.05)<.1?"good":"warning"}]:[];return e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Performance Monitoring"}),a.jsx("p",{className:"text-muted-foreground",children:"Real-time system health and metrics"})]}),a.jsxs(Ks,{onClick:l,variant:"outline",size:"sm",children:[a.jsx(me,{size:16,className:"mr-2"}),"Refresh"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:(()=>{if(!e)return[];const t=e.pageLoadTime??1500,s=e.apiResponseTime??250,i=e.memoryUsage??75;return[{label:"Page Load Time",value:`${t.toFixed(0)}ms`,change:-12,status:t<2e3?"good":t<4e3?"warning":"critical",icon:a.jsx(ve,{size:20,weight:"fill"})},{label:"API Response Time",value:`${s.toFixed(0)}ms`,change:5,status:s<300?"good":s<1e3?"warning":"critical",icon:a.jsx(tt,{size:20,weight:"fill"})},{label:"WebSocket Status",value:"connected"===r?"Connected":"connecting"===r?"Connecting":"Disconnected",change:0,status:"connected"===r?"good":"connecting"===r?"warning":"critical",icon:a.jsx(me,{size:20,weight:"fill"})},{label:"Memory Usage",value:`${i.toFixed(1)} MB`,change:8,status:i<100?"good":i<200?"warning":"critical",icon:a.jsx(me,{size:20,weight:"fill"})}]})().map(e=>a.jsx(ns.View,{children:a.jsxs(Kr,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:c(e.status),children:e.icon}),d(e.status)]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:e.label}),a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsx("p",{className:"text-2xl font-bold",children:e.value}),0!==e.change&&a.jsxs("span",{className:"text-xs flex items-center "+(e.change>0?"text-red-500":"text-green-500"),children:[e.change>0?a.jsx(Xe,{size:12}):a.jsx(Je,{size:12}),Math.abs(e.change),"%"]})]})]})},e.label))}),a.jsxs(xi,{value:n,onValueChange:o,children:[a.jsxs(fi,{children:[a.jsx(vi,{value:"overview",children:"Overview"}),a.jsx(vi,{value:"vitals",children:"Core Web Vitals"}),a.jsx(vi,{value:"network",children:"Network"}),a.jsx(vi,{value:"errors",children:"Errors"})]}),a.jsxs(yi,{value:"overview",className:"space-y-4 mt-6",children:[a.jsxs(Kr,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(Ze,{size:20,weight:"fill",className:"text-primary"}),"System Health Overview"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"CPU Usage"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"32%"})]}),a.jsx(ei,{value:32,className:"h-2"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Memory Usage"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[(e.memoryUsage??75).toFixed(1)," MB"]})]}),a.jsx(ei,{value:(e.memoryUsage??75)/500*100,className:"h-2"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Active Connections"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"148"})]}),a.jsx(ei,{value:74,className:"h-2"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),a.jsx("div",{className:"space-y-3",children:[{icon:a.jsx(ye,{size:16,weight:"fill",className:"text-green-500"}),text:"System backup completed",time:"2 min ago"},{icon:a.jsx(et,{size:16,weight:"fill",className:"text-blue-500"}),text:"Media upload successful",time:"5 min ago"},{icon:a.jsx(Ee,{size:16,weight:"fill",className:"text-yellow-500"}),text:"High API response time detected",time:"12 min ago"},{icon:a.jsx(ye,{size:16,weight:"fill",className:"text-green-500"}),text:"Database optimization complete",time:"20 min ago"}].map((e,t)=>a.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[a.jsx("div",{className:"mt-0.5",children:e.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-foreground",children:e.text}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.time})]})]},t))})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Status"}),a.jsx("div",{className:"space-y-3",children:[{service:"API Server",status:"operational",uptime:"99.98%"},{service:"WebSocket Gateway",status:r,uptime:"99.95%"},{service:"Media Service",status:"operational",uptime:"99.99%"},{service:"Database",status:"operational",uptime:"100%"}].map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"font-medium",children:e.service}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:e.uptime}),"operational"===e.status||"connected"===e.status?a.jsx(ye,{size:16,weight:"fill",className:"text-green-500"}):a.jsx(je,{size:16,weight:"fill",className:"text-red-500"})]})]},t))})]})]})]}),a.jsxs(yi,{value:"vitals",className:"space-y-4 mt-6",children:[a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Core Web Vitals"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Metrics that measure real-world user experience on your application"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map(e=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-semibold",children:e.label}),"good"===e.status?a.jsx(ye,{size:20,weight:"fill",className:"text-green-500"}):a.jsx(Ee,{size:20,weight:"fill",className:"text-yellow-500"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold",children:e.value}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["Target: ",e.target]})]}),a.jsx(ei,{value:"good"===e.status?100:60,className:"h-2"})]},e.label))})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance Recommendations"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ye,{size:16,weight:"fill",className:"text-green-500 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Image optimization enabled"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"All images are being compressed and lazy-loaded"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ye,{size:16,weight:"fill",className:"text-green-500 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Code splitting active"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Routes are loaded on-demand for better performance"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ee,{size:16,weight:"fill",className:"text-yellow-500 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Consider enabling service worker"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Offline caching could improve repeat visit performance"})]})]})]})]})]}),a.jsx(yi,{value:"network",className:"space-y-4 mt-6",children:a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Network Performance"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"API Requests (last hour)"}),a.jsx("span",{className:"text-sm font-semibold",children:"1,247"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"bg-green-500/10 text-green-600 p-2 rounded",children:[a.jsx("p",{className:"font-semibold",children:"1,198"}),a.jsx("p",{className:"text-green-600/70",children:"Success"})]}),a.jsxs("div",{className:"bg-yellow-500/10 text-yellow-600 p-2 rounded",children:[a.jsx("p",{className:"font-semibold",children:"42"}),a.jsx("p",{className:"text-yellow-600/70",children:"Slow"})]}),a.jsxs("div",{className:"bg-red-500/10 text-red-600 p-2 rounded",children:[a.jsx("p",{className:"font-semibold",children:"7"}),a.jsx("p",{className:"text-red-600/70",children:"Failed"})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Average Response Time"}),a.jsxs("span",{className:"text-sm font-semibold",children:[(e.apiResponseTime??250).toFixed(0),"ms"]})]}),a.jsx(ei,{value:25,className:"h-2"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium",children:"Data Transfer (last hour)"}),a.jsx("span",{className:"text-sm font-semibold",children:"2.4 GB"})]}),a.jsxs("div",{className:"flex gap-2 text-xs",children:[a.jsxs("div",{className:"flex-1 bg-primary/10 text-primary p-2 rounded",children:[a.jsx("p",{className:"font-semibold",children:"1.6 GB"}),a.jsx("p",{className:"text-primary/70",children:"Upload"})]}),a.jsxs("div",{className:"flex-1 bg-secondary/10 text-secondary p-2 rounded",children:[a.jsx("p",{className:"font-semibold",children:"800 MB"}),a.jsx("p",{className:"text-secondary/70",children:"Download"})]})]})]})]})]})}),a.jsx(yi,{value:"errors",className:"space-y-4 mt-6",children:a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Error Tracking"}),a.jsx("div",{className:"space-y-3",children:[{type:"Network Error",count:3,severity:"low",time:"15 min ago"},{type:"Validation Error",count:12,severity:"low",time:"23 min ago"},{type:"API Timeout",count:2,severity:"medium",time:"1 hour ago"}].map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:["low"===e.severity?a.jsx(Ee,{size:20,weight:"fill",className:"text-yellow-500"}):a.jsx(je,{size:20,weight:"fill",className:"text-red-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:e.type}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.time})]})]}),a.jsxs(Yr,{variant:"outline",children:[e.count," occurrences"]})]},t))})]})})]})]}):a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(me,{className:"animate-spin mx-auto mb-4 text-primary",size:32}),a.jsx("p",{className:"text-muted-foreground",children:"Loading performance metrics..."})]})})}},Symbol.toStringTag,{value:"Module"})),Ko=_t("ReportsView");function qo(e){const t="investigating"===e.status?"reviewing":e.status,s={id:e.id,reportedBy:e.reporterId,reason:e.reason,description:e.details,status:t,priority:(a=e.reason,r=e.status,"resolved"===r||"dismissed"===r?"low":"harassment"===a||"violence"===a?"critical":"inappropriate"===a||"fake"===a?"high":"medium"),createdAt:e.createdAt};var a,r;return"user"===e.reportedEntityType?s.reportedUserId=e.reportedEntityId:"pet"===e.reportedEntityType?s.reportedPetId=e.reportedEntityId:"message"===e.reportedEntityType&&(s.reportedContent=e.reportedEntityId),e.resolution&&(s.action=e.resolution.action,s.resolution=e.resolution.notes,s.reviewedBy=e.resolution.resolvedBy),e.resolvedAt&&(s.reviewedAt=e.resolvedAt),s}function Go({priority:e}){const t={low:{variant:"secondary",icon:ve},medium:{variant:"default",icon:se},high:{variant:"default",icon:Ee},critical:{variant:"destructive",icon:Ee}},s=t[e]??t.medium;if(!s)return null;const r=s.icon;return a.jsxs(Yr,{variant:null==s?void 0:s.variant,className:"gap-1",children:[a.jsx(r,{size:12,weight:"fill"}),e]})}function Wo({status:e}){const t={pending:{variant:"secondary",label:"Pending"},reviewing:{variant:"default",label:"Reviewing"},resolved:{variant:"default",label:"Resolved"},dismissed:{variant:"outline",label:"Dismissed"}},s=t[e]??t.pending;return s?a.jsx(Yr,{variant:null==s?void 0:s.variant,children:null==s?void 0:s.label}):null}const Ho=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=s.useState([]),[r,i]=s.useState(!0),[n,o]=s.useState(null),[l,c]=s.useState(!1),[d,u]=s.useState(""),[m,h]=s.useState("dismiss"),[p,g]=s.useState("all"),[x,f]=s.useState(!1);s.useEffect(()=>{v()},[]);const v=async()=>{i(!0);try{const e=(await qn.listReports()).map(qo);t(e)}catch(e){Ko.error("Failed to load reports",e instanceof Error?e:new Error(String(e))),Se.error("Failed to load reports. Please try again.")}finally{i(!1)}},y=async()=>{var e;if(n){f(!0);try{const a=await qn.dismissReport(n.id,d.trim()||"Dismissed - no violation found"),r=qo(a);t(e=>e.map(e=>e.id===n.id?r:e)),c(!1),u(""),h("dismiss"),Se.success("Report dismissed");try{const t={adminId:(null==(e=a.resolution)?void 0:e.resolvedBy)??"unknown",action:"dismiss_report",targetType:"report",targetId:n.id,details:JSON.stringify({reportReason:n.reason,resolution:d.trim()||"Dismissed - no violation found"})};await kn.createAuditLog(t)}catch(s){Ko.error("Failed to create audit log",s instanceof Error?s:new Error(String(s)))}}catch(a){Ko.error("Failed to dismiss report",a instanceof Error?a:new Error(String(a))),Se.error("Failed to dismiss report. Please try again.")}finally{f(!1)}}},j=e.filter(e=>"all"===p||e.status===p),w=e.filter(e=>"pending"===e.status).length,b=e.filter(e=>"reviewing"===e.status).length,N=e.filter(e=>"resolved"===e.status).length;return r?a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:a.jsx("div",{className:"text-muted-foreground",children:"Loading reports..."})}):a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"border-b border-border p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Reports"}),a.jsx("p",{className:"text-muted-foreground",children:"Review and moderate reported content"})]}),a.jsxs(Yr,{variant:"destructive",className:"text-lg px-4 py-2",children:[w," Pending"]})]})}),a.jsx(mi,{className:"flex-1",children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx(xi,{value:p,onValueChange:e=>g(e),children:a.jsxs(fi,{children:[a.jsxs(vi,{value:"all",children:["All (",e.length,")"]}),a.jsxs(vi,{value:"pending",children:["Pending (",w,")"]}),a.jsxs(vi,{value:"reviewing",children:["Reviewing (",b,")"]}),a.jsxs(vi,{value:"resolved",children:["Resolved (",N,")"]})]})}),a.jsxs("div",{className:"space-y-4",children:[j.map((e,t)=>a.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",style:{animationDelay:50*t+"ms"},children:a.jsxs(Kr,{children:[a.jsx(qr,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gr,{className:"text-lg",children:e.reason}),a.jsx(Go,{priority:e.priority}),a.jsx(Wo,{status:e.status})]}),a.jsxs(Wr,{children:["Reported by ",e.reportedBy," "," ",new Date(e.createdAt).toLocaleString()]})]}),a.jsxs(Ks,{size:"sm",onClick:()=>(e=>{o(e),c(!0),u(""),h("dismiss")})(e),disabled:"resolved"===e.status||"dismissed"===e.status,children:[a.jsx(le,{size:16,className:"mr-2"}),"Review"]})]})}),a.jsxs(Hr,{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),e.reportedPetId&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Pet ID: ",e.reportedPetId]}),e.reportedUserId&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["User ID: ",e.reportedUserId]}),e.resolution&&a.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium",children:"Resolution:"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.resolution}),e.reviewedBy&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Reviewed by ",e.reviewedBy," "," ",new Date(e.reviewedAt).toLocaleString()]})]})]})]})},e.id)),0===j.length&&a.jsx(Kr,{className:"p-12",children:a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx(ye,{size:48,className:"mx-auto text-muted-foreground"}),a.jsx("h3",{className:"text-lg font-semibold",children:"No reports found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"pending"===p?"All pending reports have been reviewed":"No reports in this category"})]})})]})]})}),a.jsx(Rr,{open:l,onOpenChange:c,children:a.jsxs(Dr,{className:"max-w-2xl",children:[a.jsxs(Lr,{children:[a.jsx(Ur,{children:"Review Report"}),a.jsx(zr,{children:"Review the reported content and take appropriate action"})]}),n&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium",children:"Reason:"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n.reason})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium",children:"Description:"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium",children:"Action to take:"}),a.jsxs(Xi,{value:m,onValueChange:h,children:[a.jsx(Zi,{children:a.jsx(Ji,{})}),a.jsxs(en,{children:[a.jsx(tn,{value:"dismiss",children:"Dismiss (no violation)"}),a.jsx(tn,{value:"warning",children:"Send warning"}),a.jsx(tn,{value:"remove_content",children:"Remove content"}),a.jsx(tn,{value:"suspend_user",children:"Suspend user (7 days)"}),a.jsx(tn,{value:"ban_user",children:"Ban user permanently"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium",children:"Resolution notes:"}),a.jsx(ji,{value:d,onChange:e=>u(e.target.value),placeholder:"Explain the action taken and reasoning...",rows:4})]})]}),a.jsxs(Or,{children:[a.jsx(Ks,{variant:"outline",onClick:()=>{c(!1),u(""),h("dismiss")},disabled:x,children:"Cancel"}),a.jsxs(Ks,{variant:"secondary",onClick:()=>{y().catch(e=>{Ko.error("Failed to dismiss report",e instanceof Error?e:new Error(String(e)))})},disabled:x,children:[a.jsx(je,{size:16,className:"mr-2"}),x?"Processing...":"Dismiss"]}),a.jsxs(Ks,{onClick:()=>{(async()=>{var e;if(n)if("dismiss"!==m)if(d.trim()){f(!0);try{const a="warning"===m?"warn":"remove_content"===m?"remove_content":"suspend_user"===m?"suspend":"ban_user"===m?"ban":"no_action",r=await qn.resolveReport(n.id,{action:a,notes:d}),i=qo(r);t(e=>e.map(e=>e.id===n.id?i:e)),c(!1),u(""),h("dismiss"),Se.success("Report resolved successfully");try{const t={adminId:(null==(e=r.resolution)?void 0:e.resolvedBy)??"unknown",action:"resolve_report",targetType:"report",targetId:n.id,details:JSON.stringify({reportReason:n.reason,resolution:d,actionType:a})};await kn.createAuditLog(t)}catch(s){Ko.error("Failed to create audit log",s instanceof Error?s:new Error(String(s)))}}catch(a){Ko.error("Failed to resolve report",a instanceof Error?a:new Error(String(a))),Se.error("Failed to resolve report. Please try again.")}finally{f(!1)}}else Se.error("Please provide resolution details");else await y()})().catch(e=>{Ko.error("Failed to resolve report",e instanceof Error?e:new Error(String(e)))})},disabled:x||"dismiss"===m,children:[a.jsx(ye,{size:16,className:"mr-2"}),x?"Processing...":"Resolve"]})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),Qo=_t("SettingsView");function Xo({label:e,description:t,checked:r,onCheckedChange:i}){const n=s.useCallback(e=>{ws("light"),i(e)},[i]);return a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsx(ui,{className:"text-base",children:e}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),a.jsx(gi,{checked:r,onCheckedChange:n})]})}function Jo({label:e,value:t}){return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:e}),a.jsx("span",{className:"text-sm text-muted-foreground",children:t})]})}const Zo=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=Gs("admin-feature-flags",{enableChat:!0,enableVisualAnalysis:!0,enableMatching:!0,enableReporting:!0,enableVerification:!0}),[r,i]=Gs("admin-system-settings",{maxReportsPerUser:10,autoModeration:!1,requireVerification:!1,matchDistanceRadius:50,messagingEnabled:!0}),n=s.useCallback((e,s)=>{try{ws("selection"),t(t=>t?{...t,[e]:s}:(Qo.warn("Feature flags is null, using defaults"),{enableChat:!0,enableVisualAnalysis:!0,enableMatching:!0,enableReporting:!0,enableVerification:!0})),Se.success("Feature "+(s?"enabled":"disabled")),Qo.info("Feature flag updated",{key:e,value:s})}catch(a){const t=a instanceof Error?a:new Error(String(a));Qo.error("Failed to update feature flag",t,{key:e,value:s}),Se.error("Failed to update feature flag")}},[t]),o=s.useCallback((e,t)=>{try{ws("light"),i(s=>s?{...s,[e]:t}:(Qo.warn("System settings is null, using defaults"),{maxReportsPerUser:10,autoModeration:!1,requireVerification:!1,matchDistanceRadius:50,messagingEnabled:!0})),Se.success("Setting updated"),Qo.info("System setting updated",{key:e,value:t})}catch(s){const a=s instanceof Error?s:new Error(String(s));Qo.error("Failed to update system setting",a,{key:e,value:t}),Se.error("Failed to update system setting")}},[i]),l=vs({scale:1.02}),c=vs({scale:1.02}),d=vs({scale:1.02});return a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"border-b border-border p-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure system settings and feature flags"})]})}),a.jsx(mi,{className:"flex-1",children:a.jsxs("div",{className:"p-6 space-y-6 max-w-4xl",children:[a.jsx(hs,{style:l.animatedStyle,onMouseEnter:l.handleEnter,onMouseLeave:l.handleLeave,children:a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"Feature Flags"}),a.jsx(Wr,{children:"Enable or disable platform features"})]}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsx(Xo,{label:"Chat System",description:"Allow users to send messages to matched pets",checked:(null==e?void 0:e.enableChat)??!0,onCheckedChange:e=>n("enableChat",e)}),a.jsx(ti,{}),a.jsx(Xo,{label:"AI Visual Analysis",description:"Enable AI-powered pet photo analysis and attribute extraction",checked:(null==e?void 0:e.enableVisualAnalysis)??!0,onCheckedChange:e=>n("enableVisualAnalysis",e)}),a.jsx(ti,{}),a.jsx(Xo,{label:"Matching System",description:"Allow users to swipe and match with compatible pets",checked:(null==e?void 0:e.enableMatching)??!0,onCheckedChange:e=>n("enableMatching",e)}),a.jsx(ti,{}),a.jsx(Xo,{label:"Reporting System",description:"Allow users to report inappropriate content or behavior",checked:(null==e?void 0:e.enableReporting)??!0,onCheckedChange:e=>n("enableReporting",e)}),a.jsx(ti,{}),a.jsx(Xo,{label:"Verification System",description:"Require users to verify their identity and pet ownership",checked:(null==e?void 0:e.enableVerification)??!0,onCheckedChange:e=>n("enableVerification",e)})]})]})}),a.jsx(hs,{style:c.animatedStyle,onMouseEnter:c.handleEnter,onMouseLeave:c.handleLeave,children:a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"System Settings"}),a.jsx(Wr,{children:"Configure platform behavior and limits"})]}),a.jsxs(Hr,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{children:"Max Reports Per User (Daily)"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pi,{value:[(null==r?void 0:r.maxReportsPerUser)??10],onValueChange:([e])=>{void 0!==e&&o("maxReportsPerUser",e)},min:1,max:50,step:1,className:"flex-1"}),a.jsx("span",{className:"w-12 text-right font-medium",children:(null==r?void 0:r.maxReportsPerUser)??10})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum number of reports a user can submit per day"})]}),a.jsx(ti,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ui,{children:"Match Distance Radius (km)"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(pi,{value:[(null==r?void 0:r.matchDistanceRadius)??50],onValueChange:([e])=>{void 0!==e&&o("matchDistanceRadius",e)},min:1,max:200,step:5,className:"flex-1"}),a.jsx("span",{className:"w-12 text-right font-medium",children:(null==r?void 0:r.matchDistanceRadius)??50})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum distance for pet matching suggestions"})]}),a.jsx(ti,{}),a.jsx(Xo,{label:"Auto Moderation",description:"Automatically flag and hide potentially inappropriate content using AI",checked:(null==r?void 0:r.autoModeration)??!1,onCheckedChange:e=>o("autoModeration",e)}),a.jsx(ti,{}),a.jsx(Xo,{label:"Require Verification",description:"Require all users to verify their identity before accessing features",checked:(null==r?void 0:r.requireVerification)??!1,onCheckedChange:e=>o("requireVerification",e)}),a.jsx(ti,{}),a.jsx(Xo,{label:"Messaging Enabled",description:"Allow users to send and receive messages (global toggle)",checked:(null==r?void 0:r.messagingEnabled)??!0,onCheckedChange:e=>o("messagingEnabled",e)})]})]})}),a.jsx(hs,{style:d.animatedStyle,onMouseEnter:d.handleEnter,onMouseLeave:d.handleLeave,children:a.jsxs(Kr,{children:[a.jsxs(qr,{children:[a.jsx(Gr,{children:"System Information"}),a.jsx(Wr,{children:"Platform version and environment details"})]}),a.jsxs(Hr,{className:"space-y-4",children:[a.jsx(Jo,{label:"Version",value:"1.0.0"}),a.jsx(ti,{}),a.jsx(Jo,{label:"Environment",value:"Development"}),a.jsx(ti,{}),a.jsx(Jo,{label:"API Endpoint",value:"/api/v1"}),a.jsx(ti,{}),a.jsx(Jo,{label:"Build",value:(new Date).toISOString().split("T")[0]??(new Date).toISOString()})]})]})})]})})]})}},Symbol.toStringTag,{value:"Module"})),el=_t("SupportApi");const tl=new class{async createTicket(e){try{return(await ga.post(la.ADMIN.SUPPORT_TICKETS,e)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw el.error("Failed to create support ticket",s,{userId:e.userId}),s}}async getTickets(e){try{const t=new URLSearchParams;(null==e?void 0:e.status)&&e.status.forEach(e=>t.append("status",e)),(null==e?void 0:e.priority)&&e.priority.forEach(e=>t.append("priority",e)),(null==e?void 0:e.assignedTo)&&t.append("assignedTo",e.assignedTo),(null==e?void 0:e.userId)&&t.append("userId",e.userId),(null==e?void 0:e.tags)&&e.tags.forEach(e=>t.append("tags",e)),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.createdAfter)&&t.append("createdAfter",e.createdAfter),(null==e?void 0:e.createdBefore)&&t.append("createdBefore",e.createdBefore);const s=t.toString(),a=s?`${la.ADMIN.SUPPORT_TICKETS}?${s}`:la.ADMIN.SUPPORT_TICKETS;return(await ga.get(a)).data}catch(t){const e=t instanceof Error?t:new Error(String(t));return el.error("Failed to get support tickets",e),[]}}async getTicket(e){try{return(await ga.get(la.ADMIN.SUPPORT_TICKET(e))).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return el.error("Failed to get support ticket",s,{ticketId:e}),null}}async updateTicket(e,t){try{return(await ga.put(la.ADMIN.SUPPORT_TICKET(e),t)).data}catch(s){const t=s instanceof Error?s:new Error(String(s));throw el.error("Failed to update support ticket",t,{ticketId:e}),t}}async updateTicketStatus(e,t){try{return(await ga.put(la.ADMIN.SUPPORT_TICKET_STATUS(e),{status:t})).data}catch(s){const a=s instanceof Error?s:new Error(String(s));throw el.error("Failed to update ticket status",a,{ticketId:e,status:t}),a}}async assignTicket(e,t){try{return(await ga.put(la.ADMIN.SUPPORT_TICKET_ASSIGN(e),{assignedTo:t})).data}catch(s){const a=s instanceof Error?s:new Error(String(s));throw el.error("Failed to assign ticket",a,{ticketId:e,assignedTo:t}),a}}async getTicketMessages(e){try{return(await ga.get(la.ADMIN.SUPPORT_TICKET_MESSAGES(e))).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return el.error("Failed to get ticket messages",s,{ticketId:e}),[]}}async addTicketMessage(e,t){try{const s=new FormData;s.append("message",t.message),t.attachments&&t.attachments.forEach((e,t)=>{s.append(`attachment_${t}`,e)});return(await ga.post(la.ADMIN.SUPPORT_TICKET_MESSAGES(e),s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){const t=s instanceof Error?s:new Error(String(s));throw el.error("Failed to add ticket message",t,{ticketId:e}),t}}async getStats(){try{return(await ga.get(la.ADMIN.SUPPORT_STATS)).data}catch(e){const t=e instanceof Error?e:new Error(String(e));return el.error("Failed to get support stats",t),{total:0,open:0,inProgress:0,resolved:0,closed:0,byPriority:{low:0,medium:0,high:0,urgent:0},averageResolutionTime:0}}}},sl=_t("SupportChatPanel");const al=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e,t]=s.useState([]),[r,i]=s.useState(null),[n,o]=s.useState(!1),[l,c]=s.useState(null),[d,u]=s.useState([]),[m,h]=s.useState(""),[p,g]=s.useState(!1),[x,f]=s.useState({}),[v,y]=s.useState(!1),[j]=Gs("current-user",null),[w,b]=s.useState("all"),N=s.useCallback(async()=>{o(!0);try{const e="all"===w?[]:"open"===w?["open"]:"in-progress"===w?["in-progress"]:["resolved","closed"],s=await tl.getTickets({...x,status:e.length>0?e:x.status});t(s)}catch(e){const t=e instanceof Error?e:new Error(String(e));sl.error("Failed to load tickets",t),Se.error("Failed to load support tickets")}finally{o(!1)}},[x,w]),S=s.useCallback(async()=>{try{const e=await tl.getStats();i(e)}catch(e){const t=e instanceof Error?e:new Error(String(e));sl.error("Failed to load stats",t)}},[]),E=s.useCallback(async e=>{try{const t=await tl.getTicketMessages(e);u(t.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()))}catch(t){const e=t instanceof Error?t:new Error(String(t));sl.error("Failed to load messages",e)}},[]);s.useEffect(()=>{N(),S()},[N,S]),s.useEffect(()=>{l&&E(l.id)},[l,E]);const k=async()=>{if(l&&m.trim())try{g(!0);const e=await tl.addTicketMessage(l.id,{message:m});u([...d,e]),h(""),await kn.createAuditLog({adminId:(null==j?void 0:j.id)||"admin",action:"support_ticket_message",targetType:"support_ticket",targetId:l.id,details:JSON.stringify({messageId:e.id})})}catch(e){const t=e instanceof Error?e:new Error(String(e));sl.error("Failed to send message",t),Se.error("Failed to send message")}finally{g(!1)}},I=e=>a.jsx(Yr,{variant:{low:"secondary",medium:"default",high:"destructive",urgent:"destructive"}[e],children:e.toUpperCase()}),A=e=>{const t={open:a.jsx(ve,{size:12,className:"mr-1"}),"in-progress":a.jsx(ve,{size:12,className:"mr-1"}),resolved:a.jsx(ye,{size:12,className:"mr-1"}),closed:a.jsx(je,{size:12,className:"mr-1"})};return a.jsxs(Yr,{variant:{open:"destructive","in-progress":"default",resolved:"secondary",closed:"outline"}[e],children:[t[e],e.replace("-"," ").toUpperCase()]})};return a.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[a.jsxs("div",{className:"border-b border-border p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Support Tickets"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage customer support requests and issues"})]}),a.jsxs(Ks,{onClick:()=>y(!0),children:[a.jsx(We,{size:16,className:"mr-2"}),"Create Ticket"]})]}),r&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-6",children:[a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold",children:r.total}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tickets"})]})}),a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-destructive",children:r.open}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Open"})]})}),a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold",children:r.inProgress}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"In Progress"})]})}),a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.resolved}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Resolved"})]})}),a.jsx(Kr,{children:a.jsxs(Hr,{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold",children:r.closed}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Closed"})]})})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("div",{className:"w-1/3 border-r border-border flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-border",children:a.jsxs("div",{className:"relative",children:[a.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:16}),a.jsx(di,{placeholder:"Search tickets...",value:x.search||"",onChange:e=>f({...x,search:e.target.value}),className:"pl-10"})]})}),a.jsxs(xi,{value:w,onValueChange:e=>{"all"!==e&&"open"!==e&&"in-progress"!==e&&"resolved"!==e||b(e)},className:"flex-1 flex flex-col",children:[a.jsxs(fi,{className:"mx-4 mt-4",children:[a.jsx(vi,{value:"all",children:"All"}),a.jsx(vi,{value:"open",children:"Open"}),a.jsx(vi,{value:"in-progress",children:"In Progress"}),a.jsx(vi,{value:"resolved",children:"Resolved"})]}),a.jsx(yi,{value:w,className:"flex-1 m-0 mt-4",children:a.jsx(mi,{className:"h-full",children:a.jsx("div",{className:"p-4 space-y-2",children:n?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):0===e.length?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No tickets found"}):e.map(e=>a.jsx(Kr,{className:"cursor-pointer hover:bg-muted transition-colors "+((null==l?void 0:l.id)===e.id?"ring-2 ring-primary":""),onClick:()=>(e=>{c(e)})(e),children:a.jsxs(Hr,{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold truncate",children:e.subject}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.userName})]}),I(e.priority)]}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[A(e.status),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]})]})},e.id))})})})]})]}),a.jsx("div",{className:"flex-1 flex flex-col",children:l?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"border-b border-border p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold",children:l.subject}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[A(l.status),I(l.priority)]})]}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(Xi,{value:l.status,onValueChange:s=>{"open"!==s&&"in-progress"!==s&&"resolved"!==s&&"closed"!==s||(async s=>{if(l)try{const a=await tl.updateTicketStatus(l.id,s);c(a),t(e.map(e=>e.id===a.id?a:e)),Se.success(`Ticket ${s}`),await kn.createAuditLog({adminId:(null==j?void 0:j.id)||"admin",action:"support_ticket_status_update",targetType:"support_ticket",targetId:l.id,details:JSON.stringify({status:s})})}catch(a){const e=a instanceof Error?a:new Error(String(a));sl.error("Failed to update status",e),Se.error("Failed to update ticket status")}})(s).catch(e=>{const t=e instanceof Error?e:new Error(String(e));sl.error("Failed to update ticket status",t)})},children:[a.jsx(Zi,{className:"w-40",children:a.jsx(Ji,{})}),a.jsxs(en,{children:[a.jsx(tn,{value:"open",children:"Open"}),a.jsx(tn,{value:"in-progress",children:"In Progress"}),a.jsx(tn,{value:"resolved",children:"Resolved"}),a.jsx(tn,{value:"closed",children:"Closed"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"User:"})," ",a.jsx("span",{className:"font-medium",children:l.userName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",a.jsx("span",{className:"font-medium",children:l.userEmail})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Created:"})," ",a.jsx("span",{className:"font-medium",children:new Date(l.createdAt).toLocaleString()})]}),l.assignedTo&&a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Assigned to:"})," ",a.jsx("span",{className:"font-medium",children:l.assignedToName||l.assignedTo})]})]}),a.jsx("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:a.jsx("p",{className:"text-sm",children:l.description})})]}),a.jsx(mi,{className:"flex-1 p-4",children:a.jsx("div",{className:"space-y-4",children:d.map(e=>a.jsxs("div",{className:"flex gap-3 "+(e.isAdmin?"flex-row-reverse":""),children:[a.jsxs(Xr,{className:"w-8 h-8",children:[a.jsx(Jr,{src:e.userAvatar}),a.jsx(Zr,{children:e.userName.substring(0,2).toUpperCase()})]}),a.jsxs("div",{className:"flex-1 "+(e.isAdmin?"text-right":""),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-semibold text-sm",children:e.userName}),e.isAdmin&&a.jsx(Yr,{variant:"secondary",className:"text-xs",children:"Admin"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleString()})]}),a.jsx("div",{className:"inline-block p-3 rounded-lg "+(e.isAdmin?"bg-primary text-primary-foreground":"bg-muted"),children:a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.message})})]})]},e.id))})}),a.jsx("div",{className:"border-t border-border p-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ji,{value:m,onChange:e=>h(e.target.value),placeholder:"Type your message...",className:"flex-1 min-h-[80px]",onKeyDown:e=>{"Enter"===e.key&&e.metaKey&&k().catch(e=>{const t=e instanceof Error?e:new Error(String(e));sl.error("Failed to send message from keyboard",t)})}}),a.jsx(Ks,{onClick:()=>{k().catch(e=>{const t=e instanceof Error?e:new Error(String(e));sl.error("Failed to send message from button",t)})},disabled:!m.trim()||p,size:"icon",className:"h-[80px]","aria-label":"Send message",children:a.jsx(st,{size:20})})]})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ce,{size:48,className:"mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No ticket selected"}),a.jsx("p",{className:"text-muted-foreground",children:"Select a ticket from the list to view details and messages"})]})})})]}),a.jsx(Rr,{open:v,onOpenChange:y,children:a.jsxs(Dr,{className:"max-w-2xl",children:[a.jsxs(Lr,{children:[a.jsx(Ur,{children:"Create Support Ticket"}),a.jsx(zr,{children:"Create a new support ticket for a user"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ui,{children:"User ID"}),a.jsx(di,{placeholder:"Enter user ID"})]}),a.jsxs("div",{children:[a.jsx(ui,{children:"Subject"}),a.jsx(di,{placeholder:"Enter ticket subject"})]}),a.jsxs("div",{children:[a.jsx(ui,{children:"Description"}),a.jsx(ji,{placeholder:"Enter ticket description",rows:5})]}),a.jsxs("div",{children:[a.jsx(ui,{children:"Priority"}),a.jsxs(Xi,{defaultValue:"medium",children:[a.jsx(Zi,{children:a.jsx(Ji,{})}),a.jsxs(en,{children:[a.jsx(tn,{value:"low",children:"Low"}),a.jsx(tn,{value:"medium",children:"Medium"}),a.jsx(tn,{value:"high",children:"High"}),a.jsx(tn,{value:"urgent",children:"Urgent"})]})]})]})]}),a.jsxs(Or,{children:[a.jsx(Ks,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),a.jsx(Ks,{children:"Create Ticket"})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));const rl=Object.freeze(Object.defineProperty({__proto__:null,default:function(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold mb-2",children:"System Architecture Map"}),a.jsx("p",{className:"text-muted-foreground",children:"Complete overview of PawfectMatch platform architecture and data flows"})]}),a.jsxs(xi,{defaultValue:"overview",className:"w-full",children:[a.jsxs(fi,{className:"grid w-full grid-cols-5 mb-6",children:[a.jsx(vi,{value:"overview",children:"Overview"}),a.jsx(vi,{value:"layers",children:"Layers"}),a.jsx(vi,{value:"data",children:"Data Flow"}),a.jsx(vi,{value:"realtime",children:"Real-Time"}),a.jsx(vi,{value:"security",children:"Security"})]}),a.jsxs(yi,{value:"overview",className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(Kr,{className:"p-6 hover:shadow-lg transition-shadow",children:[a.jsx(Le,{size:32,className:"text-primary mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Client Applications"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Multi-platform user interfaces"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Web App"}),a.jsx(Yr,{variant:"default",children:"Active"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Mobile App"}),a.jsx(Yr,{variant:"secondary",children:"Planned"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Admin Console"}),a.jsx(Yr,{variant:"default",children:"Active"})]})]})]}),a.jsxs(Kr,{className:"p-6 hover:shadow-lg transition-shadow",children:[a.jsx(at,{size:32,className:"text-accent mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Business Logic"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Core service modules"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Matching Engine"}),a.jsx(Yr,{variant:"default",children:"Active"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Chat Service"}),a.jsx(Yr,{variant:"default",children:"Active"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Story Service"}),a.jsx(Yr,{variant:"default",children:"Active"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"AI Engine"}),a.jsx(Yr,{variant:"default",children:"Active"})]})]})]}),a.jsxs(Kr,{className:"p-6 hover:shadow-lg transition-shadow",children:[a.jsx(tt,{size:32,className:"text-secondary mb-4"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Data Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Persistent storage system"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Backend API"}),a.jsx(Yr,{variant:"default",children:"Active"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"User Profiles"}),a.jsx(Yr,{variant:"outline",children:"2.5K records"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Pet Profiles"}),a.jsx(Yr,{variant:"outline",children:"3.8K records"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Messages"}),a.jsx(Yr,{variant:"outline",children:"12K records"})]})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[a.jsx(rt,{size:24}),"External Services"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("div",{className:"text-sm font-semibold mb-1",children:"spark.llm (GPT)"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"AI/ML Processing"}),a.jsx(Yr,{variant:"default",className:"mt-2",children:"Connected"})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("div",{className:"text-sm font-semibold mb-1",children:"spark.user()"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"User Context"}),a.jsx(Yr,{variant:"default",className:"mt-2",children:"Connected"})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("div",{className:"text-sm font-semibold mb-1",children:"Media CDN"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Asset Delivery"}),a.jsx(Yr,{variant:"default",className:"mt-2",children:"Connected"})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("div",{className:"text-sm font-semibold mb-1",children:"Analytics"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Usage Tracking"}),a.jsx(Yr,{variant:"secondary",className:"mt-2",children:"Planned"})]})]})]})]}),a.jsx(yi,{value:"layers",className:"space-y-4",children:a.jsxs(Kr,{className:"p-6",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[a.jsx(it,{size:24}),"Architecture Layers"]}),a.jsx(mi,{className:"h-[500px] pr-4",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border-l-4 border-primary pl-4",children:[a.jsx("h4",{className:"font-bold text-lg mb-2",children:"Layer 1: Presentation"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"User-facing interfaces built with React and TypeScript"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Yr,{variant:"outline",children:"Web"}),a.jsx("span",{children:"React 19, TypeScript, Tailwind CSS, Framer Motion"})]}),a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Yr,{variant:"outline",children:"Mobile"}),a.jsx("span",{children:"React Native (Planned)"})]}),a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Yr,{variant:"outline",children:"Admin"}),a.jsx("span",{children:"React Dashboard with moderation tools"})]})]})]}),a.jsxs("div",{className:"border-l-4 border-accent pl-4",children:[a.jsx("h4",{className:"font-bold text-lg mb-2",children:"Layer 2: API Gateway"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Request routing, authentication, and rate limiting"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Yr,{variant:"outline",children:"REST"}),a.jsx("span",{children:"RESTful API endpoints"})]}),a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Yr,{variant:"outline",children:"WebSocket"}),a.jsx("span",{children:"Real-time bidirectional communication"})]}),a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Yr,{variant:"outline",children:"Auth"}),a.jsx("span",{children:"JWT-based authentication with refresh tokens"})]})]})]}),a.jsxs("div",{className:"border-l-4 border-secondary pl-4",children:[a.jsx("h4",{className:"font-bold text-lg mb-2",children:"Layer 3: Business Logic"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Core application services and algorithms"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("div",{className:"text-sm p-2 bg-muted rounded",children:"Matching Engine"}),a.jsx("div",{className:"text-sm p-2 bg-muted rounded",children:"Chat Service"}),a.jsx("div",{className:"text-sm p-2 bg-muted rounded",children:"Story Service"}),a.jsx("div",{className:"text-sm p-2 bg-muted rounded",children:"Moderation Service"}),a.jsx("div",{className:"text-sm p-2 bg-muted rounded",children:"Media Service"}),a.jsx("div",{className:"text-sm p-2 bg-muted rounded",children:"Notification Service"}),a.jsx("div",{className:"text-sm p-2 bg-muted rounded",children:"Analytics Engine"}),a.jsx("div",{className:"text-sm p-2 bg-muted rounded",children:"AI Engine"})]})]}),a.jsxs("div",{className:"border-l-4 border-primary pl-4",children:[a.jsx("h4",{className:"font-bold text-lg mb-2",children:"Layer 4: Data Layer"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Persistent storage using backend API endpoints"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"Collections:"})," Users, Pets, Matches, Messages, Stories, Reports, Notifications, Audit Logs"]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"Access Pattern:"})," RESTful API endpoints with centralized data management"]})]})]}),a.jsxs("div",{className:"border-l-4 border-accent pl-4",children:[a.jsx("h4",{className:"font-bold text-lg mb-2",children:"Layer 5: External Services"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Third-party integrations and APIs"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Yr,{children:"AI"}),a.jsx("span",{children:"spark.llm for GPT-4 powered features"})]}),a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Yr,{children:"CDN"}),a.jsx("span",{children:"Unsplash for demo images, Cloudinary planned"})]}),a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Yr,{children:"Auth"}),a.jsx("span",{children:"spark.user() for user context"})]})]})]})]})})]})}),a.jsx(yi,{value:"data",className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Swipe  Match  Chat Flow"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"1"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"User Swipes Right"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Action recorded in swipe-actions-","{userId}"]})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"2"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Mutual Like Check"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Query opposite user's swipe history"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"3"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Match Created"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Store in matches-","{userId}"," for both users"]})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"4"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Real-Time Notification"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Emit match_created event to both users"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Chat Room Ready"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Auto-provision chat with room ID"})]})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Real-Time Message Flow"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"1"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Message Composed"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"User types message in chat window"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"2"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Optimistic UI Update"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Show message immediately with 'sending' status"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"3"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Store in API"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Save to backend via REST API endpoint"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"4"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Socket Event"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Emit message_send event to recipient"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Delivery Confirmation"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Update status to 'delivered', then 'read'"})]})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Story Publishing Flow"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"1"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Media Upload"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Photo/video uploaded to CDN"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"2"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Story Created"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Store in stories-","{userId}"," with 24h expiry"]})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"3"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Distribution"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Add to followers' feeds based on visibility"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"4"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"View Tracking"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Record viewers in story-views-","{storyId}"]})]})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Admin Moderation Flow"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-destructive/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"1"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Report Submitted"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"User flags inappropriate content"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-destructive/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"2"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Queue Entry"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Added to moderation queue"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-destructive/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"3"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Moderator Review"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Admin console shows report details"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-destructive/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"4"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Action Taken"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Approve, warn, suspend, or ban"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-destructive/20 flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-sm font-bold",children:"5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-sm",children:"Audit Log"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Action recorded with who/what/when/why"})]})]})]})]})]})}),a.jsxs(yi,{value:"realtime",className:"space-y-4",children:[a.jsxs(Kr,{className:"p-6",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[a.jsx(Ze,{size:24}),"WebSocket Event System"]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[a.jsx(nt,{size:20}),"/chat Namespace"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"join_room"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Enter chat room"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"leave_room"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Exit chat room"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"message_send"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"New message"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"message_delivered"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Delivery confirm"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"message_read"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Read receipt"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"typing_start"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"User typing"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"typing_stop"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Stopped typing"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[a.jsx(ot,{size:20}),"/presence Namespace"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"user_online"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"User goes online"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"user_offline"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"User goes offline"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"user_away"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"User is idle"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"status_update"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Status change"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[a.jsx(ot,{size:20}),"/notifications Namespace"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"match_created"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"New match alert"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"like_received"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Someone liked pet"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"message_received"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"New message"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"story_viewed"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Story view count"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"verification_complete"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Pet verified"})]}),a.jsxs("div",{className:"p-2 bg-muted rounded text-sm",children:[a.jsx("code",{children:"moderation_action"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Mod decision"})]})]})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Connection Management"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Authentication"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"WebSocket connects with valid JWT access token. On 401, attempts token refresh once before disconnecting."})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Offline Queue"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Events sent while offline are queued locally and flushed on reconnect with exponential backoff."})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Event Acknowledgment"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"All events expect acknowledgment within 5 seconds. Unacknowledged events are retried with timeout."})]}),a.jsxs("div",{className:"p-4 border rounded-lg",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Heartbeat"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Client sends ping every 30 seconds. If no pong received in 10 seconds, connection is considered dead."})]})]})]})]}),a.jsx(yi,{value:"security",className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs(Kr,{className:"p-6",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[a.jsx(lt,{size:24}),"Authentication & Authorization"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"JWT Tokens"}),a.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[a.jsx("li",{children:" Access token: 15 minute lifetime"}),a.jsx("li",{children:" Refresh token: 7 day lifetime, rotating"}),a.jsx("li",{children:" Web: httpOnly cookies + CSRF token"}),a.jsx("li",{children:" Mobile: Secure encrypted storage"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Role-Based Access"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{children:"User"}),a.jsx(Yr,{children:"Basic Access"})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{children:"Moderator"}),a.jsx(Yr,{variant:"secondary",children:"Review & Moderate"})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{children:"Admin"}),a.jsx(Yr,{variant:"destructive",children:"Full Control"})]})]})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[a.jsx(ct,{size:24}),"Security Controls"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-3 border rounded-lg",children:[a.jsx("div",{className:"font-semibold text-sm mb-1",children:"Rate Limiting"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"100 requests per minute per user across auth, chat, and uploads"})]}),a.jsxs("div",{className:"p-3 border rounded-lg",children:[a.jsx("div",{className:"font-semibold text-sm mb-1",children:"Input Sanitization"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"All user input sanitized to prevent XSS, SQL injection, and script tags"})]}),a.jsxs("div",{className:"p-3 border rounded-lg",children:[a.jsx("div",{className:"font-semibold text-sm mb-1",children:"Content Moderation"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"AI-powered inappropriate content detection before storage"})]}),a.jsxs("div",{className:"p-3 border rounded-lg",children:[a.jsx("div",{className:"font-semibold text-sm mb-1",children:"Audit Logging"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Every admin action logged with actor, target, changes, and reason"})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Privacy Controls"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[a.jsx("span",{className:"text-sm",children:"Profile Visibility"}),a.jsx(Yr,{variant:"outline",children:"User Choice"})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[a.jsx("span",{className:"text-sm",children:"Location Sharing"}),a.jsx(Yr,{variant:"outline",children:"Opt-in"})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[a.jsx("span",{className:"text-sm",children:"Online Status"}),a.jsx(Yr,{variant:"outline",children:"Configurable"})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[a.jsx("span",{className:"text-sm",children:"Read Receipts"}),a.jsx(Yr,{variant:"outline",children:"Optional"})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[a.jsx("span",{className:"text-sm",children:"Story Visibility"}),a.jsx(Yr,{variant:"outline",children:"Tiered"})]})]})]}),a.jsxs(Kr,{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Data Protection"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"Encryption:"})," All data encrypted at rest and in transit using industry-standard protocols"]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"Retention:"})," Messages retained 90 days for inactive conversations, stories expire after 24 hours"]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"Deletion:"})," Users can permanently delete accounts with 30-day grace period"]}),a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"Export:"})," Users can export all their data in JSON format at any time"]})]})]})]})})]}),a.jsxs(Kr,{className:"p-6 bg-gradient-to-r from-primary/10 via-accent/10 to-secondary/10",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Documentation"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Complete system architecture documentation available in the repository"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(Yr,{variant:"outline",children:"ARCHITECTURE.md"}),a.jsx(Yr,{variant:"outline",children:"API Documentation"}),a.jsx(Yr,{variant:"outline",children:"WebSocket Events"}),a.jsx(Yr,{variant:"outline",children:"Data Contracts"}),a.jsx(Yr,{variant:"outline",children:"Security Model"})]})]})]})}},Symbol.toStringTag,{value:"Module"})),il=_t("UsersView");function nl({status:e}){const t={active:{variant:"default",label:"Active"},suspended:{variant:"secondary",label:"Suspended"},banned:{variant:"destructive",label:"Banned"}},s=t[e]??t.active;return s?a.jsx(Yr,{variant:s.variant,children:s.label}):null}function ol({label:e,value:t,icon:s}){return a.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[a.jsx(s,{size:14}),e]}),a.jsx("div",{className:"text-2xl font-bold capitalize",children:t})]})}const ll=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[e]=Gs("all-pets",[]),[t,r]=s.useState(""),[i,n]=s.useState(null),[o,l]=s.useState(!1),[c,d]=s.useState(!1),[u,m]=s.useState("email"),[h,p]=s.useState(""),[g,x]=s.useState(!1),[f,v]=s.useState([]),[y,j]=s.useState("all");s.useEffect(()=>{if(e&&e.length>0){const t=new Map;e.forEach(e=>{const s=e.ownerId||e.ownerName||"unknown",a=e.ownerName||"Unknown User";t.has(s)||t.set(s,{id:s,name:a,email:`${a.toLowerCase().replace(/\s+/g,".")}@example.com`,role:"user",status:"active",joinedAt:new Date(Date.now()-90*Math.random()*24*60*60*1e3).toISOString(),lastActive:new Date(Date.now()-7*Math.random()*24*60*60*1e3).toISOString(),petsCount:0,matchesCount:Math.floor(10*Math.random()),reportsCount:Math.floor(3*Math.random())});t.get(s).petsCount++}),v(Array.from(t.values()))}},[e]);const w=f.filter(e=>{const s=e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase()),a="all"===y||e.status===y;return s&&a}),b=f.filter(e=>"active"===e.status).length,N=f.filter(e=>"suspended"===e.status).length,S=f.filter(e=>"banned"===e.status).length;return a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"border-b border-border p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage users and their permissions"})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),a.jsx(di,{placeholder:"Search users by name or email...",value:t,onChange:e=>r(e.target.value),className:"pl-10"})]})})]})}),a.jsx("div",{className:"p-6",children:a.jsx(xi,{value:y,onValueChange:e=>{"all"!==e&&"active"!==e&&"suspended"!==e&&"banned"!==e||j(e)},children:a.jsxs(fi,{children:[a.jsxs(vi,{value:"all",children:["All (",f.length,")"]}),a.jsxs(vi,{value:"active",children:["Active (",b,")"]}),a.jsxs(vi,{value:"suspended",children:["Suspended (",N,")"]}),a.jsxs(vi,{value:"banned",children:["Banned (",S,")"]})]})})}),a.jsxs(mi,{className:"flex-1 px-6 pb-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.jsx(Qa,{visible:w.length>0,children:w.map((e,t)=>a.jsx(Da,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{delay:.03*t},children:a.jsx(Kr,{className:"hover:shadow-lg transition-shadow",children:a.jsx(Hr,{className:"p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs(Xr,{className:"w-12 h-12",children:[a.jsx(Jr,{src:e.avatar}),a.jsx(Zr,{children:e.name.substring(0,2).toUpperCase()})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-semibold truncate",children:e.name}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.email})]}),a.jsx(nl,{status:e.status})]}),a.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(qe,{size:14}),a.jsxs("span",{children:[e.petsCount," pets"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(ye,{size:14}),a.jsxs("span",{children:[e.matchesCount," matches"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(we,{size:14}),a.jsxs("span",{children:["Joined ",new Date(e.joinedAt).toLocaleDateString()]})]})]}),a.jsxs(Ks,{size:"sm",variant:"outline",className:"w-full mt-4",onClick:()=>(e=>{n(e),l(!0)})(e),children:[a.jsx(le,{size:16,className:"mr-2"}),"View Details"]})]})]})})})},e.id))})}),0===w.length&&a.jsx(Kr,{className:"p-12",children:a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx(qe,{size:48,className:"mx-auto text-muted-foreground"}),a.jsx("h3",{className:"text-lg font-semibold",children:"No users found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t?"Try adjusting your search query":"No users match the selected filters"})]})})]}),a.jsx(Rr,{open:o,onOpenChange:l,children:a.jsxs(Dr,{className:"max-w-2xl",children:[a.jsxs(Lr,{children:[a.jsx(Ur,{children:"User Details"}),a.jsx(zr,{children:"View and manage user information"})]}),i&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs(Xr,{className:"w-16 h-16",children:[a.jsx(Jr,{src:i.avatar}),a.jsx(Zr,{className:"text-lg",children:i.name.substring(0,2).toUpperCase()})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-xl font-bold",children:i.name}),a.jsx(nl,{status:i.status})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx(dt,{size:14}),i.email]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ol,{label:"Total Pets",value:i.petsCount.toString(),icon:qe}),a.jsx(ol,{label:"Total Matches",value:i.matchesCount.toString(),icon:ye}),a.jsx(ol,{label:"Reports Filed",value:i.reportsCount.toString(),icon:Ee}),a.jsx(ol,{label:"Account Role",value:i.role,icon:qe})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Joined:"}),a.jsx("span",{className:"font-medium",children:new Date(i.joinedAt).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Last Active:"}),a.jsx("span",{className:"font-medium",children:new Date(i.lastActive).toLocaleDateString()})]})]})]}),a.jsxs(Or,{className:"flex gap-2",children:["active"===(null==i?void 0:i.status)&&a.jsxs(a.Fragment,{children:[a.jsxs(Ks,{variant:"outline",onClick:()=>{i&&(async e=>{const t=f.map(t=>t.id===e?{...t,status:"suspended"}:t);v(t),l(!1),Se.success("User suspended");const s={adminId:"admin-current",action:"suspend_user",targetType:"user",targetId:e,details:JSON.stringify({duration:"7 days"})};await kn.createAuditLog(s)})(i.id).catch(e=>{const t=e instanceof Error?e:new Error(String(e));il.error("Failed to suspend user",t,{userId:i.id}),Se.error("Failed to suspend user: "+t.message)})},children:[a.jsx(Ee,{size:16,className:"mr-2"}),"Suspend (7 days)"]}),a.jsxs(Ks,{variant:"destructive",onClick:()=>{i&&(async e=>{const t=f.map(t=>t.id===e?{...t,status:"banned"}:t);v(t),l(!1),Se.success("User banned permanently");const s={adminId:"admin-current",action:"ban_user",targetType:"user",targetId:e,details:JSON.stringify({permanent:!0})};await kn.createAuditLog(s)})(i.id).catch(e=>{const t=e instanceof Error?e:new Error(String(e));il.error("Failed to ban user",t,{userId:i.id}),Se.error("Failed to ban user: "+t.message)})},children:[a.jsx(Ue,{size:16,className:"mr-2"}),"Ban Permanently"]})]}),("suspended"===(null==i?void 0:i.status)||"banned"===(null==i?void 0:i.status))&&a.jsxs(Ks,{variant:"default",onClick:()=>{i&&(async e=>{const t=f.map(t=>t.id===e?{...t,status:"active"}:t);v(t),l(!1),Se.success("User reactivated");const s={adminId:"admin-current",action:"reactivate_user",targetType:"user",targetId:e};await kn.createAuditLog(s)})(i.id).catch(e=>{const t=e instanceof Error?e:new Error(String(e));il.error("Failed to reactivate user",t,{userId:i.id}),Se.error("Failed to reactivate user: "+t.message)})},children:[a.jsx(ye,{size:16,className:"mr-2"}),"Reactivate User"]}),a.jsxs(Ks,{variant:"outline",onClick:()=>{d(!0),m("email"),p("")},children:[a.jsx(ge,{size:16,className:"mr-2"}),"Reset Password"]}),a.jsx(Ks,{variant:"outline",onClick:()=>l(!1),children:"Close"})]})]})}),a.jsx(Rr,{open:c,onOpenChange:d,children:a.jsxs(Dr,{className:"max-w-md",children:[a.jsxs(Lr,{children:[a.jsx(Ur,{children:"Reset Password"}),a.jsxs(zr,{children:["Reset password for ",(null==i?void 0:i.name)||(null==i?void 0:i.email)]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ks,{variant:"email"===u?"default":"outline",onClick:()=>m("email"),className:"flex-1",children:"Send Reset Email"}),a.jsx(Ks,{variant:"manual"===u?"default":"outline",onClick:()=>m("manual"),className:"flex-1",children:"Set New Password"})]}),"manual"===u&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"New Password"}),a.jsx(di,{type:"password",value:h,onChange:e=>p(e.target.value),placeholder:"Enter new password",minLength:8}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Password must be at least 8 characters long"})]}),"email"===u&&a.jsx("div",{className:"p-4 bg-muted rounded-lg",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:["A password reset email will be sent to ",null==i?void 0:i.email,". The user will receive a secure link to reset their password."]})})]}),a.jsxs(Or,{children:[a.jsx(Ks,{variant:"outline",onClick:()=>{d(!1),p("")},children:"Cancel"}),a.jsx(Ks,{onClick:()=>{(async()=>{if(i)try{x(!0);const e=await kn.resetUserPassword(i.id,{sendEmail:"email"===u,..."manual"===u&&h?{newPassword:h}:{}});if(e.success){Se.success(e.message||"Password reset successful");const t={adminId:"admin-current",action:"reset_user_password",targetType:"user",targetId:i.id,details:JSON.stringify({mode:u})};await kn.createAuditLog(t),d(!1),p(""),m("email")}}catch(e){const t=e instanceof Error?e:new Error(String(e));Se.error("Failed to reset password: "+t.message)}finally{x(!1)}})().catch(e=>{const t=e instanceof Error?e:new Error(String(e));il.error("Failed to reset password",t,{userId:null==i?void 0:i.id,mode:u}),Se.error("Failed to reset password: "+t.message)})},disabled:g||"manual"===u&&h.length<8,children:g?"Resetting...":"Reset Password"})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),cl=_t("VerificationAPI");const dl=new class{async getVerificationRequests(e){try{const t=new URLSearchParams;(null==e?void 0:e.status)&&e.status.length>0&&e.status.forEach(e=>t.append("status",e)),(null==e?void 0:e.petId)&&t.append("petId",e.petId),(null==e?void 0:e.userId)&&t.append("userId",e.userId);const s="/verification/requests"+(t.toString()?`?${t.toString()}`:"");return(await ga.get(s)).data.requests}catch(t){const s=t instanceof Error?t:new Error(String(t));throw cl.error("Failed to get verification requests",s,{filters:e}),s}}async updateVerificationStatus(e,t,s,a){try{const r={status:t,reviewedBy:s};void 0!==a&&(r.notes=a);return(await ga.post(`/verification/update-status?requestId=${e}`,r)).data.request}catch(r){const s=r instanceof Error?r:new Error(String(r));throw cl.error("Failed to update verification status",s,{requestId:e,status:t}),s}}},ul=_t("VerificationReviewDashboard");const ml=Object.freeze(Object.defineProperty({__proto__:null,VerificationReviewDashboard:function(){const[e,t]=s.useState([]),[r,i]=s.useState("pending"),[n,o]=s.useState(null),[l,c]=s.useState(""),[d,u]=s.useState(""),[m,h]=s.useState(!1),[p,g]=s.useState(!0),x=s.useCallback(async()=>{try{g(!0);const e="all"!==r?{status:[r]}:void 0,s=await dl.getVerificationRequests(e);t(s)}catch(e){const t=e instanceof Error?e:new Error(String(e));ul.error("Failed to load verification requests",t),Se.error("Failed to load verification requests")}finally{g(!1)}},[r]);s.useEffect(()=>{x()},[x]);const f=e.filter(e=>"all"===r||e.status===r),v=Nr({isVisible:p,enterTransition:"fade",exitTransition:"fade"}),y=Nr({isVisible:!p&&0===f.length,enterTransition:"scale",exitTransition:"fade"}),j=e=>{switch(e){case"verified":return"bg-green-500/10 text-green-500 border-green-500/20";case"rejected":return"bg-red-500/10 text-red-500 border-red-500/20";case"pending":return"bg-orange-500/10 text-orange-500 border-orange-500/20";case"expired":return"bg-gray-500/10 text-gray-500 border-gray-500/20";default:return"bg-blue-500/10 text-blue-500 border-blue-500/20"}},w=e=>{switch(e){case"premium":return"bg-linear-to-r from-yellow-500 to-orange-500 text-white";case"standard":return"bg-linear-to-r from-blue-500 to-purple-500 text-white";default:return"bg-linear-to-r from-green-500 to-teal-500 text-white"}},b=e=>{switch(e){case"premium":return"";case"standard":return"";default:return""}},N=e=>{switch(e){case"verified":return a.jsx(ye,{size:16,weight:"fill"});case"rejected":return a.jsx(je,{size:16,weight:"fill"});case"pending":return a.jsx(ve,{size:16});case"expired":return a.jsx(Ee,{size:16});default:return a.jsx(Q,{size:16})}},S={total:e.length,pending:e.filter(e=>"pending"===e.status).length,verified:e.filter(e=>"verified"===e.status).length,rejected:e.filter(e=>"rejected"===e.status).length,approvalRate:e.length>0?Math.round(e.filter(e=>"verified"===e.status).length/e.length*100):0};return a.jsxs("div",{className:"space-y-6 max-w-full",children:[a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2 flex-wrap",children:[a.jsx(Q,{size:28,weight:"fill",className:"text-primary shrink-0"}),a.jsx("span",{className:"wrap-break-word",children:"KYC Verification Review Dashboard"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Review and approve pet owner verification requests"})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[a.jsxs(Kr,{className:"p-4 bg-linear-to-br from-background to-muted/20",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Requests"}),a.jsx("div",{className:"text-3xl font-bold mt-1",children:S.total})]}),a.jsxs(Kr,{className:"p-4 bg-linear-to-br from-orange-500/10 to-orange-500/5 border-orange-500/20",children:[a.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[a.jsx(ve,{size:14}),"Pending Review"]}),a.jsx("div",{className:"text-3xl font-bold mt-1 text-orange-500",children:S.pending})]}),a.jsxs(Kr,{className:"p-4 bg-linear-to-br from-green-500/10 to-green-500/5 border-green-500/20",children:[a.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[a.jsx(ye,{size:14}),"Verified"]}),a.jsx("div",{className:"text-3xl font-bold mt-1 text-green-500",children:S.verified})]}),a.jsxs(Kr,{className:"p-4 bg-linear-to-br from-red-500/10 to-red-500/5 border-red-500/20",children:[a.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[a.jsx(je,{size:14}),"Rejected"]}),a.jsx("div",{className:"text-3xl font-bold mt-1 text-red-500",children:S.rejected})]}),a.jsxs(Kr,{className:"p-4 bg-linear-to-br from-primary/10 to-accent/10 border-primary/20",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Approval Rate"}),a.jsxs("div",{className:"text-3xl font-bold mt-1 bg-linear-to-r from-primary to-accent bg-clip-text text-transparent",children:[S.approvalRate,"%"]})]})]}),a.jsxs(xi,{value:r,onValueChange:e=>i(e),className:"w-full",children:[a.jsxs(fi,{className:"w-full grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-1",children:[a.jsxs(vi,{value:"all",className:"text-xs sm:text-sm",children:["All (",e.length,")"]}),a.jsxs(vi,{value:"pending",className:"text-xs sm:text-sm",children:["Pending (",S.pending,")"]}),a.jsxs(vi,{value:"verified",className:"text-xs sm:text-sm",children:["Verified (",S.verified,")"]}),a.jsxs(vi,{value:"rejected",className:"text-xs sm:text-sm",children:["Rejected (",S.rejected,")"]}),a.jsx(vi,{value:"expired",className:"text-xs sm:text-sm col-span-2 sm:col-span-1",children:"Expired"})]}),a.jsx(yi,{value:r,className:"mt-6",children:a.jsxs(mi,{className:"h-[500px] sm:h-[600px] pr-2 sm:pr-4",children:[v.shouldRender&&p&&a.jsx(hs,{style:v.animatedStyle,children:a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading verification requests..."})]})}),y.shouldRender&&!p&&0===f.length&&a.jsxs(hs,{style:y.animatedStyle,className:"text-center py-16",children:[a.jsx(Q,{size:64,className:"mx-auto text-muted-foreground mb-4 opacity-50"}),a.jsx("p",{className:"text-muted-foreground text-lg font-medium",children:"No requests in this category"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Check back later for new submissions"})]}),!p&&f.length>0&&a.jsx("div",{className:"space-y-4",children:f.map((e,t)=>a.jsx(Kr,{className:As("p-4 sm:p-5 cursor-pointer transition-all duration-300 hover:shadow-lg animate-in fade-in slide-in-from-bottom-4","hover:scale-[1.01] active:scale-[0.99]","pending"===e.status&&"border-orange-500/40 bg-orange-500/5"),style:{animationDelay:50*t+"ms"},onClick:()=>{js.impact("light"),o(e)},children:a.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[a.jsx(Xr,{className:"h-12 w-12 sm:h-16 sm:w-16 border-2 border-border shrink-0",children:a.jsx(Zr,{className:"text-base sm:text-lg",children:e.petId[0]||"?"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"flex items-start justify-between mb-2 gap-2",children:a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("h3",{className:"font-semibold text-base sm:text-lg truncate",children:["Pet ID: ",e.petId]}),a.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["Requested by User ",e.userId]})]})}),a.jsxs("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:[a.jsxs(Yr,{className:j(e.status),variant:"outline",children:[N(e.status),a.jsx("span",{className:"ml-1.5 font-medium",children:e.status.toUpperCase()})]}),a.jsxs(Yr,{className:w(e.verificationLevel),variant:"outline",children:[b(e.verificationLevel)," ",e.verificationLevel.toUpperCase()]}),e.trustScore&&a.jsxs(Yr,{variant:"outline",className:"bg-linear-to-r from-primary/10 to-accent/10",children:["Trust Score: ",e.trustScore]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(ut,{size:14}),a.jsxs("span",{children:[e.documents.length," documents"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(we,{size:14}),a.jsx("span",{children:new Date(e.requestedAt).toLocaleDateString()})]})]}),e.completedAt&&a.jsx("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-1",children:"verified"===e.status?a.jsxs(a.Fragment,{children:[a.jsx(ye,{size:12,className:"text-green-500"}),"Verified on ",new Date(e.completedAt).toLocaleString()]}):a.jsxs(a.Fragment,{children:[a.jsx(je,{size:12,className:"text-red-500"}),"Rejected on ",new Date(e.completedAt).toLocaleString()]})})]}),a.jsx(Ge,{size:20,className:"text-muted-foreground shrink-0 mt-4"})]})},e.id))})]})})]}),a.jsx(Rr,{open:null!==n,onOpenChange:()=>{o(null),c(""),u("")},children:a.jsxs(Dr,{className:"max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsx(Lr,{className:"shrink-0",children:a.jsxs(Ur,{className:"text-xl sm:text-2xl flex items-center gap-2",children:[a.jsx(Q,{size:24,weight:"fill",className:"text-primary shrink-0"}),a.jsx("span",{className:"truncate",children:"Verification Request Review"})]})}),n&&a.jsx(mi,{className:"flex-1 pr-2 sm:pr-4",children:a.jsxs("div",{className:"space-y-4 sm:space-y-6 pb-2",children:[a.jsxs(Kr,{className:"p-5 bg-linear-to-br from-primary/5 to-accent/5",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx(Xr,{className:"h-20 w-20 border-2 border-primary",children:a.jsx(Zr,{className:"text-xl",children:n.petId[0]||"?"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold",children:["Pet ID: ",n.petId]}),a.jsxs("p",{className:"text-muted-foreground",children:["User ID: ",n.userId]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Request ID: ",n.id]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),a.jsx("div",{className:"mt-1",children:a.jsxs(Yr,{className:j(n.status),children:[N(n.status),a.jsx("span",{className:"ml-1",children:n.status})]})})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Level"}),a.jsx("div",{className:"mt-1",children:a.jsxs(Yr,{className:w(n.verificationLevel),children:[b(n.verificationLevel)," ",n.verificationLevel]})})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Requested"}),a.jsx("p",{className:"font-medium",children:new Date(n.requestedAt).toLocaleString()})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Documents"}),a.jsxs("p",{className:"font-medium",children:[n.documents.length," uploaded"]})]})]})]}),a.jsxs(Kr,{className:"p-5",children:[a.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[a.jsx(ut,{size:18}),"Submitted Documents"]}),a.jsx("div",{className:"space-y-3",children:n.documents.map((e,t)=>a.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg flex items-center justify-between animate-in fade-in slide-in-from-left duration-300",style:{animationDelay:100*t+"ms"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-background rounded",children:e.fileName.endsWith(".pdf")?a.jsx(ut,{size:24,className:"text-red-500"}):a.jsx(oe,{size:24,className:"text-blue-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:e.type.replace(/_/g," ").toUpperCase()}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.fileName}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[(e.fileSize/1024/1024).toFixed(2)," MB  Uploaded"," ",new Date(e.uploadedAt).toLocaleDateString()]})]})]}),a.jsx(Ks,{variant:"outline",size:"sm",onClick:()=>{if(js.impact("light"),e.fileData){const t=document.createElement("a");t.href=e.fileData,t.download=e.fileName,t.click()}},children:a.jsx(mt,{size:16})})]},e.id))})]}),n.reviewNotes&&a.jsxs(Kr,{className:"p-5 border-blue-500/40 bg-blue-500/5",children:[a.jsx("h4",{className:"font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Review Notes"}),a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.reviewNotes}),n.reviewedBy&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Reviewed by ",n.reviewedBy," on"," ",n.completedAt?new Date(n.completedAt).toLocaleString():"N/A"]})]}),"pending"===n.status&&a.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Review Notes (Optional)"}),a.jsx(ji,{value:l,onChange:e=>c(e.target.value),placeholder:"Add any notes about this verification review...",rows:3,className:"resize-none"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Rejection Reason (Required if rejecting)"}),a.jsx(ji,{value:d,onChange:e=>u(e.target.value),placeholder:"Provide detailed feedback about why this verification is being rejected...",rows:3,className:"resize-none"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs(Ks,{onClick:async()=>{if(n){h(!0),js.impact("medium");try{const{userService:e}=await Pt(async()=>{const{userService:e}=await Promise.resolve().then(()=>Tr);return{userService:e}},void 0),t=await e.user();if(!t)throw new Error("User not authenticated");await dl.updateVerificationStatus(n.id,"approved",t.id,l),js.success(),Se.success("Verification Approved!",{description:"Pet verification has been approved"}),o(null),c(""),await x()}catch(e){const t=e instanceof Error?e:new Error(String(e));ul.error("Failed to approve verification",t),js.error(),Se.error("Failed to approve verification")}finally{h(!1)}}},disabled:m,className:"bg-linear-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white shadow-lg",size:"lg",children:[a.jsx(ye,{size:20,weight:"fill",className:"mr-2"}),"Approve & Verify"]}),a.jsxs(Ks,{onClick:async()=>{if(n&&d){h(!0),js.impact("medium");try{const{userService:e}=await Pt(async()=>{const{userService:e}=await Promise.resolve().then(()=>Tr);return{userService:e}},void 0),t=await e.user();if(!t)throw new Error("User not authenticated");await dl.updateVerificationStatus(n.id,"rejected",t.id,`${d}${l?"\n\n"+l:""}`),js.trigger("heavy"),Se.error("Verification Rejected",{description:"User has been notified of the rejection reason"}),o(null),c(""),u(""),await x()}catch(e){const t=e instanceof Error?e:new Error(String(e));ul.error("Failed to reject verification",t),js.error(),Se.error("Failed to reject verification")}finally{h(!1)}}else Se.error("Please provide a rejection reason")},disabled:m||!d,variant:"destructive",className:"shadow-lg",size:"lg",children:[a.jsx(je,{size:20,weight:"fill",className:"mr-2"}),"Reject Request"]})]})]})]})})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{ts as $,hs as A,Yr as B,Kr as C,Rr as D,Gs as E,mi as F,Xr as G,Jr as H,di as I,Zr as J,us as K,ui as L,Da as M,Jt as N,Zt as O,ei as P,es as Q,wa as R,ti as S,ji as T,is as U,as as V,ss as W,ms as X,rs as Y,Qt as Z,Pt as _,vs as a,yr as a$,Ra as a0,Xt as a1,ks as a2,Is as a3,Us as a4,Qi as a5,Or as a6,qi as a7,ws as a8,Ps as a9,gi as aA,Gt as aB,Ni as aC,Ai as aD,Si as aE,Oa as aF,_a as aG,Fa as aH,Wt as aI,Ht as aJ,Cr as aK,rr as aL,ir as aM,tr as aN,er as aO,ar as aP,Za as aQ,Ja as aR,Js as aS,cs as aT,dn as aU,ln as aV,mn as aW,gr as aX,xr as aY,fr as aZ,vr as a_,ga as aa,la as ab,Kt as ac,xi as ad,fi as ae,vi as af,yi as ag,Ya as ah,pi as ai,ba as aj,Na as ak,Cs as al,bi as am,br as an,nr as ao,Mt as ap,sr as aq,ya as ar,Xa as as,ci as at,Li as au,cr as av,La as aw,Sr as ax,Ar as ay,or as az,pr as b,Fr as b0,ja as b1,Ms as b2,_s as b3,ns as b4,Ws as b5,$o as b6,Lt as b7,qt as b8,bs as b9,Tr as ba,xn as bb,jn as bc,Nn as bd,Fn as be,Mn as bf,On as bg,Wn as bh,Xn as bi,io as bj,oo as bk,ho as bl,po as bm,jo as bn,No as bo,Co as bp,Lo as bq,Yo as br,Ho as bs,Zo as bt,al as bu,rl as bv,ll as bw,ml as bx,As as c,Ks as d,$r as e,_t as f,Dr as g,js as h,Lr as i,Ur as j,zr as k,lr as l,Nr as m,Hr as n,nn as o,Qa as p,qr as q,Gr as r,Wr as s,Xi as t,Zs as u,Zi as v,Ji as w,en as x,tn as y,Pr as z};
