const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PetPhotoAnalyzer-DOP02-Z1.js","assets/react-vendor-atdIga2R.js","assets/vendor-B2U5onNE.js","assets/utils-vendor-7mYxNw04.js","assets/ui-vendor-CttiZxwU.js","assets/feature-admin-g8AIjMAb.js","assets/feature-adoption-C919WvgL.js","assets/feature-community-DxZ7YsOF.js","assets/feature-chat-CPR2_-OR.js","assets/VisualAnalysisDemo-PcAXRdup.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,r)=>((t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r)(t,"symbol"!=typeof s?s+"":s,r);import{aa as s,ab as r,f as a,E as i,N as n,a as l,a2 as o,V as c,W as d,U as u,m,O as p,Q as h,D as x,g as f,i as g,j as y,A as b,d as j,L as v,B as w,I as N,T as S,_ as C,u as k,M as P,h as A,C as E,q as D,r as q,s as I,n as F,b as T,aB as R,k as z,aC as L,c as M,aD as _,ap as B,aE as O,P as U,a9 as $,F as V,aF as G,a0 as H,aG as Y,aH as W,a6 as J,an as Q,ar as K}from"./feature-admin-g8AIjMAb.js";import{r as X,j as Z,Y as ee,aJ as te,at as se,am as re,W as ae,aM as ie,ci as ne,cj as le,ck as oe,cl as ce,al as de,aF as ue,a3 as me,a6 as pe,bK as he,aP as xe,c4 as fe,_ as ge,a$ as ye,ag as be,ai as je,ah as ve,av as we,cm as Ne,aZ as Se,U as Ce,cn as ke,bY as Pe,c8 as Ae,aG as Ee,cd as De,bP as qe,bQ as Ie,bR as Fe,aK as Te,aL as Re}from"./react-vendor-atdIga2R.js";import{P as ze}from"./view-AdoptionView.tsx-BJlxubb2.js";import{H as Le}from"./feature-stories-DX9BRjll.js";import{p as Me}from"./feature-community-DxZ7YsOF.js";import{m as _e,s as Be,r as Oe}from"./feature-chat-CPR2_-OR.js";const Ue={me:async()=>(await s.get(r.AUTH.ME)).data,login:async e=>(await s.post(r.AUTH.LOGIN,e)).data,register:async e=>(await s.post(r.AUTH.REGISTER,e)).data,async logout(){await s.post(r.AUTH.LOGOUT)},refresh:async()=>(await s.post(r.AUTH.REFRESH)).data,async updatePassword(e){await s.post(r.AUTH.RESET_PASSWORD,e)}},$e=a("AuthContext"),Ve=X.createContext(void 0);function Ge(){const e=X.useContext(Ve);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}function He({children:e}){const[t,r]=X.useState(null),[a,i]=X.useState(!0);X.useEffect(()=>{let e=!1;return(async()=>{try{let a=null,i=null;try{"undefined"!=typeof window&&"undefined"!=typeof localStorage&&(a=localStorage.getItem("access_token"),i=localStorage.getItem("refresh_token"))}catch(t){const e=t instanceof Error?t:new Error(String(t));$e.error("Failed to read tokens from localStorage",e)}if(a&&!e){s.setTokens(a,i??void 0);const t=await Ue.me();e||(r(t),$e.info("User profile loaded",{userId:t.id}))}}catch(a){if(!e){$e.error("Failed to initialize auth",a);try{"undefined"!=typeof window&&"undefined"!=typeof localStorage&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"))}catch(t){const e=t instanceof Error?t:new Error(String(t));$e.error("Failed to clear tokens from localStorage",e)}s.logout()}}finally{e||i(!1)}})(),()=>{e=!0}},[]);const n={user:t,isAuthenticated:!!t,isLoading:a,login:async(e,t)=>{i(!0);try{const a=await Ue.login({email:e,password:t});return s.setTokens(a.accessToken,a.refreshToken),r(a.user),$e.info("User logged in successfully",{userId:a.user.id}),a.user}catch(a){throw $e.error("Login failed",a),a}finally{i(!1)}},register:async(e,t,a)=>{i(!0);try{const i=await Ue.register({email:e,password:t,displayName:a});return s.setTokens(i.accessToken,i.refreshToken),r(i.user),$e.info("User registered successfully",{userId:i.user.id}),i.user}catch(n){throw $e.error("Registration failed",n),n}finally{i(!1)}},logout:async()=>{try{await Ue.logout()}catch(e){$e.warn("Logout API call failed, proceeding with local logout",e)}s.logout(),r(null),$e.info("User logged out")},refreshAuth:async()=>{try{await(async()=>{try{const e=await Ue.me();r(e),$e.info("User profile loaded",{userId:e.id})}catch(e){$e.error("Failed to load user profile",e);try{"undefined"!=typeof window&&"undefined"!=typeof localStorage&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"))}catch(t){const e=t instanceof Error?t:new Error(String(t));$e.error("Failed to clear tokens from localStorage",e)}s.logout()}})()}catch(e){throw $e.error("Failed to refresh auth",e),e}}};return Z.jsx(Ve.Provider,{value:n,children:e})}const Ye=[{id:"energetic-dog",name:"Energetic Dog",type:"dog",description:"Perfect for active dogs who love running, playing, and outdoor adventures",emoji:"ðŸ•â€ðŸ¦º",defaults:{size:"medium",activityLevel:"very-high",personality:["Energetic","Playful","Social","Friendly","Loyal"],interests:["Running","Fetch","Hiking","Parks","Swimming","Agility"],lookingFor:["Playdate","Running Buddy","Adventure Buddy","Park Companion"],bio:"Full of energy and always ready for adventure! Loves outdoor activities and making new friends at the park."}},{id:"calm-dog",name:"Calm Companion Dog",type:"dog",description:"Ideal for gentle, relaxed dogs who prefer quiet companionship",emoji:"ðŸ¶",defaults:{size:"medium",activityLevel:"moderate",personality:["Calm","Gentle","Affectionate","Loyal","Friendly"],interests:["Cuddling","Treats","Toys","Car Rides","Beach"],lookingFor:["Cuddle Buddy","Walking Buddy","Best Friend"],bio:"A gentle soul who loves calm walks, cozy cuddles, and quiet time with friends. Perfect for relaxed playdates."}},{id:"social-dog",name:"Social Butterfly Dog",type:"dog",description:"For dogs who love meeting new friends and group activities",emoji:"ðŸ¦®",defaults:{size:"medium",activityLevel:"high",personality:["Social","Friendly","Playful","Energetic","Affectionate"],interests:["Parks","Playdate","Fetch","Training","Treats","Toys"],lookingFor:["Best Friend","Playdate","Park Companion","Walking Buddy"],bio:"Loves making new friends and never meets a stranger! Always excited for group play and social activities."}},{id:"small-lap-dog",name:"Lap Dog",type:"dog",description:"Small breeds who love cuddles and close companionship",emoji:"ðŸ•",defaults:{size:"small",activityLevel:"low",personality:["Affectionate","Gentle","Calm","Loyal","Social"],interests:["Cuddling","Toys","Treats","Car Rides","Parks"],lookingFor:["Cuddle Buddy","Best Friend","Playmate"],bio:"Small but mighty! Loves being close to loved ones and enjoys gentle play with friends."}},{id:"working-dog",name:"Working Dog",type:"dog",description:"Intelligent, trainable dogs who love having a job to do",emoji:"ðŸ•â€ðŸ¦º",defaults:{size:"large",activityLevel:"very-high",personality:["Loyal","Protective","Social","Energetic","Friendly"],interests:["Training","Agility","Running","Fetch","Hiking","Swimming"],lookingFor:["Training Partner","Adventure Buddy","Best Friend"],bio:"Smart, driven, and always ready for training sessions or outdoor challenges. Looking for equally motivated companions."}},{id:"playful-cat",name:"Playful Cat",type:"cat",description:"Active cats who love toys, climbing, and interactive play",emoji:"ðŸ±",defaults:{size:"small",activityLevel:"high",personality:["Playful","Curious","Energetic","Social","Affectionate"],interests:["Toys","Climbing","Laser Pointer","Hunting","Catnip","Playing"],lookingFor:["Playmate","Play Partner","Friend"],bio:"Always up for a good play session! Loves chasing toys, climbing adventures, and interactive games."}},{id:"lap-cat",name:"Lap Cat",type:"cat",description:"Affectionate cats who love cuddles and close companionship",emoji:"ðŸ˜º",defaults:{size:"small",activityLevel:"low",personality:["Affectionate","Calm","Gentle","Lap Cat","Social"],interests:["Cuddling","Napping","Windows","Treats","Scratching"],lookingFor:["Cuddle Buddy","Nap Companion","Friend"],bio:"The ultimate cuddle companion. Loves cozy naps, gentle pets, and quiet companionship."}},{id:"independent-cat",name:"Independent Cat",type:"cat",description:"Self-sufficient cats who enjoy their own space",emoji:"ðŸˆ",defaults:{size:"medium",activityLevel:"moderate",personality:["Independent","Calm","Curious","Gentle","Playful"],interests:["Windows","Exploring","Hunting","Treats","Toys"],lookingFor:["Friend","Window Watching Friend","Playmate"],bio:"Values independence but enjoys occasional companionship. Perfect for friends who respect boundaries."}},{id:"curious-cat",name:"Curious Explorer Cat",type:"cat",description:"Adventurous cats who love exploring and discovering",emoji:"ðŸˆâ€â¬›",defaults:{size:"medium",activityLevel:"high",personality:["Curious","Adventurous","Playful","Social","Independent"],interests:["Exploring","Climbing","Hunting","Toys","Playing","Windows"],lookingFor:["Friend","Play Partner","Playmate"],bio:"Always on an adventure! Loves exploring new places and discovering hidden treasures around the house."}},{id:"social-bird",name:"Social Bird",type:"bird",description:"Friendly birds who love interaction and companionship",emoji:"ðŸ¦œ",defaults:{size:"small",activityLevel:"high",personality:["Social","Vocal","Playful","Friendly","Interactive"],interests:["Singing","Talking","Social Time","Toys","Playing","Training"],lookingFor:["Cage Mate","Singing Partner","Friend","Flock Member"],bio:"Loves to chat and sing! Always happy to have company and enjoys interactive play."}},{id:"singing-bird",name:"Singing Bird",type:"bird",description:"Musical birds who love to vocalize and perform",emoji:"ðŸ¦",defaults:{size:"small",activityLevel:"moderate",personality:["Vocal","Musical","Social","Playful","Friendly"],interests:["Singing","Music","Talking","Social Time","Perching","Treats"],lookingFor:["Singing Partner","Friend","Social Buddy"],bio:"A natural performer who loves to sing and vocalize. Looking for a duet partner!"}},{id:"calm-bird",name:"Calm Companion Bird",type:"bird",description:"Gentle, quiet birds who prefer peaceful environments",emoji:"ðŸ•Šï¸",defaults:{size:"small",activityLevel:"low",personality:["Calm","Gentle","Affectionate","Independent","Friendly"],interests:["Perching","Treats","Social Time","Foraging","Toys"],lookingFor:["Friend","Peaceful Companion","Cage Mate"],bio:"Enjoys a peaceful environment and gentle companionship. Perfect for quiet, relaxed interactions."}},{id:"bonded-rabbit",name:"Bonded Pair Rabbit",type:"rabbit",description:"Rabbits seeking a lifelong companion",emoji:"ðŸ°",defaults:{size:"small",activityLevel:"moderate",personality:["Social","Affectionate","Playful","Gentle","Cuddly"],interests:["Hopping","Treats","Toys","Cuddling","Garden Time","Grooming"],lookingFor:["Bonded Pair","Cuddle Buddy","Friend","Warren Mate"],bio:"Looking for a special bunny to bond with for life. Loves cuddles and spending time together."}},{id:"playful-rabbit",name:"Playful Rabbit",type:"rabbit",description:"Active rabbits who love to hop, explore, and play",emoji:"ðŸ‡",defaults:{size:"medium",activityLevel:"high",personality:["Playful","Active","Curious","Social","Friendly"],interests:["Hopping","Exploring","Running","Playing","Toys","Digging"],lookingFor:["Play Companion","Exercise Partner","Friend"],bio:"Full of energy and loves to hop around! Always ready for playtime and exploring together."}},{id:"gentle-rabbit",name:"Gentle Rabbit",type:"rabbit",description:"Calm, sweet rabbits who love quiet companionship",emoji:"ðŸ°",defaults:{size:"small",activityLevel:"low",personality:["Calm","Gentle","Affectionate","Cuddly","Social"],interests:["Cuddling","Treats","Grooming","Garden Time","Hiding"],lookingFor:["Cuddle Buddy","Friend","Warren Mate"],bio:"A gentle soul who loves quiet moments and soft pets. Perfect for calm, relaxed companionship."}},{id:"community-fish",name:"Community Fish",type:"fish",description:"Peaceful fish perfect for community tanks",emoji:"ðŸ ",defaults:{size:"small",activityLevel:"moderate",personality:["Peaceful","Social","Active","Hardy","Schooling"],interests:["Swimming","Schooling","Exploring","Plants","Community Members"],lookingFor:["Tank Mate","School Member","Peaceful Companion","Community Member"],bio:"A peaceful community member who gets along with everyone. Perfect for harmonious tank life."}},{id:"colorful-fish",name:"Colorful Display Fish",type:"fish",description:"Beautiful, vibrant fish that are the centerpiece of any tank",emoji:"ðŸŸ",defaults:{size:"medium",activityLevel:"moderate",personality:["Active","Colorful","Social","Hardy","Peaceful"],interests:["Swimming","Exploring","Decorations","Feeding Time","Surface Activity"],lookingFor:["Tank Mate","Peaceful Companion","Friend"],bio:"A stunning addition to any aquarium! Active, colorful, and peaceful with compatible tank mates."}},{id:"schooling-fish",name:"Schooling Fish",type:"fish",description:"Fish who thrive in groups and love swimming together",emoji:"ðŸ ",defaults:{size:"small",activityLevel:"high",personality:["Social","Schooling","Active","Peaceful","Hardy"],interests:["Schooling","Swimming","Exploring","Plants","Feeding Time"],lookingFor:["School Member","Tank Mate","Community Member","Friend"],bio:"Happiest in a school! Loves swimming in synchronized groups and exploring together."}}];const We=X.lazy(()=>C(()=>import("./PetPhotoAnalyzer-DOP02-Z1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(e=>({default:e.default}))),Je=[{value:"dog",label:"Dog",icon:ie,emoji:"ðŸ•"},{value:"cat",label:"Cat",icon:ne,emoji:"ðŸˆ"},{value:"bird",label:"Bird",icon:le,emoji:"ðŸ¦œ"},{value:"rabbit",label:"Rabbit",icon:oe,emoji:"ðŸ°"},{value:"fish",label:"Fish",icon:ce,emoji:"ðŸ "},{value:"other",label:"Other",icon:de,emoji:"ðŸ¾"}],Qe={dog:["Playful","Calm","Energetic","Gentle","Social","Independent","Affectionate","Loyal","Friendly","Protective"],cat:["Independent","Playful","Calm","Affectionate","Curious","Gentle","Social","Vocal","Lap Cat","Adventurous"],bird:["Vocal","Social","Playful","Calm","Affectionate","Independent","Curious","Musical","Friendly","Interactive"],rabbit:["Calm","Playful","Gentle","Social","Curious","Affectionate","Independent","Active","Friendly","Cuddly"],fish:["Peaceful","Active","Social","Solitary","Hardy","Delicate","Colorful","Bottom-dweller","Surface-swimmer","Schooling"],other:["Playful","Calm","Energetic","Gentle","Social","Independent","Affectionate","Curious","Friendly","Active"]},Ke={dog:["Fetch","Swimming","Hiking","Running","Cuddling","Treats","Toys","Parks","Beach","Car Rides","Training","Agility"],cat:["Toys","Laser Pointer","Catnip","Climbing","Hunting","Cuddling","Treats","Windows","Scratching","Exploring","Napping","Playing"],bird:["Singing","Talking","Flying","Toys","Treats","Perching","Foraging","Social Time","Music","Training","Exploring","Playing"],rabbit:["Hopping","Exploring","Digging","Chewing","Treats","Toys","Cuddling","Running","Hiding","Garden Time","Playing","Grooming"],fish:["Swimming","Exploring","Hiding","Feeding Time","Plants","Decorations","Schooling","Bubble Nests","Surface Activity","Bottom Foraging"],other:["Exploring","Treats","Toys","Cuddling","Playing","Exercise","Social Time","Training","Napping","Activities"]},Xe={dog:["Playdate","Walking Buddy","Best Friend","Training Partner","Adventure Buddy","Park Companion"],cat:["Playmate","Cuddle Buddy","Window Watching Friend","Nap Companion","Play Partner","Friend"],bird:["Cage Mate","Singing Partner","Play Companion","Social Buddy","Friend","Flock Member"],rabbit:["Bonded Pair","Play Companion","Cuddle Buddy","Exercise Partner","Friend","Warren Mate"],fish:["Tank Mate","School Member","Peaceful Companion","Breeding Partner","Community Member","Friend"],other:["Companion","Playmate","Friend","Social Buddy","Activity Partner","Best Friend"]};function Ze({open:e,onOpenChange:t,editingPet:s}){const[,r]=i("user-pets",[]),[,a]=i("all-pets",[]),[C,k]=X.useState("type"),[P,A]=X.useState("dog"),[E,D]=X.useState(null),[q,I]=X.useState(""),[F,T]=X.useState(""),[R,z]=X.useState(""),[L,M]=X.useState("male"),[_,B]=X.useState("medium"),[O,U]=X.useState(""),[$,V]=X.useState(""),[G,H]=X.useState(""),[Y,W]=X.useState([]),[J,Q]=X.useState([]),[K,ie]=X.useState([]),ne=n(1),le=n(0),oe=l(),ce=o(),de=n(0);X.useEffect(()=>{de.value=c(d(h(10),h(-10),h(0)))},[de]);const me=u(()=>({transform:[{rotate:`${de.value}deg`}]})),pe=u(()=>({transform:[{scale:1}]})),he=m({isVisible:!!O}),xe=m({isVisible:"complete"!==C});X.useEffect(()=>{ne.value=p(0),le.value=p(-20);const e=setTimeout(()=>{ne.value=p(1),le.value=p(0)},50);return()=>{clearTimeout(e)}},[C,ne,le]);const fe=u(()=>({opacity:ne.value,transform:[{translateX:le.value}]})),ge=n(0),ye=X.useCallback(()=>{const e=["type","basics","characteristics","photo","personality","preferences","complete"];return(e.indexOf(C)+1)/e.length*100},[C]);X.useEffect(()=>{ge.value=h(ye())},[C,ye,ge]);const be=u(()=>({width:`${ge.value}%`}));X.useEffect(()=>{s?(k("basics"),D(null),I(s.name),T(s.breed),z(s.age.toString()),M(s.gender),B(s.size),U(s.photo),V(s.bio),H(s.location),W(s.personality),Q(s.interests),ie(s.lookingFor)):je()},[s,e]);const je=()=>{k("type"),A("dog"),D(null),I(""),T(""),z(""),M("male"),B("medium"),U(""),V(""),H(""),W([]),Q([]),ie([])},ve=(e,t,s)=>{e.includes(t)?s(e.filter(e=>e!==t)):s([...e,t])},we=()=>{const e=["type","template","basics","characteristics","photo","personality","preferences","complete"],t=e.indexOf(C);if(t>=0&&t<e.length-1){const s=e[t+1];s&&k(s)}},Ne=()=>{k("basics")};return Z.jsx(x,{open:e,onOpenChange:t,children:Z.jsxs(f,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[Z.jsx(g,{children:Z.jsxs(y,{className:"text-xl flex items-center gap-2",children:[Z.jsx(b,{style:me,children:"ðŸ¾"}),s?"Edit Pet Profile":"Create Pet Profile"]})}),Z.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden mb-6",children:Z.jsx(b,{className:"h-full bg-linear-to-r from-primary to-accent",style:be})}),xe.shouldRender&&"complete"!==C&&Z.jsx(b,{style:xe.animatedStyle,children:(()=>{var e,t;switch(C){case"type":return Z.jsxs(b,{style:fe,className:"space-y-6",children:[Z.jsxs("div",{className:"text-center mb-6",children:[Z.jsx("h3",{className:"text-2xl font-bold mb-2",children:"What type of pet do you have?"}),Z.jsx("p",{className:"text-muted-foreground",children:"Choose the option that best describes your companion"})]}),Z.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Je.map(e=>{const t=e.icon;return Z.jsxs(b,{style:ce.animatedStyle,onClick:()=>{A(e.value),setTimeout(()=>we(),400)},className:"relative p-6 rounded-2xl border-2 transition-all duration-300 cursor-pointer "+(P===e.value?"border-primary bg-primary/10 shadow-lg shadow-primary/20":"border-border bg-card hover:border-primary/50 hover:bg-card/80"),onMouseEnter:oe.handleEnter,onMouseLeave:oe.handleLeave,children:[Z.jsx(b,{style:oe.animatedStyle,children:Z.jsxs("div",{className:"flex flex-col items-center gap-3",children:[Z.jsx("span",{className:"text-4xl",children:e.emoji}),Z.jsx(t,{size:32,weight:"duotone",className:"text-primary"}),Z.jsx("span",{className:"font-semibold text-lg",children:e.label})]})}),P===e.value&&Z.jsx(b,{style:pe,className:"absolute top-2 right-2 bg-primary text-primary-foreground rounded-full p-1",children:Z.jsx(se,{size:16,weight:"bold"})})]},e.value)})})]},"type");case"template":{const e=(t=P,Ye.filter(e=>e.type===t));return Z.jsxs(b,{style:fe,className:"space-y-6",children:[Z.jsxs("div",{className:"text-center mb-6",children:[Z.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Choose a profile template"}),Z.jsx("p",{className:"text-muted-foreground",children:"Pre-fill your pet's profile with common traits, or skip to customize everything"})]}),Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[400px] overflow-y-auto pr-2",children:e.map(e=>Z.jsx(b,{type:"button",onClick:()=>{(e=>{D(e),e.defaults.size&&B(e.defaults.size),e.defaults.breed&&T(e.defaults.breed),e.defaults.bio&&V(e.defaults.bio),W(e.defaults.personality),Q(e.defaults.interests),ie(e.defaults.lookingFor)})(e),setTimeout(()=>we(),300)},className:"relative p-4 rounded-xl border-2 text-left transition-all duration-300 "+((null==E?void 0:E.id)===e.id?"border-primary bg-primary/10 shadow-lg shadow-primary/20":"border-border bg-card hover:border-primary/50 hover:bg-card/80"),children:Z.jsxs("div",{className:"flex items-start gap-3",children:[Z.jsx("span",{className:"text-3xl shrink-0",children:e.emoji}),Z.jsxs("div",{className:"flex-1 min-w-0",children:[Z.jsxs("div",{className:"flex items-center justify-between mb-1",children:[Z.jsx("h4",{className:"font-semibold text-base",children:e.name}),(null==E?void 0:E.id)===e.id&&Z.jsx(b,{className:"bg-primary text-primary-foreground rounded-full p-1 shrink-0",children:Z.jsx(se,{size:14,weight:"bold"})})]}),Z.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),Z.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[e.defaults.personality.slice(0,3).map(e=>Z.jsx(w,{variant:"secondary",className:"text-xs",children:e},e)),e.defaults.personality.length>3&&Z.jsxs(w,{variant:"outline",className:"text-xs",children:["+",e.defaults.personality.length-3]})]})]})]})},e.id))}),Z.jsxs(j,{type:"button",variant:"outline",className:"w-full",onClick:Ne,children:[Z.jsx(ue,{size:16,className:"mr-2"}),"Skip & Customize From Scratch"]})]},"template")}case"basics":return Z.jsxs(b,{className:"space-y-6",children:[Z.jsxs("div",{className:"text-center mb-6",children:[Z.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tell us the basics"}),Z.jsxs("p",{className:"text-muted-foreground",children:["What's your ",null==(e=Je.find(e=>e.value===P))?void 0:e.label.toLowerCase(),"'s name, breed, and age?"]})]}),Z.jsxs("div",{className:"space-y-4",children:[Z.jsxs("div",{children:[Z.jsx(v,{htmlFor:"name",children:"Name *"}),Z.jsx(N,{id:"name",value:q,onChange:e=>I(e.target.value),placeholder:"e.g., "+("dog"===P?"Max":"cat"===P?"Whiskers":"bird"===P?"Charlie":"rabbit"===P?"Fluffy":"fish"===P?"Bubbles":"Buddy"),className:"mt-1",autoFocus:!0})]}),Z.jsxs("div",{children:[Z.jsx(v,{htmlFor:"breed",children:"Breed / Species *"}),Z.jsx(N,{id:"breed",value:F,onChange:e=>T(e.target.value),placeholder:"e.g., "+("dog"===P?"Golden Retriever":"cat"===P?"Maine Coon":"bird"===P?"Parakeet":"rabbit"===P?"Holland Lop":"fish"===P?"Betta":"Mixed"),className:"mt-1"})]}),Z.jsxs("div",{children:[Z.jsx(v,{htmlFor:"age",children:"Age (in years) *"}),Z.jsx(N,{id:"age",type:"number",min:"0",max:"30",value:R,onChange:e=>z(e.target.value),placeholder:"3",className:"mt-1"})]})]})]},"basics");case"characteristics":return Z.jsxs(b,{className:"space-y-6",children:[Z.jsxs("div",{className:"text-center mb-6",children:[Z.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Physical characteristics"}),Z.jsxs("p",{className:"text-muted-foreground",children:["Help others know more about ",q||"your pet"]})]}),Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs("div",{children:[Z.jsx(v,{className:"mb-3 block",children:"Gender *"}),Z.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Z.jsx(b,{children:Z.jsx(j,{type:"button",variant:"male"===L?"default":"outline",className:"w-full h-16 text-lg",onClick:()=>M("male"),children:"â™‚ Male"})}),Z.jsx(b,{children:Z.jsx(j,{type:"button",variant:"female"===L?"default":"outline",className:"w-full h-16 text-lg",onClick:()=>M("female"),children:"â™€ Female"})})]})]}),Z.jsxs("div",{children:[Z.jsx(v,{htmlFor:"size",className:"mb-3 block",children:"Size *"}),Z.jsxs("select",{id:"size",value:_,onChange:e=>{const t=e.target.value;["small","medium","large","extra-large"].includes(t)&&B(t)},className:"w-full px-4 py-3 border border-input rounded-lg bg-background hover:border-ring transition-colors text-lg",children:[Z.jsx("option",{value:"small",children:"Small"}),Z.jsx("option",{value:"medium",children:"Medium"}),Z.jsx("option",{value:"large",children:"Large"}),Z.jsx("option",{value:"extra-large",children:"Extra Large"})]})]}),Z.jsxs("div",{children:[Z.jsx(v,{htmlFor:"location",children:"Location *"}),Z.jsx(N,{id:"location",value:G,onChange:e=>H(e.target.value),placeholder:"e.g., San Francisco, CA",className:"mt-1"})]})]})]},"characteristics");case"photo":return Z.jsxs(b,{className:"space-y-6",children:[Z.jsxs("div",{className:"text-center mb-6",children:[Z.jsxs("h3",{className:"text-2xl font-bold mb-2",children:["Add a photo of ",q||"your pet"]}),Z.jsx("p",{className:"text-muted-foreground",children:"A great photo helps others connect with your companion"})]}),Z.jsx(X.Suspense,{fallback:Z.jsx("div",{className:"flex items-center justify-center py-12",children:Z.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),children:Z.jsx(We,{onAnalysisComplete:e=>{U(e.photo),F||T(e.breed),R||z(e.age.toString()),B(e.size),W(e.personality)}})}),Z.jsxs("div",{children:[Z.jsx(v,{htmlFor:"photo",children:"Photo URL *"}),Z.jsx(N,{id:"photo",value:O,onChange:e=>U(e.target.value),placeholder:"https://images.unsplash.com/photo-...",className:"mt-1"}),he.shouldRender&&O&&Z.jsx(b,{style:he.animatedStyle,className:"mt-4 relative h-64 rounded-xl overflow-hidden bg-muted shadow-lg",children:Z.jsx("img",{src:O,alt:"Preview",className:"w-full h-full object-cover"})})]}),Z.jsxs("div",{children:[Z.jsx(v,{htmlFor:"bio",children:"Bio (optional)"}),Z.jsx(S,{id:"bio",value:$,onChange:e=>V(e.target.value),placeholder:`Tell us what makes ${q||"your pet"} special...`,rows:3,className:"mt-1"})]})]},"photo");case"personality":return Z.jsxs(b,{className:"space-y-6",children:[Z.jsxs("div",{className:"text-center mb-6",children:[Z.jsxs("h3",{className:"text-2xl font-bold mb-2",children:["What's ",q||"your pet","'s personality?"]}),Z.jsx("p",{className:"text-muted-foreground",children:"Select all traits that apply"})]}),Z.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:Qe[P].map(e=>Z.jsxs(w,{variant:Y.includes(e)?"default":"outline",className:"cursor-pointer px-4 py-2 text-base",onClick:()=>ve(Y,e,W),children:[e,Y.includes(e)&&Z.jsx("span",{children:Z.jsx(ae,{size:14,className:"ml-2",weight:"bold"})})]},e))})]},"personality");case"preferences":return Z.jsxs(b,{className:"space-y-8",children:[Z.jsxs("div",{className:"text-center mb-6",children:[Z.jsxs("h3",{className:"text-2xl font-bold mb-2",children:["What does ",q||"your pet"," enjoy?"]}),Z.jsx("p",{className:"text-muted-foreground",children:"This helps us find perfect companions"})]}),Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs("div",{children:[Z.jsx(v,{className:"text-lg mb-3 block",children:"Interests"}),Z.jsx("div",{className:"flex flex-wrap gap-2",children:Ke[P].map(e=>Z.jsxs(w,{variant:J.includes(e)?"default":"outline",className:"cursor-pointer px-3 py-1.5",onClick:()=>ve(J,e,Q),children:[e,J.includes(e)&&Z.jsx(ae,{size:12,className:"ml-1.5",weight:"bold"})]},e))})]}),Z.jsxs("div",{children:[Z.jsx(v,{className:"text-lg mb-3 block",children:"Looking For"}),Z.jsx("div",{className:"flex flex-wrap gap-2",children:Xe[P].map(e=>Z.jsxs(w,{variant:K.includes(e)?"default":"outline",className:"cursor-pointer px-3 py-1.5",onClick:()=>ve(K,e,ie),children:[e,K.includes(e)&&Z.jsx(ae,{size:12,className:"ml-1.5",weight:"bold"})]},e))})]})]})]},"preferences");case"complete":return Z.jsxs(b,{className:"space-y-6 text-center",children:[Z.jsx(b,{className:"text-8xl mb-4",children:"ðŸŽ‰"}),Z.jsx("h3",{className:"text-3xl font-bold",children:"All set!"}),Z.jsxs("p",{className:"text-lg text-muted-foreground",children:[q||"Your pet","'s profile is ready to go. Let's find some perfect companions!"]}),Z.jsxs("div",{className:"bg-muted/50 rounded-2xl p-6 space-y-3 text-left max-w-md mx-auto",children:[Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Name:"}),Z.jsx("span",{className:"font-semibold",children:q})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Type:"}),Z.jsx("span",{className:"font-semibold capitalize",children:P})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Breed:"}),Z.jsx("span",{className:"font-semibold",children:F})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Age:"}),Z.jsxs("span",{className:"font-semibold",children:[R," ",1===parseInt(R)?"year":"years"]})]}),Z.jsxs("div",{className:"flex justify-between",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Personality:"}),Z.jsxs("span",{className:"font-semibold",children:[Y.length," traits"]})]})]})]},"complete");default:return null}})()}),Z.jsxs("div",{className:"flex gap-3 pt-6 mt-6 border-t",children:["type"!==C&&"complete"!==C&&Z.jsx(b,{children:Z.jsxs(j,{type:"button",variant:"outline",onClick:()=>{const e=["type","template","basics","characteristics","photo","personality","preferences","complete"],t=e.indexOf(C);if(t>0){const s=e[t-1];s&&k(s)}},className:"gap-2",children:[Z.jsx(ee,{size:16,weight:"bold"}),"Back"]})}),Z.jsx("div",{className:"flex-1"}),"complete"!==C?Z.jsx(b,{children:Z.jsxs(j,{type:"button",onClick:we,disabled:!(()=>{switch(C){case"type":return!!P;case"template":default:return!0;case"basics":return!!(q&&F&&R);case"characteristics":return!!(L&&_&&G);case"photo":return!!O;case"personality":return Y.length>0;case"preferences":return J.length>0&&K.length>0}})(),className:"gap-2 bg-linear-to-r from-primary to-accent",children:["Continue",Z.jsx(te,{size:16,weight:"bold"})]})}):Z.jsx(b,{children:Z.jsxs(j,{type:"button",onClick:()=>{if(!(q&&F&&R&&O&&G))return void re.error("Please complete all required fields");const e={id:(null==s?void 0:s.id)||`pet-${Date.now()}`,name:q,breed:F,age:parseInt(R),gender:L,size:_,photo:O,photos:[O],bio:$,location:G,personality:Y,interests:J,lookingFor:K,ownerId:"user-1",ownerName:"You",verified:!1,createdAt:(null==s?void 0:s.createdAt)||(new Date).toISOString()};s?(r(t=>(t||[]).map(t=>t.id===s.id?e:t)),a(t=>(t||[]).map(t=>t.id===s.id?e:t)),re.success("Pet profile updated!",{description:`${q}'s profile has been updated successfully.`})):(r(t=>[...t||[],e]),a(t=>[...t||[],e]),re.success("Pet profile created! ðŸŽ‰",{description:`${q} is ready to find perfect companions!`})),t(!1),je()},className:"gap-2 bg-linear-to-r from-primary to-accent",children:[Z.jsx(se,{size:16,weight:"bold"}),s?"Save Changes":"Create Profile"]})})]})]})})}function et({value:e}){return Z.jsx("span",{children:Math.round(e)})}function tt({totalMatches:e,totalSwipes:t,successRate:s}){const{t:r}=k();return Z.jsxs("div",{className:"p-6 mb-6 overflow-hidden relative rounded-3xl glass-strong premium-shadow backdrop-blur-2xl border border-white/20",children:[Z.jsx(P,{className:"absolute inset-0 bg-linear-to-br from-primary/10 via-accent/5 to-secondary/10",animate:{opacity:[.3,.7,.3]},transition:{duration:4,repeat:1/0,repeatType:"reverse"}}),Z.jsx("h3",{className:"text-lg font-bold mb-6 relative bg-linear-to-r from-primary via-accent to-secondary bg-clip-text text-transparent",children:r.profile.stats}),Z.jsxs("div",{className:"grid grid-cols-3 gap-4 relative",children:[Z.jsxs(P,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},transition:{delay:.1,type:"spring",stiffness:300,damping:20},whileHover:{scale:1.08,y:-8},className:"text-center glass-effect p-4 rounded-2xl backdrop-blur-md border border-white/20",children:[Z.jsx(P,{className:"w-14 h-14 rounded-full bg-linear-to-br from-primary via-primary/80 to-primary/60 flex items-center justify-center mx-auto mb-3 shadow-xl",whileHover:{rotate:[0,-15,15,-15,0],scale:1.1},transition:{duration:.5},children:Z.jsx(me,{size:28,className:"text-white drop-shadow-lg",weight:"fill"})}),Z.jsx("div",{className:"text-3xl font-bold bg-linear-to-br from-primary to-accent bg-clip-text text-transparent",children:Z.jsx(et,{value:e})}),Z.jsx("div",{className:"text-xs text-foreground/70 font-semibold mt-1",children:r.profile.totalMatches})]}),Z.jsxs(P,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},transition:{delay:.2,type:"spring",stiffness:300,damping:20},whileHover:{scale:1.08,y:-8},className:"text-center glass-effect p-4 rounded-2xl backdrop-blur-md border border-white/20",children:[Z.jsx(P,{className:"w-14 h-14 rounded-full bg-linear-to-br from-secondary via-secondary/80 to-secondary/60 flex items-center justify-center mx-auto mb-3 shadow-xl",whileHover:{scale:1.25},transition:{type:"tween",duration:.3},children:Z.jsx(pe,{size:28,className:"text-white drop-shadow-lg",weight:"fill"})}),Z.jsx("div",{className:"text-3xl font-bold bg-linear-to-br from-secondary to-primary bg-clip-text text-transparent",children:Z.jsx(et,{value:t})}),Z.jsx("div",{className:"text-xs text-foreground/70 font-semibold mt-1",children:r.profile.totalSwipes})]}),Z.jsxs(P,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},transition:{delay:.3,type:"spring",stiffness:300,damping:20},whileHover:{scale:1.08,y:-8},className:"text-center glass-effect p-4 rounded-2xl backdrop-blur-md border border-white/20",children:[Z.jsx(P,{className:"w-14 h-14 rounded-full bg-linear-to-br from-accent via-accent/80 to-accent/60 flex items-center justify-center mx-auto mb-3 shadow-xl",animate:{rotate:[0,15,0]},transition:{duration:2.5,repeat:1/0,repeatType:"reverse"},children:Z.jsx(ue,{size:28,className:"text-white drop-shadow-lg",weight:"fill"})}),Z.jsxs("div",{className:"text-3xl font-bold bg-linear-to-br from-accent to-secondary bg-clip-text text-transparent",children:[Z.jsx(et,{value:s}),"%"]}),Z.jsx("div",{className:"text-xs text-foreground/70 font-semibold mt-1",children:r.profile.successRate})]})]})]})}const st=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),rt=[{value:"4k",label:"4K Ultra HD",resolution:"3840 Ã— 2160",description:"Highest quality, requires high-speed connection",badge:"Premium"},{value:"1080p",label:"Full HD",resolution:"1920 Ã— 1080",description:"Excellent quality, recommended for most users",badge:"Recommended"},{value:"720p",label:"HD",resolution:"1280 Ã— 720",description:"Good quality, suitable for moderate connections"},{value:"480p",label:"SD",resolution:"854 Ã— 480",description:"Basic quality, best for slow connections"}];function at({option:e,isSelected:t,onSelect:s}){const r=T({hoverScale:1.02,tapScale:.98,damping:15,stiffness:400}),a=n(t?1:0),i=u(()=>({transform:[{scale:a.value}],opacity:a.value}));X.useEffect(()=>{a.value=p(t?1:0)},[t,a]);const l=X.useCallback(()=>{r.handlePress(),s(e.value)},[r,s,e.value]);return Z.jsx(b,{style:r.animatedStyle,onMouseEnter:r.handleMouseEnter,onMouseLeave:r.handleMouseLeave,children:Z.jsxs(j,{variant:t?"default":"outline",className:"w-full h-auto py-4 px-4 justify-between "+(t?"bg-gradient-to-r from-primary to-accent border-primary/50":"hover:bg-muted/50"),onClick:l,children:[Z.jsxs("div",{className:"flex flex-col items-start gap-1 flex-1",children:[Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("span",{className:"font-bold text-base",children:e.label}),e.badge&&Z.jsx(w,{variant:t?"secondary":"outline",className:"text-xs",children:e.badge})]}),Z.jsx("span",{className:"text-sm font-mono opacity-80",children:e.resolution}),Z.jsx("span",{className:"text-xs opacity-70 text-left",children:e.description})]}),Z.jsx(b,{style:i,children:Z.jsx(se,{size:24,weight:"bold"})})]})})}function it({currentQuality:e,onQualityChange:t}){const s=X.useCallback(e=>{A.trigger("selection"),t(e)},[t]),r=X.useMemo(()=>rt.map(t=>Z.jsx(at,{option:t,isSelected:e===t.value,onSelect:s},t.value)),[e,s]);return Z.jsxs(E,{className:"glass-effect border-border/50",children:[Z.jsxs(D,{children:[Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx(he,{size:24,weight:"fill",className:"text-primary"}),Z.jsx(q,{children:"Video Quality"})]}),Z.jsx(I,{children:"Choose your preferred video call quality. Higher quality requires more bandwidth."})]}),Z.jsxs(F,{className:"space-y-2",children:[r,Z.jsx("div",{className:"mt-4 p-4 rounded-lg bg-muted/50 border border-border/50",children:Z.jsxs("p",{className:"text-sm text-muted-foreground",children:[Z.jsx("strong",{children:"Note:"})," The actual quality may vary based on your device capabilities and network conditions. The system will automatically adjust to the best available quality."]})})]})]})}function nt({currentPreset:e="default-light",onPresetChange:t}){const s=e=>{A.trigger("selection"),t(e)},r=R.filter(e=>"light"===e.mode),a=R.filter(e=>"dark"===e.mode);return Z.jsxs(E,{className:"p-6",children:[Z.jsx("h3",{className:"text-lg font-bold mb-4",children:"Theme Presets"}),Z.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Choose a color theme that matches your style"}),Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs("div",{children:[Z.jsx(v,{className:"text-sm font-semibold text-muted-foreground mb-3 block",children:"LIGHT THEMES"}),Z.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:r.map(t=>{const r=e===t.id;return Z.jsxs("button",{onClick:()=>s(t.id),className:"relative rounded-2xl overflow-hidden border-2 transition-all hover:scale-[1.02] active:scale-[0.98] "+(r?"border-primary shadow-lg scale-105":"border-border hover:border-primary/50"),children:[Z.jsxs("div",{className:"aspect-[4/3] flex flex-col p-3",children:[Z.jsx("div",{className:"flex gap-1 mb-2",children:Z.jsx("div",{className:"w-full h-8 rounded-lg shadow-sm",style:{backgroundColor:t.preview.primary}})}),Z.jsxs("div",{className:"flex gap-1 flex-1",children:[Z.jsx("div",{className:"w-1/2 rounded-lg shadow-sm",style:{backgroundColor:t.preview.secondary}}),Z.jsx("div",{className:"w-1/2 rounded-lg shadow-sm",style:{backgroundColor:t.preview.accent}})]})]}),r&&Z.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-primary rounded-full flex items-center justify-center shadow-lg animate-in zoom-in duration-300",children:Z.jsx(se,{size:16,weight:"bold",className:"text-primary-foreground"})}),Z.jsxs("div",{className:"bg-card/90 backdrop-blur-sm p-2 border-t border-border",children:[Z.jsx("p",{className:"text-xs font-semibold truncate",children:t.name}),Z.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:t.description})]})]},t.id)})})]}),Z.jsxs("div",{children:[Z.jsx(v,{className:"text-sm font-semibold text-muted-foreground mb-3 block",children:"DARK THEMES"}),Z.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:a.map(t=>{const r=e===t.id;return Z.jsxs("button",{onClick:()=>s(t.id),className:"relative rounded-2xl overflow-hidden border-2 transition-all hover:scale-[1.02] active:scale-[0.98] "+(r?"border-primary shadow-lg scale-105":"border-border hover:border-primary/50"),children:[Z.jsxs("div",{className:"aspect-[4/3] flex flex-col p-3 bg-gradient-to-br from-gray-900 to-gray-950",children:[Z.jsx("div",{className:"flex gap-1 mb-2",children:Z.jsx("div",{className:"w-full h-8 rounded-lg shadow-sm",style:{backgroundColor:t.preview.primary}})}),Z.jsxs("div",{className:"flex gap-1 flex-1",children:[Z.jsx("div",{className:"w-1/2 rounded-lg shadow-sm",style:{backgroundColor:t.preview.secondary}}),Z.jsx("div",{className:"w-1/2 rounded-lg shadow-sm",style:{backgroundColor:t.preview.accent}})]})]}),r&&Z.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-primary rounded-full flex items-center justify-center shadow-lg animate-in zoom-in duration-300",children:Z.jsx(se,{size:16,weight:"bold",className:"text-primary-foreground"})}),Z.jsxs("div",{className:"bg-card/90 backdrop-blur-sm p-2 border-t border-border",children:[Z.jsx("p",{className:"text-xs font-semibold truncate",children:t.name}),Z.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:t.description})]})]},t.id)})})]})]})]})}function lt({open:e,onOpenChange:t,onSuccess:s}){const[r,a]=X.useState("monthly"),[i,n]=X.useState(!1),[l,o]=X.useState(null),c=e=>{switch(e){case"premium":return Z.jsx(ue,{size:24,weight:"fill",className:"text-primary"});case"elite":return Z.jsx(fe,{size:24,weight:"fill",className:"text-accent"});default:return Z.jsx(xe,{size:24,weight:"regular",className:"text-muted-foreground"})}};return Z.jsx(x,{open:e,onOpenChange:t,children:Z.jsxs(f,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[Z.jsxs(g,{children:[Z.jsx(y,{className:"text-3xl font-bold text-center",children:"Choose Your Plan"}),Z.jsx(z,{className:"text-center text-lg",children:"Unlock premium features and find your perfect match faster"})]}),Z.jsxs("div",{className:"flex justify-center items-center gap-4 my-6",children:[Z.jsx(j,{variant:"monthly"===r?"default":"outline",onClick:()=>a("monthly"),className:"min-w-[120px]",children:"Monthly"}),Z.jsxs(j,{variant:"yearly"===r?"default":"outline",onClick:()=>a("yearly"),className:"min-w-[120px]",children:["Yearly",Z.jsx(w,{variant:"secondary",className:"ml-2",children:"Save 17%"})]})]}),Z.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:L.plans.map(e=>{const{price:a,perMonth:d}=(e=>{const t="monthly"===r?e.priceMonthly:e.priceYearly,s="yearly"===r?(t/12).toFixed(2):t.toFixed(2);return{price:t,perMonth:s}})(e),u=e.popular,m=i&&l===e.id;return Z.jsxs("div",{className:M("relative rounded-2xl border-2 p-6 transition-all duration-200",u?"border-primary shadow-lg shadow-primary/20 scale-105":"border-border hover:border-primary/50"),children:[u&&Z.jsx(w,{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-primary",children:"Most Popular"}),Z.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[c(e.tier),Z.jsx("h3",{className:"text-2xl font-bold",children:e.name}),Z.jsx("p",{className:"text-sm text-muted-foreground text-center",children:e.description})]}),Z.jsx("div",{className:"text-center mb-6",children:"free"===e.tier?Z.jsx("div",{className:"text-4xl font-bold",children:"Free"}):Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{className:"text-4xl font-bold",children:["$",d,Z.jsx("span",{className:"text-lg font-normal text-muted-foreground",children:"/mo"})]}),"yearly"===r&&Z.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["$",a," billed annually"]}),e.trialDays&&Z.jsxs(w,{variant:"secondary",className:"mt-2",children:[e.trialDays,"-day free trial"]})]})}),Z.jsxs("ul",{className:"space-y-3 mb-6",children:[0===e.entitlements.length?Z.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[Z.jsx(se,{size:20,weight:"bold",className:"text-muted-foreground shrink-0 mt-0.5"}),Z.jsx("span",{children:"Basic matching features"})]}):e.entitlements.slice(0,5).map(e=>Z.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[Z.jsx(se,{size:20,weight:"bold",className:"text-primary shrink-0 mt-0.5"}),Z.jsx("span",{className:"capitalize",children:e.replace(/_/g," ")})]},e)),e.entitlements.length>5&&Z.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[Z.jsx(se,{size:20,weight:"bold",className:"shrink-0 mt-0.5"}),Z.jsxs("span",{children:["And ",e.entitlements.length-5," more..."]})]})]}),Z.jsx(j,{className:"w-full",variant:u?"default":"outline",onClick:()=>(async e=>{if("free"!==e.tier){n(!0),o(e.id);try{const a=await spark.user();await _.createSubscription(a.id,e.id,"web",{billingCycle:r}),re.success(e.trialDays?`${e.trialDays}-day trial started!`:"Subscription activated!",{description:`Welcome to ${e.name}! Your features are now unlocked.`}),null==s||s(),t(!1)}catch(a){re.error("Subscription failed",{description:a instanceof Error?a.message:"Please try again"})}finally{n(!1),o(null)}}})(e),disabled:i||"free"===e.tier,size:"lg",children:m?"Processing...":"free"===e.tier?"Current Plan":"Get Started"}),"free"!==e.tier&&Z.jsxs("p",{className:"text-xs text-center text-muted-foreground mt-4",children:["Cancel anytime â€¢ Auto-renews"," ","monthly"===r?"monthly":"annually"]})]},e.id)})}),Z.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[Z.jsx("p",{children:"All plans include secure payments and instant activation"}),Z.jsxs("p",{className:"mt-1",children:["Questions? ",Z.jsx("button",{className:"text-primary hover:underline",children:"Contact Support"})]})]})]})})}function ot(){const[e,t]=X.useState(null),[s,r]=X.useState(null),[a,i]=X.useState(!0),[n,l]=X.useState(!1),[o,c]=X.useState(!1);X.useEffect(()=>{d()},[]);const d=async()=>{try{const e=await spark.user(),[s,a]=await Promise.all([_.getUserSubscription(e.id),_.getUserEntitlements(e.id)]);t(s),r(a)}catch(e){const t=e instanceof Error?e:new Error(String(e));B.error("Failed to load subscription",t,{action:"loadSubscriptionData"})}finally{i(!1)}};if(a)return Z.jsx(E,{children:Z.jsx(F,{className:"flex items-center justify-center p-12",children:Z.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})});const u=e?O(e.planId):null,m=!e||"free"===(null==s?void 0:s.planTier),p=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),h=()=>{if(!e)return 0;const t=new Date(e.currentPeriodStart).getTime(),s=new Date(e.currentPeriodEnd).getTime(),r=(Date.now()-t)/(s-t)*100;return Math.min(100,Math.max(0,r))};return Z.jsxs(Z.Fragment,{children:[Z.jsxs(E,{children:[Z.jsx(D,{children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[(e=>{switch(e){case"premium":return Z.jsx(ue,{size:32,weight:"fill",className:"text-primary"});case"elite":return Z.jsx(fe,{size:32,weight:"fill",className:"text-accent"});default:return Z.jsx(xe,{size:32,weight:"regular",className:"text-muted-foreground"})}})((null==s?void 0:s.planTier)||"free"),Z.jsxs("div",{children:[Z.jsxs(q,{className:"text-2xl",children:[(null==u?void 0:u.name)||"Free"," Plan"]}),Z.jsx(I,{children:(null==u?void 0:u.description)||"Basic matching features"})]})]}),e&&Z.jsx(w,{variant:"active"===e.status?"default":"secondary",children:"trial"===e.status?"Free Trial":e.status})]})}),Z.jsxs(F,{className:"space-y-6",children:[e&&!m?Z.jsxs(Z.Fragment,{children:[e.isComp&&Z.jsxs("div",{className:"bg-accent/10 border border-accent/20 rounded-lg p-4",children:[Z.jsx("p",{className:"text-sm font-medium text-accent-foreground",children:"ðŸŽ Complimentary Subscription"}),e.compReason&&Z.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.compReason})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Billing Cycle"}),Z.jsx("span",{className:"font-medium",children:e.trialEnd&&new Date(e.trialEnd)>new Date?"Trial Period":"Monthly"})]}),Z.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Z.jsx("span",{className:"text-muted-foreground",children:e.cancelAtPeriodEnd?"Access Until":"Next Billing Date"}),Z.jsx("span",{className:"font-medium",children:p(e.currentPeriodEnd)})]}),Z.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Payment Method"}),Z.jsx("span",{className:"font-medium capitalize",children:e.store})]})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[Z.jsx("span",{children:"Current Period"}),Z.jsxs("span",{children:[Math.round(h()),"%"]})]}),Z.jsx(U,{value:h(),className:"h-2"})]}),e.cancelAtPeriodEnd&&Z.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:[Z.jsx("p",{className:"text-sm font-medium text-destructive",children:"Subscription Canceled"}),Z.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Your benefits will remain active until"," ",p(e.currentPeriodEnd)]})]}),Z.jsxs("div",{className:"flex flex-col gap-2",children:[!e.cancelAtPeriodEnd&&!e.isComp&&Z.jsxs(j,{variant:"outline",className:"w-full",onClick:async()=>{if(e&&confirm("Are you sure you want to cancel your subscription? You will keep your benefits until the end of the current period.")){c(!0);try{await _.cancelSubscription(e.id,!1),re.success("Subscription canceled",{description:"Your benefits will remain active until the end of your billing period."}),await d()}catch{re.error("Failed to cancel subscription")}finally{c(!1)}}},disabled:o,children:[Z.jsx(ge,{className:"h-4 w-4 mr-2"}),o?"Canceling...":"Cancel Subscription"]}),Z.jsx(j,{variant:"ghost",className:"w-full",onClick:()=>l(!0),children:"View All Plans"})]})]}):Z.jsxs("div",{className:"space-y-4",children:[Z.jsx("p",{className:"text-sm text-muted-foreground",children:"Upgrade to unlock premium features and find matches faster."}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Z.jsx(ue,{className:"h-4 w-4 text-muted-foreground"}),Z.jsx("span",{children:"Unlimited swipes"})]}),Z.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Z.jsx(ue,{className:"h-4 w-4 text-muted-foreground"}),Z.jsx("span",{children:"See who liked you"})]}),Z.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Z.jsx(ue,{className:"h-4 w-4 text-muted-foreground"}),Z.jsx("span",{children:"Video calls with matches"})]}),Z.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Z.jsx(ue,{className:"h-4 w-4 text-muted-foreground"}),Z.jsx("span",{children:"Advanced filters"})]})]}),Z.jsxs(j,{className:"w-full",size:"lg",onClick:()=>l(!0),children:[Z.jsx(ue,{className:"h-5 w-5 mr-2",weight:"fill"}),"Upgrade to Premium"]})]}),s&&Z.jsxs("div",{className:"pt-4 border-t",children:[Z.jsx("p",{className:"text-sm font-medium mb-2",children:"Active Features"}),Z.jsx("div",{className:"flex flex-wrap gap-2",children:0===s.entitlements.length?Z.jsx(w,{variant:"outline",children:"Basic Features"}):s.entitlements.slice(0,5).map(e=>Z.jsx(w,{variant:"secondary",children:e.replace(/_/g," ")},e))})]}),s&&(s.consumables.boosts>0||s.consumables.super_likes>0)&&Z.jsxs("div",{className:"pt-4 border-t",children:[Z.jsx("p",{className:"text-sm font-medium mb-2",children:"Consumables"}),Z.jsxs("div",{className:"flex gap-4 text-sm",children:[s.consumables.boosts>0&&Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx(xe,{weight:"fill",className:"h-4 w-4 text-accent"}),Z.jsxs("span",{children:[s.consumables.boosts," Boosts"]})]}),s.consumables.super_likes>0&&Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx(ue,{weight:"fill",className:"h-4 w-4 text-primary"}),Z.jsxs("span",{children:[s.consumables.super_likes," Super Likes"]})]})]})]})]})]}),Z.jsx(lt,{open:n,onOpenChange:l,onSuccess:d})]})}class ct{static createVerificationRequest(e,t,s){return{id:$(),petId:e,userId:t,requestedAt:(new Date).toISOString(),status:"unverified",documents:[],verificationLevel:s}}static async uploadDocument(e,t,s){const r=await this.fileToBase64(e);return{id:$(),type:t,fileName:e.name,fileSize:e.size,uploadedAt:(new Date).toISOString(),status:"pending",fileData:r}}static submitForReview(e){return{...e,status:"pending"}}static processReview(e,t=!0){const s=(new Date).toISOString(),r=t?Math.floor(20*Math.random())+80:Math.floor(30*Math.random())+40;return{...e,status:t?"verified":"rejected",completedAt:s,reviewedBy:"system",reviewNotes:t?"All documents verified successfully. Owner credentials confirmed.":"Some documents require clarification. Please resubmit with clearer images.",trustScore:r,documents:e.documents.map(e=>({...e,status:t?"verified":"rejected",reviewedAt:s,reviewedBy:"system",...t?{}:{rejectionReason:"Document unclear or incomplete"}}))}}static calculateCompletionPercentage(e,t){const s=new Set(e.documents.map(e=>e.type)),r=t.filter(e=>s.has(e)).length;return Math.round(r/t.length*100)}static isDocumentTypeUploaded(e,t){return e.documents.some(e=>e.type===t)}static getDocumentByType(e,t){return e.documents.find(e=>e.type===t)}static async deleteDocument(e){await new Promise(e=>{window.setTimeout(e,300)})}static validateFileSize(e,t=10){return e.size<=1024*t*1024}static validateFileType(e){return["image/jpeg","image/jpg","image/png","image/webp","application/pdf"].includes(e.type)}static fileToBase64(e){return new Promise((t,s)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=()=>s(new Error("Failed to read file as base64"))})}static checkExpiredVerifications(e){const t=new Date;return e.map(e=>e.documents.some(e=>!!e.expiresAt&&new Date(e.expiresAt)<t)&&"verified"===e.status?{...e,status:"expired",documents:e.documents.map(e=>e.expiresAt&&new Date(e.expiresAt)<t?{...e,status:"expired"}:e)}:e)}}const dt={basic:{level:"basic",requiredDocuments:["pet_ownership","photo_id"],optionalDocuments:["vaccination_records"],estimatedReviewTime:"1-2 business days",benefits:["Verified badge on profile","Increased trust from other users","Priority in search results","Access to verified-only matches"]},standard:{level:"standard",requiredDocuments:["pet_ownership","vaccination_records","photo_id","address_proof"],optionalDocuments:["microchip_registration","vet_records"],estimatedReviewTime:"2-3 business days",benefits:["All Basic benefits","Premium verified badge","Higher match priority","Access to premium events","Enhanced profile visibility","Verification certificate"]},premium:{level:"premium",requiredDocuments:["pet_ownership","vaccination_records","microchip_registration","vet_records","photo_id","address_proof"],optionalDocuments:["adoption_papers"],estimatedReviewTime:"3-5 business days",benefits:["All Standard benefits","Gold verified badge","Top priority in all searches","Exclusive premium community access","Background check certificate","Dedicated support","Annual re-verification included","Trust score guarantee"]}},ut={pet_ownership:"Pet Ownership Proof",vaccination_records:"Vaccination Records",microchip_registration:"Microchip Registration",vet_records:"Veterinary Records",adoption_papers:"Adoption Papers",photo_id:"Photo ID",address_proof:"Proof of Address"},mt={pet_ownership:"Proof of pet ownership (license, registration, or purchase documents)",vaccination_records:"Up-to-date vaccination records from licensed veterinarian",microchip_registration:"Microchip registration certificate with your information",vet_records:"Recent veterinary visit records or health certificates",adoption_papers:"Official adoption papers from shelter or rescue",photo_id:"Government-issued photo identification",address_proof:"Utility bill, lease, or other address verification"};function pt({label:e,description:t,existingDocument:s,onUpload:r,onDelete:a,optional:i,disabled:n}){const l=X.useRef(null),[o,c]=X.useState(!1),d={pending:{icon:be,color:"text-secondary"},verified:{icon:ve,color:"text-primary"},rejected:{icon:je,color:"text-destructive"},expired:{icon:be,color:"text-muted-foreground"},unverified:{icon:be,color:"text-muted-foreground"}};return Z.jsxs(P,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:M("relative rounded-xl border transition-all",s?"bg-card border-border":o?"bg-primary/5 border-primary border-dashed":"bg-card/50 border-border border-dashed",n&&"opacity-60"),children:[Z.jsx("input",{ref:l,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,application/pdf",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];s&&r(s),l.current&&(l.current.value="")},className:"hidden",disabled:n}),Z.jsxs("div",{onDragOver:e=>{e.preventDefault(),n||c(!0)},onDragLeave:()=>{c(!1)},onDrop:e=>{if(e.preventDefault(),c(!1),n)return;const t=e.dataTransfer.files[0];t&&r(t)},className:"p-4",children:[Z.jsx("div",{className:"flex items-start justify-between mb-2",children:Z.jsxs("div",{className:"flex-1",children:[Z.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Z.jsx("h4",{className:"font-semibold text-sm",children:e}),i&&Z.jsx(w,{variant:"secondary",className:"text-xs",children:"Optional"})]}),Z.jsx("p",{className:"text-xs text-muted-foreground",children:t})]})}),s?Z.jsxs(P,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 border border-border",children:[Z.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10",children:Z.jsx(ye,{size:20,weight:"duotone",className:"text-primary"})}),Z.jsxs("div",{className:"flex-1 min-w-0",children:[Z.jsx("p",{className:"text-sm font-medium truncate",children:s.fileName}),Z.jsxs("p",{className:"text-xs text-muted-foreground",children:[(u=s.fileSize,u<1024?u+" B":u<1048576?(u/1024).toFixed(1)+" KB":(u/1048576).toFixed(1)+" MB")," â€¢ Uploaded"," ",new Date(s.uploadedAt).toLocaleDateString()]})]}),Z.jsxs("div",{className:"flex items-center gap-2",children:[s.status&&Z.jsx(P,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20},children:(()=>{const e=d[s.status].icon;return Z.jsx(e,{size:20,weight:"fill",className:d[s.status].color})})()}),!n&&Z.jsx(j,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>a(s.id),children:Z.jsx(we,{size:16,weight:"bold"})})]})]}):Z.jsxs("div",{className:"mt-3",children:[Z.jsxs(j,{variant:"outline",size:"sm",onClick:()=>{var e;null==(e=l.current)||e.click()},disabled:n,className:"w-full gap-2",children:[Z.jsx(Ne,{size:16,weight:"bold"}),o?"Drop file here":"Browse or drag file"]}),Z.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"JPG, PNG, WEBP, or PDF (max 10MB)"})]})]})]});var u}function ht({selectedLevel:e,onSelectLevel:t}){const s=[{level:"basic",icon:Se,color:"from-blue-500/20 to-cyan-500/20 border-blue-500/30",title:"Basic"},{level:"standard",icon:Ce,color:"from-purple-500/20 to-pink-500/20 border-purple-500/30",title:"Standard"},{level:"premium",icon:ke,color:"from-amber-500/20 to-orange-500/20 border-amber-500/30",title:"Premium"}];return Z.jsxs("div",{className:"space-y-3",children:[Z.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Select Verification Level"}),Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:s.map(({level:s,icon:r,color:a,title:i})=>{const n=dt[s],l=e===s;return Z.jsxs(P,{as:"button",onClick:()=>t(s),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:M("relative p-4 rounded-xl border-2 transition-all text-left",l?`bg-gradient-to-br ${a}`:"bg-card border-border hover:border-primary/50"),children:[l&&Z.jsx(P,{layoutId:"selected-level",className:"absolute inset-0 rounded-xl bg-gradient-to-br from-primary/10 to-accent/10",transition:{type:"spring",stiffness:300,damping:30}}),Z.jsxs("div",{className:"relative z-10",children:[Z.jsx("div",{className:"flex items-center justify-between mb-3",children:Z.jsxs("div",{className:"flex items-center gap-2",children:[Z.jsx("div",{className:M("p-2 rounded-lg",l?"bg-primary/20":"bg-muted"),children:Z.jsx(r,{size:20,weight:"fill",className:l?"text-primary":"text-muted-foreground"})}),Z.jsx("h4",{className:M("font-bold text-lg",l&&"text-primary"),children:i})]})}),Z.jsxs("div",{className:"space-y-2 mb-3",children:[Z.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[Z.jsx(be,{size:14}),Z.jsx("span",{children:n.estimatedReviewTime})]}),Z.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.requiredDocuments.length," required document",1!==n.requiredDocuments.length?"s":""]})]}),Z.jsxs("div",{className:M("text-xs font-medium px-2 py-1 rounded-md inline-block",l?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:[n.benefits.length," benefits"]})]})]},s)})})]})}function xt({open:e,onOpenChange:t,petId:s,userId:r}){const[a,n]=i("verification-requests",{}),[l,o]=X.useState(null),[c,d]=X.useState("basic"),[u,m]=X.useState(!1),[p,h]=X.useState(!1),b=null==a?void 0:a[s],v=l??b,N=dt[c],S=v?ct.calculateCompletionPercentage(v,N.requiredDocuments):0,C=async(e,t)=>{if(v)if(ct.validateFileSize(e))if(ct.validateFileType(e))try{const r=await ct.uploadDocument(e,t,v.id),a={...v,documents:[...v.documents,r]};o(a),n(e=>({...e,[s]:a})),re.success("Document uploaded!",{description:`${ut[t]} has been uploaded successfully`})}catch{re.error("Upload failed",{description:"Failed to upload document. Please try again."})}else re.error("Invalid file type",{description:"Only JPG, PNG, WEBP, and PDF files are allowed"});else re.error("File too large",{description:"Maximum file size is 10MB"})},k=async e=>{if(!v)return;const t=v.documents.find(t=>t.id===e);if(!t)return;await ct.deleteDocument(t);const r={...v,documents:v.documents.filter(t=>t.id!==e)};o(r),n(e=>({...e,[s]:r})),re.success("Document removed")},A=e=>{if("pending"===(null==v?void 0:v.status)){h(!0);try{const t=ct.processReview(v,e);o(t),n(e=>({...e,[s]:t})),e?re.success("Verification approved! ðŸŽ‰",{description:`Your pet has been verified with a trust score of ${t.trustScore}/100`}):re.error("Verification requires attention",{description:t.reviewNotes??"Please review and resubmit documents"})}finally{h(!1)}}};return Z.jsx(x,{open:e,onOpenChange:()=>{o(null),t(!1)},children:Z.jsxs(f,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[Z.jsx(g,{children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx(P,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15},className:"p-2 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20",children:Z.jsx(Ce,{size:24,weight:"fill",className:"text-primary"})}),Z.jsxs("div",{children:[Z.jsx(y,{className:"text-2xl",children:"Pet Owner Verification"}),Z.jsx(z,{children:"Verify your pet ownership to build trust and unlock premium features"})]})]}),(()=>{if(!v)return null;const e={unverified:{icon:De,label:"Not Started",color:"bg-muted text-muted-foreground"},pending:{icon:be,label:"Under Review",color:"bg-secondary text-secondary-foreground"},verified:{icon:ve,label:"Verified",color:"bg-primary text-primary-foreground"},rejected:{icon:je,label:"Needs Attention",color:"bg-destructive text-destructive-foreground"},expired:{icon:be,label:"Expired",color:"bg-muted text-muted-foreground"}}[v.status],t=e.icon;return Z.jsxs(w,{className:M("gap-1.5",e.color),children:[Z.jsx(t,{size:14,weight:"bold"}),e.label]})})()]})}),Z.jsx(V,{className:"flex-1 pr-4",children:Z.jsxs("div",{className:"space-y-6 py-4",children:[!v&&Z.jsxs(P,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[Z.jsx(ht,{selectedLevel:c,onSelectLevel:d}),Z.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-muted/50 border border-border",children:[Z.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[Z.jsx(Pe,{size:18,weight:"fill",className:"text-accent"}),"Benefits of ",c.charAt(0).toUpperCase()+c.slice(1)," ","Verification"]}),Z.jsx("ul",{className:"space-y-2",children:N.benefits.map((e,t)=>Z.jsxs(G.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"flex items-start gap-2 text-sm text-muted-foreground",children:[Z.jsx(ve,{size:16,weight:"fill",className:"text-primary mt-0.5 shrink-0"}),Z.jsx("span",{children:e})]},t))})]}),Z.jsxs(j,{onClick:()=>{const e=ct.createVerificationRequest(s,r,c);o(e),re.success("Verification process started!",{description:`Selected ${c} verification level`})},className:"w-full mt-6",size:"lg",children:[Z.jsx(Ae,{size:20,weight:"bold",className:"mr-2"}),"Start Verification Process"]})]}),v&&Z.jsxs(P,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[Z.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-br from-primary/10 to-accent/10 border border-primary/20",children:[Z.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Z.jsx("span",{className:"text-sm font-medium text-foreground/80",children:"Verification Progress"}),Z.jsxs("span",{className:"text-sm font-bold text-primary",children:[S,"%"]})]}),Z.jsx(U,{value:S,className:"h-2"}),Z.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:100===S?"All required documents uploaded!":N.requiredDocuments.length-Math.ceil(S/100*N.requiredDocuments.length)+" required document(s) remaining"})]}),"verified"===v.status&&v.trustScore&&Z.jsx(P,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"p-6 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20 border border-primary/30",children:Z.jsxs("div",{className:"text-center",children:[Z.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/20 mb-4",children:Z.jsx(ve,{size:32,weight:"fill",className:"text-primary"})}),Z.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Verification Complete!"}),Z.jsxs("div",{className:"flex items-center justify-center gap-2 text-4xl font-bold text-primary mb-2",children:[Z.jsx(Ee,{size:32,weight:"bold"}),v.trustScore,"/100"]}),Z.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Trust Score"}),v.reviewNotes&&Z.jsx("p",{className:"text-sm text-foreground/80 bg-background/50 p-3 rounded-lg",children:v.reviewNotes})]})}),"rejected"===v.status&&Z.jsx(P,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"p-4 rounded-xl bg-destructive/10 border border-destructive/30",children:Z.jsxs("div",{className:"flex items-start gap-3",children:[Z.jsx(je,{size:24,weight:"fill",className:"text-destructive shrink-0 mt-0.5"}),Z.jsxs("div",{children:[Z.jsx("h4",{className:"font-semibold mb-1",children:"Verification Requires Attention"}),Z.jsx("p",{className:"text-sm text-muted-foreground",children:v.reviewNotes??"Some documents need to be reviewed and resubmitted."})]})]})}),Z.jsxs("div",{className:"space-y-3",children:[Z.jsx("h4",{className:"font-semibold",children:"Required Documents"}),N.requiredDocuments.map(e=>{const t=ct.getDocumentByType(v,e);return Z.jsx(pt,{documentType:e,label:ut[e],description:mt[e],...t&&{existingDocument:t},onUpload:t=>{C(t,e)},onDelete:e=>{k(e)},disabled:"verified"===v.status||"pending"===v.status},e)})]}),N.optionalDocuments.length>0&&Z.jsxs("div",{className:"space-y-3",children:[Z.jsx("h4",{className:"font-semibold text-muted-foreground",children:"Optional Documents"}),N.optionalDocuments.map(e=>{const t=ct.getDocumentByType(v,e);return Z.jsx(pt,{documentType:e,label:ut[e],description:mt[e],...t&&{existingDocument:t},onUpload:t=>{C(t,e)},onDelete:e=>{k(e)},optional:!0,disabled:"verified"===v.status||"pending"===v.status},e)})]}),"unverified"===v.status&&100===S&&Z.jsx(j,{onClick:()=>{if(v)if(S<100)re.error("Incomplete submission",{description:"Please upload all required documents before submitting"});else{m(!0);try{const e=ct.submitForReview(v);o(e),n(t=>({...t,[s]:e})),re.success("Submitted for review!",{description:`Your verification request has been submitted. Expected review time: ${N.estimatedReviewTime}`})}catch{re.error("Submission failed",{description:"Failed to submit verification request. Please try again."})}finally{m(!1)}}},disabled:u,className:"w-full",size:"lg",children:u?Z.jsxs(Z.Fragment,{children:[Z.jsx(be,{size:20,weight:"bold",className:"mr-2 animate-spin"}),"Submitting..."]}):Z.jsxs(Z.Fragment,{children:[Z.jsx(Ne,{size:20,weight:"bold",className:"mr-2"}),"Submit for Review"]})}),"pending"===v.status&&Z.jsxs("div",{className:"flex gap-3",children:[Z.jsxs(j,{onClick:()=>A(!0),disabled:p,variant:"default",className:"flex-1",children:[Z.jsx(ve,{size:20,weight:"bold",className:"mr-2"}),"Simulate Approval"]}),Z.jsxs(j,{onClick:()=>A(!1),disabled:p,variant:"outline",className:"flex-1",children:[Z.jsx(je,{size:20,weight:"bold",className:"mr-2"}),"Simulate Rejection"]})]})]})]})})]})})}function ft({petId:e,userId:t,variant:s="default",className:r}){const[a,n]=X.useState(!1),[l]=i("verification-requests",{}),o=null==l?void 0:l[e],c={unverified:{icon:Ce,label:"Get Verified",color:"bg-primary text-primary-foreground hover:bg-primary/90",badgeColor:"bg-muted text-muted-foreground"},pending:{icon:be,label:"Verification Pending",color:"bg-secondary text-secondary-foreground hover:bg-secondary/90",badgeColor:"bg-secondary text-secondary-foreground"},verified:{icon:ve,label:"Verified Owner",color:"bg-primary/10 text-primary border-primary/30 hover:bg-primary/20",badgeColor:"bg-primary/20 text-primary"},rejected:{icon:je,label:"Verification Issues",color:"bg-destructive/10 text-destructive border-destructive/30 hover:bg-destructive/20",badgeColor:"bg-destructive/20 text-destructive"},expired:{icon:be,label:"Verification Expired",color:"bg-muted text-muted-foreground hover:bg-muted/80",badgeColor:"bg-muted text-muted-foreground"}},d=(null==o?void 0:o.status)||"unverified",u=c[d],m=u.icon;return"card"===s?Z.jsxs(Z.Fragment,{children:[Z.jsx(P,{as:"button",onClick:()=>n(!0),whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:M("w-full p-4 rounded-xl border transition-all text-left","verified"===d?"bg-gradient-to-br from-primary/10 to-accent/5 border-primary/30":"bg-card border-border hover:border-primary/50",r),children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{className:"flex items-center gap-3",children:[Z.jsx("div",{className:M("p-2.5 rounded-lg","verified"===d?"bg-primary/20":"bg-muted"),children:Z.jsx(m,{size:20,weight:"verified"===d?"fill":"regular",className:"verified"===d?"text-primary":"text-muted-foreground"})}),Z.jsxs("div",{children:[Z.jsx("h4",{className:"font-semibold text-sm",children:u.label}),Z.jsxs("p",{className:"text-xs text-muted-foreground",children:["verified"===d&&(null==o?void 0:o.trustScore)&&`Trust score: ${o.trustScore}/100`,"pending"===d&&"Under review","unverified"===d&&"Verify your pet ownership","rejected"===d&&"Action required","expired"===d&&"Needs renewal"]})]})]}),Z.jsxs(w,{className:M("gap-1.5",u.badgeColor),children:["verified"===d&&Z.jsx(ve,{size:12,weight:"fill"}),u.label]})]})}),Z.jsx(xt,{open:a,onOpenChange:n,petId:e,userId:t})]}):Z.jsxs(Z.Fragment,{children:[Z.jsxs(j,{onClick:()=>n(!0),variant:"verified"===d?"outline":"default",size:"sm",className:M("gap-2",u.color,r),children:[Z.jsx(m,{size:16,weight:"verified"===d?"fill":"bold"}),u.label,"verified"===d&&(null==o?void 0:o.trustScore)&&Z.jsx(w,{variant:"secondary",className:"ml-1 text-xs",children:o.trustScore})]}),Z.jsx(xt,{open:a,onOpenChange:n,petId:e,userId:t})]})}const gt=a("GDPRApi");const yt=new class{async exportUserData(e){try{return(await s.post(r.GDPR.EXPORT,e)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw gt.error("Failed to export user data",s,{userId:e.userId}),s}}async deleteUserData(e){try{return(await s.post(r.GDPR.DELETE,e)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw gt.error("Failed to delete user data",s,{userId:e.userId}),s}}async getConsentStatus(e){try{return(await s.get(r.GDPR.CONSENT_STATUS(e))).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return gt.error("Failed to get consent status",s,{userId:e}),[]}}async updateConsent(e){try{return(await s.post(r.GDPR.UPDATE_CONSENT,e)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw gt.error("Failed to update consent",s,{userId:e.userId,category:e.category}),s}}async requestDataAccess(e){try{return(await s.post(`${r.GDPR.EXPORT}/request`,{userId:e})).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw gt.error("Failed to request data access",s,{userId:e}),s}}async requestDataRectification(e){try{return(await s.post("/api/gdpr/rectification",e)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));throw gt.error("Failed to request data rectification",s,{userId:e.userId}),s}}async requestDataErasure(e,t){try{return(await s.post(`${r.GDPR.DELETE}/request`,{userId:e,reason:t})).data}catch(a){const t=a instanceof Error?a:new Error(String(a));throw gt.error("Failed to request data erasure",t,{userId:e}),t}}async requestDataPortability(e,t="json"){try{return(await s.post(`${r.GDPR.EXPORT}/portability`,{userId:e,format:t})).data}catch(a){const s=a instanceof Error?a:new Error(String(a));throw gt.error("Failed to request data portability",s,{userId:e,format:t}),s}}async getRequestStatus(e,t){try{return(await s.get(`/api/gdpr/requests/${e}/${t}`)).data}catch(r){const s=r instanceof Error?r:new Error(String(r));return gt.error("Failed to get request status",s,{userId:e,requestId:t}),null}}async getUserRequests(e){try{return(await s.get(`/api/gdpr/requests/${e}`)).data}catch(t){const s=t instanceof Error?t:new Error(String(t));return gt.error("Failed to get user requests",s,{userId:e}),[]}}async grantConsent(e,t){try{await s.post(r.GDPR.UPDATE_CONSENT,{userId:e,category:t.type,status:t.granted?"accepted":"rejected",version:"1.0.0"})}catch(a){const s=a instanceof Error?a:new Error(String(a));throw gt.error("Failed to grant consent",s,{userId:e,type:t.type}),s}}async revokeConsent(e,t){try{await s.post(r.GDPR.UPDATE_CONSENT,{userId:e,category:t,status:"withdrawn",version:"1.0.0"})}catch(a){const s=a instanceof Error?a:new Error(String(a));throw gt.error("Failed to revoke consent",s,{userId:e,type:t}),s}}},bt=a("ConsentManager"),jt="gdpr-consent",vt="gdpr-consent-user-id";function wt(e){Be(jt,e)}function Nt(e={}){const{userId:t,autoLoad:s=!0}=e,r=qe(),[a,i]=X.useState({preferences:H,consents:[],isLoaded:!1}),n=t??function(){if("undefined"==typeof window)return null;const e=_e(vt);if(e)return e;try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);if(t.id)return Be(vt,t.id),t.id}}catch{}return null}(),{data:l=[],isLoading:o,refetch:c}=Ie({queryKey:["gdpr-consent",n],queryFn:()=>n?yt.getConsentStatus(n):Promise.resolve([]),enabled:s&&Boolean(n),staleTime:3e5}),d=Fe({mutationFn:e=>yt.updateConsent(e),onSuccess:()=>{r.invalidateQueries({queryKey:["gdpr-consent",n]}),c()}});X.useEffect(()=>{if(!s)return;const e=_e(jt),t=Y.getConsentPreferences(l),r={...H,...e,...t};"undefined"==typeof window||"undefined"==typeof navigator||"1"!==navigator.doNotTrack&&"1"!==navigator.msDoNotTrack&&"1"!==window.doNotTrack||(r.analytics=!1,r.marketing=!1,r.thirdParty=!1),i({preferences:r,consents:l,isLoaded:!0})},[l,s]);const u=X.useCallback(e=>{if("third_party"===e)return Y.hasConsent(l,e)||!0===a.preferences.thirdParty;const t="essential"===e?"essential":"analytics"===e?"analytics":"marketing";return Y.hasConsent(l,e)||!0===a.preferences[t]},[l,a.preferences]),m=X.useCallback(async e=>{if(!Y.validateConsentUpdate(e,"accepted"))throw new Error(`Cannot accept consent for ${e}`);const t={...a.preferences,..."third_party"===e?{thirdParty:!0}:{[e]:!0}};if(i(e=>({...e,preferences:t})),wt(t),n)try{await d.mutateAsync({userId:n,category:e,status:"accepted",version:W,ipAddress:void 0,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0})}catch(s){const t=s instanceof Error?s:new Error(String(s));bt.error("Failed to update consent in API",t,{userId:n,category:e})}},[a.preferences,n,d]),p=X.useCallback(async e=>{if(!Y.validateConsentUpdate(e,"rejected"))throw new Error(`Cannot reject consent for ${e}`);const t={...a.preferences,..."third_party"===e?{thirdParty:!1}:{[e]:!1}};if(i(e=>({...e,preferences:t})),wt(t),n)try{await d.mutateAsync({userId:n,category:e,status:"rejected",version:W,ipAddress:void 0,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0})}catch(s){const t=s instanceof Error?s:new Error(String(s));bt.error("Failed to update consent in API",t,{userId:n,category:e})}},[a.preferences,n,d]),h=X.useCallback(async e=>{if(!Y.canWithdrawConsent(e))throw new Error(`Cannot withdraw consent for ${e}`);const t={...a.preferences,..."third_party"===e?{thirdParty:!1}:{[e]:!1}};if(i(e=>({...e,preferences:t})),wt(t),n)try{await d.mutateAsync({userId:n,category:e,status:"withdrawn",version:W,ipAddress:void 0,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0})}catch(s){const t=s instanceof Error?s:new Error(String(s));bt.error("Failed to withdraw consent in API",t,{userId:n,category:e})}},[a.preferences,n,d]),x=X.useCallback(async e=>{const t={...a.preferences,...e};if(i(e=>({...e,preferences:t})),wt(t),n){if(void 0!==e.analytics)try{await d.mutateAsync({userId:n,category:"analytics",status:e.analytics?"accepted":"rejected",version:W,ipAddress:void 0,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0})}catch(s){const e=s instanceof Error?s:new Error(String(s));bt.error("Failed to update consent in API",e,{userId:n,category:"analytics"})}if(void 0!==e.marketing)try{await d.mutateAsync({userId:n,category:"marketing",status:e.marketing?"accepted":"rejected",version:W,ipAddress:void 0,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0})}catch(s){const e=s instanceof Error?s:new Error(String(s));bt.error("Failed to update consent in API",e,{userId:n,category:"marketing"})}if(void 0!==e.thirdParty)try{await d.mutateAsync({userId:n,category:"third_party",status:e.thirdParty?"accepted":"rejected",version:W,ipAddress:void 0,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0})}catch(s){const e=s instanceof Error?s:new Error(String(s));bt.error("Failed to update consent in API",e,{userId:n,category:"third_party"})}}},[a.preferences,n,d]),f=X.useCallback(()=>{if(Oe(jt),i({preferences:H,consents:[],isLoaded:!1}),"undefined"!=typeof window&&window.spark_analytics)try{C(()=>import("./feature-chat-CPR2_-OR.js").then(e=>e.q),__vite__mapDeps([8,1,2,3,4,5,6,7])).then(e=>{e.analytics.clear()}).catch(e=>{})}catch{}},[]),g=X.useCallback(async()=>{await c()},[c]);return{preferences:a.preferences,consents:a.consents,isLoaded:a.isLoaded,isLoading:o,hasConsent:u,acceptConsent:m,rejectConsent:p,withdrawConsent:h,updatePreferences:x,clearConsent:f,refreshConsents:g}}const St=a("ConsentSettings");function Ct({userId:e,onConsentChange:t}){var s,r,a;const i=Nt({userId:e,autoLoad:!0}),[n,l]=X.useState(!1),o=async(e,s)=>{try{l(!0),s?await i.acceptConsent(e):await i.rejectConsent(e),null==t||t({[e]:s})}catch(r){const t=r instanceof Error?r:new Error(String(r));St.error("Failed to update preference",t,{category:e,value:s})}finally{l(!1)}},c=e=>i.consents.find(t=>t.category===e);return Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs("div",{children:[Z.jsx("h2",{className:"text-2xl font-bold",children:"Consent Management"}),Z.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your consent preferences for data collection and usage."})]}),Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Essential Cookies"}),Z.jsx(I,{children:"These cookies are necessary for the website to function and cannot be switched off."})]}),Z.jsx(F,{children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsx("div",{className:"flex-1",children:Z.jsx("p",{className:"text-sm text-muted-foreground",children:"Essential cookies are required for core functionality such as authentication and security."})}),Z.jsx("div",{className:"ml-4",children:Z.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Always Active"})})]})})]}),Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Analytics Cookies"}),Z.jsx(I,{children:"These cookies help us understand how visitors interact with our website."})]}),Z.jsx(F,{children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{className:"flex-1",children:[Z.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"We use analytics cookies to collect information about how you use our website. This helps us improve our services and provide a better user experience."}),c("analytics")&&Z.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last updated: ",new Date((null==(s=c("analytics"))?void 0:s.acceptedAt)??"").toLocaleDateString()]})]}),Z.jsx("div",{className:"ml-4",children:Z.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[Z.jsx("input",{type:"checkbox",className:"sr-only peer",checked:i.preferences.analytics,onChange:e=>{o("analytics",e.target.checked)},disabled:n,"aria-label":"Enable analytics cookies"}),Z.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary peer-disabled:opacity-50"})]})})]})})]}),Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Marketing Cookies"}),Z.jsx(I,{children:"These cookies are used to deliver relevant advertisements and track campaign performance."})]}),Z.jsx(F,{children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{className:"flex-1",children:[Z.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Marketing cookies help us deliver personalized advertisements and measure the effectiveness of our campaigns."}),c("marketing")&&Z.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last updated: ",new Date((null==(r=c("marketing"))?void 0:r.acceptedAt)??"").toLocaleDateString()]})]}),Z.jsx("div",{className:"ml-4",children:Z.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[Z.jsx("input",{type:"checkbox",className:"sr-only peer",checked:i.preferences.marketing,onChange:e=>{o("marketing",e.target.checked)},disabled:n,"aria-label":"Enable marketing cookies"}),Z.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary peer-disabled:opacity-50"})]})})]})})]}),Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Third-Party Cookies"}),Z.jsx(I,{children:"These cookies are set by third-party services that appear on our pages."})]}),Z.jsx(F,{children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{className:"flex-1",children:[Z.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Third-party cookies are set by external services to provide additional functionality and features."}),c("third_party")&&Z.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last updated: ",new Date((null==(a=c("third_party"))?void 0:a.acceptedAt)??"").toLocaleDateString()]})]}),Z.jsx("div",{className:"ml-4",children:Z.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[Z.jsx("input",{type:"checkbox",className:"sr-only peer",checked:i.preferences.thirdParty,onChange:e=>{o("third_party",e.target.checked)},disabled:n,"aria-label":"Enable third-party cookies"}),Z.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary peer-disabled:opacity-50"})]})})]})})]}),i.consents.length>0&&Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Consent History"}),Z.jsx(I,{children:"View your consent history and changes over time."})]}),Z.jsx(F,{children:Z.jsx("div",{className:"space-y-2",children:i.consents.map(e=>Z.jsx("div",{className:"flex items-center justify-between p-2 border rounded",children:Z.jsxs("div",{children:[Z.jsx("p",{className:"text-sm font-medium capitalize",children:e.category.replace("_"," ")}),Z.jsxs("p",{className:"text-xs text-muted-foreground",children:["Status: ",e.status," | Version: ",e.version]}),e.acceptedAt&&Z.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accepted: ",new Date(e.acceptedAt).toLocaleString()]}),e.rejectedAt&&Z.jsxs("p",{className:"text-xs text-muted-foreground",children:["Rejected: ",new Date(e.rejectedAt).toLocaleString()]}),e.withdrawnAt&&Z.jsxs("p",{className:"text-xs text-muted-foreground",children:["Withdrawn: ",new Date(e.withdrawnAt).toLocaleString()]})]})},e.id))})})]}),Z.jsx("div",{className:"text-center text-sm text-muted-foreground",children:Z.jsxs("p",{children:["For more information, please read our"," ",Z.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Privacy Policy"}),"."]})})]})}const kt=a("gdpr-service");class Pt{constructor(){t(this,"consents",new Map),t(this,"requests",new Map)}async grantConsent(e,t,s,r){const a={type:t,granted:!0,grantedAt:Date.now(),purpose:s,legalBasis:r};this.consents.set(`${e}:${t}`,a);try{await yt.grantConsent(e,{type:t,granted:!0,grantedAt:a.grantedAt,purpose:s,legalBasis:r})}catch(i){kt.error("Failed to persist consent to API",{error:i instanceof Error?i:new Error(String(i))})}kt.debug("Consent granted",{userId:e,type:t,purpose:s})}async revokeConsent(e,t){const s=`${e}:${t}`,r=this.consents.get(s);if(r){const i={...r,granted:!1,revokedAt:Date.now()};this.consents.set(s,i);try{await yt.revokeConsent(e,t)}catch(a){kt.error("Failed to persist consent revocation to API",{error:a instanceof Error?a:new Error(String(a))})}kt.debug("Consent revoked",{userId:e,type:t})}}getConsentStatus(e,t){return this.consents.get(`${e}:${t}`)??null}getUserConsents(e){const t=[];return this.consents.forEach((s,r)=>{r.startsWith(`${e}:`)&&t.push(s)}),t}async requestDataAccess(e){const t={id:`request-${e}-${Date.now()}`,userId:e,right:"access",status:"pending",requestedAt:Date.now()};this.requests.set(t.id,t);try{const t=await yt.requestDataAccess(e);return this.requests.set(t.id,{id:t.id,userId:t.userId,right:t.right,status:t.status,requestedAt:t.requestedAt,completedAt:t.completedAt,data:t.data,reason:t.reason}),kt.debug("Data access request submitted",{requestId:t.id,userId:e}),{id:t.id,userId:t.userId,right:t.right,status:t.status,requestedAt:t.requestedAt,completedAt:t.completedAt,data:t.data,reason:t.reason}}catch(s){return kt.error("Failed to submit data access request",{error:s instanceof Error?s:new Error(String(s))}),t}}async requestDataRectification(e,t){const s={id:`request-${e}-${Date.now()}`,userId:e,right:"rectification",status:"pending",requestedAt:Date.now(),data:t};this.requests.set(s.id,s);try{const s=await yt.requestDataRectification({userId:e,corrections:t});return this.requests.set(s.id,{id:s.id,userId:s.userId,right:s.right,status:s.status,requestedAt:s.requestedAt,completedAt:s.completedAt,data:s.data,reason:s.reason}),kt.debug("Data rectification request submitted",{requestId:s.id,userId:e}),{id:s.id,userId:s.userId,right:s.right,status:s.status,requestedAt:s.requestedAt,completedAt:s.completedAt,data:s.data,reason:s.reason}}catch(r){return kt.error("Failed to submit data rectification request",{error:r instanceof Error?r:new Error(String(r))}),s}}async requestDataErasure(e,t){const s={id:`request-${e}-${Date.now()}`,userId:e,right:"erasure",status:"pending",requestedAt:Date.now(),reason:t};this.requests.set(s.id,s);try{const s=await yt.requestDataErasure(e,t);return this.requests.set(s.id,{id:s.id,userId:s.userId,right:s.right,status:s.status,requestedAt:s.requestedAt,completedAt:s.completedAt,data:s.data,reason:s.reason}),kt.debug("Data erasure request submitted",{requestId:s.id,userId:e}),{id:s.id,userId:s.userId,right:s.right,status:s.status,requestedAt:s.requestedAt,completedAt:s.completedAt,data:s.data,reason:s.reason}}catch(r){return kt.error("Failed to submit data erasure request",{error:r instanceof Error?r:new Error(String(r))}),s}}async requestDataPortability(e,t="json"){const s={id:`request-${e}-${Date.now()}`,userId:e,right:"portability",status:"pending",requestedAt:Date.now(),data:{format:t}};this.requests.set(s.id,s);try{const s=await yt.requestDataPortability(e,t);return this.requests.set(s.id,{id:s.id,userId:s.userId,right:s.right,status:s.status,requestedAt:s.requestedAt,completedAt:s.completedAt,data:s.data,reason:s.reason}),kt.debug("Data portability request submitted",{requestId:s.id,userId:e,format:t}),{id:s.id,userId:s.userId,right:s.right,status:s.status,requestedAt:s.requestedAt,completedAt:s.completedAt,data:s.data,reason:s.reason}}catch(r){return kt.error("Failed to submit data portability request",{error:r instanceof Error?r:new Error(String(r))}),s}}getRequestStatus(e){return this.requests.get(e)??null}getUserRequests(e){const t=[];return this.requests.forEach(s=>{s.userId===e&&t.push(s)}),t}async exportUserData(e,t="json"){try{const s=await yt.exportUserData({userId:e,format:t}),r=JSON.stringify(s,null,2),a=new Blob([r],{type:"application/json"});return kt.debug("User data exported",{userId:e,format:t}),a}catch(s){throw kt.error("Failed to export user data",{error:s instanceof Error?s:new Error(String(s))}),s}}async deleteUserData(e,t){try{await yt.deleteUserData({userId:e,confirmDeletion:!0,reason:t??"User requested deletion"}),kt.debug("User data deletion requested",{userId:e,reason:t})}catch(s){throw kt.error("Failed to delete user data",{error:s instanceof Error?s:new Error(String(s))}),s}}async fetchRequestStatus(e){try{const t=await yt.getUserRequests(e);t.forEach(e=>{this.requests.set(e.id,{id:e.id,userId:e.userId,right:e.right,status:e.status,requestedAt:e.requestedAt,completedAt:e.completedAt,data:e.data,reason:e.reason})}),kt.debug("Request status fetched",{userId:e,count:t.length})}catch(t){kt.error("Failed to fetch request status",{error:t instanceof Error?t:new Error(String(t))})}}}let At=null;function Et(){return At||(At=new Pt),At}const Dt=a("DataExport");function qt({userId:e,onExportComplete:t}){const[s,r]=X.useState(!1),[a,i]=X.useState("json"),[n,l]=X.useState(null),[o,c]=X.useState(!1);return Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Export Your Data"}),Z.jsx(I,{children:"Download a copy of all your data stored in our system (GDPR Right to Access & Data Portability)."})]}),Z.jsxs(F,{className:"space-y-4",children:[Z.jsxs("div",{children:[Z.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"You can request a copy of all your personal data. The export will include:"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-muted-foreground mb-4",children:[Z.jsx("li",{children:"User profile information"}),Z.jsx("li",{children:"Pet profiles"}),Z.jsx("li",{children:"Matches and swipe history"}),Z.jsx("li",{children:"Chat messages"}),Z.jsx("li",{children:"Community posts and comments"}),Z.jsx("li",{children:"Payment history"}),Z.jsx("li",{children:"Verification data"}),Z.jsx("li",{children:"Consent records"}),Z.jsx("li",{children:"Preferences and settings"})]})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Export Format"}),Z.jsxs("select",{value:a,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded",disabled:s,children:[Z.jsx("option",{value:"json",children:"JSON (Recommended)"}),Z.jsx("option",{value:"csv",children:"CSV (Spreadsheet)"}),Z.jsx("option",{value:"xml",children:"XML (Structured Data)"})]}),Z.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["json"===a&&"Machine-readable format, best for developers","csv"===a&&"Spreadsheet format, best for data analysis","xml"===a&&"Structured format, best for data integration"]})]}),n&&Z.jsx("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:Z.jsxs("p",{className:"text-sm text-destructive",children:["Error: ",n]})}),o&&Z.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:Z.jsx("p",{className:"text-sm text-green-600",children:"Data exported successfully! Your download should start shortly."})}),Z.jsx(j,{onClick:async()=>{try{r(!0),l(null),c(!1);const i=await yt.exportUserData({userId:e,format:a});let n,o,d;switch(a){case"json":default:n=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),o="application/json",d="json";break;case"csv":const e=function(e){const t=[],s=function e(t,s=""){const r={};for(const[a,i]of Object.entries(t)){const t=s?`${s}.${a}`:a;null==i?r[t]="":"object"!=typeof i||Array.isArray(i)?Array.isArray(i)?r[t]=JSON.stringify(i):r[t]=String(i):Object.assign(r,e(i,t))}return r}(e),r=Object.keys(s);return t.push(r.join(",")),t.push(r.map(e=>`"${String(s[e]??"").replace(/"/g,'""')}"`).join(",")),t.join("\n")}(i);n=new Blob([e],{type:"text/csv"}),o="text/csv",d="csv";break;case"xml":const t=function(e,t="data"){return`<?xml version="1.0" encoding="UTF-8"?>\n<${t}>\n${function e(t,s=0){const r="  ".repeat(s);let a="";for(const[i,n]of Object.entries(t)){const t=i.replace(/[^a-zA-Z0-9_]/g,"_");null==n?a+=`${r}<${t}></${t}>\n`:Array.isArray(n)?(a+=`${r}<${t}>\n`,n.forEach(t=>{a+="object"==typeof t&&null!==t?`${r}  <item>\n${e(t,s+2)}${r}  </item>\n`:`${r}  <item>${String(t)}</item>\n`}),a+=`${r}</${t}>\n`):a+="object"==typeof n?`${r}<${t}>\n${e(n,s+1)}${r}</${t}>\n`:`${r}<${t}>${String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</${t}>\n`}return a}(e,1)}</${t}>`}(i,"userData");n=new Blob([t],{type:"application/xml"}),o="application/xml",d="xml"}const u=URL.createObjectURL(n),m=document.createElement("a");if(m.href=u,m.download=`petspark-data-export-${e}-${(new Date).toISOString().split("T")[0]}.${d}`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(u),"json"!==a)try{const t=Et();await t.requestDataPortability(e,a),Dt.debug("Data portability request submitted",{userId:e,format:a})}catch(s){Dt.error("Failed to submit data portability request",{error:s instanceof Error?s:new Error(String(s))})}c(!0),null==t||t(),setTimeout(()=>{c(!1)},5e3)}catch(s){const t=s instanceof Error?s:new Error(String(s));Dt.error("Failed to export user data",t,{userId:e}),l(t.message)}finally{r(!1)}},disabled:s,className:"w-full",children:s?"Exporting...":"Export My Data"}),Z.jsxs("p",{className:"text-xs text-muted-foreground",children:["The export will be downloaded as a ",a.toUpperCase()," file. You can open it with appropriate software or a text editor."]})]})]})}const It=a("DataDeletion");function Ft({userId:e,onDeletionComplete:t}){const[s,r]=X.useState(!1),[a,i]=X.useState(!1),[n,l]=X.useState(""),[o,c]=X.useState(null),[d,u]=X.useState(!1),m="DELETE";return Z.jsxs(Z.Fragment,{children:[Z.jsxs(E,{className:"border-destructive",children:[Z.jsxs(D,{children:[Z.jsx(q,{className:"text-destructive",children:"Delete Account"}),Z.jsx(I,{children:"Permanently delete your account and all associated data (GDPR Right to Erasure)."})]}),Z.jsxs(F,{className:"space-y-4",children:[Z.jsxs("div",{children:[Z.jsx("p",{className:"text-sm text-muted-foreground mb-4 font-semibold text-destructive",children:"Warning: This action cannot be undone!"}),Z.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Deleting your account will permanently remove:"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-muted-foreground mb-4",children:[Z.jsx("li",{children:"Your user profile and account information"}),Z.jsx("li",{children:"All pet profiles you created"}),Z.jsx("li",{children:"All matches and swipe history"}),Z.jsx("li",{children:"All chat messages and conversations"}),Z.jsx("li",{children:"All community posts and comments"}),Z.jsx("li",{children:"All payment and transaction history"}),Z.jsx("li",{children:"All verification data"}),Z.jsx("li",{children:"All preferences and settings"})]}),Z.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This action is irreversible. Please make sure you want to delete your account before proceeding."})]}),o&&Z.jsx("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:Z.jsxs("p",{className:"text-sm text-destructive",children:["Error: ",o]})}),d&&Z.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:Z.jsx("p",{className:"text-sm text-green-600",children:"Your account has been deleted successfully. You will be redirected to the home page shortly."})}),Z.jsx(j,{variant:"destructive",onClick:()=>i(!0),disabled:s||d,className:"w-full",children:"Delete My Account"})]})]}),Z.jsx(x,{open:a,onOpenChange:i,children:Z.jsxs(f,{children:[Z.jsxs(g,{children:[Z.jsx(y,{children:"Confirm Account Deletion"}),Z.jsx(z,{children:"This action cannot be undone. This will permanently delete your account and all associated data."})]}),Z.jsxs("div",{className:"space-y-4 py-4",children:[Z.jsxs("p",{className:"text-sm text-muted-foreground",children:["To confirm, please type ",Z.jsx("span",{className:"font-mono font-bold",children:"DELETE"})," in the box below:"]}),Z.jsx(N,{type:"text",value:n,onChange:e=>l(e.target.value),placeholder:"Type DELETE to confirm",className:"font-mono","aria-label":"Confirmation text input"}),o&&Z.jsx("div",{className:"p-2 bg-destructive/10 border border-destructive/20 rounded",children:Z.jsx("p",{className:"text-sm text-destructive",children:o})})]}),Z.jsxs(J,{children:[Z.jsx(j,{variant:"outline",onClick:()=>i(!1),disabled:s,children:"Cancel"}),Z.jsx(j,{variant:"destructive",onClick:async()=>{if(n===m)try{r(!0),c(null),u(!1);const s=await yt.deleteUserData({userId:e,confirmDeletion:!0,reason:"User requested account deletion"});s.success?(u(!0),i(!1),null==t||t(),setTimeout(()=>{window.location.href="/"},3e3)):c(`Deletion completed with errors: ${s.errors.map(e=>e.error).join(", ")}`)}catch(s){const t=s instanceof Error?s:new Error(String(s));It.error("Failed to delete user data",t,{userId:e}),c(t.message)}finally{r(!1)}else c("Please type DELETE to confirm")},disabled:s||n!==m,children:s?"Deleting...":"Delete Account"})]})]})})]})}const Tt=a("DataRectification");function Rt({userId:e,onRectificationComplete:t}){const[s,r]=X.useState(!1),[a,i]=X.useState({}),[n,l]=X.useState(""),[o,c]=X.useState(""),[d,u]=X.useState(""),[m,p]=X.useState(null),[h,x]=X.useState(!1),f=X.useCallback(()=>{o.trim()&&d.trim()&&(i({...a,[o.trim()]:d.trim()}),c(""),u(""))},[o,d,a]),g=X.useCallback(e=>{const t={...a};delete t[e],i(t)},[a]);return Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Request Data Correction"}),Z.jsx(I,{children:"Request correction of inaccurate or incomplete personal data (GDPR Right to Rectification)."})]}),Z.jsxs(F,{className:"space-y-4",children:[Z.jsxs("div",{children:[Z.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"If you believe any of your personal data is inaccurate or incomplete, you can request corrections. Common fields that can be corrected include:"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-muted-foreground mb-4",children:[Z.jsx("li",{children:"Name, email address, phone number"}),Z.jsx("li",{children:"Profile information and preferences"}),Z.jsx("li",{children:"Location and address information"}),Z.jsx("li",{children:"Pet profile information"}),Z.jsx("li",{children:"Other personal data stored in your account"})]})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsx("label",{className:"text-sm font-medium",children:"Add Correction"}),Z.jsxs("div",{className:"flex gap-2",children:[Z.jsx(N,{type:"text",placeholder:"Field name (e.g., email, name)",value:o,onChange:e=>c(e.target.value),disabled:s,className:"flex-1"}),Z.jsx(N,{type:"text",placeholder:"Correct value",value:d,onChange:e=>u(e.target.value),disabled:s,className:"flex-1"}),Z.jsx(j,{type:"button",variant:"outline",onClick:f,disabled:s||!o.trim()||!d.trim(),children:"Add"})]})]}),Object.keys(a).length>0&&Z.jsxs("div",{className:"space-y-2",children:[Z.jsx("label",{className:"text-sm font-medium",children:"Requested Corrections"}),Z.jsx("div",{className:"space-y-2",children:Object.entries(a).map(([e,t])=>Z.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[Z.jsxs("div",{children:[Z.jsxs("span",{className:"text-sm font-medium",children:[e,":"]}),Z.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:t})]}),Z.jsx(j,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(e),disabled:s,children:"Remove"})]},e))})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Reason (Optional)"}),Z.jsx(S,{placeholder:"Please provide any additional context for these corrections...",value:n,onChange:e=>l(e.target.value),disabled:s,rows:3})]}),m&&Z.jsx("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:Z.jsxs("p",{className:"text-sm text-destructive",children:["Error: ",m]})}),h&&Z.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:Z.jsx("p",{className:"text-sm text-green-600",children:"Data rectification request submitted successfully! We will review your request and update your data accordingly."})}),Z.jsx(j,{onClick:async()=>{if(0!==Object.keys(a).length)try{r(!0),p(null),x(!1);const s=Et();await s.requestDataRectification(e,a),await yt.requestDataRectification({userId:e,corrections:a,reason:n.trim()||void 0}),x(!0),i({}),l(""),null==t||t(),setTimeout(()=>{x(!1)},5e3)}catch(s){const t=s instanceof Error?s:new Error(String(s));Tt.error("Failed to submit data rectification request",t,{userId:e}),p(t.message)}finally{r(!1)}else p("Please add at least one correction")},disabled:s||0===Object.keys(a).length,className:"w-full",children:s?"Submitting...":"Submit Correction Request"}),Z.jsx("p",{className:"text-xs text-muted-foreground",children:"Your request will be reviewed by our team. We typically process rectification requests within 30 days."})]})]})}const zt=a("RequestStatus");function Lt(e){switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in-progress":return"bg-blue-100 text-blue-800 border-blue-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}}function Mt(e){switch(e){case"access":return"Right to Access";case"rectification":return"Right to Rectification";case"erasure":return"Right to Erasure";case"portability":return"Right to Data Portability";default:return e}}function _t({userId:e,onRefresh:t}){const[s,r]=X.useState([]),[a,i]=X.useState(!0),[n,l]=X.useState(null),o=X.useCallback(async()=>{try{i(!0),l(null);const t=await yt.getUserRequests(e);r(t);const s=Et();await s.fetchRequestStatus(e),zt.debug("Requests fetched",{userId:e,count:t.length})}catch(t){const s=t instanceof Error?t:new Error(String(t));zt.error("Failed to fetch requests",s,{userId:e}),l(s.message)}finally{i(!1)}},[e]);X.useEffect(()=>{o()},[o]);const c=X.useCallback(()=>{o(),null==t||t()},[o,t]);return a?Z.jsx(E,{children:Z.jsx(F,{className:"p-6",children:Z.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading requests..."})})}):n?Z.jsx(E,{children:Z.jsx(F,{className:"p-6",children:Z.jsxs("div",{className:"p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:[Z.jsxs("p",{className:"text-sm text-destructive",children:["Error: ",n]}),Z.jsx(j,{variant:"outline",size:"sm",onClick:c,className:"mt-2",children:"Retry"})]})})}):0===s.length?Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Request Status"}),Z.jsx(I,{children:"View the status of your GDPR data subject requests."})]}),Z.jsxs(F,{children:[Z.jsx("p",{className:"text-sm text-muted-foreground",children:"No requests found."}),Z.jsx(j,{variant:"outline",onClick:c,className:"mt-4",children:"Refresh"})]})]}):Z.jsxs(E,{children:[Z.jsx(D,{children:Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{children:[Z.jsx(q,{children:"Request Status"}),Z.jsx(I,{children:"View the status of your GDPR data subject requests."})]}),Z.jsx(j,{variant:"outline",size:"sm",onClick:c,children:"Refresh"})]})}),Z.jsx(F,{className:"space-y-4",children:s.map(e=>Z.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsxs("div",{children:[Z.jsx("h3",{className:"font-semibold",children:Mt(e.right)}),Z.jsxs("p",{className:"text-sm text-muted-foreground",children:["Request ID: ",e.id]})]}),Z.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded border ${Lt(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1).replace("-"," ")})]}),Z.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[Z.jsxs("p",{children:["Requested: ",new Date(e.requestedAt).toLocaleString()]}),e.completedAt&&Z.jsxs("p",{children:["Completed: ",new Date(e.completedAt).toLocaleString()]}),e.reason&&Z.jsxs("p",{children:["Reason: ",e.reason]})]}),"completed"===e.status&&"access"===e.right&&Z.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded text-sm text-green-800",children:"Your data export is ready. Please check your downloads or request a new export."}),"rejected"===e.status&&Z.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded text-sm text-red-800",children:"Your request was rejected. Please contact support for more information."})]},e.id))})]})}const Bt=a("PrivacySettings");function Ot({userId:e}){const t=Nt({userId:e,autoLoad:!0});Et();const[s,r]=X.useState("overview"),[a,i]=X.useState({profileVisibility:"public",showLocation:!0,showContactInfo:!1,allowMessages:"matches"}),[n,l]=X.useState([]);return e?Z.jsxs("div",{className:"space-y-6 p-6",children:[Z.jsxs("div",{children:[Z.jsx("h1",{className:"text-3xl font-bold",children:"Privacy & Data"}),Z.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your privacy settings, data collection preferences, and account data."})]}),Z.jsxs("div",{className:"flex flex-wrap gap-2 border-b",children:[Z.jsx(j,{variant:"overview"===s?"default":"ghost",onClick:()=>r("overview"),className:"rounded-b-none",children:"Overview"}),Z.jsx(j,{variant:"consent"===s?"default":"ghost",onClick:()=>r("consent"),className:"rounded-b-none",children:"Consent Management"}),Z.jsx(j,{variant:"export"===s?"default":"ghost",onClick:()=>r("export"),className:"rounded-b-none",children:"Data Export"}),Z.jsx(j,{variant:"deletion"===s?"default":"ghost",onClick:()=>r("deletion"),className:"rounded-b-none",children:"Data Deletion"}),Z.jsx(j,{variant:"rectification"===s?"default":"ghost",onClick:()=>r("rectification"),className:"rounded-b-none",children:"Data Correction"}),Z.jsx(j,{variant:"requests"===s?"default":"ghost",onClick:()=>r("requests"),className:"rounded-b-none",children:"Request Status"}),Z.jsx(j,{variant:"visibility"===s?"default":"ghost",onClick:()=>r("visibility"),className:"rounded-b-none",children:"Visibility"}),Z.jsx(j,{variant:"blocked"===s?"default":"ghost",onClick:()=>r("blocked"),className:"rounded-b-none",children:"Blocked Users"})]}),"overview"===s&&Z.jsxs("div",{className:"space-y-6",children:[Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Privacy Overview"}),Z.jsx(I,{children:"Summary of your current privacy settings and data preferences."})]}),Z.jsxs(F,{className:"space-y-4",children:[Z.jsxs("div",{children:[Z.jsx("h3",{className:"font-semibold mb-2",children:"Data Collection"}),Z.jsxs("div",{className:"space-y-2 text-sm",children:[Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Analytics"}),Z.jsx("span",{className:t.preferences.analytics?"text-green-600":"text-muted-foreground",children:t.preferences.analytics?"Enabled":"Disabled"})]}),Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Marketing"}),Z.jsx("span",{className:t.preferences.marketing?"text-green-600":"text-muted-foreground",children:t.preferences.marketing?"Enabled":"Disabled"})]}),Z.jsxs("div",{className:"flex items-center justify-between",children:[Z.jsx("span",{className:"text-muted-foreground",children:"Third-Party"}),Z.jsx("span",{className:t.preferences.thirdParty?"text-green-600":"text-muted-foreground",children:t.preferences.thirdParty?"Enabled":"Disabled"})]})]})]}),Z.jsxs("div",{className:"pt-4 border-t",children:[Z.jsx("h3",{className:"font-semibold mb-2",children:"Data Rights"}),Z.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[Z.jsx("p",{children:"You have the right to:"}),Z.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[Z.jsx("li",{children:"Export all your data (Right to Access)"}),Z.jsx("li",{children:"Request correction of inaccurate data (Right to Rectification)"}),Z.jsx("li",{children:"Delete your account and all data (Right to Erasure)"}),Z.jsx("li",{children:"Request data portability (JSON, CSV, XML formats)"}),Z.jsx("li",{children:"Withdraw consent at any time"}),Z.jsx("li",{children:"Track request status in real-time"})]})]})]}),Z.jsx("div",{className:"pt-4 border-t",children:Z.jsxs("div",{className:"flex gap-2",children:[Z.jsx(j,{variant:"outline",onClick:()=>r("consent"),children:"Manage Consent"}),Z.jsx(j,{variant:"outline",onClick:()=>r("export"),children:"Export Data"}),Z.jsx(j,{variant:"outline",onClick:()=>r("rectification"),children:"Request Correction"}),Z.jsx(j,{variant:"outline",onClick:()=>r("requests"),children:"View Requests"}),Z.jsx(j,{variant:"outline",onClick:()=>r("deletion"),children:"Delete Account"})]})})]})]}),Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Privacy Policy & Terms"}),Z.jsx(I,{children:"Read our privacy policy and terms of service to understand how we handle your data."})]}),Z.jsxs(F,{className:"space-y-2",children:[Z.jsx(j,{variant:"outline",asChild:!0,className:"w-full",children:Z.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",children:"View Privacy Policy"})}),Z.jsx(j,{variant:"outline",asChild:!0,className:"w-full",children:Z.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",children:"View Terms of Service"})}),Z.jsx(j,{variant:"outline",asChild:!0,className:"w-full",children:Z.jsx("a",{href:"/cookie-policy",target:"_blank",rel:"noopener noreferrer",children:"View Cookie Policy"})})]})]})]}),"consent"===s&&Z.jsx(Ct,{userId:e}),"export"===s&&Z.jsx(qt,{userId:e}),"deletion"===s&&Z.jsx(Ft,{userId:e}),"rectification"===s&&Z.jsx(Rt,{userId:e}),"requests"===s&&Z.jsx(_t,{userId:e}),"visibility"===s&&Z.jsx("div",{className:"space-y-6",children:Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Visibility Settings"}),Z.jsx(I,{children:"Control who can see your profile and contact you."})]}),Z.jsxs(F,{className:"space-y-4",children:[Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Profile Visibility"}),Z.jsxs("select",{value:a.profileVisibility,onChange:e=>i({...a,profileVisibility:e.target.value}),className:"w-full p-2 border rounded",children:[Z.jsx("option",{value:"public",children:"Public"}),Z.jsx("option",{value:"matches",children:"Matches Only"}),Z.jsx("option",{value:"followers",children:"Followers Only"}),Z.jsx("option",{value:"private",children:"Private"})]})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Location Sharing"}),Z.jsxs("label",{className:"flex items-center gap-2",children:[Z.jsx("input",{type:"checkbox",checked:a.showLocation,onChange:e=>i({...a,showLocation:e.target.checked})}),Z.jsx("span",{children:"Show my location"})]})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Contact Information"}),Z.jsxs("label",{className:"flex items-center gap-2",children:[Z.jsx("input",{type:"checkbox",checked:a.showContactInfo,onChange:e=>i({...a,showContactInfo:e.target.checked})}),Z.jsx("span",{children:"Show contact information"})]})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Who can message me"}),Z.jsxs("select",{value:a.allowMessages,onChange:e=>i({...a,allowMessages:e.target.value}),className:"w-full p-2 border rounded",children:[Z.jsx("option",{value:"everyone",children:"Everyone"}),Z.jsx("option",{value:"matches",children:"Matches Only"}),Z.jsx("option",{value:"none",children:"No One"})]})]}),Z.jsx(j,{onClick:()=>{Bt.debug("Visibility settings saved",a)},children:"Save Visibility Settings"})]})]})}),"blocked"===s&&Z.jsx("div",{className:"space-y-6",children:Z.jsxs(E,{children:[Z.jsxs(D,{children:[Z.jsx(q,{children:"Blocked Users"}),Z.jsx(I,{children:"Manage users you have blocked or reported."})]}),Z.jsx(F,{className:"space-y-4",children:0===n.length?Z.jsx("p",{className:"text-muted-foreground",children:"No blocked users"}):Z.jsx("div",{className:"space-y-2",children:n.map(e=>Z.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[Z.jsxs("div",{children:[Z.jsxs("p",{className:"font-medium",children:["User ",e.userId]}),Z.jsxs("p",{className:"text-sm text-muted-foreground",children:["Blocked on ",new Date(e.blockedAt).toLocaleDateString()]}),e.reason&&Z.jsxs("p",{className:"text-sm text-muted-foreground",children:["Reason: ",e.reason]})]}),Z.jsx(j,{variant:"outline",onClick:()=>{l(n.filter(t=>t.userId!==e.userId)),Bt.debug("User unblocked",{userId:e.userId})},children:"Unblock"})]},e.userId))})})]})})]}):Z.jsx("div",{className:"p-6",children:Z.jsx(E,{children:Z.jsx(F,{className:"p-6",children:Z.jsx("p",{className:"text-muted-foreground",children:"Please log in to manage your privacy settings."})})})})}const Ut=X.lazy(()=>C(()=>import("./VisualAnalysisDemo-PcAXRdup.js"),__vite__mapDeps([9,1,2,3,4,5,6,7])).then(e=>({default:e.default})));function $t({pet:e,index:t,t:s,onEdit:r,onShowHealth:a}){const i=l({scale:1.03,translateY:-12}),n=Q({initial:{opacity:0,translateY:30,scale:.9},animate:{opacity:1,translateY:0,scale:1},transition:{delay:.08*t,type:"spring",stiffness:300,damping:30}}),o=l({scale:1.12});return Z.jsx(b,{style:[n.animatedStyle,i.animatedStyle],onMouseEnter:i.handleEnter,onMouseLeave:i.handleLeave,children:Z.jsxs("div",{className:"overflow-hidden rounded-3xl glass-strong premium-shadow backdrop-blur-2xl group relative border border-white/20",children:[Z.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),Z.jsxs("div",{className:"relative h-64 overflow-hidden",children:[Z.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-transparent to-accent/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-10 pointer-events-none"}),Z.jsx(b,{style:o.animatedStyle,onMouseEnter:o.handleEnter,onMouseLeave:o.handleLeave,children:Z.jsx("img",{src:e.photo,alt:e.name,className:"w-full h-full object-cover"})}),Z.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),Z.jsx(j,{variant:"ghost",size:"icon",onClick:()=>r(e),className:"absolute top-3 right-3 w-11 h-11 glass-strong rounded-full shadow-xl border border-white/30 backdrop-blur-xl","aria-label":"Edit pet profile",children:Z.jsx(Re,{size:20,className:"text-white drop-shadow-lg",weight:"bold"})})]}),Z.jsxs("div",{className:"p-5 bg-gradient-to-br from-white/40 to-white/20 backdrop-blur-md",children:[Z.jsx("h3",{className:"text-xl font-bold mb-2 truncate",children:e.name}),Z.jsxs("p",{className:"text-muted-foreground mb-4",children:[e.breed," â€¢ ",e.age," ",s.profile.yearsOld," â€¢ ",e.gender]}),e.bio&&Z.jsx("p",{className:"text-sm text-foreground mb-4 line-clamp-3",children:e.bio}),Array.isArray(e.personality)&&e.personality.length>0&&Z.jsxs("div",{className:"mb-4",children:[Z.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-2",children:s.petProfile.personality.toUpperCase()}),Z.jsx("div",{className:"flex flex-wrap gap-2",children:e.personality.slice(0,5).map((e,t)=>Z.jsx(w,{variant:"secondary",children:e},t))})]}),Array.isArray(e.interests)&&e.interests.length>0&&Z.jsxs("div",{className:"mb-4",children:[Z.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-2",children:s.petProfile.interests.toUpperCase()}),Z.jsx("div",{className:"flex flex-wrap gap-2",children:e.interests.slice(0,5).map((e,t)=>Z.jsx(w,{variant:"outline",children:e},t))})]}),Z.jsxs("div",{className:"space-y-2",children:[Z.jsx(ft,{petId:e.id,userId:e.ownerId,variant:"card",className:"mb-2"}),Z.jsxs(j,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a(e),children:[Z.jsx(me,{size:16,className:"mr-2",weight:"fill"}),"Health Dashboard"]})]})]})]})})}const Vt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{t:e,themePreset:t,setThemePreset:s}=k(),[r]=i("user-pets",[]),[a]=i("matches",[]),[n]=i("swipe-history",[]),[l="4k",o]=i("video-quality-preference","4k"),[c,d]=X.useState(null),[u,m]=X.useState(!1),[p,h]=X.useState(!1),[g,y]=X.useState(null),[v,w]=X.useState(!1),{user:N}=Ge(),S=Array.isArray(a)?a.filter(e=>"active"===e.status).length:0,C=Array.isArray(n)?n.length:0,P=Array.isArray(n)?n.filter(e=>"like"===e.action).length:0,A=P>0?Math.round(S/P*100):0,E=Q({initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15}}),D=K({duration:2e3,enabled:!0}),q=Q({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{delay:.2}}),I=Q({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{delay:.3}}),F=Q({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{delay:.4}}),T=Q({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{delay:.05}}),R=Q({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{delay:.075}}),z=Q({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{delay:.1}}),L=Q({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{delay:.2}}),M=Q({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{delay:.4}}),_=e=>{d(e),m(!0)};return Array.isArray(r)&&0!==r.length?Z.jsx(ze,{direction:"up",children:Z.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 sm:space-y-8 px-2 sm:px-4",children:[Z.jsx(b,{style:T.animatedStyle,className:"sticky top-16 z-10 bg-background/95 backdrop-blur-sm py-2 sm:py-0 sm:bg-transparent sm:backdrop-blur-none",children:Z.jsx(nt,{currentPreset:t,onPresetChange:e=>{s(e),re.success("Theme updated",{description:"Your theme has been updated successfully"})}})}),Z.jsx(b,{style:R.animatedStyle,children:Z.jsx(ot,{})}),C>0&&Z.jsx(tt,{totalMatches:S,totalSwipes:C,successRate:A}),Z.jsxs(b,{style:z.animatedStyle,className:"glass-strong p-6 rounded-3xl border border-white/20",children:[Z.jsx("h3",{className:"text-lg font-bold mb-4",children:"Story Highlights"}),Z.jsx(Le,{onlyOwn:!0})]}),Z.jsx(b,{style:L.animatedStyle,children:Z.jsx(X.Suspense,{fallback:Z.jsx("div",{className:"flex items-center justify-center py-12",children:Z.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),children:Z.jsx(Ut,{})})}),Z.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3 sm:gap-4",children:[Z.jsxs("div",{className:"flex-1 min-w-0",children:[Z.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-1 sm:mb-2",children:e.profile.myPets}),Z.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," ",1===r.length?e.profile.subtitle:e.profile.subtitlePlural]})]}),Z.jsxs(j,{onClick:()=>m(!0),className:"shrink-0",children:[Z.jsx(Te,{size:18,weight:"bold",className:"mr-1 sm:mr-2"}),Z.jsx("span",{className:"text-sm",children:e.profile.addPet})]})]}),Z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:(r||[]).map((t,s)=>Z.jsx($t,{pet:t,index:s,t:e,onEdit:_,onShowHealth:e=>{y(e),h(!0)}},t.id))}),Z.jsx(b,{style:M.animatedStyle,children:Z.jsx(it,{currentQuality:l,onQualityChange:o})}),Z.jsx(b,{style:M.animatedStyle,children:Z.jsx("div",{className:"glass-strong p-6 rounded-3xl border border-white/20",children:Z.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Z.jsxs("div",{children:[Z.jsx("h3",{className:"text-lg font-bold",children:"Privacy & Data"}),Z.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your privacy settings and data rights"})]}),Z.jsx(j,{variant:"outline",onClick:()=>w(!0),children:"Manage Privacy"})]})})}),v&&Z.jsx(x,{open:v,onOpenChange:w,children:Z.jsx(f,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:Z.jsx(Ot,{userId:(null==N?void 0:N.id)??null})})}),Z.jsx(Ze,{open:u,onOpenChange:()=>{m(!1),d(null)},editingPet:c}),p&&g&&Z.jsx(X.Suspense,{fallback:Z.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:Z.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})}),children:Z.jsx(Me,{pet:g,onClose:()=>{h(!1),y(null)}})})]})},"profile-content"):Z.jsx(ze,{direction:"up",children:Z.jsxs("div",{className:"max-w-2xl mx-auto",children:[Z.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:[Z.jsxs(b,{style:E.animatedStyle,className:"w-24 h-24 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center mb-6 shadow-2xl relative",children:[Z.jsx(b,{style:D.animatedStyle,children:Z.jsx(de,{size:48,className:"text-white",weight:"fill"})}),Z.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-primary to-accent animate-pulse opacity-50"})]}),Z.jsx(b,{style:q.animatedStyle,className:"text-2xl font-bold mb-2",children:e.profile.createProfile}),Z.jsx(b,{style:I.animatedStyle,className:"text-muted-foreground mb-6 max-w-md",children:e.profile.noPetsDesc}),Z.jsx(b,{style:F.animatedStyle,children:Z.jsxs(j,{size:"lg",onClick:()=>m(!0),className:"bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 shadow-xl",children:[Z.jsx(Te,{size:20,weight:"bold",className:"mr-2"}),e.profile.createProfileBtn]})})]}),Z.jsx(Ze,{open:u,onOpenChange:m})]})},"profile-empty")}},Symbol.toStringTag,{value:"Module"}));export{He as A,Vt as P,st as S,Nt as a,Ge as u};
