const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/view-MatchesView.tsx-CBM73xwC.js","assets/react-vendor-atdIga2R.js","assets/vendor-B2U5onNE.js","assets/utils-vendor-7mYxNw04.js","assets/ui-vendor-CttiZxwU.js","assets/view-ChatView.tsx-DI-Ea8ls.js","assets/feature-admin-g8AIjMAb.js","assets/feature-adoption-C919WvgL.js","assets/feature-community-DxZ7YsOF.js","assets/feature-chat-CPR2_-OR.js","assets/view-AdoptionView.tsx-BJlxubb2.js"])))=>i.map(i=>d[i]);
import{M as e,aw as s,B as t,C as a,q as l,r as i,n as r,c as n,P as o,S as d,G as c,H as m,J as u,d as x,h,N as g,a as p,a2 as f,m as v,O as j,Q as b,U as y,D as N,g as w,A as k,f as S,ax as C,ay as z,ap as M,u as P,E as A,aq as F,az as E,a8 as D,s as I,L as $,I as O,F as L,av as T,b as R,V,W as _,ad as U,ae as q,af as Q,ag as Y,ai as X,aA as B,$ as H,Y as G,Z as W,e as J,_ as K}from"./feature-admin-g8AIjMAb.js";import{r as Z,j as ee,bY as se,aI as te,bZ as ae,b_ as le,b$ as ie,c0 as re,c1 as ne,c2 as oe,c3 as de,c4 as ce,bX as me,c5 as ue,c6 as xe,c7 as he,ak as ge,c8 as pe,c9 as fe,U as ve,W as je,b8 as be,b9 as ye,ca as Ne,cb as we,a7 as ke,al as Se,aj as Ce,cc as ze,ac as Me,a3 as Pe,cd as Ae,am as Fe,bx as Ee,aK as De,ce as Ie,at as $e,aL as Oe,av as Le,bV as Te,bB as Re,aF as Ve,ah as _e,aA as Ue,aP as qe,ag as Qe,cf as Ye,cg as Xe,Z as Be}from"./react-vendor-atdIga2R.js";import{u as He,g as Ge,s as We,c as Je,M as Ke,E as Ze}from"./view-CommunityView.tsx-CD5NUxZ2.js";import{g as es}from"./utils-vendor-7mYxNw04.js";import{j as ss,k as ts,l as as,m as ls,n as is}from"./feature-community-DxZ7YsOF.js";import{S as rs}from"./feature-stories-DX9BRjll.js";import{A as ns}from"./feature-chat-CPR2_-OR.js";import{P as os}from"./view-AdoptionView.tsx-BJlxubb2.js";const ds={personalityMatch:"Personality",interestMatch:"Shared Interests",sizeMatch:"Size Compatibility",ageCompatibility:"Age Match",locationProximity:"Location"},cs={personalityMatch:"ðŸŽ­",interestMatch:"ðŸŽ¾",sizeMatch:"ðŸ“",ageCompatibility:"ðŸŽ‚",locationProximity:"ðŸ“"},ms={personalityMatch:"from-primary to-primary/60",interestMatch:"from-accent to-accent/60",sizeMatch:"from-secondary to-secondary/60",ageCompatibility:"from-lavender to-lavender/60",locationProximity:"from-primary to-accent"};function us({factors:t,className:a}){const[l,i]=Z.useState({});return Z.useEffect(()=>{const e=setTimeout(()=>{const e={personalityMatch:t.personalityMatch,interestMatch:t.interestMatch,sizeMatch:t.sizeMatch,ageCompatibility:t.ageCompatibility,locationProximity:t.locationProximity};i(e)},100);return()=>clearTimeout(e)},[t]),ee.jsx("div",{className:`rounded-3xl glass-strong premium-shadow backdrop-blur-2xl border border-white/20 ${a}`,children:ee.jsxs("div",{className:"p-6 bg-linear-to-br from-white/20 to-white/10",children:[ee.jsxs(e,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-lg font-bold mb-4 flex items-center gap-2 bg-linear-to-r from-primary via-accent to-secondary bg-clip-text text-transparent",children:[ee.jsx(s,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:"ðŸ“Š"}),"Compatibility Breakdown"]}),ee.jsx("div",{className:"space-y-4",children:Object.entries(t).map(([t,a],i)=>{const r=Math.round(100*(l[t]||0)),n=ds[t],o=cs[t],d=ms[t];return ee.jsxs(e,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*i,type:"spring",stiffness:300,damping:30},whileHover:{scale:1.02,x:5},children:[ee.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ee.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[ee.jsx(s,{whileHover:{scale:1.3,rotate:360},transition:{duration:.5},children:o}),n]}),ee.jsxs(s,{className:"text-sm font-bold text-muted-foreground tabular-nums",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.1*i+.3},children:[r,"%"]})]}),ee.jsx("div",{className:"relative",children:ee.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:ee.jsx(e,{className:`h-full bg-linear-to-r ${d} rounded-full relative overflow-hidden`,initial:{width:0},animate:{width:`${r}%`},transition:{delay:.1*i+.2,duration:.8,ease:"easeOut"},children:ee.jsx(e,{className:"absolute inset-0 bg-white/30",animate:{x:["-100%","100%"]},transition:{duration:1.5,repeat:1/0,ease:"linear",delay:.1*i+.5},style:{width:"50%"}})})})})]},t)})})]})})}function xs({trustProfile:e,ratings:s=[],compact:h=!1}){const[g,p]=Z.useState(!1),f=g?s:s.slice(0,3),v=Object.values(e.ratingBreakdown).reduce((e,s)=>e+s,0),j=s=>0===v?0:Math.round(e.ratingBreakdown[s]/v*100);return h?ee.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[ee.jsxs("div",{className:"flex items-center gap-1",children:[ee.jsx(se,{size:18,weight:"fill",className:"text-yellow-500"}),ee.jsx("span",{className:"text-lg font-bold text-foreground",children:e.overallRating.toFixed(1)})]}),ee.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",e.totalReviews," ",1===e.totalReviews?"review":"reviews",")"]}),e.trustScore>=90&&ee.jsx(t,{variant:"outline",className:"bg-primary/10 text-primary border-primary/30",children:"Highly Trusted"})]}):ee.jsxs(a,{className:"overflow-hidden border-border/50 shadow-lg",children:[ee.jsx(l,{className:"bg-gradient-to-br from-primary/5 to-accent/5 pb-4",children:ee.jsxs(i,{className:"flex items-center justify-between",children:[ee.jsx("span",{className:"text-lg font-bold",children:"Ratings & Reviews"}),e.trustScore>=90&&ee.jsx(t,{className:"bg-primary text-primary-foreground",children:"Highly Trusted"})]})}),ee.jsxs(r,{className:"pt-6 space-y-6",children:[ee.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ee.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[ee.jsx("div",{className:"text-5xl font-bold text-foreground",children:e.overallRating.toFixed(1)}),ee.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(s=>ee.jsx(se,{size:20,weight:s<=Math.round(e.overallRating)?"fill":"regular",className:n(s<=Math.round(e.overallRating)?"text-yellow-500":"text-muted-foreground/30")},s))}),ee.jsxs("p",{className:"text-sm text-muted-foreground",children:["Based on ",e.totalReviews," ",1===e.totalReviews?"review":"reviews"]})]}),ee.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(e=>ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsxs("div",{className:"flex items-center gap-1 w-12",children:[ee.jsx("span",{className:"text-sm font-medium text-foreground",children:e}),ee.jsx(se,{size:14,weight:"fill",className:"text-yellow-500"})]}),ee.jsx(o,{value:j(e),className:"h-2 flex-1"}),ee.jsxs("span",{className:"text-xs text-muted-foreground w-12 text-right",children:[j(e),"%"]})]},e))})]}),ee.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4",children:[ee.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[ee.jsx("div",{className:"text-2xl font-bold text-primary",children:e.playdateCount}),ee.jsx("div",{className:"text-xs text-muted-foreground",children:"Playdates"})]}),ee.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[ee.jsxs("div",{className:"text-2xl font-bold text-primary",children:[e.responseRate,"%"]}),ee.jsx("div",{className:"text-xs text-muted-foreground",children:"Response Rate"})]}),ee.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[ee.jsx("div",{className:"text-2xl font-bold text-primary",children:e.responseTime}),ee.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg. Response"})]}),ee.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[ee.jsx("div",{className:"text-2xl font-bold text-primary",children:e.trustScore}),ee.jsx("div",{className:"text-xs text-muted-foreground",children:"Trust Score"})]})]}),s.length>0&&ee.jsxs(ee.Fragment,{children:[ee.jsx(d,{}),ee.jsxs("div",{className:"space-y-4",children:[ee.jsx("h3",{className:"font-semibold text-foreground",children:"Recent Reviews"}),f.map(e=>ee.jsxs("div",{className:"space-y-3 pb-4 border-b border-border/30 last:border-0 last:pb-0 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[ee.jsx("div",{className:"flex items-start justify-between gap-4",children:ee.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[ee.jsxs(c,{className:"w-10 h-10 border-2 border-border",children:[ee.jsx(m,{src:e.reviewerAvatar,alt:e.reviewerName}),ee.jsx(u,{className:"bg-primary/10 text-primary",children:ee.jsx(te,{size:20,weight:"bold"})})]}),ee.jsxs("div",{className:"flex-1 space-y-1",children:[ee.jsxs("div",{className:"flex items-center gap-2",children:[ee.jsx("p",{className:"font-medium text-sm text-foreground",children:e.reviewerName}),ee.jsx(t,{variant:"outline",className:"text-xs",children:e.category})]}),ee.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(s=>ee.jsx(se,{size:14,weight:s<=e.rating?"fill":"regular",className:n(s<=e.rating?"text-yellow-500":"text-muted-foreground/30")},s)),ee.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:es(new Date(e.createdAt),{addSuffix:!0})})]})]})]})}),e.comment&&ee.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed pl-[52px]",children:e.comment}),e.helpful>0&&ee.jsx("div",{className:"flex items-center gap-2 pl-[52px]",children:ee.jsxs(x,{variant:"ghost",size:"sm",className:"h-7 text-xs gap-1.5 text-muted-foreground hover:text-foreground",children:[ee.jsx(ae,{size:14}),"Helpful (",e.helpful,")"]})})]},e.id)),s.length>3&&!g&&ee.jsxs(x,{variant:"outline",className:"w-full",onClick:()=>p(!0),children:["Show All ",s.length," Reviews"]}),g&&s.length>3&&ee.jsx(x,{variant:"outline",className:"w-full",onClick:()=>p(!1),children:"Show Less"})]})]})]})]})}function hs({delayDuration:e=0,...s}){return ee.jsx(le,{"data-slot":"tooltip-provider",delayDuration:e,...s})}function gs({...e}){return ee.jsx(hs,{children:ee.jsx(ie,{"data-slot":"tooltip",...e})})}function ps({...e}){return ee.jsx(re,{"data-slot":"tooltip-trigger",...e})}function fs({className:e,sideOffset:s=0,children:t,...a}){return ee.jsx(ne,{children:ee.jsxs(oe,{"data-slot":"tooltip-content",sideOffset:s,className:n("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...a,children:[t,ee.jsx(de,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const vs={verified_owner:ve,vaccinated:fe,health_certified:pe,background_check:ge,experienced_owner:he,trainer_approved:xe,rescue_supporter:ue,community_favorite:se,active_member:me,top_rated:ce},js={verified_owner:"text-primary bg-primary/10 border-primary/30",vaccinated:"text-emerald-600 dark:text-emerald-400 bg-emerald-500/10 border-emerald-500/30",health_certified:"text-blue-600 dark:text-blue-400 bg-blue-500/10 border-blue-500/30",background_check:"text-purple-600 dark:text-purple-400 bg-purple-500/10 border-purple-500/30",experienced_owner:"text-amber-600 dark:text-amber-400 bg-amber-500/10 border-amber-500/30",trainer_approved:"text-indigo-600 dark:text-indigo-400 bg-indigo-500/10 border-indigo-500/30",rescue_supporter:"text-rose-600 dark:text-rose-400 bg-rose-500/10 border-rose-500/30",community_favorite:"text-yellow-600 dark:text-yellow-400 bg-yellow-500/10 border-yellow-500/30",active_member:"text-orange-600 dark:text-orange-400 bg-orange-500/10 border-orange-500/30",top_rated:"text-violet-600 dark:text-violet-400 bg-violet-500/10 border-violet-500/30"};function bs({badges:e,compact:s=!1,showLabels:a=!1}){return e&&0!==e.length?ee.jsx(hs,{children:ee.jsx("div",{className:n("flex flex-wrap gap-2",s&&"gap-1.5"),children:e.map((e,l)=>{const i=vs[e.type],r=js[e.type];return a?ee.jsxs(gs,{children:[ee.jsx(ps,{asChild:!0,children:ee.jsxs(t,{variant:"outline",className:n("flex items-center gap-1.5 px-2.5 py-1 transition-all duration-300 hover:scale-105 cursor-default animate-in fade-in zoom-in",r),style:{animationDelay:50*l+"ms"},children:[ee.jsx(i,{size:14,weight:"bold"}),ee.jsx("span",{className:"text-xs font-medium",children:e.label})]})}),ee.jsx(fs,{side:"top",className:"max-w-xs",children:ee.jsx("p",{className:"text-sm",children:e.description})})]},e.id):ee.jsxs(gs,{children:[ee.jsx(ps,{asChild:!0,children:ee.jsx(t,{variant:"outline",className:n("flex items-center justify-center w-8 h-8 p-0 rounded-full transition-all duration-300 hover:scale-110 cursor-default animate-in fade-in zoom-in",s&&"w-7 h-7",r),style:{animationDelay:50*l+"ms"},children:ee.jsx(i,{size:s?14:16,weight:"bold"})})}),ee.jsx(fs,{side:"top",className:"max-w-xs",children:ee.jsxs("div",{className:"space-y-1",children:[ee.jsx("p",{className:"font-semibold text-sm",children:e.label}),ee.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]})})]},e.id)})})}):null}const ys=S("PetDetailDialog");function Ns({pet:e,open:s,onOpenChange:a}){var l,i;const r=Array.isArray(null==e?void 0:e.photos)?e.photos.filter(e=>"string"==typeof e&&e.length>0):(null==e?void 0:e.photo)&&"string"==typeof e.photo?[e.photo]:[],{currentIndex:n,currentPhoto:o,hasMultiplePhotos:x,totalPhotos:S,nextPhoto:C,prevPhoto:z,goToPhoto:M}=function({photos:e,initialIndex:s=0}){const[t,a]=Z.useState(s),l=Z.useCallback(()=>{h.trigger("light"),a(s=>(s+1)%e.length)},[e.length]),i=Z.useCallback(()=>{h.trigger("light"),a(s=>(s-1+e.length)%e.length)},[e.length]),r=Z.useCallback(e=>{h.trigger("selection"),a(e)},[]);return{currentIndex:t,currentPhoto:e[t]||"",hasMultiplePhotos:e.length>1,totalPhotos:e.length,nextPhoto:l,prevPhoto:i,goToPhoto:r}}({photos:r}),P=g(0),A=g(.95),F=g(20),E=g(0),D=g(.98),I=p(),$=f(),O=v({isVisible:s});Z.useEffect(()=>{s?(P.value=j(1),A.value=j(1),F.value=j(0)):(P.value=b(0),A.value=b(.95),F.value=b(20))},[s,P,A,F]);const L=y(()=>({opacity:P.value,transform:[{scale:A.value},{translateY:F.value}]}));Z.useEffect(()=>{E.value=0,D.value=.98,requestAnimationFrame(()=>{E.value=j(1),D.value=j(1)})},[n,E,D]);const T=y(()=>({opacity:E.value,transform:[{scale:D.value}]}));return e?ee.jsx(N,{open:s,onOpenChange:a,children:ee.jsx(w,{className:"max-w-4xl max-h-[90vh] overflow-hidden p-0 border-0 bg-transparent",children:s&&O.shouldRender?ee.jsxs(k,{style:[L,O.animatedStyle],className:"relative bg-card rounded-3xl overflow-hidden shadow-2xl",children:[ee.jsx(k,{style:[I.animatedStyle,$.animatedStyle],onClick:()=>{try{h.trigger("light"),a(!1)}catch(e){const s=e instanceof Error?e:new Error(String(e));ys.error("PetDetailDialog close button error",s),a(!1)}},onMouseEnter:I.handleEnter,onMouseLeave:I.handleLeave,onMouseDown:$.handlePress,className:"absolute top-4 right-4 z-50 w-10 h-10 rounded-full glass-strong flex items-center justify-center shadow-2xl border border-white/30 backdrop-blur-xl cursor-pointer",children:ee.jsx(je,{size:20,className:"text-white drop-shadow-lg",weight:"bold"})}),ee.jsxs("div",{className:"relative h-[400px] bg-linear-to-br from-muted/50 to-muted overflow-hidden group",children:[ee.jsx(k,{style:T,className:"w-full h-full",children:ee.jsx("img",{src:o,alt:`${e.name} photo ${n+1}`,className:"w-full h-full object-cover"})},n),ee.jsx(k,{className:"absolute inset-0 bg-linear-to-t from-black/70 via-black/30 to-transparent"}),x&&ee.jsxs(ee.Fragment,{children:[ee.jsx(k,{onClick:()=>{try{z()}catch(e){const s=e instanceof Error?e:new Error(String(e));ys.error("PetDetailDialog prevPhoto error",s)}},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 glass-strong rounded-full flex items-center justify-center shadow-2xl border border-white/30 backdrop-blur-xl opacity-0 group-hover:opacity-100 transition-opacity z-30",children:ee.jsx(be,{size:24,weight:"bold",className:"text-white drop-shadow-lg"})}),ee.jsx(k,{onClick:()=>{try{C()}catch(e){const s=e instanceof Error?e:new Error(String(e));ys.error("PetDetailDialog nextPhoto error",s)}},className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 glass-strong rounded-full flex items-center justify-center shadow-2xl border border-white/30 backdrop-blur-xl opacity-0 group-hover:opacity-100 transition-opacity z-30",children:ee.jsx(ye,{size:24,weight:"bold",className:"text-white drop-shadow-lg"})}),ee.jsx(k,{className:"absolute top-20 left-1/2 -translate-x-1/2 flex gap-2 z-20",children:r.map((e,s)=>ee.jsx(k,{onClick:()=>{try{s>=0&&s<r.length&&M(s)}catch(e){const t=e instanceof Error?e:new Error(String(e));ys.error("PetDetailDialog goToPhoto error",t,{index:s})}},className:"h-2 rounded-full transition-all shadow-lg "+(s===n?"bg-white w-10":"bg-white/50 w-2 hover:bg-white/75")},s))})]}),ee.jsxs(k,{className:"absolute bottom-6 left-6 text-white z-20",children:[ee.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[ee.jsx("h2",{className:"text-4xl sm:text-5xl font-bold drop-shadow-2xl",children:e.name}),e.verified&&ee.jsx(k,{children:ee.jsx(ve,{size:32,weight:"fill",className:"text-accent drop-shadow-lg"})})]}),ee.jsxs("div",{className:"flex items-center gap-4 text-white/90",children:[(null==e?void 0:e.gender)&&ee.jsxs("span",{className:"flex items-center gap-1.5 text-lg",children:["male"===e.gender?ee.jsx(Ne,{size:20,weight:"fill"}):ee.jsx(we,{size:20,weight:"fill"}),null!=e.age&&`${e.age} years`]}),(null==e?void 0:e.gender)&&(null==e?void 0:e.breed)&&ee.jsx("span",{className:"w-1 h-1 rounded-full bg-white/60"}),(null==e?void 0:e.breed)&&ee.jsx("span",{className:"text-lg",children:e.breed})]}),x&&ee.jsxs(k,{className:"text-sm text-white/70 mt-2",children:["Photo ",n+1," of ",S]})]})]}),ee.jsx("div",{className:"max-h-[calc(90vh-400px)] overflow-y-auto",children:ee.jsxs("div",{className:"p-6 sm:p-8 space-y-6",children:[e.trustProfile&&ee.jsx(k,{children:ee.jsx(xs,{trustProfile:e.trustProfile,...void 0!==e.ratings?{ratings:e.ratings}:{}})}),e.bio&&ee.jsxs(k,{className:"space-y-2",children:[ee.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[ee.jsx(ke,{size:16,weight:"fill",className:"text-primary"}),"About ",e.name]}),ee.jsx("p",{className:"text-foreground leading-relaxed",children:e.bio})]}),ee.jsx(d,{}),ee.jsxs(k,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ee.jsxs("div",{className:"space-y-4",children:[ee.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[ee.jsx(Se,{size:16,weight:"fill",className:"text-primary"}),"Details"]}),ee.jsxs("div",{className:"space-y-3",children:[null!=e.age&&ee.jsxs(k,{className:"flex items-center justify-between p-3 rounded-xl bg-muted/50",children:[ee.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[ee.jsx(Ce,{size:18,weight:"fill",className:"text-accent"}),"Age"]}),ee.jsxs("span",{className:"font-semibold",children:[e.age," years old"]})]}),e.gender&&ee.jsxs(k,{className:"flex items-center justify-between p-3 rounded-xl bg-muted/50",children:[ee.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:["male"===e.gender?ee.jsx(Ne,{size:18,weight:"fill",className:"text-accent"}):ee.jsx(we,{size:18,weight:"fill",className:"text-accent"}),"Gender"]}),ee.jsx("span",{className:"font-semibold capitalize",children:e.gender})]}),e.size&&ee.jsxs(k,{className:"flex items-center justify-between p-3 rounded-xl bg-muted/50",children:[ee.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[ee.jsx(ze,{size:18,weight:"fill",className:"text-accent"}),"Size"]}),ee.jsx("span",{className:"font-semibold",children:{small:"Small (< 20 lbs)",medium:"Medium (20-50 lbs)",large:"Large (50-100 lbs)","extra-large":"Extra Large (> 100 lbs)"}[e.size]||e.size})]}),e.location&&ee.jsxs(k,{className:"flex items-center justify-between p-3 rounded-xl bg-muted/50",children:[ee.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[ee.jsx(Me,{size:18,weight:"fill",className:"text-accent"}),"Location"]}),ee.jsx("span",{className:"font-semibold",children:e.location})]})]})]}),ee.jsxs("div",{className:"space-y-4",children:[ee.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[ee.jsx(Pe,{size:16,weight:"fill",className:"text-primary"}),"Owner"]}),ee.jsxs(k,{className:"p-4 rounded-xl bg-linear-to-br from-primary/5 to-accent/5 border border-border",children:[ee.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[ee.jsxs(c,{className:"w-14 h-14 ring-2 ring-primary/20",children:[ee.jsx(m,{src:null==e?void 0:e.ownerAvatar}),ee.jsx(u,{className:"bg-linear-to-br from-primary to-accent text-primary-foreground text-lg font-bold",children:(null==(l=null==e?void 0:e.ownerName)?void 0:l[0])??"?"})]}),ee.jsxs("div",{className:"flex-1",children:[ee.jsx("p",{className:"font-bold text-lg",children:(null==e?void 0:e.ownerName)??"Unknown Owner"}),(null==e?void 0:e.location)&&ee.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[ee.jsx(Me,{size:14,weight:"fill"}),e.location]})]})]}),(null==e?void 0:e.trustProfile)&&ee.jsxs("div",{className:"flex items-center gap-2 justify-between pt-3 border-t border-border",children:[ee.jsxs("div",{className:"flex items-center gap-1.5",children:[ee.jsx(se,{size:16,weight:"fill",className:"text-accent"}),ee.jsx("span",{className:"text-sm font-semibold",children:"number"==typeof e.trustProfile.overallRating?e.trustProfile.overallRating.toFixed(1):"N/A"})]}),ee.jsx("span",{className:"text-xs text-muted-foreground",children:"number"==typeof e.trustProfile.totalReviews?`${e.trustProfile.totalReviews} reviews`:"No reviews"}),"number"==typeof e.trustProfile.responseRate&&e.trustProfile.responseRate>0&&ee.jsxs(ee.Fragment,{children:[ee.jsx("div",{className:"w-1 h-1 rounded-full bg-muted-foreground/30"}),ee.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.trustProfile.responseRate,"% response rate"]})]})]})]})]})]}),Array.isArray(e.personality)&&e.personality.length>0&&ee.jsxs(ee.Fragment,{children:[ee.jsx(d,{}),ee.jsxs(k,{className:"space-y-3",children:[ee.jsx("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"Personality Traits"}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:e.personality.map((e,s)=>ee.jsx(k,{children:ee.jsx(t,{variant:"secondary",className:"px-3 py-1.5 text-sm font-medium hover:bg-secondary/80 transition-colors",children:e})},s))})]})]}),Array.isArray(e.interests)&&e.interests.length>0&&ee.jsxs(ee.Fragment,{children:[ee.jsx(d,{}),ee.jsxs(k,{className:"space-y-3",children:[ee.jsx("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"Interests & Activities"}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:e.interests.map((e,s)=>ee.jsx(k,{children:ee.jsx(t,{variant:"outline",className:"px-3 py-1.5 text-sm font-medium border-primary/30 hover:bg-primary/10 hover:border-primary/50 transition-colors",children:e})},s))})]})]}),Array.isArray(e.lookingFor)&&e.lookingFor.length>0&&ee.jsxs(ee.Fragment,{children:[ee.jsx(d,{}),ee.jsxs(k,{className:"space-y-3",children:[ee.jsx("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"Looking For"}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:e.lookingFor.map((e,s)=>ee.jsx(k,{children:ee.jsx(t,{className:"px-3 py-1.5 text-sm font-medium bg-linear-to-r from-primary to-accent text-white hover:shadow-lg transition-all",children:e})},s))})]})]}),(null==(i=e.trustProfile)?void 0:i.badges)&&Array.isArray(e.trustProfile.badges)&&e.trustProfile.badges.length>0&&ee.jsxs(ee.Fragment,{children:[ee.jsx(d,{}),ee.jsxs(k,{className:"space-y-4",children:[ee.jsxs("h3",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[ee.jsx(ve,{size:16,weight:"fill",className:"text-primary"}),"Trust & Verification"]}),ee.jsx(bs,{badges:e.trustProfile.badges,showLabels:!0})]})]})]})})]}):null})}):null}const ws={playful:["energetic","playful","adventurous","social"],calm:["gentle","calm","quiet","relaxed"],energetic:["playful","energetic","active","adventurous"],gentle:["calm","gentle","affectionate","quiet"],social:["playful","social","friendly","outgoing"],independent:["independent","calm","confident"],affectionate:["gentle","affectionate","cuddly","loving"],curious:["playful","curious","intelligent","adventurous"],protective:["loyal","protective","confident"],loyal:["loyal","protective","affectionate"]},ks={small:["small","medium"],medium:["small","medium","large"],large:["medium","large","extra-large"],"extra-large":["large","extra-large"]};function Ss(e,s){const t=Cs(e,s),a=.25,l=.3,i=.2,r=.15,n=.1;let o=t.sizeMatch*a+t.personalityMatch*l+t.interestMatch*i+t.ageCompatibility*r+t.locationProximity*n;const d=s.verified?.15:0;return o=Math.min(o+d,1),Math.round(100*o)}function Cs(e,s){return{sizeMatch:zs(e.size,s.size),personalityMatch:Ms(e.personality,s.personality),interestMatch:Ps(e.interests,s.interests),ageCompatibility:As(e.age,s.age),locationProximity:.8}}function zs(e,s){return(ks[e]||[]).includes(s)?1:.3}function Ms(e,s){if(0===e.length||0===s.length)return.5;let t=0,a=0;return e.forEach(e=>{const l=ws[e.toLowerCase()]||[];s.forEach(e=>{a++,l.includes(e.toLowerCase())&&t++})}),a>0?t/a:.5}function Ps(e,s){if(0===e.length||0===s.length)return.5;const t=new Set(e.map(e=>e.toLowerCase())),a=new Set(s.map(e=>e.toLowerCase())),l=[...t].filter(e=>a.has(e)).length,i=new Set([...t,...a]).size;return i>0?l/i:0}function As(e,s){const t=Math.abs(e-s);return 0===t?1:t<=1?.9:t<=2?.8:t<=3?.6:t<=5?.4:.2}async function Fs(e,s){const t=Cs(e,s),a=Ss(e,s),l=C`You are a pet compatibility expert. Generate 2-3 short, engaging reasons (max 10 words each) why these two pets would be great companions.

Pet 1: ${e.name}
- Breed: ${e.breed}
- Age: ${e.age} years
- Size: ${e.size}
- Personality: ${e.personality.join(", ")}
- Interests: ${e.interests.join(", ")}
- Looking for: ${e.lookingFor.join(", ")}

Pet 2: ${s.name}
- Breed: ${s.breed}
- Age: ${s.age} years
- Size: ${s.size}
- Personality: ${s.personality.join(", ")}
- Interests: ${s.interests.join(", ")}
- Looking for: ${s.lookingFor.join(", ")}

Compatibility Score: ${a}%

Focus on:
- Shared interests and activities they could enjoy together
- Compatible personality traits and energy levels
- Similar goals (playdate, training, cuddles, etc.)
- Age/size compatibility for safe play

Return as JSON with a "reasons" array of 2-3 strings:
{
  "reasons": ["reason 1", "reason 2", "reason 3"]
}`;try{const a=await z.llm(l,"gpt-4o-mini",!0);return JSON.parse(a).reasons||Es(e,s,t)}catch(i){const a=i instanceof Error?i:new Error(String(i));return M.warn("AI reasoning unavailable, using fallback logic",{error:a}),Es(e,s,t)}}function Es(e,s,t){const a=[];if(t.personalityMatch>.7){const t=e.personality.filter(e=>s.personality.some(s=>(ws[e.toLowerCase()]||[]).includes(s.toLowerCase())));t.length>0&&t[0]&&a.push(`Compatible personalities: both are ${t[0].toLowerCase()}`)}if(t.interestMatch>.5){const t=e.interests.filter(e=>s.interests.some(s=>s.toLowerCase()===e.toLowerCase()));t.length>0&&a.push(`Share ${t.length} common interest${t.length>1?"s":""}: ${t[0]}`)}return 1===t.sizeMatch&&a.push("Perfect size match for safe play"),t.ageCompatibility>.8&&a.push("Similar age and energy levels"),0===a.length&&a.push("Could be a great match!"),a}const Ds=S("DiscoverMapMode");function Is({pets:e,userPet:s,onSwipe:a}){var l,i;const{t:r}=P(),{mapSettings:n}=He(),[o,d]=Z.useState(null),[c,m]=Z.useState(null),[u,g]=Z.useState(!1),p=v({isVisible:!!c,enterTransition:"slideUp",exitTransition:"slideDown"});Z.useEffect(()=>{Ge().then(e=>{try{if(e&&"number"==typeof e.lat&&"number"==typeof e.lng){const s=We(e,n.PRIVACY_GRID_METERS);d(s)}else Ds.warn("DiscoverMapMode invalid location format",{location:e}),d({lat:40.7128,lng:-74.006})}catch(s){const e=s instanceof Error?s:new Error(String(s));Ds.error("DiscoverMapMode snapToGrid error",e),d({lat:40.7128,lng:-74.006})}}).catch(e=>{const s=e instanceof Error?e:new Error(String(e));Ds.error("DiscoverMapMode getCurrentLocation error",s),d({lat:40.7128,lng:-74.006})})},[n.PRIVACY_GRID_METERS]);const f=Z.useMemo(()=>o&&"number"==typeof o.lat&&"number"==typeof o.lng?Array.isArray(e)?e.filter(e=>null!=e).map(e=>{try{const s={lat:o.lat+.1*(Math.random()-.5),lng:o.lng+.1*(Math.random()-.5)},t=Je(o,s);return{...e,locationData:s,distance:t}}catch(s){const t=s instanceof Error?s:new Error(String(s));return Ds.error("DiscoverMapMode calculateDistance error",t,{petId:null==e?void 0:e.id}),null}}).filter(e=>null!=e).sort((e,s)=>e.distance-s.distance):(Ds.warn("DiscoverMapMode pets is not an array",{pets:e}),[]):[],[e,o]),j=Z.useMemo(()=>f.map(e=>{var s;return{id:e.id,location:e.locationData,data:e,icon:(null==(s=e.photos)?void 0:s[0])||"/placeholder-pet.png",color:"hsl(var(--primary))"}}),[f]),b=Z.useMemo(()=>o||{lat:40.7128,lng:-74.006},[o]),y=c&&s?Ss(s,c):0;return o?ee.jsxs("div",{className:"relative h-[calc(100vh-14rem)] max-h-[700px] bg-background rounded-2xl overflow-hidden border border-border shadow-xl",children:[ee.jsx(Ke,{center:b,zoom:12,markers:j,onMarkerClick:e=>{try{if(!(null==e?void 0:e.data))return void Ds.warn("DiscoverMapMode handleMarkerClick missing marker data",{marker:e});h.trigger("light"),m(e.data),g(!0)}catch(s){const t=s instanceof Error?s:new Error(String(s));Ds.error("DiscoverMapMode handleMarkerClick error",t,{markerId:null==e?void 0:e.id})}},height:"100%",clusterMarkers:!0}),p.shouldRender&&c&&ee.jsx(k,{style:p.animatedStyle,className:"absolute bottom-0 left-0 right-0 max-h-[70%] bg-background rounded-t-3xl shadow-2xl border-t border-border overflow-y-auto",children:ee.jsxs("div",{className:"p-6 space-y-4",children:[ee.jsxs("div",{className:"flex items-start justify-between",children:[ee.jsx("div",{className:"flex-1",children:ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsx("img",{src:(null==(l=c.photos)?void 0:l[0])||"/placeholder-pet.png",alt:c.name,className:"w-20 h-20 rounded-2xl object-cover shadow-lg"}),ee.jsxs("div",{children:[ee.jsx("h3",{className:"text-2xl font-bold",children:c.name}),ee.jsxs("p",{className:"text-muted-foreground",children:[c.breed," â€¢ ",c.age," ",r.common.years]}),ee.jsxs("p",{className:"text-sm text-primary font-medium",children:["ðŸ“"," ",Math.round((null==(i=f.find(e=>e.id===c.id))?void 0:i.distance)||0)," ",r.common.km," ",r.petProfile.distance]})]})]})}),ee.jsx(x,{variant:"ghost",size:"icon",onClick:()=>m(null),className:"shrink-0","aria-label":"Close pet details",children:ee.jsx(je,{size:20})})]}),ee.jsxs("div",{className:"flex gap-2",children:[ee.jsxs(t,{variant:"secondary",className:"text-sm",children:[y,"% ",r.discover.compatibility]}),ee.jsx(t,{variant:"outline",className:"text-sm",children:c.size})]}),ee.jsx("p",{className:"text-foreground/80",children:c.bio}),ee.jsxs("div",{children:[ee.jsx("p",{className:"text-sm font-semibold mb-2",children:r.petProfile.personality}),ee.jsx("div",{className:"flex gap-2 flex-wrap",children:c.personality.map(e=>ee.jsx(t,{variant:"outline",children:e},e))})]}),ee.jsxs("div",{className:"flex gap-3 pt-4",children:[ee.jsxs(x,{variant:"outline",size:"lg",className:"flex-1 h-14 text-lg",onClick:()=>{c&&(h.trigger("light"),a(c,"pass"),m(null))},children:[ee.jsx(je,{size:24,className:"mr-2"}),r.discover.pass]}),ee.jsxs(x,{size:"lg",className:"flex-1 h-14 text-lg bg-linear-to-r from-primary to-accent",onClick:()=>{c&&(h.trigger("success"),a(c,"like"),m(null))},children:[ee.jsx(Pe,{size:24,className:"mr-2",weight:"fill"}),r.discover.like]}),ee.jsx(x,{variant:"outline",size:"icon",className:"h-14 w-14",onClick:()=>g(!0),"aria-label":"View pet details",children:ee.jsx(Ae,{size:24})})]})]})}),c&&ee.jsx(Ze,{fallback:ee.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Failed to load pet details. Please refresh."}),children:ee.jsx(Ns,{pet:c,open:u,onOpenChange:g})}),ee.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-10 pointer-events-none",children:ee.jsx("div",{className:"backdrop-blur-xl bg-background/80 rounded-2xl shadow-xl border border-border p-4",children:ee.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[ee.jsxs("div",{children:[ee.jsx("p",{className:"text-2xl font-bold text-primary",children:f.length}),ee.jsx("p",{className:"text-xs text-muted-foreground",children:r.map.placesNearby})]}),ee.jsxs("div",{children:[ee.jsx("p",{className:"text-2xl font-bold text-primary",children:f[0]?Math.round(f[0].distance):0}),ee.jsx("p",{className:"text-xs text-muted-foreground",children:"Closest (km)"})]})]})})})]}):ee.jsx("div",{className:"relative h-[calc(100vh-14rem)] max-h-[700px] bg-background rounded-2xl overflow-hidden border border-border shadow-xl flex items-center justify-center",children:ee.jsxs("div",{className:"text-center space-y-4 p-8",children:[ee.jsx(Me,{size:64,className:"mx-auto text-primary/30",weight:"duotone"}),ee.jsx("p",{className:"text-lg font-semibold text-foreground/70",children:r.map.loading})]})})}const $s=S("SavedSearchesManager");function Os({search:e,index:s,totalItems:t,editingId:a,searchName:l,getPreferencesSummary:i,onEdit:r,onUpdate:n,onCancelEdit:o,onTogglePin:d,onDelete:c,onApply:m}){const u=T({index:s}),h=f({scale:.98}),g=p({scale:1.01}),v=f({scale:.95}),j=f({scale:.9}),b=f({scale:.9}),y=f({scale:.9}),N=a===e.id;return ee.jsx(k,{style:u.animatedStyle,className:"group p-4 rounded-lg border bg-card hover:shadow-md transition-all",onMouseEnter:g.handleEnter,onMouseLeave:g.handleLeave,children:N?ee.jsxs("div",{className:"space-y-3",children:[ee.jsx(O,{value:l,onChange:s=>r(e.id,s.target.value),placeholder:"Search name",autoFocus:!0}),ee.jsxs("div",{className:"flex gap-2",children:[ee.jsx(k,{style:h.animatedStyle,children:ee.jsxs(x,{size:"sm",onClick:()=>{h.handlePress(),n(e.id)},className:"flex-1",children:[ee.jsx($e,{size:16,className:"mr-2"}),"Save"]})}),ee.jsx(x,{size:"sm",variant:"outline",onClick:o,className:"flex-1",children:"Cancel"})]})]}):ee.jsxs(ee.Fragment,{children:[ee.jsxs("div",{className:"flex items-start justify-between mb-2",children:[ee.jsxs("div",{className:"flex items-center gap-2",children:[ee.jsx("span",{className:"text-xl",children:e.icon}),ee.jsxs("div",{children:[ee.jsxs("div",{className:"flex items-center gap-2",children:[ee.jsx("h4",{className:"font-semibold",children:e.name}),e.isPinned&&ee.jsx(se,{size:14,className:"text-yellow-500",weight:"fill"})]}),ee.jsx("p",{className:"text-xs text-muted-foreground",children:i(e.preferences)})]})]}),ee.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[ee.jsx(k,{style:j.animatedStyle,children:ee.jsx(x,{size:"icon",variant:"ghost",onClick:()=>{j.handlePress(),d(e.id)},className:"h-8 w-8",children:ee.jsx(se,{size:16,weight:e.isPinned?"fill":"regular",className:e.isPinned?"text-yellow-500":""})})}),ee.jsx(k,{style:b.animatedStyle,children:ee.jsx(x,{size:"icon",variant:"ghost",onClick:()=>{b.handlePress(),r(e.id,e.name)},className:"h-8 w-8",children:ee.jsx(Oe,{size:16})})}),ee.jsx(k,{style:y.animatedStyle,children:ee.jsx(x,{size:"icon",variant:"ghost",onClick:()=>{y.handlePress(),c(e.id,e.name)},className:"h-8 w-8 text-destructive hover:text-destructive",children:ee.jsx(Le,{size:16})})})]})]}),ee.jsxs("div",{className:"flex items-center justify-between",children:[ee.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.useCount>0&&`Used ${e.useCount} time${1!==e.useCount?"s":""}`,e.lastUsed&&` â€¢ Last: ${new Date(e.lastUsed).toLocaleDateString()}`]}),ee.jsx(k,{style:v.animatedStyle,children:ee.jsx(x,{size:"sm",onClick:()=>{v.handlePress(),m(e)},children:"Apply"})})]})]})})}function Ls({currentPreferences:e,onApplySearch:s,onClose:t}){const[n,o]=A("saved-searches",[]),[d,c]=Z.useState(!1),[m,u]=Z.useState(null),[h,g]=Z.useState(""),v=F({isVisible:!0,duration:300}),j=E({isExpanded:d,duration:300}),b=f({scale:.95}),y=p({scale:1.02}),N=Z.useCallback(()=>{try{if(!h.trim())return void Fe.error("Please enter a name for this search");const s={id:`search-${Date.now()}`,name:h.trim(),icon:"ðŸ”",preferences:e,isPinned:!1,useCount:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};o(e=>[...e||[],s]),D("success"),Fe.success("Search saved!",{description:`"${h}" has been saved`}),$s.info("Search saved",{searchId:s.id,searchName:s.name}),g(""),c(!1)}catch(s){const e=s instanceof Error?s:new Error(String(s));$s.error("Failed to save search",e,{searchName:h}),Fe.error("Failed to save search"),D("error")}},[h,e,o]),w=Z.useCallback(s=>{try{if(!h.trim())return void Fe.error("Please enter a name");o(t=>(t||[]).map(t=>t.id===s?{...t,name:h.trim(),preferences:e,updatedAt:(new Date).toISOString()}:t)),D("light"),Fe.success("Search updated"),$s.info("Search updated",{searchId:s,searchName:h.trim()}),u(null),g("")}catch(t){const e=t instanceof Error?t:new Error(String(t));$s.error("Failed to update search",e,{searchId:s,searchName:h}),Fe.error("Failed to update search"),D("error")}},[h,e,o]),S=Z.useCallback(e=>{try{o(s=>(s||[]).map(s=>s.id===e.id?{...s,useCount:s.useCount+1,lastUsed:(new Date).toISOString()}:s)),s(e.preferences),D("selection"),Fe.success("Search applied",{description:`Filters updated to "${e.name}"`}),$s.info("Search applied",{searchId:e.id,searchName:e.name}),t()}catch(a){const s=a instanceof Error?a:new Error(String(a));$s.error("Failed to apply search",s,{searchId:e.id,searchName:e.name}),Fe.error("Failed to apply search"),D("error")}},[o,s,t]),C=Z.useCallback(e=>{try{o(s=>(s||[]).map(s=>s.id===e?{...s,isPinned:!s.isPinned}:s)),D("light"),$s.info("Search pin toggled",{searchId:e})}catch(s){const t=s instanceof Error?s:new Error(String(s));$s.error("Failed to toggle pin",t,{searchId:e}),D("error")}},[o]),z=Z.useCallback((e,s)=>{try{o(s=>(s||[]).filter(s=>s.id!==e)),D("light"),Fe.info("Search deleted",{description:`"${s}" has been removed`}),$s.info("Search deleted",{searchId:e,searchName:s})}catch(t){const a=t instanceof Error?t:new Error(String(t));$s.error("Failed to delete search",a,{searchId:e,searchName:s}),Fe.error("Failed to delete search"),D("error")}},[o]),M=Z.useMemo(()=>[...n||[]].sort((e,s)=>e.isPinned!==s.isPinned?e.isPinned?-1:1:s.useCount-e.useCount),[n]),P=Z.useCallback(e=>{const s=[];return 0===e.minAge&&15===e.maxAge||s.push(`${e.minAge}-${e.maxAge}y`),e.sizes.length<4&&s.push(`${e.sizes.length} sizes`),50!==e.maxDistance&&s.push(`${e.maxDistance}km`),e.personalities.length>0&&s.push(`${e.personalities.length} traits`),s.length>0?s.join(" â€¢ "):"All filters"},[]);return ee.jsx(k,{style:v.style,className:"fixed inset-0 bg-background/95 backdrop-blur-sm z-50 overflow-auto",children:ee.jsxs("div",{className:"max-w-3xl mx-auto p-4 sm:p-6 lg:p-8",children:[ee.jsxs("div",{className:"flex items-center justify-between mb-6",children:[ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:ee.jsx(Ee,{size:24,className:"text-white",weight:"fill"})}),ee.jsxs("div",{children:[ee.jsx("h1",{className:"text-2xl font-bold",children:"Saved Searches"}),ee.jsx("p",{className:"text-sm text-muted-foreground",children:"Quick access to your favorite filters"})]})]}),ee.jsx(x,{variant:"ghost",size:"icon",onClick:t,children:ee.jsx(je,{size:24})})]}),ee.jsxs(a,{className:"mb-6",children:[ee.jsx(l,{children:ee.jsxs("div",{className:"flex items-center justify-between",children:[ee.jsxs("div",{children:[ee.jsx(i,{children:"Current Filters"}),ee.jsx(I,{children:"Save your current search criteria"})]}),ee.jsx(k,{style:y.animatedStyle,onMouseEnter:y.handleEnter,onMouseLeave:y.handleLeave,children:ee.jsxs(x,{onClick:()=>c(!d),size:"sm",children:[ee.jsx(De,{size:16,className:"mr-2"}),"Save Current"]})})]})}),ee.jsxs(r,{children:[d&&ee.jsx(k,{style:j.heightStyle,className:"mb-4 overflow-hidden",children:ee.jsxs("div",{className:"flex gap-2",children:[ee.jsxs("div",{className:"flex-1",children:[ee.jsx($,{htmlFor:"search-name",className:"sr-only",children:"Search Name"}),ee.jsx(O,{id:"search-name",placeholder:"e.g., Active dogs under 5",value:h,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(b.handlePress(),N())}})]}),ee.jsx(k,{style:b.animatedStyle,children:ee.jsxs(x,{onClick:N,children:[ee.jsx(Ie,{size:16,className:"mr-2"}),"Save"]})})]})}),ee.jsx("div",{className:"text-sm text-muted-foreground",children:P(e)})]})]}),ee.jsxs(a,{children:[ee.jsxs(l,{children:[ee.jsx(i,{children:"Your Saved Searches"}),ee.jsx(I,{children:0===M.length?"No saved searches yet":`${M.length} saved search${1!==M.length?"es":""}`})]}),ee.jsx(r,{children:ee.jsx(L,{className:"h-[500px]",children:0===M.length?ee.jsxs("div",{className:"text-center py-12",children:[ee.jsx(Ee,{size:48,className:"mx-auto text-muted-foreground mb-3"}),ee.jsx("p",{className:"text-muted-foreground",children:"No saved searches yet"}),ee.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Save your current filters to quickly access them later"})]}):ee.jsx("div",{className:"space-y-3",children:M.map((e,s)=>ee.jsx(Os,{search:e,index:s,totalItems:M.length,editingId:m,searchName:h,getPreferencesSummary:P,onEdit:(e,s)=>{u(e),g(s)},onUpdate:w,onCancelEdit:()=>{u(null),g("")},onTogglePin:C,onDelete:z,onApply:S},e.id))})})})]})]})})}const Ts={minAge:0,maxAge:15,sizes:["small","medium","large","extra-large"],maxDistance:50,personalities:[],interests:[],lookingFor:[],minCompatibility:0,mediaFilters:{cropSize:"any",photoQuality:"any",hasVideo:!1,minPhotos:1},advancedFilters:{verified:!1,activeToday:!1,hasStories:!1,respondQuickly:!1,superLikesOnly:!1}},Rs=["playful","calm","energetic","gentle","social","independent","affectionate","curious","protective","loyal","friendly","outgoing","confident","quiet","relaxed","active","adventurous","cuddly","loving","intelligent"],Vs=["fetch","swimming","hiking","cuddling","playing","training","running","walking","agility","tricks","sleeping","eating","exploring","meeting new friends","car rides","beach","park","toys"],_s=["playdate","walking buddy","training partner","best friend","adventure companion","cuddle buddy","active friend","gentle friend"];function Us(){var e,s,a,l,i,r,n,o,c;const[m,u]=A("discovery-preferences",Ts),[h,p]=Z.useState(!1),f=R({hoverScale:1.05,tapScale:.95}),v=g(1),j=y(()=>({transform:[{scale:v.value}]})),N=g(0),w=y(()=>({transform:[{rotate:`${N.value}deg`}]})),S=m||Ts,[C,z]=Z.useState(S.minAge),[M,P]=Z.useState(S.maxAge),[F,E]=Z.useState(S.sizes),[D,I]=Z.useState(S.maxDistance),[O,T]=Z.useState(S.personalities||[]),[H,G]=Z.useState(S.interests||[]),[W,J]=Z.useState(S.lookingFor||[]),[K,se]=Z.useState(S.minCompatibility||0),[te,ae]=Z.useState((null==(e=S.mediaFilters)?void 0:e.cropSize)||"any"),[le,ie]=Z.useState((null==(s=S.mediaFilters)?void 0:s.photoQuality)||"any"),[re,ne]=Z.useState((null==(a=S.mediaFilters)?void 0:a.hasVideo)||!1),[oe,de]=Z.useState((null==(l=S.mediaFilters)?void 0:l.minPhotos)||1),[ce,me]=Z.useState((null==(i=S.advancedFilters)?void 0:i.verified)||!1),[ue,xe]=Z.useState((null==(r=S.advancedFilters)?void 0:r.activeToday)||!1),[he,ge]=Z.useState((null==(n=S.advancedFilters)?void 0:n.hasStories)||!1),[pe,fe]=Z.useState((null==(o=S.advancedFilters)?void 0:o.respondQuickly)||!1),[ve,be]=Z.useState((null==(c=S.advancedFilters)?void 0:c.superLikesOnly)||!1),ye=C!==Ts.minAge||M!==Ts.maxAge||F.length!==Ts.sizes.length||D!==Ts.maxDistance||O.length>0||H.length>0||W.length>0||K>0||"any"!==te||"any"!==le||!1!==re||oe>1||ce||ue||he||pe||ve;Z.useEffect(()=>{v.value=ye?V(_(b(1.3),b(1))):1},[ye,v]),Z.useEffect(()=>{N.value=V(_(b(10),b(-10),b(0)))},[N]);const Ne=Z.useCallback(()=>{u(e=>({...e??Ts,minAge:C,maxAge:M,sizes:F,maxDistance:D,personalities:O,interests:H,lookingFor:W,minCompatibility:K,mediaFilters:{cropSize:te,photoQuality:le,hasVideo:re,minPhotos:oe},advancedFilters:{verified:ce,activeToday:ue,hasStories:he,respondQuickly:pe,superLikesOnly:ve}})),p(!1)},[u,C,M,F,D,O,H,W,K,te,le,re,oe,ce,ue,he,pe,ve]);return ee.jsxs(ss,{open:h,onOpenChange:p,children:[ee.jsx(ts,{asChild:!0,children:ee.jsx("div",{children:ee.jsx(k,{style:f.animatedStyle,onMouseEnter:f.handleMouseEnter,onMouseLeave:f.handleMouseLeave,onClick:f.handlePress,children:ee.jsxs(x,{variant:"outline",size:"sm",className:"gap-2 relative",children:[ee.jsx(Te,{size:16,weight:ye?"fill":"regular"}),"Filters",ye&&ee.jsx(k,{style:j,className:"w-2 h-2 bg-primary rounded-full absolute -top-0.5 -right-0.5"})]})})})}),ee.jsxs(as,{className:"w-full sm:max-w-md overflow-hidden flex flex-col",children:[ee.jsx(ls,{className:"shrink-0",children:ee.jsxs(is,{className:"text-2xl flex items-center gap-2",children:[ee.jsx(k,{style:w,children:ee.jsx("span",{children:"ðŸŽ¯"})}),"Discovery Preferences"]})}),ee.jsxs(U,{defaultValue:"basic",className:"flex-1 flex flex-col overflow-hidden",children:[ee.jsxs(q,{className:"grid w-full grid-cols-3 shrink-0",children:[ee.jsx(Q,{value:"basic",children:"Basic"}),ee.jsx(Q,{value:"media",children:"Media"}),ee.jsx(Q,{value:"advanced",children:"Advanced"})]}),ee.jsx(Y,{value:"basic",className:"flex-1 overflow-hidden mt-4",children:ee.jsx(L,{className:"h-full -mx-6 px-6",children:ee.jsxs("div",{className:"space-y-6 py-2",children:[ee.jsxs("div",{children:[ee.jsx($,{className:"text-base mb-4 block font-semibold",children:"Age Range"}),ee.jsxs("div",{className:"space-y-4",children:[ee.jsxs("div",{children:[ee.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ee.jsx("span",{className:"text-sm text-muted-foreground",children:"Minimum Age"}),ee.jsxs("span",{className:"text-sm font-medium",children:[C," ",0===C?"year":"years"]})]}),ee.jsx(X,{value:[C],onValueChange:e=>z(e[0]??0),max:15,step:1,className:"w-full"})]}),ee.jsxs("div",{children:[ee.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ee.jsx("span",{className:"text-sm text-muted-foreground",children:"Maximum Age"}),ee.jsxs("span",{className:"text-sm font-medium",children:[M," years"]})]}),ee.jsx(X,{value:[M],onValueChange:e=>P(e[0]??0),max:15,step:1,className:"w-full"})]})]})]}),ee.jsx(d,{}),ee.jsxs("div",{children:[ee.jsx($,{className:"text-base mb-3 block font-semibold",children:"Size Preferences"}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:["small","medium","large","extra-large"].map(e=>ee.jsxs(t,{variant:F.includes(e)?"default":"outline",className:"cursor-pointer capitalize transition-all hover:scale-105",onClick:()=>(e=>{F.includes(e)?E(F.filter(s=>s!==e)):E([...F,e])})(e),children:[e.replace("-"," "),F.includes(e)&&ee.jsx(je,{size:14,className:"ml-1",weight:"bold"})]},e))})]}),ee.jsx(d,{}),ee.jsxs("div",{children:[ee.jsx($,{className:"text-base mb-4 block font-semibold",children:"Maximum Distance"}),ee.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ee.jsx("span",{className:"text-sm text-muted-foreground",children:"Within"}),ee.jsxs("span",{className:"text-sm font-medium",children:[D," miles"]})]}),ee.jsx(X,{value:[D],onValueChange:e=>I(e[0]??0),min:5,max:100,step:5,className:"w-full"})]}),ee.jsx(d,{}),ee.jsxs("div",{children:[ee.jsxs($,{className:"text-base mb-3 block font-semibold",children:["Personality Traits"," ",O.length>0&&ee.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",O.length," selected)"]})]}),ee.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Find pets with these personality traits"}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:Rs.map(e=>ee.jsxs(t,{variant:O.includes(e)?"default":"outline",className:"cursor-pointer capitalize transition-all hover:scale-105",onClick:()=>(e=>{O.includes(e)?T(O.filter(s=>s!==e)):T([...O,e])})(e),children:[e,O.includes(e)&&ee.jsx(je,{size:14,className:"ml-1",weight:"bold"})]},e))})]}),ee.jsx(d,{}),ee.jsxs("div",{children:[ee.jsxs($,{className:"text-base mb-3 block font-semibold",children:["Interests"," ",H.length>0&&ee.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",H.length," selected)"]})]}),ee.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Find pets who enjoy these activities"}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:Vs.map(e=>ee.jsxs(t,{variant:H.includes(e)?"default":"outline",className:"cursor-pointer capitalize transition-all hover:scale-105",onClick:()=>(e=>{H.includes(e)?G(H.filter(s=>s!==e)):G([...H,e])})(e),children:[e,H.includes(e)&&ee.jsx(je,{size:14,className:"ml-1",weight:"bold"})]},e))})]}),ee.jsx(d,{}),ee.jsxs("div",{children:[ee.jsxs($,{className:"text-base mb-3 block font-semibold",children:["Looking For"," ",W.length>0&&ee.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",W.length," selected)"]})]}),ee.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Find pets seeking these connections"}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:_s.map(e=>ee.jsxs(t,{variant:W.includes(e)?"default":"outline",className:"cursor-pointer capitalize transition-all hover:scale-105",onClick:()=>(e=>{W.includes(e)?J(W.filter(s=>s!==e)):J([...W,e])})(e),children:[e,W.includes(e)&&ee.jsx(je,{size:14,className:"ml-1",weight:"bold"})]},e))})]}),ee.jsx(d,{}),ee.jsxs("div",{children:[ee.jsx($,{className:"text-base mb-4 block font-semibold",children:"Minimum Compatibility Score"}),ee.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Only show pets with at least this compatibility"}),ee.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ee.jsx("span",{className:"text-sm text-muted-foreground",children:"Minimum Score"}),ee.jsxs("span",{className:"text-sm font-medium",children:[K,"%"]})]}),ee.jsx(X,{value:[K],onValueChange:e=>se(e[0]??0),min:0,max:90,step:10,className:"w-full"})]})]})})}),ee.jsx(Y,{value:"media",className:"flex-1 overflow-hidden mt-4",children:ee.jsx(L,{className:"h-full -mx-6 px-6",children:ee.jsxs("div",{className:"space-y-6 py-2",children:[ee.jsxs("div",{children:[ee.jsxs($,{className:"text-base mb-4 font-semibold flex items-center gap-2",children:[ee.jsx(Re,{size:18,weight:"bold"}),"Photo Crop Size"]}),ee.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Filter profiles by photo aspect ratio"}),ee.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"any",label:"Any Size",icon:"ðŸ“"},{value:"square",label:"Square (1:1)",icon:"â¬œ"},{value:"portrait",label:"Portrait (3:4)",icon:"ðŸ“±"},{value:"landscape",label:"Landscape (4:3)",icon:"ðŸ–¼ï¸"}].map(({value:e,label:s,icon:t})=>ee.jsxs("button",{type:"button",onClick:()=>{const s=e;["any","square","portrait","landscape"].includes(s)&&ae(s)},className:"p-4 rounded-lg border-2 transition-all text-left hover:scale-[1.02] active:scale-[0.98] "+(te===e?"border-primary bg-primary/10":"border-border hover:border-primary/50"),children:[ee.jsx("div",{className:"text-2xl mb-1",children:t}),ee.jsx("div",{className:"text-sm font-medium",children:s})]},e))})]}),ee.jsx(d,{}),ee.jsxs("div",{children:[ee.jsxs($,{className:"text-base mb-4 font-semibold flex items-center gap-2",children:[ee.jsx(Ve,{size:18,weight:"bold"}),"Photo Quality"]}),ee.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Prefer high-quality or verified photos"}),ee.jsx("div",{className:"flex flex-col gap-2",children:[{value:"any",label:"Any Quality",desc:"Show all profiles"},{value:"high",label:"High Quality",desc:"Clear, well-lit photos only"},{value:"verified",label:"Verified Photos",desc:"Authenticated by moderators"}].map(({value:e,label:s,desc:t})=>ee.jsxs("button",{type:"button",onClick:()=>{const s=e;["any","high","verified"].includes(s)&&ie(s)},className:"p-4 rounded-lg border-2 transition-all text-left hover:scale-[1.01] active:scale-[0.99] "+(le===e?"border-primary bg-primary/10":"border-border hover:border-primary/50"),children:[ee.jsxs("div",{className:"font-medium text-sm flex items-center gap-2",children:[le===e&&ee.jsx(_e,{size:16,weight:"fill",className:"text-primary"}),s]}),ee.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t})]},e))})]}),ee.jsx(d,{}),ee.jsxs("div",{children:[ee.jsxs($,{className:"text-base mb-4 font-semibold flex items-center gap-2",children:[ee.jsx(Ue,{size:18,weight:"bold"}),"Video Content"]}),ee.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card",children:[ee.jsxs("div",{children:[ee.jsx("div",{className:"font-medium text-sm",children:"Has Video"}),ee.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Only show profiles with video content"})]}),ee.jsx(B,{checked:!0===re,onCheckedChange:e=>ne(e)})]})]}),ee.jsx(d,{}),ee.jsxs("div",{children:[ee.jsxs($,{className:"text-base mb-4 font-semibold flex items-center gap-2",children:[ee.jsx(Re,{size:18,weight:"bold"}),"Minimum Photos"]}),ee.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Profiles must have at least this many photos"}),ee.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ee.jsx("span",{className:"text-sm text-muted-foreground",children:"Minimum"}),ee.jsxs("span",{className:"text-sm font-medium",children:[oe," photo",1!==oe?"s":""]})]}),ee.jsx(X,{value:[oe],onValueChange:e=>de(e[0]??0),min:1,max:10,step:1,className:"w-full"})]})]})})}),ee.jsx(Y,{value:"advanced",className:"flex-1 overflow-hidden mt-4",children:ee.jsx(L,{className:"h-full -mx-6 px-6",children:ee.jsxs("div",{className:"space-y-4 py-2",children:[ee.jsxs("div",{children:[ee.jsxs($,{className:"text-base mb-4 font-semibold flex items-center gap-2",children:[ee.jsx(qe,{size:18,weight:"bold"}),"Enhanced Filters"]}),ee.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Find the most active and responsive matches"}),ee.jsxs("div",{className:"space-y-3",children:[ee.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/5 transition-colors",children:[ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsx(_e,{size:20,weight:"duotone",className:"text-primary"}),ee.jsxs("div",{children:[ee.jsx("div",{className:"font-medium text-sm",children:"Verified Profiles"}),ee.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:"ID or photo verified accounts"})]})]}),ee.jsx(B,{checked:ce,onCheckedChange:me})]}),ee.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/5 transition-colors",children:[ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsx(Qe,{size:20,weight:"duotone",className:"text-secondary"}),ee.jsxs("div",{children:[ee.jsx("div",{className:"font-medium text-sm",children:"Active Today"}),ee.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:"Online in the last 24 hours"})]})]}),ee.jsx(B,{checked:ue,onCheckedChange:xe})]}),ee.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/5 transition-colors",children:[ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsx(Ve,{size:20,weight:"duotone",className:"text-accent"}),ee.jsxs("div",{children:[ee.jsx("div",{className:"font-medium text-sm",children:"Has Stories"}),ee.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:"Posted stories recently"})]})]}),ee.jsx(B,{checked:he,onCheckedChange:ge})]}),ee.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/5 transition-colors",children:[ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsx(ke,{size:20,weight:"duotone",className:"text-primary"}),ee.jsxs("div",{children:[ee.jsx("div",{className:"font-medium text-sm",children:"Responds Quickly"}),ee.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:"Average response under 1 hour"})]})]}),ee.jsx(B,{checked:pe,onCheckedChange:fe})]}),ee.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card hover:bg-accent/5 transition-colors",children:[ee.jsxs("div",{className:"flex items-center gap-3",children:[ee.jsx(qe,{size:20,weight:"duotone",className:"text-accent"}),ee.jsxs("div",{children:[ee.jsx("div",{className:"font-medium text-sm",children:"Super Likes Only"}),ee.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:"Show only profiles that super liked you"})]})]}),ee.jsx(B,{checked:ve,onCheckedChange:be})]})]})]}),ee.jsx(d,{}),ee.jsx("div",{className:"bg-accent/10 border border-accent/20 rounded-lg p-4",children:ee.jsxs("div",{className:"flex items-start gap-3",children:[ee.jsx(Ve,{size:20,weight:"duotone",className:"text-accent shrink-0 mt-0.5"}),ee.jsxs("div",{children:[ee.jsx("div",{className:"font-medium text-sm mb-1",children:"Premium Filters Active"}),ee.jsx("div",{className:"text-xs text-muted-foreground",children:"Advanced filters help you find the most compatible and active matches. Some filters may reduce the number of available profiles."})]})]})})]})})})]}),ee.jsxs("div",{className:"flex gap-3 pt-4 border-t shrink-0",children:[ee.jsx(x,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{z(Ts.minAge),P(Ts.maxAge),E(Ts.sizes),I(Ts.maxDistance),T(Ts.personalities),G(Ts.interests),J(Ts.lookingFor),se(Ts.minCompatibility),ae(Ts.mediaFilters.cropSize),ie(Ts.mediaFilters.photoQuality),ne(Ts.mediaFilters.hasVideo),de(Ts.mediaFilters.minPhotos),me(Ts.advancedFilters.verified),xe(Ts.advancedFilters.activeToday),ge(Ts.advancedFilters.hasStories),fe(Ts.advancedFilters.respondQuickly),be(Ts.advancedFilters.superLikesOnly)},children:"Reset All"}),ee.jsx(x,{type:"button",className:"flex-1",onClick:Ne,children:"Apply Filters"})]})]})]})}function qs({index:e,total:s}){const t=e/s*Math.PI*2,a=180+120*Math.random(),l=Math.cos(t)*a,i=Math.sin(t)*a,r=g(1),n=g(0),o=g(0),d=g(0),c=g(0);Z.useEffect(()=>{d.value=H(20*e,b(l)),c.value=H(20*e,b(i)),n.value=H(20*e,_(b(1.5),b(0))),r.value=H(20*e,_(b(1),b(0))),o.value=H(20*e,b(360))},[e,l,i]);const m=y(()=>({transform:[{translateX:d.value},{translateY:c.value},{scale:n.value},{rotate:`${o.value}deg`}],opacity:r.value}));return ee.jsx(k,{className:"absolute",style:m,children:e%2==0?ee.jsx(Pe,{size:24,weight:"fill",className:"text-primary drop-shadow-2xl"}):ee.jsx(Ve,{size:20,weight:"fill",className:"text-accent drop-shadow-2xl"})})}function Qs({show:e,petName1:s,petName2:t,onComplete:a}){const l=v({isVisible:e,enterTransition:"scale",exitTransition:"fade"}),i=g(0),r=g(0),n=g(0),o=g(-180),d=g(.5),c=g(1),m=g(0),u=g(0),x=g(20),h=g(0),p=g(20),f=g(0),N=g(0),w=g(0);Z.useEffect(()=>{if(e){i.value=j(1),r.value=j(1),n.value=j(1),o.value=j(0),d.value=V(_(b(.8),b(.5))),c.value=V(_(b(1.3),b(1))),m.value=V(_(b(5),b(-5),b(0))),u.value=H(300,j(1)),x.value=H(300,j(0)),h.value=H(400,j(1)),p.value=H(400,j(0)),f.value=H(500,j(1)),N.value=V(b(360)),w.value=V(b(-360));const e=setTimeout(()=>{a()},3e3);return()=>clearTimeout(e)}i.value=0,r.value=0,n.value=0,o.value=180},[e,a]);const S=y(()=>({opacity:i.value})),C=y(()=>({opacity:r.value})),z=y(()=>({transform:[{scale:n.value},{rotate:`${o.value}deg`}]})),M=y(()=>({opacity:d.value})),P=y(()=>({transform:[{scale:c.value},{rotate:`${m.value}deg`}]})),A=y(()=>({opacity:u.value,transform:[{translateY:x.value}]})),F=y(()=>({opacity:h.value,transform:[{translateY:p.value}]})),E=y(()=>({opacity:f.value})),D=y(()=>({transform:[{rotate:`${N.value}deg`}]})),I=y(()=>({transform:[{rotate:`${w.value}deg`}]})),$=Array.from({length:20},(e,s)=>s);return ee.jsx(ee.Fragment,{children:l.shouldRender&&e&&ee.jsxs(k,{style:S,className:"fixed inset-0 z-[100] flex items-center justify-center pointer-events-none",children:[ee.jsx(k,{className:"absolute inset-0 glass-strong backdrop-blur-2xl",style:C}),$.map(e=>ee.jsx(qs,{index:e,total:$.length},e)),ee.jsxs(k,{className:"relative z-10 rounded-3xl glass-strong premium-shadow border-2 border-white/40 p-10 max-w-md mx-4 backdrop-blur-2xl overflow-hidden",style:z,children:[ee.jsx(k,{className:"absolute inset-0 bg-gradient-to-br from-primary/30 via-accent/30 to-secondary/30",style:M}),ee.jsx(k,{style:P,className:"text-center mb-6 relative z-10",children:ee.jsx("div",{className:"inline-block p-4 rounded-full glass-strong border-2 border-white/50 shadow-2xl",children:ee.jsx(Pe,{size:72,weight:"fill",className:"text-white drop-shadow-2xl"})})}),ee.jsx(k,{style:A,className:"text-4xl font-bold text-white text-center mb-3 drop-shadow-2xl relative z-10",children:"It's a Match! ðŸŽ‰"}),ee.jsxs(k,{style:F,className:"text-white/95 text-center text-xl font-medium drop-shadow-lg relative z-10",children:[s," and ",t," are now connected!"]}),ee.jsxs(k,{className:"mt-8 flex items-center justify-center gap-5 relative z-10",style:E,children:[ee.jsx(k,{style:D,children:ee.jsx(Ve,{size:32,weight:"fill",className:"text-white drop-shadow-2xl"})}),ee.jsx("div",{className:"text-white font-bold text-lg drop-shadow-lg",children:"Perfect Companions!"}),ee.jsx(k,{style:I,children:ee.jsx(Ve,{size:32,weight:"fill",className:"text-white drop-shadow-2xl"})})]})]})]})})}function Ys({verified:e,level:s="basic",className:a,showTooltip:l=!0,size:i="md"}){if(!e)return null;const r={sm:12,md:14,lg:16},o=(()=>{switch(s){case"premium":return{icon:ee.jsx(pe,{size:r[i],weight:"fill"}),label:"Premium Verified",className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-0",emoji:"ðŸ‘‘",description:"Premium verified owner with complete background check"};case"standard":return{icon:ee.jsx(se,{size:r[i],weight:"fill"}),label:"Standard Verified",className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0",emoji:"â­",description:"Standard verified owner with complete documentation"};default:return{icon:ee.jsx(ve,{size:r[i],weight:"fill"}),label:"Verified",className:"bg-gradient-to-r from-green-500 to-teal-500 text-white border-0",emoji:"âœ“",description:"Basic verified owner"}}})(),d=ee.jsxs(t,{className:n(o.className,{sm:"text-xs px-2 py-0.5",md:"text-sm px-2.5 py-1",lg:"text-base px-3 py-1.5"}[i],"font-semibold shadow-lg hover:shadow-xl transition-shadow hover:scale-105 animate-in zoom-in duration-300",a),children:[ee.jsx("span",{className:"mr-1",children:o.emoji}),o.icon,ee.jsx("span",{className:"ml-1.5",children:o.label})]});return l?ee.jsx(hs,{children:ee.jsxs(gs,{children:[ee.jsx(ps,{asChild:!0,children:d}),ee.jsxs(fs,{className:"max-w-xs",children:[ee.jsx("p",{className:"font-medium mb-1",children:o.label}),ee.jsx("p",{className:"text-xs text-muted-foreground",children:o.description})]})]})}):d}function Xs({initialOpen:e=!1,onOpenChange:s,hapticFeedback:t=!0}={}){const[a,l]=Z.useState(e),i=Z.useCallback(()=>{t&&h.trigger("light"),l(!0),null==s||s(!0)},[t,s]),r=Z.useCallback(()=>{t&&h.trigger("light"),l(!1),null==s||s(!1)},[t,s]),n=Z.useCallback(()=>{a?r():i()},[a,i,r]),o=Z.useCallback(e=>{e?i():r()},[i,r]);return{isOpen:a,open:i,close:r,toggle:n,setOpen:o}}function Bs(e){const s=[/^(-?\d+\.?\d*),\s*(-?\d+\.?\d*)$/,/^lat:\s*(-?\d+\.?\d*),?\s*lng:\s*(-?\d+\.?\d*)$/i,/^lat:\s*(-?\d+\.?\d*),?\s*lon:\s*(-?\d+\.?\d*)$/i];for(const a of s){const s=e.match(a);if((null==s?void 0:s[1])&&s[2]){const e=parseFloat(s[1]),t=parseFloat(s[2]);if(Hs(e,t))return{latitude:e,longitude:t}}}const t=function(e){const s=e.toLowerCase().trim();return{"new york":{latitude:40.7128,longitude:-74.006},"new york, ny":{latitude:40.7128,longitude:-74.006},"los angeles":{latitude:34.0522,longitude:-118.2437},"los angeles, ca":{latitude:34.0522,longitude:-118.2437},chicago:{latitude:41.8781,longitude:-87.6298},"chicago, il":{latitude:41.8781,longitude:-87.6298},houston:{latitude:29.7604,longitude:-95.3698},"houston, tx":{latitude:29.7604,longitude:-95.3698},phoenix:{latitude:33.4484,longitude:-112.074},"phoenix, az":{latitude:33.4484,longitude:-112.074},philadelphia:{latitude:39.9526,longitude:-75.1652},"philadelphia, pa":{latitude:39.9526,longitude:-75.1652},"san antonio":{latitude:29.4241,longitude:-98.4936},"san antonio, tx":{latitude:29.4241,longitude:-98.4936},"san diego":{latitude:32.7157,longitude:-117.1611},"san diego, ca":{latitude:32.7157,longitude:-117.1611},dallas:{latitude:32.7767,longitude:-96.797},"dallas, tx":{latitude:32.7767,longitude:-96.797},"san jose":{latitude:37.3382,longitude:-121.8863},"san jose, ca":{latitude:37.3382,longitude:-121.8863},austin:{latitude:30.2672,longitude:-97.7431},"austin, tx":{latitude:30.2672,longitude:-97.7431},jacksonville:{latitude:30.3322,longitude:-81.6557},"jacksonville, fl":{latitude:30.3322,longitude:-81.6557},"fort worth":{latitude:32.7555,longitude:-97.3308},"fort worth, tx":{latitude:32.7555,longitude:-97.3308},columbus:{latitude:39.9612,longitude:-82.9988},"columbus, oh":{latitude:39.9612,longitude:-82.9988},charlotte:{latitude:35.2271,longitude:-80.8431},"charlotte, nc":{latitude:35.2271,longitude:-80.8431},"san francisco":{latitude:37.7749,longitude:-122.4194},"san francisco, ca":{latitude:37.7749,longitude:-122.4194},indianapolis:{latitude:39.7684,longitude:-86.1581},"indianapolis, in":{latitude:39.7684,longitude:-86.1581},seattle:{latitude:47.6062,longitude:-122.3321},"seattle, wa":{latitude:47.6062,longitude:-122.3321},denver:{latitude:39.7392,longitude:-104.9903},"denver, co":{latitude:39.7392,longitude:-104.9903},washington:{latitude:38.9072,longitude:-77.0369},"washington, dc":{latitude:38.9072,longitude:-77.0369},boston:{latitude:42.3601,longitude:-71.0589},"boston, ma":{latitude:42.3601,longitude:-71.0589},nashville:{latitude:36.1627,longitude:-86.7816},"nashville, tn":{latitude:36.1627,longitude:-86.7816},"el paso":{latitude:31.7619,longitude:-106.485},"el paso, tx":{latitude:31.7619,longitude:-106.485},detroit:{latitude:42.3314,longitude:-83.0458},"detroit, mi":{latitude:42.3314,longitude:-83.0458},portland:{latitude:45.5152,longitude:-122.6784},"portland, or":{latitude:45.5152,longitude:-122.6784},"las vegas":{latitude:36.1699,longitude:-115.1398},"las vegas, nv":{latitude:36.1699,longitude:-115.1398},memphis:{latitude:35.1495,longitude:-90.049},"memphis, tn":{latitude:35.1495,longitude:-90.049},louisville:{latitude:38.2527,longitude:-85.7585},"louisville, ky":{latitude:38.2527,longitude:-85.7585},baltimore:{latitude:39.2904,longitude:-76.6122},"baltimore, md":{latitude:39.2904,longitude:-76.6122},milwaukee:{latitude:43.0389,longitude:-87.9065},"milwaukee, wi":{latitude:43.0389,longitude:-87.9065},albuquerque:{latitude:35.0844,longitude:-106.6504},"albuquerque, nm":{latitude:35.0844,longitude:-106.6504},tucson:{latitude:32.2226,longitude:-110.9747},"tucson, az":{latitude:32.2226,longitude:-110.9747},fresno:{latitude:36.7378,longitude:-119.7871},"fresno, ca":{latitude:36.7378,longitude:-119.7871},sacramento:{latitude:38.5816,longitude:-121.4944},"sacramento, ca":{latitude:38.5816,longitude:-121.4944},mesa:{latitude:33.4152,longitude:-111.8315},"mesa, az":{latitude:33.4152,longitude:-111.8315},"kansas city":{latitude:39.0997,longitude:-94.5786},"kansas city, mo":{latitude:39.0997,longitude:-94.5786},atlanta:{latitude:33.749,longitude:-84.388},"atlanta, ga":{latitude:33.749,longitude:-84.388},miami:{latitude:25.7617,longitude:-80.1918},"miami, fl":{latitude:25.7617,longitude:-80.1918},raleigh:{latitude:35.7796,longitude:-78.6382},"raleigh, nc":{latitude:35.7796,longitude:-78.6382},omaha:{latitude:41.2565,longitude:-95.9345},"omaha, ne":{latitude:41.2565,longitude:-95.9345},cleveland:{latitude:41.4993,longitude:-81.6944},"cleveland, oh":{latitude:41.4993,longitude:-81.6944},tulsa:{latitude:36.154,longitude:-95.9928},"tulsa, ok":{latitude:36.154,longitude:-95.9928},minneapolis:{latitude:44.9778,longitude:-93.265},"minneapolis, mn":{latitude:44.9778,longitude:-93.265}}[s]||null}(e);return t||null}function Hs(e,s){return e>=-90&&e<=90&&s>=-180&&s<=180}function Gs(e,s){const t=Ws(s.latitude-e.latitude),a=Ws(s.longitude-e.longitude),l=Ws(e.latitude),i=Ws(s.latitude),r=Math.sin(t/2)*Math.sin(t/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(l)*Math.cos(i),n=3959*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)));return Math.round(10*n)/10}function Ws(e){return e*(Math.PI/180)}const Js=S("useViewMode");const Ks=Z.lazy(()=>K(()=>import("./view-MatchesView.tsx-CBM73xwC.js").then(e=>e.E),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(e=>({default:e.EnhancedPetDetailView}))),Zs=S("DiscoverView");const et=Object.freeze(Object.defineProperty({__proto__:null,default:function(){var e,s,a;const{t:l}=P(),[i]=A("user-pets",[]),[r,n]=A("swipe-history",[]),[,o]=A("matches",[]),[d]=A("verification-requests",{}),[c]=A("discovery-preferences",{minAge:0,maxAge:15,sizes:["small","medium","large","extra-large"],maxDistance:50,personalities:[],interests:[],lookingFor:[],minCompatibility:0,mediaFilters:{cropSize:"any",photoQuality:"any",hasVideo:!1,minPhotos:1},advancedFilters:{verified:!1,activeToday:!1,hasStories:!1,respondQuickly:!1,superLikesOnly:!1}}),[m,u]=Z.useState(0),[p,f]=Z.useState(""),[v,S]=Z.useState(!0),[C,z]=Z.useState(!0),[M,F]=Z.useState(!1),[,E]=Z.useState(new Set),{viewMode:D,setMode:I}=function({initialMode:e="cards",availableModes:s=["cards","map"],onModeChange:t}={}){const[a,l]=Z.useState(e),i=Z.useCallback(e=>{s.includes(e)?(h.trigger("selection"),l(e),null==t||t(e)):Js.warn(`View mode "${e}" is not available. Available modes: ${s.join(", ")}`)},[s,t]),r=Z.useCallback(()=>{const e=(s.indexOf(a)+1)%s.length,t=s[e];t&&i(t)},[a,s,i]),n=Z.useCallback(e=>a===e,[a]),o=Z.useMemo(()=>e=>s.includes(e),[s]);return{viewMode:a,setMode:i,toggleMode:r,isMode:n,canSwitchTo:o,availableModes:s}}({initialMode:"cards",availableModes:["cards","map"]}),{animatedStyle:$,likeOpacityStyle:O,passOpacityStyle:L,handleMouseDown:T,handleMouseMove:R,handleMouseUp:U,handleTouchStart:q,handleTouchMove:Q,handleTouchEnd:Y,reset:X}=function({onSwipe:e,swipeThreshold:s=150,swipeVelocity:t=500,hapticFeedback:a=!0}={}){const[l,i]=Z.useState(!1),[r,n]=Z.useState(null),o=g(0),d=g(0),c=g(1),m=g(0),u=g(0),x=y(()=>({transform:[{translateX:o.value},{rotate:`${d.value}deg`}],opacity:c.value})),p=y(()=>({opacity:m.value,transform:[{scale:m.value}]})),f=y(()=>({opacity:u.value,transform:[{scale:u.value}]})),v=Z.useRef(0),N=Z.useRef(!1),w=Z.useCallback(e=>{i(!0),N.current=!0,v.current=e,a&&h.selection()},[a]),k=Z.useCallback(e=>{o.value=e,d.value=G(e,[-300,0,300],[-30,0,30],W.CLAMP),c.value=G(e,[-300,-150,0,150,300],[0,1,1,1,0],W.CLAMP),m.value=G(e,[0,150],[0,1],W.CLAMP),u.value=G(e,[-150,0],[1,0],W.CLAMP),a&&Math.abs(e)>80&&Math.abs(e)<100&&h.trigger("light")},[a,o,d,c,m,u]),S=Z.useCallback((l,r)=>{i(!1),N.current=!1;const x=l-v.current;if(Math.abs(x)>s||Math.abs(r)>t){const s=x>0?"right":"left";n(s),a&&h.trigger("right"===s?"success":"light"),null==e||e(s),o.value=j("right"===s?1e3:-1e3),c.value=b(0),setTimeout(()=>{o.value=0,d.value=0,c.value=1,m.value=0,u.value=0,n(null)},300)}else o.value=j(0),d.value=j(0),c.value=j(1),m.value=j(0),u.value=j(0),a&&h.trigger("light")},[s,t,a,e,o,d,c,m,u]),C=Z.useCallback(s=>{n(s),a&&h.trigger("right"===s?"success":"light"),null==e||e(s),o.value=j("right"===s?1e3:-1e3),c.value=b(0),setTimeout(()=>{o.value=0,d.value=0,c.value=1,m.value=0,u.value=0,n(null)},300)},[a,e,o,d,c,m,u]),z=Z.useCallback(()=>{o.value=j(0),d.value=j(0),c.value=j(1),m.value=j(0),u.value=j(0),n(null),i(!1)},[o,d,c,m,u]);return{isDragging:l,direction:r,animatedStyle:x,likeOpacityStyle:p,passOpacityStyle:f,handleMouseDown:Z.useCallback(e=>{e.preventDefault(),w(e.clientX)},[w]),handleMouseMove:Z.useCallback(e=>{if(!N.current)return;const s=e.clientX-v.current;k(s)},[k]),handleMouseUp:Z.useCallback(e=>{N.current&&S(e.clientX,0)},[S]),handleTouchStart:Z.useCallback(e=>{const s=e.touches[0];s&&w(s.clientX)},[w]),handleTouchMove:Z.useCallback(e=>{if(!N.current)return;const s=e.touches[0];if(s){const e=s.clientX-v.current;k(e)}},[k]),handleTouchEnd:Z.useCallback(e=>{if(!N.current)return;const s=e.changedTouches[0];s&&S(s.clientX,0)},[S]),handleSwipe:C,reset:z}}({onSwipe:e=>{ve("right"===e?"like":"pass")}}),B=Xs({initialOpen:!1}),K=Xs({initialOpen:!1}),se=Xs({initialOpen:!1}),te=Xs({initialOpen:!1}),ae=Array.isArray(i)&&i.length>0?i[0]:void 0,{stories:le,addStory:ie,updateStory:re}=function({currentUserId:e,currentPetId:s,filterByUser:t=!1}={}){const[a,l]=A("pet-stories",[]),[i,r]=Z.useState(null),n=Z.useMemo(()=>Array.isArray(a)?t&&s?a.filter(e=>e.petId===s):a:[],[a,t,s]),o=Z.useMemo(()=>s&&Array.isArray(a)?a.filter(e=>e.petId===s):[],[a,s]),d=Z.useMemo(()=>n.length>0,[n.length]),c=Z.useCallback(e=>{l(s=>[...s||[],e])},[l]),m=Z.useCallback((e,s)=>{l(t=>(t||[]).map(t=>t.id===e?{...t,...s}:t))},[l]),u=Z.useCallback(e=>{l(s=>(s||[]).filter(s=>s.id!==e))},[l]),x=Z.useCallback(e=>{r(e)},[]),h=Z.useCallback(()=>{r(null)},[]);return{stories:n,userStories:o,allStories:a,selectedStory:i,hasStories:d,addStory:c,updateStory:m,deleteStory:u,selectStory:x,clearSelection:h,setStories:l}}({...(null==ae?void 0:ae.id)&&{currentPetId:ae.id}});Z.useEffect(()=>{void 0!==i&&z(!1)},[i]),Z.useEffect(()=>{(async()=>{try{const e=(await J.getAdoptionProfiles({})).profiles.filter(e=>"available"===e.status),s=new Set(e.map(e=>e.petId));E(s)}catch(e){Zs.error("Failed to load adoptable pets",e instanceof Error?e:new Error(String(e)))}})()},[]);const ne=new Set(Array.isArray(r)?r.map(e=>e.targetPetId):[]),oe=c||{minAge:0,maxAge:15,sizes:["small","medium","large","extra-large"],maxDistance:50,personalities:[],interests:[],lookingFor:[],minCompatibility:0,mediaFilters:{cropSize:"any",photoQuality:"any",hasVideo:!1,minPhotos:1},advancedFilters:{verified:!1,activeToday:!1,hasStories:!1,respondQuickly:!1,superLikesOnly:!1}},{availablePets:de,currentPet:ce,currentIndex:me,nextPet:ue,markAsSwiped:xe}=function({userPet:e,preferences:s={},showAdoptableOnly:t=!1,swipedPetIds:a}={}){const[l]=A("all-pets",[]),[i,r]=A("swipe-history",[]),[n,o]=Z.useState(0),[d]=A("adoptable-pet-ids",new Set),c=Z.useMemo(()=>a||new Set(Array.isArray(i)?i.map(e=>e.targetPetId):[]),[i,a]),m=Z.useMemo(()=>Array.isArray(l)?l.map(s=>{if((null==e?void 0:e.location)&&s.location){const t=e.location.split(",").map(Number),a=s.location.split(",").map(Number);if(void 0!==t[0]&&void 0!==t[1]&&void 0!==a[0]&&void 0!==a[1]){const e=Gs({latitude:t[0],longitude:t[1]},{latitude:a[0],longitude:a[1]});return{...s,distance:e}}}return s}).filter(a=>{var l,i,r;return a.id!==(null==e?void 0:e.id)&&(!c.has(a.id)&&(!(s.minAge&&a.age<s.minAge)&&(!(s.maxAge&&a.age>s.maxAge)&&(!(s.sizes&&s.sizes.length>0&&!s.sizes.includes(a.size))&&(!(s.personalities&&s.personalities.length>0&&!(null==(l=a.personality)?void 0:l.some(e=>{var t;return null==(t=s.personalities)?void 0:t.includes(e)})))&&(!(s.interests&&s.interests.length>0&&!(null==(i=a.interests)?void 0:i.some(e=>{var t;return null==(t=s.interests)?void 0:t.some(s=>e.toLowerCase().includes(s.toLowerCase()))})))&&(!(s.lookingFor&&s.lookingFor.length>0&&!(null==(r=a.lookingFor)?void 0:r.some(e=>{var t;return null==(t=s.lookingFor)?void 0:t.some(s=>e.toLowerCase().includes(s.toLowerCase()))})))&&(!(s.minCompatibility&&s.minCompatibility>0&&e&&Ss(e,a)<s.minCompatibility)&&!(t&&!(null==d?void 0:d.has(a.id)))))))))))}).sort((e,s)=>void 0!==e.distance&&void 0!==s.distance?e.distance-s.distance:void 0!==e.distance?-1:void 0!==s.distance?1:0):[],[l,null==e?void 0:e.id,null==e?void 0:e.location,c,s,t,d]),u=m[n],x=Z.useCallback(()=>{o(e=>Math.min(e+1,m.length-1))},[m.length]),h=Z.useCallback(()=>{o(e=>Math.max(e-1,0))},[]),g=Z.useCallback(e=>{o(Math.max(0,Math.min(e,m.length-1)))},[m.length]),p=Z.useCallback(s=>{if(!e)return;const t={petId:e.id,targetPetId:s,action:"pass",timestamp:(new Date).toISOString()};r(e=>[...e||[],t])},[e,r]),f=Z.useCallback(()=>{o(0)},[]);return Z.useEffect(()=>{m.length>0&&n>=m.length&&o(0)},[m.length,n]),{availablePets:m,currentPet:u,currentIndex:n,totalPets:m.length,nextPet:x,prevPet:h,goToPet:g,markAsSwiped:p,resetDiscovery:f,hasMore:n<m.length-1,hasPrevious:n>0}}({...ae&&{userPet:ae},preferences:{minAge:oe.minAge,maxAge:oe.maxAge,sizes:oe.sizes,personalities:oe.personalities,interests:oe.interests,lookingFor:oe.lookingFor,minCompatibility:oe.minCompatibility,maxDistance:oe.maxDistance},showAdoptableOnly:M,swipedPetIds:ne}),he=Z.useMemo(()=>de.map(e=>{if((null==ae?void 0:ae.location)&&e.location){const s=function(e,s){const t=Bs(e),a=Bs(s);return t&&a?Gs(t,a):null}(ae.location,e.location),t=e.coordinates||Bs(e.location);return{...e,...void 0!==s&&{distance:s},...t&&{coordinates:t}}}return e}),[de,null==ae?void 0:ae.location]);Z.useEffect(()=>{u(me)},[me]);const{compatibilityScore:ge,compatibilityFactors:pe,matchReasoning:fe}=function({userPet:e,otherPet:s,autoCalculate:t=!0}={}){const[a,l]=Z.useState(0),[i,r]=Z.useState(null),[n,o]=Z.useState([]),[d,c]=Z.useState(!1),[m,u]=Z.useState(null),x=Z.useCallback(async()=>{if(!e||!s)return l(0),r(null),void o([]);try{c(!0),u(null);const t=Ss(e,s),a=Cs(e,s);l(t),r(a);const i=await Fs(e,s);o(i)}catch(t){const e=t instanceof Error?t:new Error(String(t));u(e),l(0),r(null),o([])}finally{c(!1)}},[e,s]);return Z.useEffect(()=>{t&&x()},[t,x]),{compatibilityScore:a,compatibilityFactors:i,matchReasoning:n,isLoading:d,error:m,calculateMatch:Z.useCallback(()=>{x()},[x])}}({...ae&&{userPet:ae},...ce&&{otherPet:ce},autoCalculate:!0}),ve=async e=>{if(!ce||!ae)return;const s=ce.id,t=ce.name,a=ae.id,i=ae.name,r=ge;h.trigger("like"===e?"success":"light"),S(!1),xe(s);const d=fe.length>0?fe:await Fs(ae,ce);setTimeout(()=>{const c={petId:a,targetPetId:s,action:e,timestamp:(new Date).toISOString()};n(e=>[...e||[],c]),"like"===e&&o(e=>{const n=e||[];if(n.find(e=>e.matchedPetId===s||e.petId===s))return n;const o={id:`match-${Date.now()}`,petId:a,matchedPetId:s,compatibilityScore:r,reasoning:d,matchedAt:(new Date).toISOString(),status:"active"};return h.trigger("success"),f(t),se.open(),Fe.success(l.common.itsAMatch,{description:`${i} ${l.common.and} ${t} ${l.common.areNowConnected}`}),[...n,o]}),ue(),X()},300)},be=g(0),ye=g(-180),Ne=g(0),we=g(1),ke=g(.5),Ce=g(0),ze=g(20),De=g(0),Ie=g(20),$e=g(0),Oe=g(1),Le=g(.5);Z.useEffect(()=>{(!ae||0===he.length||me>=he.length)&&(be.value=j(1),ye.value=j(0),Ne.value=V(b(360)),we.value=V(_(b(1.5),b(1))),ke.value=V(_(b(0),b(.5))),Ce.value=H(200,b(1)),ze.value=H(200,b(0)),De.value=H(300,b(1)),Ie.value=H(300,b(0)),(0===he.length||me>=he.length)&&($e.value=j(1),Oe.value=V(_(b(1.2),b(1))),Le.value=V(_(b(0),b(.5)))))},[ae,he.length,me,be,ye,Ne,we,ke,Ce,ze,De,Ie,$e,Oe,Le]);const Te=y(()=>({transform:[{scale:be.value},{rotate:`${ye.value}deg`}]})),Re=y(()=>({transform:[{rotate:`${Ne.value}deg`}]})),_e=y(()=>({transform:[{scale:we.value}],opacity:ke.value})),Ue=y(()=>({opacity:Ce.value,transform:[{translateY:ze.value}]})),qe=y(()=>({opacity:De.value,transform:[{translateY:Ie.value}]})),Qe=y(()=>({transform:[{scale:$e.value}]})),He=y(()=>({transform:[{scale:Oe.value}]})),Ge=y(()=>({transform:[{scale:1.2*Oe.value}],opacity:.5*Oe.value})),We=g(0),Je=g(0),Ke=g(0),Ze=g(0);Z.useEffect(()=>{v&&0===m?(We.value=b(1),Je.value=V(_(b(10),b(0))),Ke.value=V(_(b(-10),b(0))),Ze.value=V(_(b(10),b(0)))):We.value=b(0)},[v,m,We,Je,Ke,Ze]);const es=y(()=>({opacity:We.value})),ss=y(()=>({transform:[{translateY:Je.value}]})),ts=y(()=>({transform:[{translateX:Ke.value}]})),as=y(()=>({transform:[{translateX:Ze.value}]})),ls=g(0);Z.useEffect(()=>{ls.value=V(_(b(-10),b(10),b(0)))},[ls]);const is=y(()=>({transform:[{rotate:`${ls.value}deg`}]})),ds=g(0),cs=g(-180),ms=g(-20),hs=g(0),gs=g(1),ps=g(.3);Z.useEffect(()=>{ce&&(ds.value=H(400,j(1)),cs.value=H(400,j(0)),ms.value=H(400,j(0)),hs.value=H(400,b(1)),ps.value=V(_(b(.5),b(.3))))},[ce,ds,cs,ms,hs,ps]);const fs=y(()=>({transform:[{scale:ds.value*gs.value},{rotate:`${cs.value}deg`},{translateY:ms.value}],opacity:hs.value})),vs=y(()=>({opacity:ps.value})),js=g(-100),ys=g(1);Z.useEffect(()=>{js.value=V(b(200)),ys.value=V(_(b(1.3),b(1)))},[js,ys]);const Ns=y(()=>({transform:[{translateX:`${js.value}%`}]})),ws=y(()=>({transform:[{scale:ys.value}]})),ks=g(0),zs=g(0);Z.useEffect(()=>{void 0!==(null==ce?void 0:ce.distance)&&(ks.value=H(100,j(1)),zs.value=H(100,b(1)))},[null==ce?void 0:ce.distance,ks,zs]);const Ms=y(()=>({transform:[{scale:ks.value}],opacity:zs.value})),Ps=g(0),As=g(20);Z.useEffect(()=>{K.isOpen?(Ps.value=b(1),As.value=b(0)):(Ps.value=b(0),As.value=b(20))},[K.isOpen,Ps,As]);const Es=y(()=>({opacity:Ps.value,transform:[{translateY:As.value}]}));return C?null:ae?0===he.length||me>=he.length?ee.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:[ee.jsxs(k,{style:Qe,className:"w-24 h-24 rounded-full bg-linear-to-br from-primary/20 to-accent/20 flex items-center justify-center mb-6 relative",children:[ee.jsx(k,{style:He,children:ee.jsx(Pe,{size:48,className:"text-primary"})}),ee.jsx(k,{style:Ge,className:"absolute inset-0 rounded-full bg-linear-to-br from-primary/20 to-accent/20",children:null})]}),ee.jsx(k,{style:Ue,className:"text-2xl font-bold mb-2",as:"h2",children:l.discover.noMore}),ee.jsx(k,{style:qe,className:"text-muted-foreground mb-6 max-w-md",as:"p",children:0===he.length&&0===m?l.discover.noMoreDescAdjust:l.discover.noMoreDesc})]}):ee.jsx(os,{direction:"up",children:ee.jsxs("div",{className:"max-w-2xl mx-auto px-2 sm:px-4",children:[ee.jsxs("div",{className:"mb-4 sm:mb-6",children:[ee.jsx("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:ee.jsxs("div",{className:"flex-1 min-w-0",children:[ee.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-1",children:l.discover.title}),ee.jsxs("p",{className:"text-sm text-muted-foreground hidden sm:block",children:[l.discover.subtitle," ",ae.name]})]})}),ee.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[ee.jsxs("div",{className:"inline-flex items-center bg-muted/50 rounded-xl p-1 border border-border",children:[ee.jsxs(x,{variant:"cards"===D?"default":"ghost",size:"sm",onClick:()=>{h.trigger("selection"),I("cards")},className:"h-8 sm:h-9 px-2 sm:px-4 rounded-lg text-xs sm:text-sm",children:[ee.jsx(Ye,{size:16,className:"sm:mr-2"}),ee.jsx("span",{className:"hidden sm:inline",children:l.map.cards})]}),ee.jsxs(x,{variant:"map"===D?"default":"ghost",size:"sm",onClick:()=>{h.trigger("selection"),I("map")},className:"h-8 sm:h-9 px-2 sm:px-4 rounded-lg text-xs sm:text-sm",children:[ee.jsx(Me,{size:16,className:"sm:mr-2"}),ee.jsx("span",{className:"hidden sm:inline",children:l.map.mapView})]})]}),ee.jsxs("div",{className:"flex items-center gap-2",children:[ee.jsx(ns,{children:oe.maxDistance<100&&ee.jsx(k,{children:ee.jsxs(t,{variant:"outline",className:"gap-1.5 text-xs font-semibold border-primary/30 bg-primary/5 text-primary px-2 py-1",children:[ee.jsx(Xe,{size:14,weight:"fill"}),"Within ",oe.maxDistance," miles"]})},"distance-badge")}),ee.jsx(k,{children:ee.jsxs(t,{variant:M?"default":"outline",className:"gap-1.5 text-xs font-semibold cursor-pointer hover:bg-primary/10 transition-colors px-2 py-1",onClick:()=>{h.trigger("selection"),F(!M)},children:[ee.jsx(Se,{size:14,weight:"fill"}),(null==(e=l.adoption)?void 0:e.adoptable)??"Adoptable"]})}),ee.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{h.trigger("selection"),te.open()},className:"h-8 sm:h-9 px-2 sm:px-3 rounded-lg",children:[ee.jsx(Ee,{size:16,className:"sm:mr-2",weight:"fill"}),ee.jsx("span",{className:"hidden sm:inline",children:"Saved"})]}),ee.jsx(Us,{})]})]})]}),ae&&"cards"===D&&ee.jsx(rs,{allStories:le||[],currentUserId:ae.id,currentUserName:ae.name,currentUserPetId:ae.id,currentUserPetName:ae.name,currentUserPetPhoto:ae.photo,onStoryCreated:e=>{ie(e)},onStoryUpdate:e=>{re(e.id,e)}}),"map"===D?ee.jsx(Is,{pets:he,userPet:ae,onSwipe:(e,s)=>{const t=m,a=he.findIndex(s=>s.id===e.id);-1!==a&&u(a),setTimeout(()=>{ve(s),t!==a&&u(t)},50)}}):ee.jsx("div",{className:"relative h-[500px] sm:h-[600px] flex items-center justify-center mb-6",children:ee.jsx(ns,{mode:"wait",children:ce&&ee.jsxs(k,{style:$,onMouseDown:T,onMouseMove:R,onMouseUp:U,onMouseLeave:U,onTouchStart:q,onTouchMove:Q,onTouchEnd:Y,className:"absolute inset-0 cursor-grab active:cursor-grabbing touch-none",children:[ee.jsxs(k,{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-6 py-3 bg-linear-to-r from-primary to-accent rounded-full text-white font-bold text-lg shadow-2xl z-50 border-4 border-white",style:O,children:[ee.jsx(Pe,{size:24,weight:"fill",className:"inline mr-2"}),"LIKE"]}),ee.jsxs(k,{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-6 py-3 bg-linear-to-r from-gray-500 to-gray-700 rounded-full text-white font-bold text-lg shadow-2xl z-50 border-4 border-white",style:L,children:["PASS",ee.jsx(je,{size:24,weight:"bold",className:"inline ml-2"})]}),v&&0===m&&ee.jsx(k,{style:es,className:"absolute inset-0 z-50 flex items-center justify-center pointer-events-none",children:ee.jsxs(k,{style:ss,className:"flex gap-12",children:[ee.jsxs(k,{style:ts,className:"flex items-center gap-2 glass-strong px-4 py-2 rounded-full backdrop-blur-xl border border-white/30",children:[ee.jsx("span",{className:"text-2xl",children:"ðŸ‘ˆ"}),ee.jsx("span",{className:"text-white font-semibold drop-shadow-lg",children:l.discover.swipeHintPass})]}),ee.jsxs(k,{style:as,className:"flex items-center gap-2 glass-strong px-4 py-2 rounded-full backdrop-blur-xl border border-white/30",children:[ee.jsx("span",{className:"text-white font-semibold drop-shadow-lg",children:l.discover.swipeHintLike}),ee.jsx("span",{className:"text-2xl",children:"ðŸ‘‰"})]})]})}),ee.jsx("div",{className:"h-full overflow-hidden rounded-3xl glass-strong premium-shadow backdrop-blur-2xl",children:ee.jsxs("div",{className:"relative h-full flex flex-col bg-linear-to-br from-white/50 to-white/30",children:[ee.jsxs("div",{className:"relative h-96 overflow-hidden group",children:[ee.jsx(k,{className:"absolute inset-0 bg-linear-to-br from-primary/25 via-accent/15 to-secondary/20 z-10 pointer-events-none",style:y(()=>({opacity:0})),onMouseEnter:()=>{},children:null}),ee.jsx("img",{src:ce.photo,alt:ce.name,className:"w-full h-full object-cover transition-transform duration-700 ease-out hover:scale-110"}),ee.jsx("div",{className:"absolute inset-0 bg-linear-to-t from-black/70 via-black/30 to-transparent"}),ee.jsxs(k,{style:fs,className:"absolute top-4 right-4 glass-strong px-4 py-2 rounded-full font-bold text-lg shadow-2xl backdrop-blur-xl border-2 border-white/40",onMouseEnter:()=>{gs.value=j(1.15)},onMouseLeave:()=>{gs.value=j(1)},onClick:()=>{h.trigger("selection"),K.toggle()},children:[ee.jsxs("span",{className:"bg-linear-to-r from-accent via-primary to-secondary bg-clip-text text-transparent animate-gradient",children:[ge,"% ",l.discover.match]}),ee.jsx(k,{className:"absolute inset-0 rounded-full",style:vs,children:null})]}),ee.jsx(k,{className:"absolute top-4 left-4 w-11 h-11 glass-strong rounded-full flex items-center justify-center shadow-xl border border-white/30 backdrop-blur-xl cursor-pointer transition-transform hover:scale-110 active:scale-90",onClick:()=>{h.trigger("selection"),B.open()},children:ee.jsx(Ae,{size:20,className:"text-white drop-shadow-lg",weight:"bold"})}),ee.jsx(k,{className:"absolute bottom-4 right-4 w-11 h-11 glass-strong rounded-full flex items-center justify-center shadow-xl border border-white/30 backdrop-blur-xl cursor-pointer transition-transform hover:scale-110 active:scale-90",onClick:()=>{h.trigger("selection"),K.toggle()},style:y(()=>({transform:[{rotate:K.isOpen?"360deg":"0deg"}]})),children:ee.jsx(Be,{size:20,className:"text-white drop-shadow-lg",weight:K.isOpen?"fill":"bold"})})]}),ee.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[ee.jsx("div",{className:"flex items-start justify-between mb-4",children:ee.jsxs("div",{className:"flex-1 min-w-0",children:[ee.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[ee.jsx("h3",{className:"text-2xl font-bold truncate",children:ce.name}),ce.verified&&ee.jsx(Ys,{verified:ce.verified,level:(null==(s=null==d?void 0:d[ce.id])?void 0:s.verificationLevel)||"basic",size:"sm"})]}),ee.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[ee.jsxs("p",{className:"text-muted-foreground flex items-center gap-1 truncate",children:[ee.jsx(Me,{size:16,weight:"fill"}),ce.location]}),void 0!==ce.distance&&ee.jsx(k,{style:Ms,children:ee.jsxs(t,{variant:"secondary",className:"gap-1 bg-linear-to-r from-primary/10 to-accent/10 border border-primary/20 text-foreground font-semibold px-2 py-0.5",children:[ee.jsx(Xe,{size:12,weight:"fill",className:"text-primary"}),(Ds=ce.distance,Ds<1?"Less than 1 mile away":1===Ds?"1 mile away":Ds<10?`${Ds.toFixed(1)} miles away`:`${Math.round(Ds)} miles away`)]})})]})]})}),ce.trustProfile&&ee.jsx("div",{className:"mb-4",children:ee.jsx(xs,{trustProfile:ce.trustProfile,compact:!0})}),(null==(a=ce.trustProfile)?void 0:a.badges)&&Array.isArray(ce.trustProfile.badges)&&ce.trustProfile.badges.length>0&&ee.jsx("div",{className:"mb-4",children:ee.jsx(bs,{badges:ce.trustProfile.badges.slice(0,4),compact:!0})}),ee.jsxs("div",{className:"space-y-4",children:[ee.jsxs("div",{children:[ee.jsx("p",{className:"text-sm font-semibold text-muted-foreground mb-2",children:l.discover.about}),ee.jsxs("p",{className:"text-foreground",children:[ce.breed," â€¢ ",ce.age," ",l.common.years," â€¢"," ",ce.gender]})]}),fe.length>0&&ee.jsxs("div",{children:[ee.jsxs("p",{className:"text-sm font-semibold text-muted-foreground mb-2 flex items-center gap-2",children:[ee.jsx(Ve,{size:16,weight:"fill",className:"text-accent"}),l.discover.whyMatch]}),ee.jsx("div",{className:"space-y-1",children:fe.map((e,s)=>ee.jsxs("p",{className:"text-sm text-foreground",children:["â€¢ ",e]},s))})]}),ce.personality&&Array.isArray(ce.personality)&&ce.personality.length>0&&ee.jsxs("div",{children:[ee.jsx("p",{className:"text-sm font-semibold text-muted-foreground mb-2",children:l.discover.personality}),ee.jsx("div",{className:"flex flex-wrap gap-2",children:ce.personality.map((e,s)=>ee.jsx(t,{variant:"secondary",children:e},s))})]})]})]}),ee.jsxs("div",{className:"p-6 glass-effect border-t border-white/20 flex gap-4 backdrop-blur-xl",children:[ee.jsx(x,{size:"lg",variant:"outline",className:"flex-1 w-full h-14 border-2 glass-effect hover:glass-strong hover:border-destructive/50 hover:bg-destructive/10 group backdrop-blur-xl",onClick:()=>{h.trigger("light"),ve("pass")},children:ee.jsx(k,{style:is,children:ee.jsx(je,{size:28,weight:"bold",className:"text-foreground/70 group-hover:text-destructive transition-colors drop-shadow-lg"})})}),ee.jsxs(x,{size:"lg",className:"flex-1 w-full h-14 bg-linear-to-r from-primary via-accent to-secondary hover:from-primary/90 hover:via-accent/90 hover:to-secondary/90 shadow-2xl hover:shadow-accent/50 group relative overflow-hidden neon-glow",onClick:()=>{h.trigger("success"),ve("like")},children:[ee.jsx(k,{className:"absolute inset-0 bg-linear-to-r from-transparent via-white/30 to-transparent",style:Ns,children:null}),ee.jsx(k,{style:ws,children:ee.jsx(Pe,{size:28,weight:"fill",className:"relative z-10 drop-shadow-2xl"})})]})]})]})})]},ce.id)})}),K.isOpen&&pe&&ee.jsx(k,{style:Es,children:ee.jsx(us,{factors:pe,className:"mb-6"})}),ee.jsx(ns,{children:B.isOpen&&ce&&ee.jsx(Z.Suspense,{fallback:null,children:ee.jsx(Ks,{pet:ce,onClose:B.close,onLike:()=>{ve("like"),B.close()},onPass:()=>{ve("pass"),B.close()},compatibilityScore:ge,matchReasons:fe,showActions:!0},ce.id)})}),ee.jsx(Qs,{show:se.isOpen,petName1:(null==ae?void 0:ae.name)||"",petName2:p,onComplete:se.close}),te.isOpen&&ee.jsx(N,{open:te.isOpen,onOpenChange:te.setOpen,children:ee.jsx(w,{className:"max-w-2xl max-h-[80vh]",children:ee.jsx(Ls,{currentPreferences:oe,onApplySearch:e=>{const s=new CustomEvent("updateDiscoveryPreferences",{detail:e});window.dispatchEvent(s)},onClose:te.close})})})]})},"discover-view"):ee.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:[ee.jsxs(k,{style:Te,className:"w-24 h-24 rounded-full bg-linear-to-br from-primary/20 to-accent/20 flex items-center justify-center mb-6 relative",children:[ee.jsx(k,{style:Re,children:ee.jsx(Ve,{size:48,className:"text-primary"})}),ee.jsx(k,{style:_e,className:"absolute inset-0 rounded-full bg-linear-to-br from-primary/20 to-accent/20",children:null})]}),ee.jsx(k,{style:Ue,className:"text-2xl font-bold mb-2",as:"h2",children:l.discover.createProfile}),ee.jsx(k,{style:qe,className:"text-muted-foreground mb-6 max-w-md",as:"p",children:l.discover.createProfileDesc})]});var Ds}},Symbol.toStringTag,{value:"Module"}));export{us as C,et as D,Cs as a,Ss as c,Fs as g};
