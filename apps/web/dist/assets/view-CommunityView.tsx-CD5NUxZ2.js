const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/map-vendor-O4a2djK0.js","assets/map-vendor-B1CfjdFi.css","assets/feature-admin-g8AIjMAb.js","assets/react-vendor-atdIga2R.js","assets/vendor-B2U5onNE.js","assets/utils-vendor-7mYxNw04.js","assets/ui-vendor-CttiZxwU.js","assets/feature-adoption-C919WvgL.js","assets/feature-community-DxZ7YsOF.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{r as s,j as a,an as r,W as n,ac as l,bU as o,at as i,am as c,aK as d,aC as u,bb as m,bV as h,ag as x,bl as p,bW as g,bX as f,a3 as v,aG as j,aF as y,al as N}from"./react-vendor-atdIga2R.js";import{f as b,d as S,E as w,at as E,_ as C,u as k,aq as P,a2 as L,N as F,V as M,W as T,Q as I,U as R,A,C as _,au as z,D,g as O,i as U,j as V,k as $,L as B,I as G,t as W,v as Y,w as K,x as H,y as q,T as Z,av as X,B as Q,h as J,M as ee,e as te,as as se,ad as ae,ae as re,af as ne,ag as le}from"./feature-admin-g8AIjMAb.js";import{A as oe,d as ie}from"./feature-adoption-C919WvgL.js";import{u as ce,d as de,e as ue,f as me,g as he,P as xe,R as pe,h as ge,i as fe}from"./feature-community-DxZ7YsOF.js";import{P as ve,V as je}from"./view-AdoptionView.tsx-BJlxubb2.js";const ye=b("ErrorBoundary");class Ne extends s.Component{constructor(e){super(e),t(this,"handleReset",()=>{var e,t;this.setState({hasError:!1,error:null}),null==(t=(e=this.props).onReset)||t.call(e)}),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var s,a;ye.error("ErrorBoundary caught error",e,{componentStack:t.componentStack,errorBoundary:!0}),null==(a=(s=this.props).onError)||a.call(s,e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background p-6",children:a.jsxs("div",{className:"max-w-md text-center space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"rounded-full bg-destructive/10 p-6",children:a.jsx(r,{size:48,weight:"bold",className:"text-destructive"})})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Oops! Something went wrong"}),a.jsx("p",{className:"text-muted-foreground",children:"We encountered an unexpected error. Please try refreshing the page."})]}),this.state.error&&!1,a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsx(S,{onClick:this.handleReset,variant:"default",children:"Try Again"}),a.jsx(S,{onClick:()=>window.location.reload(),variant:"outline",children:"Refresh Page"})]})]})}):this.props.children}}const be=(e,t)=>{const s=Se(t.lat-e.lat),a=Se(t.lng-e.lng),r=Se(e.lat),n=Se(t.lat),l=Math.sin(s/2)*Math.sin(s/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(r)*Math.cos(n);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},Se=e=>e*Math.PI/180,we=(e,t)=>{const s=t/111e3;return{lat:Math.floor(e.lat/s)*s+s/2,lng:Math.floor(e.lng/s)*s+s/2}},Ee=(e,t="metric")=>{if("imperial"===t){const t=.621371*e;return t<1?`${Math.round(5280*t)} ft`:`${t.toFixed(1)} mi`}return e<1?`${Math.round(1e3*e)} m`:`${e.toFixed(1)} km`},Ce=()=>new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})},e=>{t(new Error(e.message))},{enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5}):t(new Error("Geolocation not supported"))}),ke={PRIVACY_GRID_METERS:1e3,DEFAULT_RADIUS_KM:10,MAX_RADIUS_KM:100,MIN_RADIUS_KM:1,UNITS:"metric",COUNTRY_BIAS:"US",ENABLE_PRECISE_LOCATION:!0,PRECISE_LOCATION_TIMEOUT_MINUTES:60,ENABLE_GEOFENCING:!0,ENABLE_LOST_PET_ALERTS:!0,ENABLE_PLAYDATE_PLANNING:!0,ENABLE_PLACE_DISCOVERY:!0,AUTO_CENTER_ON_LOCATION:!0,SHOW_DISTANCE_LABELS:!0,CLUSTER_MARKERS:!0,MAX_MARKERS_VISIBLE:50},Pe={categories:[{id:"park",name:"Parks",icon:"ðŸŒ³",color:"#22c55e"},{id:"vet",name:"Veterinarians",icon:"ðŸ¥",color:"#3b82f6"},{id:"groomer",name:"Groomers",icon:"âœ‚ï¸",color:"#a855f7"},{id:"cafe",name:"Pet Cafes",icon:"â˜•",color:"#f59e0b"},{id:"store",name:"Pet Stores",icon:"ðŸ›’",color:"#ec4899"},{id:"hotel",name:"Pet Hotels",icon:"ðŸ¨",color:"#14b8a6"},{id:"beach",name:"Dog Beaches",icon:"ðŸ–ï¸",color:"#06b6d4"},{id:"training",name:"Training Centers",icon:"ðŸŽ¯",color:"#8b5cf6"}],defaultCategory:"park",enableUserSubmittedPlaces:!0,requireModeration:!0};function Le(){const[e]=w("admin-map-settings",ke),[t]=w("admin-map-categories",Pe);return{mapSettings:e??ke,categorySettings:t??Pe,PLACE_CATEGORIES:(null==t?void 0:t.categories)??Pe.categories}}let Fe=null;function Me(e){if(null!==e)if("number"==typeof e){const t=globalThis.cancelIdleCallback;"function"==typeof t&&t(e)}else clearTimeout(e)}function Te({container:e,center:t,zoom:a=13,markers:r=[],onMarkerClick:n,onMapClick:l,clusterMarkers:o=!0}){const i=s.useRef(null),c=s.useRef([]),d=s.useRef(null),[u,m]=s.useState(!0),[h,x]=s.useState(null);return s.useEffect(()=>{if(!e)return;let s=!1;return(async()=>{try{const r=await(Fe||(Fe=C(()=>import("./map-vendor-O4a2djK0.js").then(e=>e.m),__vite__mapDeps([0,1])).then(async e=>{try{await C(()=>import("./map-vendor-O4a2djK0.js").then(e=>e.a),__vite__mapDeps([0,1]))}catch{}return e.default?e.default:e})),Fe);if(s)return;d.current=r;const n=new r.Map({container:e,style:E(),center:[t.lng,t.lat],zoom:a,maxZoom:18,minZoom:3});n.on("load",()=>{s||(m(!1),x(null))}),n.on("error",e=>{if(s)return;const t=e.error instanceof Error?e.error:new Error(String(e.error));x(t),m(!1)}),i.current=n}catch(r){if(s)return;const e=r instanceof Error?r:new Error(String(r));x(e),m(!1)}})(),()=>{s=!0,c.current.forEach(e=>e.remove()),c.current=[],i.current&&(i.current.remove(),i.current=null)}},[e,t.lat,t.lng,a]),s.useEffect(()=>{const e=i.current;(null==e?void 0:e.loaded())&&(e.setCenter([t.lng,t.lat]),void 0!==a&&e.setZoom(a))},[t.lat,t.lng,a]),s.useEffect(()=>{const e=i.current,t=d.current;if(e&&t&&e.loaded()&&0!==r.length)if(c.current.forEach(e=>e.remove()),c.current=[],o&&r.length>10){const s=function(e){const t=[],s=new Set,a=.01;return e.forEach(r=>{if(s.has(r.id))return;const n=e.filter(e=>{if(s.has(e.id))return!1;const t=Math.abs(e.location.lat-r.location.lat),n=Math.abs(e.location.lng-r.location.lng);return t<a&&n<a});if(n.length>1){const e={lat:n.reduce((e,t)=>e+t.location.lat,0)/n.length,lng:n.reduce((e,t)=>e+t.location.lng,0)/n.length};t.push({location:e,count:n.length,markers:n}),n.forEach(e=>s.add(e.id))}else t.push({location:r.location,count:1,markers:[r]}),s.add(r.id)}),t}(r);s.forEach(s=>{const a=document.createElement("div");a.className="cluster-marker",a.innerHTML=s.count>1?`<div>${s.count}</div>`:"",a.style.width=s.count>1?"40px":"30px",a.style.height=s.count>1?"40px":"30px",a.style.borderRadius="50%",a.style.backgroundColor=s.count>1?"hsl(var(--primary))":"hsl(var(--accent))",a.style.color="white",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.fontWeight="bold",a.style.fontSize="12px",a.style.border="3px solid white",a.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",a.style.cursor="pointer";const r=new t.Marker(a).setLngLat([s.location.lng,s.location.lat]).addTo(e);a.addEventListener("click",()=>{1===s.count&&s.markers[0]?null==n||n(s.markers[0]):e.flyTo({center:[s.location.lng,s.location.lat],zoom:Math.min(e.getZoom()+2,18)})}),c.current.push(r)})}else r.forEach(s=>{const a=document.createElement("div");a.className="single-marker",a.style.width="30px",a.style.height="30px",a.style.borderRadius="50%",a.style.backgroundColor=s.color||"hsl(var(--primary))",a.style.border="3px solid white",a.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",a.style.cursor="pointer";const r=new t.Marker(a).setLngLat([s.location.lng,s.location.lat]).addTo(e);a.addEventListener("click",()=>{null==n||n(s)}),c.current.push(r)})},[r,o,n]),s.useEffect(()=>{const e=i.current;if(!e||!e.loaded()||!l)return;const t=e=>{l({lat:e.lngLat.lat,lng:e.lngLat.lng})};return e.on("click",t),()=>{e.off("click",t)}},[l]),s.useEffect(()=>{const e=i.current;if(!(null==e?void 0:e.loaded()))return;let t=null;const s=()=>{const s=e.getCenter();e.getZoom();s.lat,s.lng,Me(t);(e=>{const s=globalThis.requestIdleCallback;t="function"==typeof s?s(e,{timeout:120}):setTimeout(e,120)})(()=>{t=null})};return e.on("moveend",s),()=>{e.off("moveend",s),Me(t)}},[]),{map:i.current,isLoading:u,error:h}}function Ie({center:e,zoom:t=13,markers:r=[],onMarkerClick:n,onMapClick:l,className:o="",height:i="100%",clusterMarkers:c=!0}){var d,u;const{t:m}=k(),h=s.useRef(null),{isLoading:x,error:p}=Te({container:h.current,center:e,zoom:t,markers:r,...n?{onMarkerClick:n}:{},...l?{onMapClick:l}:{},clusterMarkers:c});return p?a.jsx("div",{className:`flex items-center justify-center ${o}`,style:{height:i},children:a.jsxs("div",{className:"text-center space-y-2 p-4",children:[a.jsx("p",{className:"text-destructive font-semibold",children:(null==(d=m.map)?void 0:d.errorLoadingMap)||"Error loading map"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:p.message})]})}):a.jsxs("div",{className:`relative ${o}`,style:{height:i},children:[x&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 z-10",children:a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:(null==(u=m.map)?void 0:u.loading)||"Loading map..."})]})}),a.jsx("div",{ref:h,className:"w-full h-full",style:{height:"100%",minHeight:"400px"}})]})}const Re=b("MapLocationPicker");function Ae({onSelect:e,onClose:t,initialLocation:r}){const[c,d]=s.useState((null==r?void 0:r.lat)??37.7749),[u,m]=s.useState((null==r?void 0:r.lon)??-122.4194),[h,x]=s.useState("Loading address..."),[p,g]=s.useState(!1),[f,v]=s.useState(!0),j=P({isVisible:f,duration:300}),y=L({onPress:function(){v(!1),setTimeout(()=>{t()},300)},hapticFeedback:!0}),N=F(1);s.useEffect(()=>(v(!0),()=>{v(!1)}),[]),s.useEffect(()=>{N.value=M(T(I(1.2),I(1)))},[N]),s.useEffect(()=>{navigator.geolocation&&!r&&navigator.geolocation.getCurrentPosition(e=>{d(e.coords.latitude),m(e.coords.longitude)},e=>{const t=e instanceof Error?e:new Error(String(e));Re.error("Geolocation error",t)})},[r]);const b=s.useCallback(async(e,t)=>{try{g(!0);const s=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const a=await s.json();x(a.display_name??"Address not found")}catch(s){const a=s instanceof Error?s:new Error(String(s));Re.error("Failed to fetch address",a,{lat:e,lon:t}),x("Unable to fetch address")}finally{g(!1)}},[]);s.useEffect(()=>{b(c,u)},[c,u,b]);const w=s.useCallback(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{d(e.coords.latitude),m(e.coords.longitude)},e=>{const t=e instanceof Error?e:new Error(String(e));Re.error("Geolocation error",t)})},[]),E=s.useCallback(()=>{e(c,u)},[c,u,e]),C=R(()=>({transform:[{scale:N.value}]})),k=F(0);s.useEffect(()=>{k.value=I(1)},[k]);const z=R(()=>({opacity:k.value}));return a.jsx(A,{style:z,className:"fixed inset-0 z-50 bg-background/95 backdrop-blur-lg",children:a.jsxs(A,{style:j.style,className:"container max-w-6xl mx-auto p-4 h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Pick Location on Map"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag the map or use current location"})]}),a.jsx(A,{style:y.animatedStyle,children:a.jsx(S,{variant:"ghost",size:"icon",onClick:y.handlePress,children:a.jsx(n,{size:24})})})]}),a.jsxs(_,{className:"flex-1 relative overflow-hidden mb-4",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 flex items-center justify-center",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(l,{size:64,className:"mx-auto text-primary",weight:"duotone"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-semibold",children:"Interactive Map"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto mt-2",children:"In production, this would show an interactive map (OpenStreetMap, Google Maps, or Mapbox) where users can drag to select a location."})]}),a.jsxs("div",{className:"bg-card/80 backdrop-blur-sm p-4 rounded-lg max-w-md mx-auto",children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Selected Location:"}),a.jsxs("p",{className:"font-mono text-sm",children:["Lat: ",c.toFixed(6),", Lon: ",u.toFixed(6)]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:p?"Loading address...":h})]})]})}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none",children:a.jsx(A,{style:C,children:a.jsx(l,{size:48,className:"text-primary drop-shadow-lg",weight:"fill"})})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(S,{variant:"outline",onClick:w,className:"flex-1",disabled:p,children:[a.jsx(o,{size:16,className:"mr-2"}),"Use Current Location"]}),a.jsxs(S,{variant:"default",onClick:E,className:"flex-1",disabled:p,children:[a.jsx(i,{size:16,className:"mr-2"}),"Confirm Location"]})]})]})})}const _e=b("CreateLostAlertDialog");function ze({feature:e,index:t,onRemove:s}){const r=X({index:t,staggerDelay:30}),l=L({onPress:()=>s(t),hapticFeedback:!0});return a.jsx(A,{style:r.itemStyle,children:a.jsxs(Q,{variant:"secondary",className:"gap-1",children:[e,a.jsx(A,{style:l.animatedStyle,children:a.jsx("button",{onClick:l.handlePress,type:"button",children:a.jsx(n,{size:12})})})]})})}function De({open:e,onClose:t,onSuccess:r}){const[n,o]=s.useState(!1),[i,h]=s.useState(!1),[x,p]=s.useState(""),[g,f]=s.useState("dog"),[v,j]=s.useState(""),[y,N]=s.useState(""),[b,w]=s.useState("medium"),[E,k]=s.useState([]),[P,M]=s.useState(""),[T,R]=s.useState(""),[_,X]=s.useState(""),[Q,J]=s.useState(""),[ee,te]=s.useState(""),[se,ae]=s.useState(""),[re,ne]=s.useState(null),[le,oe]=s.useState(5e3),[ie,ce]=s.useState(),[de,ue]=s.useState(""),[me]=s.useState([]),he=s.useCallback(()=>{P.trim()&&(k(e=>[...e,P.trim()]),M(""))},[P]),xe=s.useCallback(e=>{k(t=>t.filter((t,s)=>s!==e))},[]),pe=s.useCallback((e,t)=>{ne({lat:e,lon:t}),h(!1)},[]),ge=s.useCallback(e=>{if(e.includes("@")){const t=e.split("@"),s=t[0],a=t[1];if(s&&a)return`${s.substring(0,2)}***@${a}`}return e.length>4?`${e.substring(0,3)}***${e.substring(e.length-2)}`:e},[]),fe=s.useMemo(()=>Boolean(x&&g&&_&&Q&&de),[x,g,_,Q,de]),ve=L({onPress:he,hapticFeedback:!0}),je=L({onPress:()=>h(!0),hapticFeedback:!0}),ye=F(0);s.useEffect(()=>{ye.value=I(e?1:0)},[e,ye]);const Ne=s.useCallback(async()=>{if(fe)try{o(!0);const{userService:e}=await C(async()=>{const{userService:e}=await import("./feature-admin-g8AIjMAb.js").then(e=>e.ba);return{userService:e}},__vite__mapDeps([2,3,4,5,6,7,8])),s=await e.user();if(!s)return void c.error("Please log in to create a lost alert");const a=new Date(`${_}T${Q}`).toISOString(),n={name:x,species:g,size:b};v&&(n.breed=v),y&&(n.color=y),E.length>0&&(n.distinctiveFeatures=E),T&&(n.microchipId=T);const l={whenISO:a,radiusM:le};void 0!==(null==re?void 0:re.lat)&&(l.lat=re.lat),void 0!==(null==re?void 0:re.lon)&&(l.lon=re.lon),ee&&(l.description=ee),se&&(l.landmarks=[se]),await z.createAlert({ownerId:s.id,ownerName:("string"==typeof s.name?s.name:void 0)??"Unknown",...s.avatarUrl?{ownerAvatar:s.avatarUrl}:{},petSummary:n,lastSeen:l,...null!=ie?{reward:ie}:{},contactMask:ge(de),photos:me,...ee?{description:ee}:{}}),c.success("Lost pet alert created successfully!"),_e.info("Lost alert created",{petName:x,species:g,userId:s.id}),r(),t()}catch(e){const t=e instanceof Error?e:new Error(String(e));_e.error("Failed to create lost alert",t,{petName:x,species:g}),c.error("Failed to create alert. Please try again.")}finally{o(!1)}else c.error("Please fill in all required fields")},[fe,_,Q,x,g,v,y,b,E,T,re,le,ee,se,ie,de,me,ge,r,t]),be=L({onPress:Ne,hapticFeedback:!0});return a.jsxs(a.Fragment,{children:[a.jsx(D,{open:e&&!i,onOpenChange:t,children:a.jsxs(O,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(U,{children:[a.jsx(V,{children:"Report Lost Pet"}),a.jsx($,{children:"Help us help you find your pet. The more details, the better."})]}),a.jsxs("div",{className:"space-y-6 py-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Pet Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"petName",children:"Pet Name *"}),a.jsx(G,{id:"petName",value:x,onChange:e=>p(e.target.value),placeholder:"e.g., Max"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"species",children:"Species *"}),a.jsxs(W,{value:g,onValueChange:e=>f(e),children:[a.jsx(Y,{children:a.jsx(K,{})}),a.jsxs(H,{children:[a.jsx(q,{value:"dog",children:"Dog"}),a.jsx(q,{value:"cat",children:"Cat"}),a.jsx(q,{value:"other",children:"Other"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"breed",children:"Breed"}),a.jsx(G,{id:"breed",value:v,onChange:e=>j(e.target.value),placeholder:"e.g., Golden Retriever"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"color",children:"Color"}),a.jsx(G,{id:"color",value:y,onChange:e=>N(e.target.value),placeholder:"e.g., Golden"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"size",children:"Size"}),a.jsxs(W,{value:b,onValueChange:e=>w(e),children:[a.jsx(Y,{children:a.jsx(K,{})}),a.jsxs(H,{children:[a.jsx(q,{value:"tiny",children:"Tiny (0-5 lbs)"}),a.jsx(q,{value:"small",children:"Small (6-20 lbs)"}),a.jsx(q,{value:"medium",children:"Medium (21-50 lbs)"}),a.jsx(q,{value:"large",children:"Large (51-100 lbs)"}),a.jsx(q,{value:"extra-large",children:"Extra Large (100+ lbs)"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{children:"Distinctive Features"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(G,{value:P,onChange:e=>M(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),he())},placeholder:"e.g., White spot on chest"}),a.jsx(A,{style:ve.animatedStyle,children:a.jsx(S,{type:"button",onClick:ve.handlePress,size:"icon",children:a.jsx(d,{size:16})})})]}),E.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:E.map((e,t)=>a.jsx(ze,{feature:e,index:t,onRemove:xe},t))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"microchipId",children:"Microchip ID (if applicable)"}),a.jsx(G,{id:"microchipId",value:T,onChange:e=>R(e.target.value),placeholder:"15-digit microchip number"})]})]}),a.jsxs("div",{className:"space-y-4 border-t pt-4",children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Last Seen Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"lastSeenDate",children:"Date *"}),a.jsx(G,{id:"lastSeenDate",type:"date",value:_,onChange:e=>X(e.target.value),max:(new Date).toISOString().split("T")[0]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"lastSeenTime",children:"Time *"}),a.jsx(G,{id:"lastSeenTime",type:"time",value:Q,onChange:e=>J(e.target.value)})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{children:"Location on Map"}),a.jsx(A,{style:je.animatedStyle,children:a.jsxs(S,{type:"button",variant:"outline",className:"w-full",onClick:je.handlePress,children:[a.jsx(l,{size:16,className:"mr-2"}),re?"Update Location":"Pick Location on Map"]})}),re&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Location set: ",re.lat.toFixed(4),","," ",re.lon.toFixed(4)]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"radiusM",children:"Search Radius"}),a.jsxs(W,{value:le.toString(),onValueChange:e=>oe(parseInt(e,10)),children:[a.jsx(Y,{children:a.jsx(K,{})}),a.jsxs(H,{children:[a.jsx(q,{value:"1000",children:"1 km"}),a.jsx(q,{value:"2000",children:"2 km"}),a.jsx(q,{value:"5000",children:"5 km"}),a.jsx(q,{value:"10000",children:"10 km"}),a.jsx(q,{value:"20000",children:"20 km"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"locationDescription",children:"Location Description"}),a.jsx(Z,{id:"locationDescription",value:ee,onChange:e=>te(e.target.value),placeholder:"e.g., Near Central Park, by the main entrance",rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"landmarks",children:"Nearby Landmarks"}),a.jsx(G,{id:"landmarks",value:se,onChange:e=>ae(e.target.value),placeholder:"e.g., Coffee shop on the corner"})]})]}),a.jsxs("div",{className:"space-y-4 border-t pt-4",children:[a.jsx("h3",{className:"font-semibold text-sm",children:"Contact & Reward"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"contactInfo",children:"Contact Information *"}),a.jsx(G,{id:"contactInfo",value:de,onChange:e=>ue(e.target.value),placeholder:"Email or phone number"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Will be partially masked for privacy (e.g., ab***@email.com)"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{htmlFor:"reward",children:"Reward Amount (Optional)"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"shrink-0 bg-muted rounded-md px-3 flex items-center",children:a.jsx(u,{size:18,className:"text-muted-foreground"})}),a.jsx(G,{id:"reward",type:"number",min:"0",value:ie??"",onChange:e=>ce(parseFloat(e.target.value)||void 0),placeholder:"0"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(B,{children:"Photos"}),a.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-primary/50 transition-colors cursor-pointer",children:[a.jsx(m,{size:24,className:"mx-auto mb-2 text-muted-foreground"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload photos of your pet"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Up to 5 photos, max 5MB each"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 sticky bottom-0 bg-card pt-4 border-t",children:[a.jsx(S,{variant:"outline",onClick:t,disabled:n,children:"Cancel"}),a.jsx(A,{style:be.animatedStyle,children:a.jsx(S,{onClick:be.handlePress,disabled:n||!fe,children:n?"Creating Alert...":"Create Alert"})})]})]})}),i&&a.jsx(Ae,{onSelect:pe,onClose:()=>h(!1),...re?{initialLocation:re}:{}})]})}const Oe=b("LostFoundMap");function Ue({alerts:e,onReportSighting:t,onReportLost:r}){var o,i,u,m,p,g,f,v;const{t:j}=k(),{mapSettings:y}=Le(),[N,b]=s.useState(null),[w,E]=s.useState(null),[C]=s.useState(10),[P,L]=s.useState("all");s.useEffect(()=>{Ce().then(e=>{try{const t=we(e,y.PRIVACY_GRID_METERS);b(t)}catch(t){const e=t instanceof Error?t:new Error(String(t));Oe.error("LostFoundMap snapToGrid error",e),b({lat:40.7128,lng:-74.006})}}).catch(e=>{const t=e instanceof Error?e:new Error(String(e));Oe.error("LostFoundMap getCurrentLocation error",t),b({lat:40.7128,lng:-74.006})})},[y.PRIVACY_GRID_METERS]);const F=s.useMemo(()=>{let t=e.filter(e=>"active"===e.status);if("all"!==P){const e="24h"===P?24:"7d"===P?168:720,s=new Date((new Date).getTime()-60*e*60*1e3);t=t.filter(e=>e.lastSeenTime>=s)}return N&&(t=t.filter(e=>be(N,e.lastSeen)<=C)),t},[e,N,C,P]),M=s.useMemo(()=>F.map(e=>({id:e.id,location:e.lastSeen,data:e,icon:e.petPhoto,color:"hsl(var(--destructive))"})),[F]),T=s.useMemo(()=>N||{lat:40.7128,lng:-74.006},[N]);return N?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs(Q,{variant:"secondary",className:"gap-2",children:[a.jsx(l,{size:14}),F.length," ",(null==(i=j.lostFound)?void 0:i.alerts)||"alerts"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(h,{size:16,className:"text-muted-foreground"}),a.jsxs("select",{value:P,onChange:e=>{J.trigger("selection"),L(e.target.value)},className:"text-sm border rounded px-2 py-1",children:[a.jsx("option",{value:"all",children:(null==(u=j.lostFound)?void 0:u.allTime)||"All time"}),a.jsx("option",{value:"24h",children:(null==(m=j.lostFound)?void 0:m.last24h)||"Last 24h"}),a.jsx("option",{value:"7d",children:(null==(p=j.lostFound)?void 0:p.last7d)||"Last 7 days"}),a.jsx("option",{value:"30d",children:(null==(g=j.lostFound)?void 0:g.last30d)||"Last 30 days"})]})]})]}),r&&a.jsxs(S,{onClick:r,size:"sm",children:[a.jsx(d,{size:18,className:"mr-2"}),(null==(f=j.lostFound)?void 0:f.reportLost)||"Report Lost Pet"]})]}),a.jsx("div",{className:"relative h-[500px] rounded-lg overflow-hidden border",children:a.jsx(Ie,{center:T,zoom:12,markers:M,onMarkerClick:e=>{J.trigger("light"),E(e.data)},height:"100%",clusterMarkers:!0})}),w&&a.jsxs(ee,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 border rounded-lg space-y-3 bg-background",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex gap-3 flex-1",children:[a.jsx("img",{src:w.petPhoto,alt:w.petName,className:"w-16 h-16 rounded-lg object-cover"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-lg",children:w.petName}),a.jsx("p",{className:"text-sm text-muted-foreground",children:w.breed}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(x,{size:14,className:"text-muted-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(w.lastSeenTime).toLocaleDateString()}),N&&a.jsx(Q,{variant:"secondary",className:"text-xs",children:Ee(be(N,w.lastSeen))})]})]})]}),a.jsx(S,{variant:"ghost",size:"icon",onClick:()=>E(null),children:a.jsx(n,{size:20})})]}),a.jsx("p",{className:"text-sm text-foreground",children:w.description}),t&&a.jsxs(S,{className:"w-full",onClick:async()=>{var e;w&&N&&t&&(J.trigger("success"),t(w.id,N),c.success((null==(e=j.lostFound)?void 0:e.sightingReported)||"Sighting reported"))},children:[a.jsx(l,{size:18,className:"mr-2"}),(null==(v=j.lostFound)?void 0:v.reportSighting)||"Report Sighting"]})]})]}):a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(l,{size:64,className:"mx-auto text-primary/30",weight:"duotone"}),a.jsx("p",{className:"text-lg font-semibold text-foreground/70",children:(null==(o=j.map)?void 0:o.loading)||"Loading map..."})]})})}function Ve({items:e,renderItem:t,estimateSize:r=()=>100,overscan:n=5,className:l="",containerClassName:o="",onEndReached:i,endReachedThreshold:c=200,keyExtractor:d}){const u=s.useRef(null),[m,h]=s.useState(!1),x=s.useRef(void 0),g=p({count:e.length,getScrollElement:()=>u.current,estimateSize:r,overscan:n}),f=s.useCallback(()=>{if(h(!0),x.current&&clearTimeout(x.current),x.current=window.setTimeout(()=>{h(!1)},150),i&&u.current){const e=u.current;e.scrollHeight-e.scrollTop-e.clientHeight<c&&i()}},[i,c]);return s.useEffect(()=>{const e=u.current;if(e)return e.addEventListener("scroll",f,{passive:!0}),()=>{e.removeEventListener("scroll",f),x.current&&clearTimeout(x.current)}},[f]),a.jsx("div",{ref:u,className:`overflow-y-auto ${o}`,style:{contain:"strict"},children:a.jsx("div",{style:{height:`${g.getTotalSize()}px`,width:"100%",position:"relative"},className:l,children:g.getVirtualItems().map(s=>{const r=e[s.index],n=d?d(r,s.index):s.index;return a.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${s.start}px)`},"data-index":s.index,children:t(r,s.index)},n)})})})}const $e=b("CommunityView");function Be(e){return{id:e.id,petId:e.id,petName:e.petSummary.name??"Unknown",petPhoto:e.photos[0]??"",breed:e.petSummary.breed??"Unknown",lastSeen:{lat:e.lastSeen.lat??0,lng:e.lastSeen.lon??0},lastSeenTime:new Date(e.createdAt),description:e.description??"",contactInfo:e.contactMask??"",radius:10,status:"active"===e.status?"active":"found"===e.status?"found":"expired",sightings:[],createdBy:e.ownerId,createdAt:new Date(e.createdAt)}}const Ge=Object.freeze(Object.defineProperty({__proto__:null,default:function(){var e,t,r,n,o,i,u,m,h,x,p,b,E,P,L,_,D,O,U,V,$;const{t:B}=k(),[G,W]=s.useState("feed"),[Y,K]=s.useState("for-you"),[H,q]=s.useState(!1),Z=ce({feedTab:Y,enabled:"feed"===G});de({hasMore:Z.hasMore,loading:Z.loading,onLoadMore:()=>{Z.loadFeed(!0)},enabled:"feed"===G});const X=ue(),ee=me({onRefresh:async()=>{await Z.refreshFeed(),await X.loadTrendingTags()},enabled:"feed"===G,activeTab:G}),ye=he({onPostCreated:()=>{Z.refreshFeed(),X.loadTrendingTags()},onRefreshFeed:()=>{Z.refreshFeed()}}),be=F(0),Se=F(20);s.useEffect(()=>{be.value=I(1),Se.value=I(0)},[be,Se]);const we=R(()=>({opacity:be.value,transform:[{translateY:Se.value}]})),[Ee,Ce]=s.useState([]),[ke,Pe]=s.useState(!0),[Le,Fe]=s.useState(!0),[Me,Te]=s.useState(),[Ie,Re]=s.useState(null),[Ae]=w("favorited-adoption-profiles",[]),_e=s.useRef(!1),ze=s.useRef(null),[Oe,Ge]=s.useState([]),[We,Ye]=s.useState(!1),[Ke,He]=s.useState(!1),qe=s.useCallback(async()=>{if("lost-found"===G&&!We){Ye(!0);try{const e=await z.queryAlerts({status:["active"]});Ge(e.alerts.map(Be))}catch(e){const t=e instanceof Error?e:new Error(String(e));$e.error("Failed to load lost found alerts",t)}finally{Ye(!1)}}},[G,We]);s.useEffect(()=>{qe()},[qe]);const Ze=s.useCallback(async(e=!1)=>{if(!_e.current)try{_e.current=!0,Pe(!0);const t=await te.getAdoptionProfiles({limit:12});Ce(e?e=>[...Array.isArray(e)?e:[],...Array.isArray(t.profiles)?t.profiles.map(e=>({_id:e._id,petId:e.petId,petName:e.petName,petPhoto:e.petPhoto,breed:e.breed,age:e.age,gender:e.gender,size:e.size,location:e.location,shelterId:e.shelterId,shelterName:e.shelterName,status:e.status,description:e.description,healthStatus:e.healthStatus,vaccinated:e.vaccinated,spayedNeutered:e.spayedNeutered,goodWithKids:e.goodWithKids,goodWithPets:e.goodWithPets,energyLevel:e.energyLevel,...e.specialNeeds&&{specialNeeds:e.specialNeeds},adoptionFee:e.adoptionFee,postedDate:e.postedDate,personality:e.personality,photos:e.photos,...e.videoUrl&&{videoUrl:e.videoUrl},contactEmail:e.contactEmail,...e.contactPhone&&{contactPhone:e.contactPhone},...e.applicationUrl&&{applicationUrl:e.applicationUrl}})):[]]:Array.isArray(t.profiles)?t.profiles.map(e=>({_id:e._id,petId:e.petId,petName:e.petName,petPhoto:e.petPhoto,breed:e.breed,age:e.age,gender:e.gender,size:e.size,location:e.location,shelterId:e.shelterId,shelterName:e.shelterName,status:e.status,description:e.description,healthStatus:e.healthStatus,vaccinated:e.vaccinated,spayedNeutered:e.spayedNeutered,goodWithKids:e.goodWithKids,goodWithPets:e.goodWithPets,energyLevel:e.energyLevel,...e.specialNeeds&&{specialNeeds:e.specialNeeds},adoptionFee:e.adoptionFee,postedDate:e.postedDate,personality:e.personality,photos:e.photos,...e.videoUrl&&{videoUrl:e.videoUrl},contactEmail:e.contactEmail,...e.contactPhone&&{contactPhone:e.contactPhone},...e.applicationUrl&&{applicationUrl:e.applicationUrl}})):[]),Fe(!!t.nextCursor),Te(t.nextCursor)}catch(t){const e=t instanceof Error?t:new Error(String(t));$e.error("Failed to load adoption profiles",e,{action:"loadAdoptionProfiles"})}finally{Pe(!1),_e.current=!1}},[]);s.useEffect(()=>{"feed"===G&&X.loadTrendingTags()},[G,X]),s.useEffect(()=>{const e=new IntersectionObserver(e=>{const t=e[0];(null==t?void 0:t.isIntersecting)&&Le&&!ke&&!_e.current&&"adoption"===G&&Ze(!0)},{threshold:.1});return ze.current&&e.observe(ze.current),()=>e.disconnect()},[Le,ke,G,Ze]);const Xe=s.useCallback(e=>{W(e),J.selection()},[]),Qe=s.useCallback(e=>{K(e),Z.resetFeed(),J.selection()},[Z]),Je=s.useCallback(()=>{q(!0),J.impact()},[]),et=se({isVisible:!0,direction:"down",duration:300}),tt=se({isVisible:X.trendingTags.length>0,direction:"up",duration:300}),st=se({isVisible:0===Z.posts.length&&!Z.loading,direction:"fade",duration:500}),at=F(1),rt=F(0),nt=F(0);s.useEffect(()=>{0!==Z.posts.length||Z.loading||(at.value=M(T(I(1.1),I(1))),rt.value=M(T(I(5),I(-5),I(0))))},[Z.posts.length,Z.loading,at,rt]),s.useEffect(()=>{Z.loading||ke?nt.value=M(I(360)):nt.value=0},[Z.loading,ke,nt]);const lt=R(()=>({transform:[{rotate:`${nt.value}deg`}]})),ot=R(()=>({transform:[{scale:at.value},{rotate:`${rt.value}deg`}]})),it=F(0),ct=F(20);s.useEffect(()=>{ke&&0===Ee.length&&(it.value=I(1),ct.value=I(0))},[ke,Ee.length,it,ct]);const dt=F(1),ut=F(0);s.useEffect(()=>{0!==Ee.length||ke||(dt.value=M(T(I(1.1),I(1))),ut.value=M(T(I(5),I(-5),I(0))))},[Ee.length,ke,dt,ut]);const mt=F(0),ht=F(20);s.useEffect(()=>{Ee.length>0&&(mt.value=I(1),ht.value=I(0))},[Ee.length,mt,ht]);const xt=F(0);s.useEffect(()=>{xt.value=ke?M(I(360)):0},[ke,xt]);const pt=R(()=>({transform:[{rotate:`${xt.value}deg`}]})),gt=s.useCallback(e=>a.jsx("div",{className:"mb-4",children:a.jsx(Ne,{fallback:a.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Failed to load post. Please refresh."}),children:a.jsx(xe,{post:e,onAuthorClick:ye.handleAuthorClick})})}),[ye.handleAuthorClick]),ft=s.useCallback(e=>{Re(e)},[]),vt=s.useCallback(e=>a.jsx(oe,{profile:e,onSelect:ft,onFavorite:ye.handleToggleFavorite,isFavorited:Array.isArray(Ae)&&Ae.includes(e._id)}),[Ae,ye.handleToggleFavorite,ft]),jt=s.useCallback(()=>400,[]),yt=s.useCallback(e=>e.id,[]),Nt=s.useCallback(e=>e._id,[]),bt=s.useCallback(()=>{Z.hasMore&&!Z.loading&&Z.loadFeed(!0)},[Z.hasMore,Z.loading,Z.loadFeed]),St=s.useCallback(()=>{Le&&!ke&&"adoption"===G&&Ze(!0)},[Le,ke,G,Ze]);return a.jsx(ve,{direction:"up",children:a.jsxs("div",{ref:ee.containerRef,className:"max-w-6xl mx-auto space-y-6 pb-8 relative",children:[a.jsx(A,{className:"absolute top-0 left-1/2 -translate-x-1/2 z-50 pointer-events-none",style:[ee.pullTranslateStyle,ee.pullOpacityStyle],children:a.jsx(A,{className:"bg-card/95 backdrop-blur-xl shadow-xl rounded-full p-3 border border-border/50",style:[ee.pullRotationStyle,ee.pullScaleStyle],children:a.jsx(g,{size:24,weight:"bold",className:(ee.isRefreshing?"animate-spin":"")+" text-primary"})})}),a.jsxs(A,{style:et.style,className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold bg-linear-to-r from-primary via-accent to-secondary bg-clip-text text-transparent",children:(null==(e=B.community)?void 0:e.title)??"Community"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"feed"===G?(null==(t=B.community)?void 0:t.feed)??"Share and discover pet moments":(null==(r=B.adoption)?void 0:r.subtitle)??"Find your perfect companion"})]}),a.jsx("div",{className:"flex items-center gap-2",children:"feed"===G&&a.jsxs(a.Fragment,{children:[a.jsx(S,{variant:"outline",size:"icon",onClick:async()=>{var e,t;J.impact();try{await Z.refreshFeed(),await X.loadTrendingTags(),J.success(),c.success((null==(e=B.community)?void 0:e.refreshed)??"Feed refreshed!")}catch(s){const e=s instanceof Error?s:new Error(String(s));$e.error("Failed to refresh feed",e),J.error(),c.error((null==(t=B.community)?void 0:t.refreshError)??"Failed to refresh")}},"aria-label":"Refresh feed",disabled:ee.isRefreshing,className:"shadow-md",children:a.jsx(g,{size:20,weight:"bold",className:ee.isRefreshing?"animate-spin":""})}),a.jsxs(S,{size:"lg",className:"gap-2 shadow-lg",onClick:Je,children:[a.jsx(d,{size:20,weight:"bold"}),a.jsx("span",{className:"hidden sm:inline",children:(null==(n=B.community)?void 0:n.createPost)??"Create Post"}),a.jsx("span",{className:"sm:hidden",children:(null==(o=B.community)?void 0:o.post)??"Post"})]})]})})]}),a.jsx(A,{style:we,children:a.jsxs(ae,{value:G,onValueChange:Xe,children:[a.jsxs(re,{className:"grid w-full grid-cols-3 bg-card shadow-md",children:[a.jsxs(ne,{value:"feed",className:"gap-2",children:[a.jsx(f,{size:18,weight:"feed"===G?"fill":"regular"}),(null==(i=B.community)?void 0:i.feed)??"Feed"]}),a.jsxs(ne,{value:"adoption",className:"gap-2",children:[a.jsx(v,{size:18,weight:"adoption"===G?"fill":"regular"}),(null==(u=B.adoption)?void 0:u.title)??"Adoption"]}),a.jsxs(ne,{value:"lost-found",className:"gap-2",children:[a.jsx(l,{size:18,weight:"lost-found"===G?"fill":"regular"}),(null==(m=B.map)?void 0:m.lostAndFound)??"Lost & Found"]})]}),a.jsxs(le,{value:"feed",className:"mt-6 space-y-6",children:[X.trendingTags.length>0&&a.jsxs(A,{style:tt.style,className:"bg-linear-to-br from-card via-card to-card/50 rounded-xl p-4 border border-border/50 shadow-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(j,{size:20,className:"text-accent",weight:"bold"}),a.jsx("h3",{className:"font-semibold text-foreground",children:(null==(h=B.community)?void 0:h.trending)??"Trending Today"}),a.jsx(f,{size:16,className:"text-destructive ml-auto",weight:"fill"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:X.trendingTags.map(e=>a.jsxs(Q,{variant:"secondary",className:"cursor-pointer hover:bg-primary/20 transition-colors",onClick:()=>J.selection(),children:["#",e]},e))})]}),a.jsxs(ae,{value:Y,onValueChange:Qe,children:[a.jsxs(re,{className:"grid w-full grid-cols-2 bg-card shadow-md max-w-md mx-auto",children:[a.jsxs(ne,{value:"for-you",className:"gap-2",children:[a.jsx(y,{size:18,weight:"for-you"===Y?"fill":"regular"}),(null==(x=B.community)?void 0:x.forYou)??"For You"]}),a.jsxs(ne,{value:"following",className:"gap-2",children:[a.jsx(f,{size:18,weight:"following"===Y?"fill":"regular"}),(null==(p=B.community)?void 0:p.following)??"Following"]})]}),a.jsx(le,{value:Y,className:"mt-6 space-y-4 max-w-3xl mx-auto",children:Z.loading&&0===Z.posts.length?a.jsx(pe,{count:3,variant:"post"}):0===Z.posts.length?a.jsxs(A,{style:st.style,className:"text-center py-20",children:[a.jsx(A,{style:ot,className:"text-8xl mb-6",children:"ðŸ¾"}),a.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:(null==(b=B.community)?void 0:b.noPosts)??"No posts yet"}),a.jsx("p",{className:"text-muted-foreground mb-8 max-w-md mx-auto",children:"following"===Y?(null==(E=B.community)?void 0:E.noFollowingPosts)??"Follow some pets to see their posts here!":(null==(P=B.community)?void 0:P.noPostsDesc)??"Be the first to share something amazing!"}),a.jsxs(S,{size:"lg",className:"gap-2 shadow-lg",onClick:Je,children:[a.jsx(d,{size:20,weight:"bold"}),(null==(L=B.community)?void 0:L.createPost)??"Create Post"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ve,{items:Z.posts,renderItem:gt,estimateSize:jt,overscan:3,containerClassName:"space-y-4",onEndReached:bt,endReachedThreshold:300,keyExtractor:yt}),Z.loading&&Z.posts.length>0&&a.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground py-4",children:[a.jsx(A,{style:lt,children:a.jsx(y,{size:20})}),a.jsx("span",{className:"text-sm",children:(null==(_=B.common)?void 0:_.loading)??"Loading..."})]}),!Z.hasMore&&Z.posts.length>0&&a.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:(null==(D=B.community)?void 0:D.endOfFeed)??"You're all caught up! ðŸŽ‰"})]})})]})]}),a.jsx(le,{value:"adoption",className:"mt-6 space-y-6",children:ke&&0===Ee.length?a.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>a.jsxs("div",{className:"bg-card rounded-xl overflow-hidden border border-border/50 shadow-md",children:[a.jsx(ge,{className:"h-64 w-full"}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsx(ge,{className:"h-6 w-32"}),a.jsx(ge,{className:"h-4 w-full"}),a.jsx(ge,{className:"h-4 w-4/5"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ge,{className:"h-6 w-20"}),a.jsx(ge,{className:"h-6 w-20"})]})]})]},e))}):0===Ee.length?a.jsxs(A,{style:se({isVisible:!0,direction:"fade",duration:500}).style,className:"text-center py-20",children:[a.jsx(A,{style:ot,className:"text-8xl mb-6",children:"ðŸ "}),a.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:(null==(O=B.adoption)?void 0:O.noProfiles)??"No pets available for adoption"}),a.jsx("p",{className:"text-muted-foreground mb-8 max-w-md mx-auto",children:(null==(U=B.adoption)?void 0:U.noProfilesDesc)??"Check back soon for pets looking for their forever homes."})]}):a.jsxs(a.Fragment,{children:[a.jsx(je,{items:Ee,renderItem:vt,columns:3,itemHeight:400,gap:24,overscan:3,containerClassName:"p-4",onEndReached:St,endReachedThreshold:300,keyExtractor:Nt}),ke&&Ee.length>0&&a.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground py-4",children:[a.jsx(A,{style:pt,children:a.jsx(N,{size:20})}),a.jsx("span",{className:"text-sm",children:(null==(V=B.common)?void 0:V.loading)??"Loading..."})]}),!Le&&Ee.length>0&&a.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:(null==($=B.adoption)?void 0:$.endOfList)??"You've seen all available pets! ðŸ¾"})]})}),a.jsx(le,{value:"lost-found",className:"mt-6 space-y-6",children:a.jsx(Ue,{alerts:Oe,onReportSighting:(e,t)=>{(async()=>{var s;try{const{userService:a}=await C(async()=>{const{userService:e}=await import("./feature-admin-g8AIjMAb.js").then(e=>e.ba);return{userService:e}},__vite__mapDeps([2,3,4,5,6,7,8])),r=await a.user();if(!r)return void c.error("You must be logged in to report sightings");await z.createSighting({alertId:e,whenISO:(new Date).toISOString(),lat:t.lat,lon:t.lng,radiusM:1e3,description:"",photos:[],contactMask:"",reporterId:"string"==typeof r.id?r.id:"",reporterName:"string"==typeof r.name?r.name:"Anonymous",...r.avatarUrl&&{reporterAvatar:r.avatarUrl}}),c.success((null==(s=B.lostFound)?void 0:s.sightingSubmitted)??"Sighting reported")}catch(a){const e=a instanceof Error?a:new Error(String(a));$e.error("Failed to report sighting",e),c.error("Failed to report sighting")}})()},onReportLost:()=>{He(!0),J.impact("light")}})})]})}),a.jsx(fe,{open:H,onOpenChange:q,onPostCreated:ye.handlePostCreated}),a.jsx(ie,{profile:Ie,open:!!Ie,onOpenChange:e=>!e&&Re(null)}),a.jsx(De,{open:Ke,onClose:()=>He(!1),onSuccess:()=>{qe()}})]})},"community-view")}},Symbol.toStringTag,{value:"Module"}));export{De as C,Ne as E,Ie as M,Ve as V,Ae as a,Ge as b,be as c,Ee as f,Ce as g,we as s,Le as u};
