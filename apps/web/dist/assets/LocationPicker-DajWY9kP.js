import{r as e,am as s,j as a,ac as t,W as i,ak as l,cg as r,ae as n,ab as c,bY as d,c$ as o,aq as m,d0 as x,d1 as h,cY as u}from"./react-vendor-atdIga2R.js";import{M as p,d as j,I as f,ad as g,ae as v,af as N,ag as y,F as b,p as w,C as k,B as C,h as z}from"./feature-admin-g8AIjMAb.js";import{g as S,c as L,f as P}from"./view-CommunityView.tsx-CD5NUxZ2.js";import"./vendor-B2U5onNE.js";import"./utils-vendor-7mYxNw04.js";import"./ui-vendor-CttiZxwU.js";import"./feature-adoption-C919WvgL.js";import"./feature-community-DxZ7YsOF.js";import"./view-AdoptionView.tsx-BJlxubb2.js";const M=[{id:"1",name:"Central Dog Park",address:"123 Main St",type:"park",location:{lat:37.7749,lng:-122.4194},rating:4.5},{id:"2",name:"Pawfect Paws Cafe",address:"456 Oak Ave",type:"cafe",location:{lat:37.775,lng:-122.4195},rating:4.8},{id:"3",name:"Sunset Beach Trail",address:"789 Beach Rd",type:"trail",location:{lat:37.7751,lng:-122.4196},rating:4.6},{id:"4",name:"Riverside Park",address:"321 River Dr",type:"park",location:{lat:37.7752,lng:-122.4197},rating:4.7},{id:"5",name:"Pet Haven Meadow",address:"654 Green St",type:"park",location:{lat:37.7748,lng:-122.4193},rating:4.9}];function V({value:V,onChange:A,onClose:B}){const[R,D]=e.useState(""),[F,I]=e.useState("list"),[T,Y]=e.useState(null),[q,E]=e.useState(M),[G,H]=e.useState(!1),[O,U]=e.useState(null),[W,$]=e.useState({name:(null==V?void 0:V.name)||"",address:(null==V?void 0:V.address)||""});e.useEffect(()=>{J()},[]);const J=async()=>{H(!0);try{const e=await S();Y(e);const a=M.map(s=>({...s,distance:L(e,s.location)})).sort((e,s)=>(e.distance||0)-(s.distance||0));E(a),s.success("Location detected")}catch(e){s.error("Could not get your location")}finally{H(!1)}},K=e=>{switch(e){case"park":return a.jsx(u,{size:20,weight:"fill",className:"text-green-600"});case"cafe":return a.jsx(h,{size:20,weight:"fill",className:"text-orange-600"});case"beach":case"trail":return a.jsx(x,{size:20,weight:"bold",className:"text-blue-600"});case"home":return a.jsx(m,{size:20,weight:"fill",className:"text-purple-600"});default:return a.jsx(o,{size:20,className:"text-gray-600"})}},Q=e=>{U(e),A({name:e.name,address:e.address,lat:e.location.lat,lng:e.location.lng,type:e.type}),z.selection()},X=q.filter(e=>e.name.toLowerCase().includes(R.toLowerCase())||e.address.toLowerCase().includes(R.toLowerCase()));return a.jsx(p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/98 backdrop-blur-md z-50 overflow-auto",children:a.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:a.jsx(t,{size:24,className:"text-white",weight:"fill"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Choose Location"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a meeting spot for your playdate"})]})]}),B&&a.jsx(j,{variant:"ghost",size:"icon",onClick:B,children:a.jsx(i,{size:24})})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(l,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),a.jsx(f,{value:R,onChange:e=>D(e.target.value),placeholder:"Search for parks, cafes, or places...",className:"pl-10 pr-12 h-12 text-base"}),G&&a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:a.jsx(p,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:a.jsx(r,{size:20,className:"text-primary"})})})]})}),a.jsxs(g,{value:F,onValueChange:e=>I(e),className:"mb-6",children:[a.jsxs(v,{className:"grid w-full grid-cols-2",children:[a.jsxs(N,{value:"list",className:"flex items-center gap-2",children:[a.jsx(n,{size:18}),"List"]}),a.jsxs(N,{value:"map",className:"flex items-center gap-2",children:[a.jsx(c,{size:18}),"Map"]})]}),a.jsx(y,{value:"list",className:"mt-4",children:a.jsx(b,{className:"h-[500px]",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground uppercase tracking-wide",children:"Nearby Places"}),a.jsx(w,{children:X.map((e,s)=>a.jsx(p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.05*s},children:a.jsx(k,{className:"p-4 mb-3 cursor-pointer transition-all hover:shadow-lg "+((null==O?void 0:O.id)===e.id?"ring-2 ring-primary bg-primary/5":"hover:bg-accent/5"),onClick:()=>Q(e),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-background to-muted flex items-center justify-center flex-shrink-0 border",children:K(e.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[a.jsx("h4",{className:"font-semibold text-base",children:e.name}),e.rating&&a.jsxs(C,{variant:"secondary",className:"flex items-center gap-1 flex-shrink-0",children:[a.jsx(d,{size:12,weight:"fill",className:"text-yellow-500"}),e.rating]})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.address}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(C,{variant:"outline",className:"text-xs",children:e.type}),void 0!==e.distance&&a.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[a.jsx(r,{size:12}),P(e.distance)]})]})]}),(null==O?void 0:O.id)===e.id&&a.jsx(p,{initial:{scale:0},animate:{scale:1},className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center flex-shrink-0",children:a.jsx(t,{size:14,weight:"fill",className:"text-white"})})]})})},e.id))})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t",children:[a.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground uppercase tracking-wide",children:"Custom Location"}),a.jsx(k,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsx(f,{placeholder:"Location name (e.g., My Favorite Park)",value:W.name,onChange:e=>$(s=>({...s,name:e.target.value}))})}),a.jsx("div",{children:a.jsx(f,{placeholder:"Address",value:W.address,onChange:e=>$(s=>({...s,address:e.target.value}))})}),a.jsxs(j,{onClick:()=>{W.name&&W.address?(A({name:W.name,address:W.address,type:"other"}),z.success(),B&&B()):s.error("Please enter location name and address")},className:"w-full",children:[a.jsx(t,{size:16,className:"mr-2",weight:"fill"}),"Use This Location"]})]})})]})]})})}),a.jsx(y,{value:"map",className:"mt-4",children:a.jsx(k,{className:"overflow-hidden",children:a.jsx("div",{className:"relative w-full h-[500px] bg-gradient-to-br from-primary/5 via-accent/5 to-secondary/5 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(c,{size:64,className:"mx-auto mb-4 text-muted-foreground"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Interactive Map View"}),a.jsx("p",{className:"text-muted-foreground max-w-md",children:"Map visualization shows nearby pet-friendly locations on an interactive map"}),a.jsx("div",{className:"mt-6 flex flex-wrap justify-center gap-3",children:X.slice(0,5).map((e,s)=>a.jsx(p,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1*s},children:a.jsxs(j,{variant:(null==O?void 0:O.id)===e.id?"default":"outline",size:"sm",onClick:()=>Q(e),className:"gap-2",children:[K(e.type),e.name]})},e.id))})]})})})})]}),O&&a.jsx(p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-6 left-1/2 -translate-x-1/2 w-full max-w-md px-4",children:a.jsxs(k,{className:"p-4 shadow-2xl border-2 border-primary/20 bg-card/98 backdrop-blur-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[K(O.type),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:O.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:O.address})]})]})}),a.jsx(j,{onClick:()=>null==B?void 0:B(),className:"w-full",children:"Confirm Location"})]})})]})})}export{V as default};
