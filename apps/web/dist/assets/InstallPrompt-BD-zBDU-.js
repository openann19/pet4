import{r as t,j as e}from"./react-vendor-atdIga2R.js";import{i as n,p as i,c as o}from"./index-BUV2g3LC.js";import"./vendor-B2U5onNE.js";import"./utils-vendor-7mYxNw04.js";import"./ui-vendor-CttiZxwU.js";import"./feature-admin-g8AIjMAb.js";import"./feature-adoption-C919WvgL.js";import"./feature-community-DxZ7YsOF.js";import"./view-CommunityView.tsx-CD5NUxZ2.js";import"./view-AdoptionView.tsx-BJlxubb2.js";import"./view-ProfileView.tsx-CUP3xfdt.js";import"./feature-stories-DX9BRjll.js";import"./feature-chat-CPR2_-OR.js";import"./view-ChatView.tsx-DI-Ea8ls.js";import"simple-peer";function r(){const{canInstall:r,promptInstall:s,isInstalled:a}=function(){const[e,r]=t.useState(n()),[s,a]=t.useState(null),[l,p]=t.useState(!1);return t.useEffect(()=>{if(r(n()),!o())return;const t=t=>{t.preventDefault(),a(t),p(!0)},e=()=>{r(!0),p(!1),a(null)};return window.addEventListener("beforeinstallprompt",t),window.addEventListener("appinstalled",e),()=>{window.removeEventListener("beforeinstallprompt",t),window.removeEventListener("appinstalled",e)}},[]),{isInstalled:e,canInstall:l,promptInstall:t.useCallback(async()=>{if(!s)return!1;const t=await i(s);return"accepted"===(null==t?void 0:t.outcome)&&(a(null),p(!1),!0)},[s]),isInstallPromptSupported:o()}}(),[l,p]=t.useState(!1);if(a||!r||l)return null;const d=()=>{p(!0)};return e.jsxs("div",{style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",maxWidth:"400px",width:"calc(100% - 40px)",padding:"16px",backgroundColor:"#6366f1",color:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:9999,display:"flex",flexDirection:"column",gap:"12px",animation:"slideUp 0.3s ease-out"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600"},children:"Install Pet3 App"}),e.jsx("p",{style:{margin:"4px 0 0",fontSize:"14px",opacity:.9},children:"Get quick access and offline support"})]}),e.jsx("button",{onClick:d,style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"4px",fontSize:"20px",lineHeight:1,opacity:.8},"aria-label":"Dismiss",children:"Ã—"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:async()=>{await s()||p(!0)},style:{flex:1,padding:"10px",backgroundColor:"white",color:"#6366f1",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer",fontSize:"14px"},children:"Install"}),e.jsx("button",{onClick:d,style:{padding:"10px 16px",backgroundColor:"transparent",color:"white",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",fontWeight:"600",cursor:"pointer",fontSize:"14px"},children:"Not Now"})]}),e.jsx("style",{children:"\n          @keyframes slideUp {\n            from {\n              transform: translateX(-50%) translateY(100px);\n              opacity: 0;\n            }\n            to {\n              transform: translateX(-50%) translateY(0);\n              opacity: 1;\n            }\n          }\n        "})]})}export{r as InstallPrompt};
