/**
 * Focus Styles (WCAG 2.2 AAA Compliant)
 *
 * Provides focus indicators that meet WCAG 2.2 AAA requirements:
 * - Minimum 2px thick focus indicator
 * - 3:1 contrast ratio against all adjacent colors
 * - Visible in all contexts (light/dark mode, high contrast)
 * - Does not rely on color alone
 *
 * Location: apps/web/src/styles/focus.css
 */

@layer base {
  /**
   * Base focus ring styles (WCAG 2.2 AAA compliant)
   * - 2px thick focus ring
   * - High contrast color
   * - Offset from element edge
   * - Uses CSS variables for consistent theming
   */
  .focus-ring:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px var(--btn-primary-focus-ring, rgba(255, 113, 91, 0.4));
  }

  /**
   * High contrast mode focus ring
   * - 3px thick focus ring for better visibility
   * - White color for maximum contrast
   */
  @media (prefers-contrast: high) {
    .focus-ring:focus-visible {
      outline: 3px solid #ffffff;
      outline-offset: 3px;
      box-shadow: 0 0 0 3px #ffffff, 0 0 6px 6px rgba(0, 0, 0, 0.3);
    }
  }

  /**
   * Reduced motion focus ring
   * - Instant focus appearance (no animations)
   */
  @media (prefers-reduced-motion: reduce) {
    .focus-ring:focus-visible {
      transition: none;
    }
  }

  /**
   * Focus ring for interactive elements
   * - Buttons, links, inputs, etc.
   * - Uses CSS variables for consistent theming
   */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  [role='button']:focus-visible,
  [role='link']:focus-visible,
  [tabindex]:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px var(--btn-primary-focus-ring, rgba(255, 113, 91, 0.4));
  }

  /**
   * High contrast mode for interactive elements
   */
  @media (prefers-contrast: high) {
    button:focus-visible,
    a:focus-visible,
    input:focus-visible,
    textarea:focus-visible,
    select:focus-visible,
    [role='button']:focus-visible,
    [role='link']:focus-visible,
    [tabindex]:focus-visible {
      outline: 3px solid #ffffff;
      outline-offset: 3px;
      box-shadow: 0 0 0 3px #ffffff, 0 0 6px 6px rgba(0, 0, 0, 0.3);
    }
  }

  /**
   * Focus ring for custom components
   * - Use .focus-ring class on custom components
   * - Uses CSS variables for consistent theming
   */
  .focus-visible-ring:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px var(--btn-primary-focus-ring, rgba(255, 113, 91, 0.4));
  }

  @media (prefers-contrast: high) {
    .focus-visible-ring:focus-visible {
      outline: 3px solid #ffffff;
      outline-offset: 3px;
      box-shadow: 0 0 0 3px #ffffff, 0 0 6px 6px rgba(0, 0, 0, 0.3);
    }
  }

  /**
   * Skip link for keyboard navigation
   * - Hidden by default, visible on focus
   */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: #000000;
    color: #ffffff;
    padding: 8px 16px;
    text-decoration: none;
    z-index: 1000;
    border-radius: 4px;
  }

  .skip-link:focus {
    top: 0;
    outline: 2px solid #ffffff;
    outline-offset: 2px;
  }

  /**
   * Focus trap for modals
   * - Ensures focus stays within modal
   */
  .focus-trap {
    outline: none;
  }

  /**
   * Focus within container
   * - Highlights container when child is focused
   * - Uses CSS variables for consistent theming
   */
  .focus-within-ring:focus-within {
    outline: none;
    box-shadow: 0 0 0 3px var(--btn-primary-focus-ring, rgba(255, 113, 91, 0.4));
  }

  /**
   * High contrast mode for focus within
   */
  @media (prefers-contrast: high) {
    .focus-within-ring:focus-within {
      outline: 3px solid #ffffff;
      outline-offset: 3px;
      box-shadow: 0 0 0 3px #ffffff, 0 0 6px 6px rgba(0, 0, 0, 0.3);
    }
  }
}
