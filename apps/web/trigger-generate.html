<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üöÄ Generate 15 Profiles NOW</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    .container {
      text-align: center;
      padding: 3rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border-radius: 2rem;
      max-width: 600px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 { font-size: 2.5rem; margin-bottom: 1rem; }
    .status {
      margin: 2rem 0;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 1rem;
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid white;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .success { color: #4ade80; }
    .error { color: #f87171; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üêæ Generate 15 Profiles</h1>
    <div id="status" class="status">
      <div>
        <div class="spinner"></div>
        <p style="margin-top: 1rem;">Initializing...</p>
      </div>
    </div>
  </div>

  <script>
    (async function() {
      const statusEl = document.getElementById('status');
      
      function updateStatus(message, isSuccess = false, isError = false) {
        const className = isSuccess ? 'success' : isError ? 'error' : '';
        statusEl.innerHTML = `<p class="${className}" style="font-size: 1.2rem;">${message}</p>`;
      }

      try {
        updateStatus('üîÑ Connecting to Spark KV...');
        
        // Wait a moment for Spark to be ready
        await new Promise(resolve => setTimeout(resolve, 500));
        
        if (!window.spark || !window.spark.kv) {
          throw new Error('Spark KV not available. Please run this in a Spark environment.');
        }

        updateStatus('ü§ñ Generating 15 diverse pet profiles with AI...');
        
        // Import the generate function dynamically
        const { generateProfilesInFeed } = await import('./src/lib/profile-generator-helper.ts');
        
        updateStatus('‚è≥ AI is creating profiles... This may take 30-60 seconds.');
        
        const profiles = await generateProfilesInFeed(15);
        
        updateStatus(
          `‚úÖ SUCCESS! Generated ${profiles.length} new profiles!<br><br>` +
          `<small style="opacity: 0.9;">Refresh the main app to see them in the Discover feed.</small>`,
          true
        );
        
        console.log('‚úÖ Generated profiles:', profiles);
        
      } catch (error) {
        console.error('Generation error:', error);
        updateStatus(
          `‚ùå Error: ${error.message}<br><br>` +
          `<small>Try opening the browser console for more details.</small>`,
          false,
          true
        );
      }
    })();
  </script>
</body>
</html>

